var UQ=Object.defineProperty;var N$=s=>{throw TypeError(s)};var VQ=(s,t,e)=>t in s?UQ(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var B=(s,t,e)=>VQ(s,typeof t!="symbol"?t+"":t,e),TM=(s,t,e)=>t.has(s)||N$("Cannot "+e);var l=(s,t,e)=>(TM(s,t,"read from private field"),e?e.call(s):t.get(s)),A=(s,t,e)=>t.has(s)?N$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),y=(s,t,e,n)=>(TM(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),S=(s,t,e)=>(TM(s,t,"access private method"),e);var $t=(s,t,e,n)=>({set _(i){y(s,t,i,e)},get _(){return l(s,t,n)}});function HQ(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const r=Object.getOwnPropertyDescriptor(n,i);r&&Object.defineProperty(s,i,r.get?r:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function PF(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Pz={exports:{}},mR={},kz={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=Symbol.for("react.element"),zQ=Symbol.for("react.portal"),WQ=Symbol.for("react.fragment"),GQ=Symbol.for("react.strict_mode"),qQ=Symbol.for("react.profiler"),KQ=Symbol.for("react.provider"),XQ=Symbol.for("react.context"),YQ=Symbol.for("react.forward_ref"),QQ=Symbol.for("react.suspense"),JQ=Symbol.for("react.memo"),ZQ=Symbol.for("react.lazy"),O$=Symbol.iterator;function tJ(s){return s===null||typeof s!="object"?null:(s=O$&&s[O$]||s["@@iterator"],typeof s=="function"?s:null)}var Rz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mz=Object.assign,Dz={};function Db(s,t,e){this.props=s,this.context=t,this.refs=Dz,this.updater=e||Rz}Db.prototype.isReactComponent={};Db.prototype.setState=function(s,t){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,t,"setState")};Db.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Iz(){}Iz.prototype=Db.prototype;function kF(s,t,e){this.props=s,this.context=t,this.refs=Dz,this.updater=e||Rz}var RF=kF.prototype=new Iz;RF.constructor=kF;Mz(RF,Db.prototype);RF.isPureReactComponent=!0;var F$=Array.isArray,Lz=Object.prototype.hasOwnProperty,MF={current:null},Nz={key:!0,ref:!0,__self:!0,__source:!0};function Oz(s,t,e){var n,i={},r=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)Lz.call(t,n)&&!Nz.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=e;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(s&&s.defaultProps)for(n in a=s.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:E1,type:s,key:r,ref:o,props:i,_owner:MF.current}}function eJ(s,t){return{$$typeof:E1,type:s.type,key:t,ref:s.ref,props:s.props,_owner:s._owner}}function DF(s){return typeof s=="object"&&s!==null&&s.$$typeof===E1}function nJ(s){var t={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(e){return t[e]})}var j$=/\/+/g;function PM(s,t){return typeof s=="object"&&s!==null&&s.key!=null?nJ(""+s.key):t.toString(36)}function JC(s,t,e,n,i){var r=typeof s;(r==="undefined"||r==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case E1:case zQ:o=!0}}if(o)return o=s,i=i(o),s=n===""?"."+PM(o,0):n,F$(i)?(e="",s!=null&&(e=s.replace(j$,"$&/")+"/"),JC(i,t,e,"",function(u){return u})):i!=null&&(DF(i)&&(i=eJ(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(j$,"$&/")+"/")+s)),t.push(i)),1;if(o=0,n=n===""?".":n+":",F$(s))for(var a=0;a<s.length;a++){r=s[a];var c=n+PM(r,a);o+=JC(r,t,e,c,i)}else if(c=tJ(s),typeof c=="function")for(s=c.call(s),a=0;!(r=s.next()).done;)r=r.value,c=n+PM(r,a++),o+=JC(r,t,e,c,i);else if(r==="object")throw t=String(s),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sC(s,t,e){if(s==null)return s;var n=[],i=0;return JC(s,n,"","",function(r){return t.call(e,r,i++)}),n}function sJ(s){if(s._status===-1){var t=s._result;t=t(),t.then(function(e){(s._status===0||s._status===-1)&&(s._status=1,s._result=e)},function(e){(s._status===0||s._status===-1)&&(s._status=2,s._result=e)}),s._status===-1&&(s._status=0,s._result=t)}if(s._status===1)return s._result.default;throw s._result}var _i={current:null},ZC={transition:null},iJ={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:ZC,ReactCurrentOwner:MF};function Fz(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:sC,forEach:function(s,t,e){sC(s,function(){t.apply(this,arguments)},e)},count:function(s){var t=0;return sC(s,function(){t++}),t},toArray:function(s){return sC(s,function(t){return t})||[]},only:function(s){if(!DF(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};jt.Component=Db;jt.Fragment=WQ;jt.Profiler=qQ;jt.PureComponent=kF;jt.StrictMode=GQ;jt.Suspense=QQ;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iJ;jt.act=Fz;jt.cloneElement=function(s,t,e){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=Mz({},s.props),i=s.key,r=s.ref,o=s._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=MF.current),t.key!==void 0&&(i=""+t.key),s.type&&s.type.defaultProps)var a=s.type.defaultProps;for(c in t)Lz.call(t,c)&&!Nz.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=e;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:E1,type:s.type,key:i,ref:r,props:n,_owner:o}};jt.createContext=function(s){return s={$$typeof:XQ,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:KQ,_context:s},s.Consumer=s};jt.createElement=Oz;jt.createFactory=function(s){var t=Oz.bind(null,s);return t.type=s,t};jt.createRef=function(){return{current:null}};jt.forwardRef=function(s){return{$$typeof:YQ,render:s}};jt.isValidElement=DF;jt.lazy=function(s){return{$$typeof:ZQ,_payload:{_status:-1,_result:s},_init:sJ}};jt.memo=function(s,t){return{$$typeof:JQ,type:s,compare:t===void 0?null:t}};jt.startTransition=function(s){var t=ZC.transition;ZC.transition={};try{s()}finally{ZC.transition=t}};jt.unstable_act=Fz;jt.useCallback=function(s,t){return _i.current.useCallback(s,t)};jt.useContext=function(s){return _i.current.useContext(s)};jt.useDebugValue=function(){};jt.useDeferredValue=function(s){return _i.current.useDeferredValue(s)};jt.useEffect=function(s,t){return _i.current.useEffect(s,t)};jt.useId=function(){return _i.current.useId()};jt.useImperativeHandle=function(s,t,e){return _i.current.useImperativeHandle(s,t,e)};jt.useInsertionEffect=function(s,t){return _i.current.useInsertionEffect(s,t)};jt.useLayoutEffect=function(s,t){return _i.current.useLayoutEffect(s,t)};jt.useMemo=function(s,t){return _i.current.useMemo(s,t)};jt.useReducer=function(s,t,e){return _i.current.useReducer(s,t,e)};jt.useRef=function(s){return _i.current.useRef(s)};jt.useState=function(s){return _i.current.useState(s)};jt.useSyncExternalStore=function(s,t,e){return _i.current.useSyncExternalStore(s,t,e)};jt.useTransition=function(){return _i.current.useTransition()};jt.version="18.3.1";kz.exports=jt;var C=kz.exports;const K=PF(C),IF=HQ({__proto__:null,default:K},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rJ=C,oJ=Symbol.for("react.element"),aJ=Symbol.for("react.fragment"),lJ=Object.prototype.hasOwnProperty,cJ=rJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uJ={key:!0,ref:!0,__self:!0,__source:!0};function jz(s,t,e){var n,i={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)lJ.call(t,n)&&!uJ.hasOwnProperty(n)&&(i[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:oJ,type:s,key:r,ref:o,props:i,_owner:cJ.current}}mR.Fragment=aJ;mR.jsx=jz;mR.jsxs=jz;Pz.exports=mR;var _=Pz.exports,$z={exports:{}},Yr={},Bz={exports:{}},Uz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function t(F,O){var V=F.length;F.push(O);t:for(;0<V;){var X=V-1>>>1,z=F[X];if(0<i(z,O))F[X]=O,F[V]=z,V=X;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var O=F[0],V=F.pop();if(V!==O){F[0]=V;t:for(var X=0,z=F.length,W=z>>>1;X<W;){var et=2*(X+1)-1,wt=F[et],ft=et+1,q=F[ft];if(0>i(wt,V))ft<z&&0>i(q,wt)?(F[X]=q,F[ft]=V,X=ft):(F[X]=wt,F[et]=V,X=et);else if(ft<z&&0>i(q,V))F[X]=q,F[ft]=V,X=ft;else break t}}return O}function i(F,O){var V=F.sortIndex-O.sortIndex;return V!==0?V:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();s.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var O=e(u);O!==null;){if(O.callback===null)n(u);else if(O.startTime<=F)n(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=e(u)}}function E(F){if(g=!1,x(F),!m)if(e(c)!==null)m=!0,N(T);else{var O=e(u);O!==null&&j(E,O.startTime-F)}}function T(F,O){m=!1,g&&(g=!1,v(R),R=-1),p=!0;var V=f;try{for(x(O),d=e(c);d!==null&&(!(d.expirationTime>O)||F&&!L());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var z=X(d.expirationTime<=O);O=s.unstable_now(),typeof z=="function"?d.callback=z:d===e(c)&&n(c),x(O)}else n(c);d=e(c)}if(d!==null)var W=!0;else{var et=e(u);et!==null&&j(E,et.startTime-O),W=!1}return W}finally{d=null,f=V,p=!1}}var P=!1,k=null,R=-1,M=5,D=-1;function L(){return!(s.unstable_now()-D<M)}function $(){if(k!==null){var F=s.unstable_now();D=F;var O=!0;try{O=k(!0,F)}finally{O?U():(P=!1,k=null)}}else P=!1}var U;if(typeof b=="function")U=function(){b($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=$,U=function(){H.postMessage(null)}}else U=function(){w($,0)};function N(F){k=F,P||(P=!0,U())}function j(F,O){R=w(function(){F(s.unstable_now())},O)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_continueExecution=function(){m||p||(m=!0,N(T))},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return f},s.unstable_getFirstCallbackNode=function(){return e(c)},s.unstable_next=function(F){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var V=f;f=O;try{return F()}finally{f=V}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=f;f=F;try{return O()}finally{f=V}},s.unstable_scheduleCallback=function(F,O,V){var X=s.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,F){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=V+z,F={id:h++,callback:O,priorityLevel:F,startTime:V,expirationTime:z,sortIndex:-1},V>X?(F.sortIndex=V,t(u,F),e(c)===null&&F===e(u)&&(g?(v(R),R=-1):g=!0,j(E,V-X))):(F.sortIndex=z,t(c,F),m||p||(m=!0,N(T))),F},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(F){var O=f;return function(){var V=f;f=O;try{return F.apply(this,arguments)}finally{f=V}}}})(Uz);Bz.exports=Uz;var hJ=Bz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dJ=C,qr=hJ;function G(s){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+s,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+s+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vz=new Set,Px={};function Zm(s,t){gb(s,t),gb(s+"Capture",t)}function gb(s,t){for(Px[s]=t,s=0;s<t.length;s++)Vz.add(t[s])}var Bu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iI=Object.prototype.hasOwnProperty,fJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$$={},B$={};function pJ(s){return iI.call(B$,s)?!0:iI.call($$,s)?!1:fJ.test(s)?B$[s]=!0:($$[s]=!0,!1)}function gJ(s,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function mJ(s,t,e,n){if(t===null||typeof t>"u"||gJ(s,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(s,t,e,n,i,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=s,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Ds={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ds[s]=new Ei(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var t=s[0];Ds[t]=new Ei(t,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ds[s]=new Ei(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ds[s]=new Ei(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ds[s]=new Ei(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Ds[s]=new Ei(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Ds[s]=new Ei(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Ds[s]=new Ei(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Ds[s]=new Ei(s,5,!1,s.toLowerCase(),null,!1,!1)});var LF=/[\-:]([a-z])/g;function NF(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var t=s.replace(LF,NF);Ds[t]=new Ei(t,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var t=s.replace(LF,NF);Ds[t]=new Ei(t,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var t=s.replace(LF,NF);Ds[t]=new Ei(t,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Ds[s]=new Ei(s,1,!1,s.toLowerCase(),null,!1,!1)});Ds.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Ds[s]=new Ei(s,1,!1,s.toLowerCase(),null,!0,!0)});function OF(s,t,e,n){var i=Ds.hasOwnProperty(t)?Ds[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mJ(t,e,i,n)&&(e=null),n||i===null?pJ(t)&&(e===null?s.removeAttribute(t):s.setAttribute(t,""+e)):i.mustUseProperty?s[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,n=i.attributeNamespace,e===null?s.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,n?s.setAttributeNS(n,t,e):s.setAttribute(t,e))))}var Ju=dJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iC=Symbol.for("react.element"),Vy=Symbol.for("react.portal"),Hy=Symbol.for("react.fragment"),FF=Symbol.for("react.strict_mode"),rI=Symbol.for("react.profiler"),Hz=Symbol.for("react.provider"),zz=Symbol.for("react.context"),jF=Symbol.for("react.forward_ref"),oI=Symbol.for("react.suspense"),aI=Symbol.for("react.suspense_list"),$F=Symbol.for("react.memo"),vh=Symbol.for("react.lazy"),Wz=Symbol.for("react.offscreen"),U$=Symbol.iterator;function qb(s){return s===null||typeof s!="object"?null:(s=U$&&s[U$]||s["@@iterator"],typeof s=="function"?s:null)}var en=Object.assign,kM;function pA(s){if(kM===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);kM=t&&t[1]||""}return`
`+kM+s}var RM=!1;function MM(s,t){if(!s||RM)return"";RM=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(s,[],t)}else{try{t.call()}catch(u){n=u}s.call(t.prototype)}else{try{throw Error()}catch(u){n=u}s()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var c=`
`+i[o].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=o&&0<=a);break}}}finally{RM=!1,Error.prepareStackTrace=e}return(s=s?s.displayName||s.name:"")?pA(s):""}function yJ(s){switch(s.tag){case 5:return pA(s.type);case 16:return pA("Lazy");case 13:return pA("Suspense");case 19:return pA("SuspenseList");case 0:case 2:case 15:return s=MM(s.type,!1),s;case 11:return s=MM(s.type.render,!1),s;case 1:return s=MM(s.type,!0),s;default:return""}}function lI(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Hy:return"Fragment";case Vy:return"Portal";case rI:return"Profiler";case FF:return"StrictMode";case oI:return"Suspense";case aI:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case zz:return(s.displayName||"Context")+".Consumer";case Hz:return(s._context.displayName||"Context")+".Provider";case jF:var t=s.render;return s=s.displayName,s||(s=t.displayName||t.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $F:return t=s.displayName||null,t!==null?t:lI(s.type)||"Memo";case vh:t=s._payload,s=s._init;try{return lI(s(t))}catch{}}return null}function vJ(s){var t=s.type;switch(s.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=t.render,s=s.displayName||s.name||"",t.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lI(t);case 8:return t===FF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pf(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Gz(s){var t=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wJ(s){var t=Gz(s)?"checked":"value",e=Object.getOwnPropertyDescriptor(s.constructor.prototype,t),n=""+s[t];if(!s.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,r=e.set;return Object.defineProperty(s,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(s,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){s._valueTracker=null,delete s[t]}}}}function rC(s){s._valueTracker||(s._valueTracker=wJ(s))}function qz(s){if(!s)return!1;var t=s._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return s&&(n=Gz(s)?s.checked?"true":"false":s.value),s=n,s!==e?(t.setValue(s),!0):!1}function TP(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function cI(s,t){var e=t.checked;return en({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??s._wrapperState.initialChecked})}function V$(s,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=pf(t.value!=null?t.value:e),s._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kz(s,t){t=t.checked,t!=null&&OF(s,"checked",t,!1)}function uI(s,t){Kz(s,t);var e=pf(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&s.value===""||s.value!=e)&&(s.value=""+e):s.value!==""+e&&(s.value=""+e);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}t.hasOwnProperty("value")?hI(s,t.type,e):t.hasOwnProperty("defaultValue")&&hI(s,t.type,pf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(s.defaultChecked=!!t.defaultChecked)}function H$(s,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+s._wrapperState.initialValue,e||t===s.value||(s.value=t),s.defaultValue=t}e=s.name,e!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,e!==""&&(s.name=e)}function hI(s,t,e){(t!=="number"||TP(s.ownerDocument)!==s)&&(e==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+e&&(s.defaultValue=""+e))}var gA=Array.isArray;function hv(s,t,e,n){if(s=s.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<s.length;e++)i=t.hasOwnProperty("$"+s[e].value),s[e].selected!==i&&(s[e].selected=i),i&&n&&(s[e].defaultSelected=!0)}else{for(e=""+pf(e),t=null,i=0;i<s.length;i++){if(s[i].value===e){s[i].selected=!0,n&&(s[i].defaultSelected=!0);return}t!==null||s[i].disabled||(t=s[i])}t!==null&&(t.selected=!0)}}function dI(s,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return en({},t,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function z$(s,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(G(92));if(gA(e)){if(1<e.length)throw Error(G(93));e=e[0]}t=e}t==null&&(t=""),e=t}s._wrapperState={initialValue:pf(e)}}function Xz(s,t){var e=pf(t.value),n=pf(t.defaultValue);e!=null&&(e=""+e,e!==s.value&&(s.value=e),t.defaultValue==null&&s.defaultValue!==e&&(s.defaultValue=e)),n!=null&&(s.defaultValue=""+n)}function W$(s){var t=s.textContent;t===s._wrapperState.initialValue&&t!==""&&t!==null&&(s.value=t)}function Yz(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fI(s,t){return s==null||s==="http://www.w3.org/1999/xhtml"?Yz(t):s==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var oC,Qz=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction(function(){return s(t,e,n,i)})}:s}(function(s,t){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=t;else{for(oC=oC||document.createElement("div"),oC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oC.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;t.firstChild;)s.appendChild(t.firstChild)}});function kx(s,t){if(t){var e=s.firstChild;if(e&&e===s.lastChild&&e.nodeType===3){e.nodeValue=t;return}}s.textContent=t}var ox={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bJ=["Webkit","ms","Moz","O"];Object.keys(ox).forEach(function(s){bJ.forEach(function(t){t=t+s.charAt(0).toUpperCase()+s.substring(1),ox[t]=ox[s]})});function Jz(s,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||ox.hasOwnProperty(s)&&ox[s]?(""+t).trim():t+"px"}function Zz(s,t){s=s.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,i=Jz(e,t[e],n);e==="float"&&(e="cssFloat"),n?s.setProperty(e,i):s[e]=i}}var AJ=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pI(s,t){if(t){if(AJ[s]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,s));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function gI(s,t){if(s.indexOf("-")===-1)return typeof t.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mI=null;function BF(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yI=null,dv=null,fv=null;function G$(s){if(s=P1(s)){if(typeof yI!="function")throw Error(G(280));var t=s.stateNode;t&&(t=AR(t),yI(s.stateNode,s.type,t))}}function t4(s){dv?fv?fv.push(s):fv=[s]:dv=s}function e4(){if(dv){var s=dv,t=fv;if(fv=dv=null,G$(s),t)for(s=0;s<t.length;s++)G$(t[s])}}function n4(s,t){return s(t)}function s4(){}var DM=!1;function i4(s,t,e){if(DM)return s(t,e);DM=!0;try{return n4(s,t,e)}finally{DM=!1,(dv!==null||fv!==null)&&(s4(),e4())}}function Rx(s,t){var e=s.stateNode;if(e===null)return null;var n=AR(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break t;default:s=!1}if(s)return null;if(e&&typeof e!="function")throw Error(G(231,t,typeof e));return e}var vI=!1;if(Bu)try{var Kb={};Object.defineProperty(Kb,"passive",{get:function(){vI=!0}}),window.addEventListener("test",Kb,Kb),window.removeEventListener("test",Kb,Kb)}catch{vI=!1}function xJ(s,t,e,n,i,r,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var ax=!1,PP=null,kP=!1,wI=null,SJ={onError:function(s){ax=!0,PP=s}};function _J(s,t,e,n,i,r,o,a,c){ax=!1,PP=null,xJ.apply(SJ,arguments)}function EJ(s,t,e,n,i,r,o,a,c){if(_J.apply(this,arguments),ax){if(ax){var u=PP;ax=!1,PP=null}else throw Error(G(198));kP||(kP=!0,wI=u)}}function ty(s){var t=s,e=s;if(s.alternate)for(;t.return;)t=t.return;else{s=t;do t=s,t.flags&4098&&(e=t.return),s=t.return;while(s)}return t.tag===3?e:null}function r4(s){if(s.tag===13){var t=s.memoizedState;if(t===null&&(s=s.alternate,s!==null&&(t=s.memoizedState)),t!==null)return t.dehydrated}return null}function q$(s){if(ty(s)!==s)throw Error(G(188))}function CJ(s){var t=s.alternate;if(!t){if(t=ty(s),t===null)throw Error(G(188));return t!==s?null:s}for(var e=s,n=t;;){var i=e.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){e=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===e)return q$(i),s;if(r===n)return q$(i),t;r=r.sibling}throw Error(G(188))}if(e.return!==n.return)e=i,n=r;else{for(var o=!1,a=i.child;a;){if(a===e){o=!0,e=i,n=r;break}if(a===n){o=!0,n=i,e=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===e){o=!0,e=r,n=i;break}if(a===n){o=!0,n=r,e=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(e.alternate!==n)throw Error(G(190))}if(e.tag!==3)throw Error(G(188));return e.stateNode.current===e?s:t}function o4(s){return s=CJ(s),s!==null?a4(s):null}function a4(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var t=a4(s);if(t!==null)return t;s=s.sibling}return null}var l4=qr.unstable_scheduleCallback,K$=qr.unstable_cancelCallback,TJ=qr.unstable_shouldYield,PJ=qr.unstable_requestPaint,xn=qr.unstable_now,kJ=qr.unstable_getCurrentPriorityLevel,UF=qr.unstable_ImmediatePriority,c4=qr.unstable_UserBlockingPriority,RP=qr.unstable_NormalPriority,RJ=qr.unstable_LowPriority,u4=qr.unstable_IdlePriority,yR=null,Ql=null;function MJ(s){if(Ql&&typeof Ql.onCommitFiberRoot=="function")try{Ql.onCommitFiberRoot(yR,s,void 0,(s.current.flags&128)===128)}catch{}}var ka=Math.clz32?Math.clz32:LJ,DJ=Math.log,IJ=Math.LN2;function LJ(s){return s>>>=0,s===0?32:31-(DJ(s)/IJ|0)|0}var aC=64,lC=4194304;function mA(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function MP(s,t){var e=s.pendingLanes;if(e===0)return 0;var n=0,i=s.suspendedLanes,r=s.pingedLanes,o=e&268435455;if(o!==0){var a=o&~i;a!==0?n=mA(a):(r&=o,r!==0&&(n=mA(r)))}else o=e&~i,o!==0?n=mA(o):r!==0&&(n=mA(r));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(n&4&&(n|=e&16),t=s.entangledLanes,t!==0)for(s=s.entanglements,t&=n;0<t;)e=31-ka(t),i=1<<e,n|=s[e],t&=~i;return n}function NJ(s,t){switch(s){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OJ(s,t){for(var e=s.suspendedLanes,n=s.pingedLanes,i=s.expirationTimes,r=s.pendingLanes;0<r;){var o=31-ka(r),a=1<<o,c=i[o];c===-1?(!(a&e)||a&n)&&(i[o]=NJ(a,t)):c<=t&&(s.expiredLanes|=a),r&=~a}}function bI(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function h4(){var s=aC;return aC<<=1,!(aC&4194240)&&(aC=64),s}function IM(s){for(var t=[],e=0;31>e;e++)t.push(s);return t}function C1(s,t,e){s.pendingLanes|=t,t!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,t=31-ka(t),s[t]=e}function FJ(s,t){var e=s.pendingLanes&~t;s.pendingLanes=t,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=t,s.mutableReadLanes&=t,s.entangledLanes&=t,t=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<e;){var i=31-ka(e),r=1<<i;t[i]=0,n[i]=-1,s[i]=-1,e&=~r}}function VF(s,t){var e=s.entangledLanes|=t;for(s=s.entanglements;e;){var n=31-ka(e),i=1<<n;i&t|s[n]&t&&(s[n]|=t),e&=~i}}var oe=0;function d4(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var f4,HF,p4,g4,m4,AI=!1,cC=[],sf=null,rf=null,of=null,Mx=new Map,Dx=new Map,Ah=[],jJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X$(s,t){switch(s){case"focusin":case"focusout":sf=null;break;case"dragenter":case"dragleave":rf=null;break;case"mouseover":case"mouseout":of=null;break;case"pointerover":case"pointerout":Mx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dx.delete(t.pointerId)}}function Xb(s,t,e,n,i,r){return s===null||s.nativeEvent!==r?(s={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},t!==null&&(t=P1(t),t!==null&&HF(t)),s):(s.eventSystemFlags|=n,t=s.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),s)}function $J(s,t,e,n,i){switch(t){case"focusin":return sf=Xb(sf,s,t,e,n,i),!0;case"dragenter":return rf=Xb(rf,s,t,e,n,i),!0;case"mouseover":return of=Xb(of,s,t,e,n,i),!0;case"pointerover":var r=i.pointerId;return Mx.set(r,Xb(Mx.get(r)||null,s,t,e,n,i)),!0;case"gotpointercapture":return r=i.pointerId,Dx.set(r,Xb(Dx.get(r)||null,s,t,e,n,i)),!0}return!1}function y4(s){var t=ip(s.target);if(t!==null){var e=ty(t);if(e!==null){if(t=e.tag,t===13){if(t=r4(e),t!==null){s.blockedOn=t,m4(s.priority,function(){p4(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){s.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}s.blockedOn=null}function tT(s){if(s.blockedOn!==null)return!1;for(var t=s.targetContainers;0<t.length;){var e=xI(s.domEventName,s.eventSystemFlags,t[0],s.nativeEvent);if(e===null){e=s.nativeEvent;var n=new e.constructor(e.type,e);mI=n,e.target.dispatchEvent(n),mI=null}else return t=P1(e),t!==null&&HF(t),s.blockedOn=e,!1;t.shift()}return!0}function Y$(s,t,e){tT(s)&&e.delete(t)}function BJ(){AI=!1,sf!==null&&tT(sf)&&(sf=null),rf!==null&&tT(rf)&&(rf=null),of!==null&&tT(of)&&(of=null),Mx.forEach(Y$),Dx.forEach(Y$)}function Yb(s,t){s.blockedOn===t&&(s.blockedOn=null,AI||(AI=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,BJ)))}function Ix(s){function t(i){return Yb(i,s)}if(0<cC.length){Yb(cC[0],s);for(var e=1;e<cC.length;e++){var n=cC[e];n.blockedOn===s&&(n.blockedOn=null)}}for(sf!==null&&Yb(sf,s),rf!==null&&Yb(rf,s),of!==null&&Yb(of,s),Mx.forEach(t),Dx.forEach(t),e=0;e<Ah.length;e++)n=Ah[e],n.blockedOn===s&&(n.blockedOn=null);for(;0<Ah.length&&(e=Ah[0],e.blockedOn===null);)y4(e),e.blockedOn===null&&Ah.shift()}var pv=Ju.ReactCurrentBatchConfig,DP=!0;function UJ(s,t,e,n){var i=oe,r=pv.transition;pv.transition=null;try{oe=1,zF(s,t,e,n)}finally{oe=i,pv.transition=r}}function VJ(s,t,e,n){var i=oe,r=pv.transition;pv.transition=null;try{oe=4,zF(s,t,e,n)}finally{oe=i,pv.transition=r}}function zF(s,t,e,n){if(DP){var i=xI(s,t,e,n);if(i===null)HM(s,t,n,IP,e),X$(s,n);else if($J(i,s,t,e,n))n.stopPropagation();else if(X$(s,n),t&4&&-1<jJ.indexOf(s)){for(;i!==null;){var r=P1(i);if(r!==null&&f4(r),r=xI(s,t,e,n),r===null&&HM(s,t,n,IP,e),r===i)break;i=r}i!==null&&n.stopPropagation()}else HM(s,t,n,null,e)}}var IP=null;function xI(s,t,e,n){if(IP=null,s=BF(n),s=ip(s),s!==null)if(t=ty(s),t===null)s=null;else if(e=t.tag,e===13){if(s=r4(t),s!==null)return s;s=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;s=null}else t!==s&&(s=null);return IP=s,null}function v4(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kJ()){case UF:return 1;case c4:return 4;case RP:case RJ:return 16;case u4:return 536870912;default:return 16}default:return 16}}var tf=null,WF=null,eT=null;function w4(){if(eT)return eT;var s,t=WF,e=t.length,n,i="value"in tf?tf.value:tf.textContent,r=i.length;for(s=0;s<e&&t[s]===i[s];s++);var o=e-s;for(n=1;n<=o&&t[e-n]===i[r-n];n++);return eT=i.slice(s,1<n?1-n:void 0)}function nT(s){var t=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&t===13&&(s=13)):s=t,s===10&&(s=13),32<=s||s===13?s:0}function uC(){return!0}function Q$(){return!1}function Qr(s){function t(e,n,i,r,o){this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in s)s.hasOwnProperty(a)&&(e=s[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?uC:Q$,this.isPropagationStopped=Q$,this}return en(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=uC)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=uC)},persist:function(){},isPersistent:uC}),t}var Ib={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GF=Qr(Ib),T1=en({},Ib,{view:0,detail:0}),HJ=Qr(T1),LM,NM,Qb,vR=en({},T1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qF,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qb&&(Qb&&s.type==="mousemove"?(LM=s.screenX-Qb.screenX,NM=s.screenY-Qb.screenY):NM=LM=0,Qb=s),LM)},movementY:function(s){return"movementY"in s?s.movementY:NM}}),J$=Qr(vR),zJ=en({},vR,{dataTransfer:0}),WJ=Qr(zJ),GJ=en({},T1,{relatedTarget:0}),OM=Qr(GJ),qJ=en({},Ib,{animationName:0,elapsedTime:0,pseudoElement:0}),KJ=Qr(qJ),XJ=en({},Ib,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),YJ=Qr(XJ),QJ=en({},Ib,{data:0}),Z$=Qr(QJ),JJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eZ(s){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(s):(s=tZ[s])?!!t[s]:!1}function qF(){return eZ}var nZ=en({},T1,{key:function(s){if(s.key){var t=JJ[s.key]||s.key;if(t!=="Unidentified")return t}return s.type==="keypress"?(s=nT(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ZJ[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qF,charCode:function(s){return s.type==="keypress"?nT(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?nT(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sZ=Qr(nZ),iZ=en({},vR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tB=Qr(iZ),rZ=en({},T1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qF}),oZ=Qr(rZ),aZ=en({},Ib,{propertyName:0,elapsedTime:0,pseudoElement:0}),lZ=Qr(aZ),cZ=en({},vR,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),uZ=Qr(cZ),hZ=[9,13,27,32],KF=Bu&&"CompositionEvent"in window,lx=null;Bu&&"documentMode"in document&&(lx=document.documentMode);var dZ=Bu&&"TextEvent"in window&&!lx,b4=Bu&&(!KF||lx&&8<lx&&11>=lx),eB=" ",nB=!1;function A4(s,t){switch(s){case"keyup":return hZ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x4(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var zy=!1;function fZ(s,t){switch(s){case"compositionend":return x4(t);case"keypress":return t.which!==32?null:(nB=!0,eB);case"textInput":return s=t.data,s===eB&&nB?null:s;default:return null}}function pZ(s,t){if(zy)return s==="compositionend"||!KF&&A4(s,t)?(s=w4(),eT=WF=tf=null,zy=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return b4&&t.locale!=="ko"?null:t.data;default:return null}}var gZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sB(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t==="input"?!!gZ[s.type]:t==="textarea"}function S4(s,t,e,n){t4(n),t=LP(t,"onChange"),0<t.length&&(e=new GF("onChange","change",null,e,n),s.push({event:e,listeners:t}))}var cx=null,Lx=null;function mZ(s){L4(s,0)}function wR(s){var t=qy(s);if(qz(t))return s}function yZ(s,t){if(s==="change")return t}var _4=!1;if(Bu){var FM;if(Bu){var jM="oninput"in document;if(!jM){var iB=document.createElement("div");iB.setAttribute("oninput","return;"),jM=typeof iB.oninput=="function"}FM=jM}else FM=!1;_4=FM&&(!document.documentMode||9<document.documentMode)}function rB(){cx&&(cx.detachEvent("onpropertychange",E4),Lx=cx=null)}function E4(s){if(s.propertyName==="value"&&wR(Lx)){var t=[];S4(t,Lx,s,BF(s)),i4(mZ,t)}}function vZ(s,t,e){s==="focusin"?(rB(),cx=t,Lx=e,cx.attachEvent("onpropertychange",E4)):s==="focusout"&&rB()}function wZ(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return wR(Lx)}function bZ(s,t){if(s==="click")return wR(t)}function AZ(s,t){if(s==="input"||s==="change")return wR(t)}function xZ(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Ia=typeof Object.is=="function"?Object.is:xZ;function Nx(s,t){if(Ia(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;var e=Object.keys(s),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var i=e[n];if(!iI.call(t,i)||!Ia(s[i],t[i]))return!1}return!0}function oB(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function aB(s,t){var e=oB(s);s=0;for(var n;e;){if(e.nodeType===3){if(n=s+e.textContent.length,s<=t&&n>=t)return{node:e,offset:t-s};s=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=oB(e)}}function C4(s,t){return s&&t?s===t?!0:s&&s.nodeType===3?!1:t&&t.nodeType===3?C4(s,t.parentNode):"contains"in s?s.contains(t):s.compareDocumentPosition?!!(s.compareDocumentPosition(t)&16):!1:!1}function T4(){for(var s=window,t=TP();t instanceof s.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)s=t.contentWindow;else break;t=TP(s.document)}return t}function XF(s){var t=s&&s.nodeName&&s.nodeName.toLowerCase();return t&&(t==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||t==="textarea"||s.contentEditable==="true")}function SZ(s){var t=T4(),e=s.focusedElem,n=s.selectionRange;if(t!==e&&e&&e.ownerDocument&&C4(e.ownerDocument.documentElement,e)){if(n!==null&&XF(e)){if(t=n.start,s=n.end,s===void 0&&(s=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(s,e.value.length);else if(s=(t=e.ownerDocument||document)&&t.defaultView||window,s.getSelection){s=s.getSelection();var i=e.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!s.extend&&r>n&&(i=n,n=r,r=i),i=aB(e,r);var o=aB(e,n);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),s.removeAllRanges(),r>n?(s.addRange(t),s.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),s.addRange(t)))}}for(t=[],s=e;s=s.parentNode;)s.nodeType===1&&t.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)s=t[e],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var _Z=Bu&&"documentMode"in document&&11>=document.documentMode,Wy=null,SI=null,ux=null,_I=!1;function lB(s,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;_I||Wy==null||Wy!==TP(n)||(n=Wy,"selectionStart"in n&&XF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ux&&Nx(ux,n)||(ux=n,n=LP(SI,"onSelect"),0<n.length&&(t=new GF("onSelect","select",null,t,e),s.push({event:t,listeners:n}),t.target=Wy)))}function hC(s,t){var e={};return e[s.toLowerCase()]=t.toLowerCase(),e["Webkit"+s]="webkit"+t,e["Moz"+s]="moz"+t,e}var Gy={animationend:hC("Animation","AnimationEnd"),animationiteration:hC("Animation","AnimationIteration"),animationstart:hC("Animation","AnimationStart"),transitionend:hC("Transition","TransitionEnd")},$M={},P4={};Bu&&(P4=document.createElement("div").style,"AnimationEvent"in window||(delete Gy.animationend.animation,delete Gy.animationiteration.animation,delete Gy.animationstart.animation),"TransitionEvent"in window||delete Gy.transitionend.transition);function bR(s){if($M[s])return $M[s];if(!Gy[s])return s;var t=Gy[s],e;for(e in t)if(t.hasOwnProperty(e)&&e in P4)return $M[s]=t[e];return s}var k4=bR("animationend"),R4=bR("animationiteration"),M4=bR("animationstart"),D4=bR("transitionend"),I4=new Map,cB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tf(s,t){I4.set(s,t),Zm(t,[s])}for(var BM=0;BM<cB.length;BM++){var UM=cB[BM],EZ=UM.toLowerCase(),CZ=UM[0].toUpperCase()+UM.slice(1);Tf(EZ,"on"+CZ)}Tf(k4,"onAnimationEnd");Tf(R4,"onAnimationIteration");Tf(M4,"onAnimationStart");Tf("dblclick","onDoubleClick");Tf("focusin","onFocus");Tf("focusout","onBlur");Tf(D4,"onTransitionEnd");gb("onMouseEnter",["mouseout","mouseover"]);gb("onMouseLeave",["mouseout","mouseover"]);gb("onPointerEnter",["pointerout","pointerover"]);gb("onPointerLeave",["pointerout","pointerover"]);Zm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(yA));function uB(s,t,e){var n=s.type||"unknown-event";s.currentTarget=e,EJ(n,t,void 0,s),s.currentTarget=null}function L4(s,t){t=(t&4)!==0;for(var e=0;e<s.length;e++){var n=s[e],i=n.event;n=n.listeners;t:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==r&&i.isPropagationStopped())break t;uB(i,a,u),r=c}else for(o=0;o<n.length;o++){if(a=n[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==r&&i.isPropagationStopped())break t;uB(i,a,u),r=c}}}if(kP)throw s=wI,kP=!1,wI=null,s}function Me(s,t){var e=t[kI];e===void 0&&(e=t[kI]=new Set);var n=s+"__bubble";e.has(n)||(N4(t,s,2,!1),e.add(n))}function VM(s,t,e){var n=0;t&&(n|=4),N4(e,s,n,t)}var dC="_reactListening"+Math.random().toString(36).slice(2);function Ox(s){if(!s[dC]){s[dC]=!0,Vz.forEach(function(e){e!=="selectionchange"&&(TZ.has(e)||VM(e,!1,s),VM(e,!0,s))});var t=s.nodeType===9?s:s.ownerDocument;t===null||t[dC]||(t[dC]=!0,VM("selectionchange",!1,t))}}function N4(s,t,e,n){switch(v4(t)){case 1:var i=UJ;break;case 4:i=VJ;break;default:i=zF}e=i.bind(null,t,e,s),i=void 0,!vI||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?s.addEventListener(t,e,{capture:!0,passive:i}):s.addEventListener(t,e,!0):i!==void 0?s.addEventListener(t,e,{passive:i}):s.addEventListener(t,e,!1)}function HM(s,t,e,n,i){var r=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ip(a),o===null)return;if(c=o.tag,c===5||c===6){n=r=o;continue t}a=a.parentNode}}n=n.return}i4(function(){var u=r,h=BF(e),d=[];t:{var f=I4.get(s);if(f!==void 0){var p=GF,m=s;switch(s){case"keypress":if(nT(e)===0)break t;case"keydown":case"keyup":p=sZ;break;case"focusin":m="focus",p=OM;break;case"focusout":m="blur",p=OM;break;case"beforeblur":case"afterblur":p=OM;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=J$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=WJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=oZ;break;case k4:case R4:case M4:p=KJ;break;case D4:p=lZ;break;case"scroll":p=HJ;break;case"wheel":p=uZ;break;case"copy":case"cut":case"paste":p=YJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=tB}var g=(t&4)!==0,w=!g&&s==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,x;b!==null;){x=b;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,v!==null&&(E=Rx(b,v),E!=null&&g.push(Fx(b,E,x)))),w)break;b=b.return}0<g.length&&(f=new p(f,m,null,e,h),d.push({event:f,listeners:g}))}}if(!(t&7)){t:{if(f=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",f&&e!==mI&&(m=e.relatedTarget||e.fromElement)&&(ip(m)||m[Uu]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=e.relatedTarget||e.toElement,p=u,m=m?ip(m):null,m!==null&&(w=ty(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=J$,E="onMouseLeave",v="onMouseEnter",b="mouse",(s==="pointerout"||s==="pointerover")&&(g=tB,E="onPointerLeave",v="onPointerEnter",b="pointer"),w=p==null?f:qy(p),x=m==null?f:qy(m),f=new g(E,b+"leave",p,e,h),f.target=w,f.relatedTarget=x,E=null,ip(h)===u&&(g=new g(v,b+"enter",m,e,h),g.target=x,g.relatedTarget=w,E=g),w=E,p&&m)e:{for(g=p,v=m,b=0,x=g;x;x=hy(x))b++;for(x=0,E=v;E;E=hy(E))x++;for(;0<b-x;)g=hy(g),b--;for(;0<x-b;)v=hy(v),x--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break e;g=hy(g),v=hy(v)}g=null}else g=null;p!==null&&hB(d,f,p,g,!1),m!==null&&w!==null&&hB(d,w,m,g,!0)}}t:{if(f=u?qy(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=yZ;else if(sB(f))if(_4)T=AZ;else{T=wZ;var P=vZ}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=bZ);if(T&&(T=T(s,u))){S4(d,T,e,h);break t}P&&P(s,f,u),s==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&hI(f,"number",f.value)}switch(P=u?qy(u):window,s){case"focusin":(sB(P)||P.contentEditable==="true")&&(Wy=P,SI=u,ux=null);break;case"focusout":ux=SI=Wy=null;break;case"mousedown":_I=!0;break;case"contextmenu":case"mouseup":case"dragend":_I=!1,lB(d,e,h);break;case"selectionchange":if(_Z)break;case"keydown":case"keyup":lB(d,e,h)}var k;if(KF)t:{switch(s){case"compositionstart":var R="onCompositionStart";break t;case"compositionend":R="onCompositionEnd";break t;case"compositionupdate":R="onCompositionUpdate";break t}R=void 0}else zy?A4(s,e)&&(R="onCompositionEnd"):s==="keydown"&&e.keyCode===229&&(R="onCompositionStart");R&&(b4&&e.locale!=="ko"&&(zy||R!=="onCompositionStart"?R==="onCompositionEnd"&&zy&&(k=w4()):(tf=h,WF="value"in tf?tf.value:tf.textContent,zy=!0)),P=LP(u,R),0<P.length&&(R=new Z$(R,s,null,e,h),d.push({event:R,listeners:P}),k?R.data=k:(k=x4(e),k!==null&&(R.data=k)))),(k=dZ?fZ(s,e):pZ(s,e))&&(u=LP(u,"onBeforeInput"),0<u.length&&(h=new Z$("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=k))}L4(d,t)})}function Fx(s,t,e){return{instance:s,listener:t,currentTarget:e}}function LP(s,t){for(var e=t+"Capture",n=[];s!==null;){var i=s,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Rx(s,e),r!=null&&n.unshift(Fx(s,r,i)),r=Rx(s,t),r!=null&&n.push(Fx(s,r,i))),s=s.return}return n}function hy(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hB(s,t,e,n,i){for(var r=t._reactName,o=[];e!==null&&e!==n;){var a=e,c=a.alternate,u=a.stateNode;if(c!==null&&c===n)break;a.tag===5&&u!==null&&(a=u,i?(c=Rx(e,r),c!=null&&o.unshift(Fx(e,c,a))):i||(c=Rx(e,r),c!=null&&o.push(Fx(e,c,a)))),e=e.return}o.length!==0&&s.push({event:t,listeners:o})}var PZ=/\r\n?/g,kZ=/\u0000|\uFFFD/g;function dB(s){return(typeof s=="string"?s:""+s).replace(PZ,`
`).replace(kZ,"")}function fC(s,t,e){if(t=dB(t),dB(s)!==t&&e)throw Error(G(425))}function NP(){}var EI=null,CI=null;function TI(s,t){return s==="textarea"||s==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var PI=typeof setTimeout=="function"?setTimeout:void 0,RZ=typeof clearTimeout=="function"?clearTimeout:void 0,fB=typeof Promise=="function"?Promise:void 0,MZ=typeof queueMicrotask=="function"?queueMicrotask:typeof fB<"u"?function(s){return fB.resolve(null).then(s).catch(DZ)}:PI;function DZ(s){setTimeout(function(){throw s})}function zM(s,t){var e=t,n=0;do{var i=e.nextSibling;if(s.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(n===0){s.removeChild(i),Ix(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=i}while(e);Ix(t)}function af(s){for(;s!=null;s=s.nextSibling){var t=s.nodeType;if(t===1||t===3)break;if(t===8){if(t=s.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return s}function pB(s){s=s.previousSibling;for(var t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return s;t--}else e==="/$"&&t++}s=s.previousSibling}return null}var Lb=Math.random().toString(36).slice(2),Vl="__reactFiber$"+Lb,jx="__reactProps$"+Lb,Uu="__reactContainer$"+Lb,kI="__reactEvents$"+Lb,IZ="__reactListeners$"+Lb,LZ="__reactHandles$"+Lb;function ip(s){var t=s[Vl];if(t)return t;for(var e=s.parentNode;e;){if(t=e[Uu]||e[Vl]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(s=pB(s);s!==null;){if(e=s[Vl])return e;s=pB(s)}return t}s=e,e=s.parentNode}return null}function P1(s){return s=s[Vl]||s[Uu],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function qy(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(G(33))}function AR(s){return s[jx]||null}var RI=[],Ky=-1;function Pf(s){return{current:s}}function Le(s){0>Ky||(s.current=RI[Ky],RI[Ky]=null,Ky--)}function Pe(s,t){Ky++,RI[Ky]=s.current,s.current=t}var gf={},ii=Pf(gf),Xi=Pf(!1),jm=gf;function mb(s,t){var e=s.type.contextTypes;if(!e)return gf;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in e)i[r]=t[r];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=t,s.__reactInternalMemoizedMaskedChildContext=i),i}function Yi(s){return s=s.childContextTypes,s!=null}function OP(){Le(Xi),Le(ii)}function gB(s,t,e){if(ii.current!==gf)throw Error(G(168));Pe(ii,t),Pe(Xi,e)}function O4(s,t,e){var n=s.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(G(108,vJ(s)||"Unknown",i));return en({},e,n)}function FP(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||gf,jm=ii.current,Pe(ii,s),Pe(Xi,Xi.current),!0}function mB(s,t,e){var n=s.stateNode;if(!n)throw Error(G(169));e?(s=O4(s,t,jm),n.__reactInternalMemoizedMergedChildContext=s,Le(Xi),Le(ii),Pe(ii,s)):Le(Xi),Pe(Xi,e)}var wc=null,xR=!1,WM=!1;function F4(s){wc===null?wc=[s]:wc.push(s)}function NZ(s){xR=!0,F4(s)}function kf(){if(!WM&&wc!==null){WM=!0;var s=0,t=oe;try{var e=wc;for(oe=1;s<e.length;s++){var n=e[s];do n=n(!0);while(n!==null)}wc=null,xR=!1}catch(i){throw wc!==null&&(wc=wc.slice(s+1)),l4(UF,kf),i}finally{oe=t,WM=!1}}return null}var Xy=[],Yy=0,jP=null,$P=0,So=[],_o=0,$m=null,ku=1,Ru="";function Uf(s,t){Xy[Yy++]=$P,Xy[Yy++]=jP,jP=s,$P=t}function j4(s,t,e){So[_o++]=ku,So[_o++]=Ru,So[_o++]=$m,$m=s;var n=ku;s=Ru;var i=32-ka(n)-1;n&=~(1<<i),e+=1;var r=32-ka(t)+i;if(30<r){var o=i-i%5;r=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ku=1<<32-ka(t)+i|e<<i|n,Ru=r+s}else ku=1<<r|e<<i|n,Ru=s}function YF(s){s.return!==null&&(Uf(s,1),j4(s,1,0))}function QF(s){for(;s===jP;)jP=Xy[--Yy],Xy[Yy]=null,$P=Xy[--Yy],Xy[Yy]=null;for(;s===$m;)$m=So[--_o],So[_o]=null,Ru=So[--_o],So[_o]=null,ku=So[--_o],So[_o]=null}var Vr=null,Ur=null,He=!1,Ea=null;function $4(s,t){var e=Ro(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=s,t=s.deletions,t===null?(s.deletions=[e],s.flags|=16):t.push(e)}function yB(s,t){switch(s.tag){case 5:var e=s.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(s.stateNode=t,Vr=s,Ur=af(t.firstChild),!0):!1;case 6:return t=s.pendingProps===""||t.nodeType!==3?null:t,t!==null?(s.stateNode=t,Vr=s,Ur=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=$m!==null?{id:ku,overflow:Ru}:null,s.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Ro(18,null,null,0),e.stateNode=t,e.return=s,s.child=e,Vr=s,Ur=null,!0):!1;default:return!1}}function MI(s){return(s.mode&1)!==0&&(s.flags&128)===0}function DI(s){if(He){var t=Ur;if(t){var e=t;if(!yB(s,t)){if(MI(s))throw Error(G(418));t=af(e.nextSibling);var n=Vr;t&&yB(s,t)?$4(n,e):(s.flags=s.flags&-4097|2,He=!1,Vr=s)}}else{if(MI(s))throw Error(G(418));s.flags=s.flags&-4097|2,He=!1,Vr=s}}}function vB(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Vr=s}function pC(s){if(s!==Vr)return!1;if(!He)return vB(s),He=!0,!1;var t;if((t=s.tag!==3)&&!(t=s.tag!==5)&&(t=s.type,t=t!=="head"&&t!=="body"&&!TI(s.type,s.memoizedProps)),t&&(t=Ur)){if(MI(s))throw B4(),Error(G(418));for(;t;)$4(s,t),t=af(t.nextSibling)}if(vB(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));t:{for(s=s.nextSibling,t=0;s;){if(s.nodeType===8){var e=s.data;if(e==="/$"){if(t===0){Ur=af(s.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}s=s.nextSibling}Ur=null}}else Ur=Vr?af(s.stateNode.nextSibling):null;return!0}function B4(){for(var s=Ur;s;)s=af(s.nextSibling)}function yb(){Ur=Vr=null,He=!1}function JF(s){Ea===null?Ea=[s]:Ea.push(s)}var OZ=Ju.ReactCurrentBatchConfig;function Jb(s,t,e){if(s=e.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(G(309));var n=e.stateNode}if(!n)throw Error(G(147,s));var i=n,r=""+s;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof s!="string")throw Error(G(284));if(!e._owner)throw Error(G(290,s))}return s}function gC(s,t){throw s=Object.prototype.toString.call(t),Error(G(31,s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s))}function wB(s){var t=s._init;return t(s._payload)}function U4(s){function t(v,b){if(s){var x=v.deletions;x===null?(v.deletions=[b],v.flags|=16):x.push(b)}}function e(v,b){if(!s)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=hf(v,b),v.index=0,v.sibling=null,v}function r(v,b,x){return v.index=x,s?(x=v.alternate,x!==null?(x=x.index,x<b?(v.flags|=2,b):x):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return s&&v.alternate===null&&(v.flags|=2),v}function a(v,b,x,E){return b===null||b.tag!==6?(b=JM(x,v.mode,E),b.return=v,b):(b=i(b,x),b.return=v,b)}function c(v,b,x,E){var T=x.type;return T===Hy?h(v,b,x.props.children,E,x.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vh&&wB(T)===b.type)?(E=i(b,x.props),E.ref=Jb(v,b,x),E.return=v,E):(E=cT(x.type,x.key,x.props,null,v.mode,E),E.ref=Jb(v,b,x),E.return=v,E)}function u(v,b,x,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=ZM(x,v.mode,E),b.return=v,b):(b=i(b,x.children||[]),b.return=v,b)}function h(v,b,x,E,T){return b===null||b.tag!==7?(b=Nm(x,v.mode,E,T),b.return=v,b):(b=i(b,x),b.return=v,b)}function d(v,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=JM(""+b,v.mode,x),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case iC:return x=cT(b.type,b.key,b.props,null,v.mode,x),x.ref=Jb(v,null,b),x.return=v,x;case Vy:return b=ZM(b,v.mode,x),b.return=v,b;case vh:var E=b._init;return d(v,E(b._payload),x)}if(gA(b)||qb(b))return b=Nm(b,v.mode,x,null),b.return=v,b;gC(v,b)}return null}function f(v,b,x,E){var T=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:a(v,b,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case iC:return x.key===T?c(v,b,x,E):null;case Vy:return x.key===T?u(v,b,x,E):null;case vh:return T=x._init,f(v,b,T(x._payload),E)}if(gA(x)||qb(x))return T!==null?null:h(v,b,x,E,null);gC(v,x)}return null}function p(v,b,x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(x)||null,a(b,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case iC:return v=v.get(E.key===null?x:E.key)||null,c(b,v,E,T);case Vy:return v=v.get(E.key===null?x:E.key)||null,u(b,v,E,T);case vh:var P=E._init;return p(v,b,x,P(E._payload),T)}if(gA(E)||qb(E))return v=v.get(x)||null,h(b,v,E,T,null);gC(b,E)}return null}function m(v,b,x,E){for(var T=null,P=null,k=b,R=b=0,M=null;k!==null&&R<x.length;R++){k.index>R?(M=k,k=null):M=k.sibling;var D=f(v,k,x[R],E);if(D===null){k===null&&(k=M);break}s&&k&&D.alternate===null&&t(v,k),b=r(D,b,R),P===null?T=D:P.sibling=D,P=D,k=M}if(R===x.length)return e(v,k),He&&Uf(v,R),T;if(k===null){for(;R<x.length;R++)k=d(v,x[R],E),k!==null&&(b=r(k,b,R),P===null?T=k:P.sibling=k,P=k);return He&&Uf(v,R),T}for(k=n(v,k);R<x.length;R++)M=p(k,v,R,x[R],E),M!==null&&(s&&M.alternate!==null&&k.delete(M.key===null?R:M.key),b=r(M,b,R),P===null?T=M:P.sibling=M,P=M);return s&&k.forEach(function(L){return t(v,L)}),He&&Uf(v,R),T}function g(v,b,x,E){var T=qb(x);if(typeof T!="function")throw Error(G(150));if(x=T.call(x),x==null)throw Error(G(151));for(var P=T=null,k=b,R=b=0,M=null,D=x.next();k!==null&&!D.done;R++,D=x.next()){k.index>R?(M=k,k=null):M=k.sibling;var L=f(v,k,D.value,E);if(L===null){k===null&&(k=M);break}s&&k&&L.alternate===null&&t(v,k),b=r(L,b,R),P===null?T=L:P.sibling=L,P=L,k=M}if(D.done)return e(v,k),He&&Uf(v,R),T;if(k===null){for(;!D.done;R++,D=x.next())D=d(v,D.value,E),D!==null&&(b=r(D,b,R),P===null?T=D:P.sibling=D,P=D);return He&&Uf(v,R),T}for(k=n(v,k);!D.done;R++,D=x.next())D=p(k,v,R,D.value,E),D!==null&&(s&&D.alternate!==null&&k.delete(D.key===null?R:D.key),b=r(D,b,R),P===null?T=D:P.sibling=D,P=D);return s&&k.forEach(function($){return t(v,$)}),He&&Uf(v,R),T}function w(v,b,x,E){if(typeof x=="object"&&x!==null&&x.type===Hy&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case iC:t:{for(var T=x.key,P=b;P!==null;){if(P.key===T){if(T=x.type,T===Hy){if(P.tag===7){e(v,P.sibling),b=i(P,x.props.children),b.return=v,v=b;break t}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===vh&&wB(T)===P.type){e(v,P.sibling),b=i(P,x.props),b.ref=Jb(v,P,x),b.return=v,v=b;break t}e(v,P);break}else t(v,P);P=P.sibling}x.type===Hy?(b=Nm(x.props.children,v.mode,E,x.key),b.return=v,v=b):(E=cT(x.type,x.key,x.props,null,v.mode,E),E.ref=Jb(v,b,x),E.return=v,v=E)}return o(v);case Vy:t:{for(P=x.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){e(v,b.sibling),b=i(b,x.children||[]),b.return=v,v=b;break t}else{e(v,b);break}else t(v,b);b=b.sibling}b=ZM(x,v.mode,E),b.return=v,v=b}return o(v);case vh:return P=x._init,w(v,b,P(x._payload),E)}if(gA(x))return m(v,b,x,E);if(qb(x))return g(v,b,x,E);gC(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(e(v,b.sibling),b=i(b,x),b.return=v,v=b):(e(v,b),b=JM(x,v.mode,E),b.return=v,v=b),o(v)):e(v,b)}return w}var vb=U4(!0),V4=U4(!1),BP=Pf(null),UP=null,Qy=null,ZF=null;function t2(){ZF=Qy=UP=null}function e2(s){var t=BP.current;Le(BP),s._currentValue=t}function II(s,t,e){for(;s!==null;){var n=s.alternate;if((s.childLanes&t)!==t?(s.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),s===e)break;s=s.return}}function gv(s,t){UP=s,ZF=Qy=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&t&&(qi=!0),s.firstContext=null)}function No(s){var t=s._currentValue;if(ZF!==s)if(s={context:s,memoizedValue:t,next:null},Qy===null){if(UP===null)throw Error(G(308));Qy=s,UP.dependencies={lanes:0,firstContext:s}}else Qy=Qy.next=s;return t}var rp=null;function n2(s){rp===null?rp=[s]:rp.push(s)}function H4(s,t,e,n){var i=t.interleaved;return i===null?(e.next=e,n2(t)):(e.next=i.next,i.next=e),t.interleaved=e,Vu(s,n)}function Vu(s,t){s.lanes|=t;var e=s.alternate;for(e!==null&&(e.lanes|=t),e=s,s=s.return;s!==null;)s.childLanes|=t,e=s.alternate,e!==null&&(e.childLanes|=t),e=s,s=s.return;return e.tag===3?e.stateNode:null}var wh=!1;function s2(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z4(s,t){s=s.updateQueue,t.updateQueue===s&&(t.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Mu(s,t){return{eventTime:s,lane:t,tag:0,payload:null,callback:null,next:null}}function lf(s,t,e){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,Gt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Vu(s,e)}return i=n.interleaved,i===null?(t.next=t,n2(n)):(t.next=i.next,i.next=t),n.interleaved=t,Vu(s,e)}function sT(s,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=s.pendingLanes,e|=n,t.lanes=e,VF(s,e)}}function bB(s,t){var e=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var i=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?i=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?i=r=t:r=r.next=t}else i=r=t;e={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},s.updateQueue=e;return}s=e.lastBaseUpdate,s===null?e.firstBaseUpdate=t:s.next=t,e.lastBaseUpdate=t}function VP(s,t,e,n){var i=s.updateQueue;wh=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=s.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,a=r;do{var f=a.lane,p=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var m=s,g=a;switch(f=t,p=e,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break t}d=m;break t;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break t;d=en({},d,f);break t;case 2:wh=!0}}a.callback!==null&&a.lane!==0&&(s.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);Um|=o,s.lanes=o,s.memoizedState=d}}function AB(s,t,e){if(s=t.effects,t.effects=null,s!==null)for(t=0;t<s.length;t++){var n=s[t],i=n.callback;if(i!==null){if(n.callback=null,n=e,typeof i!="function")throw Error(G(191,i));i.call(n)}}}var k1={},Jl=Pf(k1),$x=Pf(k1),Bx=Pf(k1);function op(s){if(s===k1)throw Error(G(174));return s}function i2(s,t){switch(Pe(Bx,t),Pe($x,s),Pe(Jl,k1),s=t.nodeType,s){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fI(null,"");break;default:s=s===8?t.parentNode:t,t=s.namespaceURI||null,s=s.tagName,t=fI(t,s)}Le(Jl),Pe(Jl,t)}function wb(){Le(Jl),Le($x),Le(Bx)}function W4(s){op(Bx.current);var t=op(Jl.current),e=fI(t,s.type);t!==e&&(Pe($x,s),Pe(Jl,e))}function r2(s){$x.current===s&&(Le(Jl),Le($x))}var Ye=Pf(0);function HP(s){for(var t=s;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var GM=[];function o2(){for(var s=0;s<GM.length;s++)GM[s]._workInProgressVersionPrimary=null;GM.length=0}var iT=Ju.ReactCurrentDispatcher,qM=Ju.ReactCurrentBatchConfig,Bm=0,tn=null,Vn=null,ls=null,zP=!1,hx=!1,Ux=0,FZ=0;function Ls(){throw Error(G(321))}function a2(s,t){if(t===null)return!1;for(var e=0;e<t.length&&e<s.length;e++)if(!Ia(s[e],t[e]))return!1;return!0}function l2(s,t,e,n,i,r){if(Bm=r,tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,iT.current=s===null||s.memoizedState===null?UZ:VZ,s=e(n,i),hx){r=0;do{if(hx=!1,Ux=0,25<=r)throw Error(G(301));r+=1,ls=Vn=null,t.updateQueue=null,iT.current=HZ,s=e(n,i)}while(hx)}if(iT.current=WP,t=Vn!==null&&Vn.next!==null,Bm=0,ls=Vn=tn=null,zP=!1,t)throw Error(G(300));return s}function c2(){var s=Ux!==0;return Ux=0,s}function Qa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?tn.memoizedState=ls=s:ls=ls.next=s,ls}function Oo(){if(Vn===null){var s=tn.alternate;s=s!==null?s.memoizedState:null}else s=Vn.next;var t=ls===null?tn.memoizedState:ls.next;if(t!==null)ls=t,Vn=s;else{if(s===null)throw Error(G(310));Vn=s,s={memoizedState:Vn.memoizedState,baseState:Vn.baseState,baseQueue:Vn.baseQueue,queue:Vn.queue,next:null},ls===null?tn.memoizedState=ls=s:ls=ls.next=s}return ls}function Vx(s,t){return typeof t=="function"?t(s):t}function KM(s){var t=Oo(),e=t.queue;if(e===null)throw Error(G(311));e.lastRenderedReducer=s;var n=Vn,i=n.baseQueue,r=e.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}n.baseQueue=i=r,e.pending=null}if(i!==null){r=i.next,n=n.baseState;var a=o=null,c=null,u=r;do{var h=u.lane;if((Bm&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:s(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=n):c=c.next=d,tn.lanes|=h,Um|=h}u=u.next}while(u!==null&&u!==r);c===null?o=n:c.next=a,Ia(n,t.memoizedState)||(qi=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,e.lastRenderedState=n}if(s=e.interleaved,s!==null){i=s;do r=i.lane,tn.lanes|=r,Um|=r,i=i.next;while(i!==s)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function XM(s){var t=Oo(),e=t.queue;if(e===null)throw Error(G(311));e.lastRenderedReducer=s;var n=e.dispatch,i=e.pending,r=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do r=s(r,o.action),o=o.next;while(o!==i);Ia(r,t.memoizedState)||(qi=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,n]}function G4(){}function q4(s,t){var e=tn,n=Oo(),i=t(),r=!Ia(n.memoizedState,i);if(r&&(n.memoizedState=i,qi=!0),n=n.queue,u2(Y4.bind(null,e,n,s),[s]),n.getSnapshot!==t||r||ls!==null&&ls.memoizedState.tag&1){if(e.flags|=2048,Hx(9,X4.bind(null,e,n,i,t),void 0,null),cs===null)throw Error(G(349));Bm&30||K4(e,t,i)}return i}function K4(s,t,e){s.flags|=16384,s={getSnapshot:t,value:e},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.stores=[s]):(e=t.stores,e===null?t.stores=[s]:e.push(s))}function X4(s,t,e,n){t.value=e,t.getSnapshot=n,Q4(t)&&J4(s)}function Y4(s,t,e){return e(function(){Q4(t)&&J4(s)})}function Q4(s){var t=s.getSnapshot;s=s.value;try{var e=t();return!Ia(s,e)}catch{return!0}}function J4(s){var t=Vu(s,1);t!==null&&Ra(t,s,1,-1)}function xB(s){var t=Qa();return typeof s=="function"&&(s=s()),t.memoizedState=t.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vx,lastRenderedState:s},t.queue=s,s=s.dispatch=BZ.bind(null,tn,s),[t.memoizedState,s]}function Hx(s,t,e,n){return s={tag:s,create:t,destroy:e,deps:n,next:null},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.lastEffect=s.next=s):(e=t.lastEffect,e===null?t.lastEffect=s.next=s:(n=e.next,e.next=s,s.next=n,t.lastEffect=s)),s}function Z4(){return Oo().memoizedState}function rT(s,t,e,n){var i=Qa();tn.flags|=s,i.memoizedState=Hx(1|t,e,void 0,n===void 0?null:n)}function SR(s,t,e,n){var i=Oo();n=n===void 0?null:n;var r=void 0;if(Vn!==null){var o=Vn.memoizedState;if(r=o.destroy,n!==null&&a2(n,o.deps)){i.memoizedState=Hx(t,e,r,n);return}}tn.flags|=s,i.memoizedState=Hx(1|t,e,r,n)}function SB(s,t){return rT(8390656,8,s,t)}function u2(s,t){return SR(2048,8,s,t)}function tW(s,t){return SR(4,2,s,t)}function eW(s,t){return SR(4,4,s,t)}function nW(s,t){if(typeof t=="function")return s=s(),t(s),function(){t(null)};if(t!=null)return s=s(),t.current=s,function(){t.current=null}}function sW(s,t,e){return e=e!=null?e.concat([s]):null,SR(4,4,nW.bind(null,t,s),e)}function h2(){}function iW(s,t){var e=Oo();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&a2(t,n[1])?n[0]:(e.memoizedState=[s,t],s)}function rW(s,t){var e=Oo();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&a2(t,n[1])?n[0]:(s=s(),e.memoizedState=[s,t],s)}function oW(s,t,e){return Bm&21?(Ia(e,t)||(e=h4(),tn.lanes|=e,Um|=e,s.baseState=!0),t):(s.baseState&&(s.baseState=!1,qi=!0),s.memoizedState=e)}function jZ(s,t){var e=oe;oe=e!==0&&4>e?e:4,s(!0);var n=qM.transition;qM.transition={};try{s(!1),t()}finally{oe=e,qM.transition=n}}function aW(){return Oo().memoizedState}function $Z(s,t,e){var n=uf(s);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},lW(s))cW(t,e);else if(e=H4(s,t,e,n),e!==null){var i=wi();Ra(e,s,n,i),uW(e,t,n)}}function BZ(s,t,e){var n=uf(s),i={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(lW(s))cW(t,i);else{var r=s.alternate;if(s.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,e);if(i.hasEagerState=!0,i.eagerState=a,Ia(a,o)){var c=t.interleaved;c===null?(i.next=i,n2(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}e=H4(s,t,i,n),e!==null&&(i=wi(),Ra(e,s,n,i),uW(e,t,n))}}function lW(s){var t=s.alternate;return s===tn||t!==null&&t===tn}function cW(s,t){hx=zP=!0;var e=s.pending;e===null?t.next=t:(t.next=e.next,e.next=t),s.pending=t}function uW(s,t,e){if(e&4194240){var n=t.lanes;n&=s.pendingLanes,e|=n,t.lanes=e,VF(s,e)}}var WP={readContext:No,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},UZ={readContext:No,useCallback:function(s,t){return Qa().memoizedState=[s,t===void 0?null:t],s},useContext:No,useEffect:SB,useImperativeHandle:function(s,t,e){return e=e!=null?e.concat([s]):null,rT(4194308,4,nW.bind(null,t,s),e)},useLayoutEffect:function(s,t){return rT(4194308,4,s,t)},useInsertionEffect:function(s,t){return rT(4,2,s,t)},useMemo:function(s,t){var e=Qa();return t=t===void 0?null:t,s=s(),e.memoizedState=[s,t],s},useReducer:function(s,t,e){var n=Qa();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:t},n.queue=s,s=s.dispatch=$Z.bind(null,tn,s),[n.memoizedState,s]},useRef:function(s){var t=Qa();return s={current:s},t.memoizedState=s},useState:xB,useDebugValue:h2,useDeferredValue:function(s){return Qa().memoizedState=s},useTransition:function(){var s=xB(!1),t=s[0];return s=jZ.bind(null,s[1]),Qa().memoizedState=s,[t,s]},useMutableSource:function(){},useSyncExternalStore:function(s,t,e){var n=tn,i=Qa();if(He){if(e===void 0)throw Error(G(407));e=e()}else{if(e=t(),cs===null)throw Error(G(349));Bm&30||K4(n,t,e)}i.memoizedState=e;var r={value:e,getSnapshot:t};return i.queue=r,SB(Y4.bind(null,n,r,s),[s]),n.flags|=2048,Hx(9,X4.bind(null,n,r,e,t),void 0,null),e},useId:function(){var s=Qa(),t=cs.identifierPrefix;if(He){var e=Ru,n=ku;e=(n&~(1<<32-ka(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Ux++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=FZ++,t=":"+t+"r"+e.toString(32)+":";return s.memoizedState=t},unstable_isNewReconciler:!1},VZ={readContext:No,useCallback:iW,useContext:No,useEffect:u2,useImperativeHandle:sW,useInsertionEffect:tW,useLayoutEffect:eW,useMemo:rW,useReducer:KM,useRef:Z4,useState:function(){return KM(Vx)},useDebugValue:h2,useDeferredValue:function(s){var t=Oo();return oW(t,Vn.memoizedState,s)},useTransition:function(){var s=KM(Vx)[0],t=Oo().memoizedState;return[s,t]},useMutableSource:G4,useSyncExternalStore:q4,useId:aW,unstable_isNewReconciler:!1},HZ={readContext:No,useCallback:iW,useContext:No,useEffect:u2,useImperativeHandle:sW,useInsertionEffect:tW,useLayoutEffect:eW,useMemo:rW,useReducer:XM,useRef:Z4,useState:function(){return XM(Vx)},useDebugValue:h2,useDeferredValue:function(s){var t=Oo();return Vn===null?t.memoizedState=s:oW(t,Vn.memoizedState,s)},useTransition:function(){var s=XM(Vx)[0],t=Oo().memoizedState;return[s,t]},useMutableSource:G4,useSyncExternalStore:q4,useId:aW,unstable_isNewReconciler:!1};function qo(s,t){if(s&&s.defaultProps){t=en({},t),s=s.defaultProps;for(var e in s)t[e]===void 0&&(t[e]=s[e]);return t}return t}function LI(s,t,e,n){t=s.memoizedState,e=e(n,t),e=e==null?t:en({},t,e),s.memoizedState=e,s.lanes===0&&(s.updateQueue.baseState=e)}var _R={isMounted:function(s){return(s=s._reactInternals)?ty(s)===s:!1},enqueueSetState:function(s,t,e){s=s._reactInternals;var n=wi(),i=uf(s),r=Mu(n,i);r.payload=t,e!=null&&(r.callback=e),t=lf(s,r,i),t!==null&&(Ra(t,s,i,n),sT(t,s,i))},enqueueReplaceState:function(s,t,e){s=s._reactInternals;var n=wi(),i=uf(s),r=Mu(n,i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=lf(s,r,i),t!==null&&(Ra(t,s,i,n),sT(t,s,i))},enqueueForceUpdate:function(s,t){s=s._reactInternals;var e=wi(),n=uf(s),i=Mu(e,n);i.tag=2,t!=null&&(i.callback=t),t=lf(s,i,n),t!==null&&(Ra(t,s,n,e),sT(t,s,n))}};function _B(s,t,e,n,i,r,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,r,o):t.prototype&&t.prototype.isPureReactComponent?!Nx(e,n)||!Nx(i,r):!0}function hW(s,t,e){var n=!1,i=gf,r=t.contextType;return typeof r=="object"&&r!==null?r=No(r):(i=Yi(t)?jm:ii.current,n=t.contextTypes,r=(n=n!=null)?mb(s,i):gf),t=new t(e,r),s.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_R,s.stateNode=t,t._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=r),t}function EB(s,t,e,n){s=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==s&&_R.enqueueReplaceState(t,t.state,null)}function NI(s,t,e,n){var i=s.stateNode;i.props=e,i.state=s.memoizedState,i.refs={},s2(s);var r=t.contextType;typeof r=="object"&&r!==null?i.context=No(r):(r=Yi(t)?jm:ii.current,i.context=mb(s,r)),i.state=s.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(LI(s,t,r,e),i.state=s.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&_R.enqueueReplaceState(i,i.state,null),VP(s,e,i,n),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function bb(s,t){try{var e="",n=t;do e+=yJ(n),n=n.return;while(n);var i=e}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:s,source:t,stack:i,digest:null}}function YM(s,t,e){return{value:s,source:null,stack:e??null,digest:t??null}}function OI(s,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var zZ=typeof WeakMap=="function"?WeakMap:Map;function dW(s,t,e){e=Mu(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){qP||(qP=!0,GI=n),OI(s,t)},e}function fW(s,t,e){e=Mu(-1,e),e.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;e.payload=function(){return n(i)},e.callback=function(){OI(s,t)}}var r=s.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){OI(s,t),typeof n!="function"&&(cf===null?cf=new Set([this]):cf.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function CB(s,t,e){var n=s.pingCache;if(n===null){n=s.pingCache=new zZ;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(e)||(i.add(e),s=itt.bind(null,s,t,e),t.then(s,s))}function TB(s){do{var t;if((t=s.tag===13)&&(t=s.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return s;s=s.return}while(s!==null);return null}function PB(s,t,e,n,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===t?s.flags|=65536:(s.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Mu(-1,1),t.tag=2,lf(e,t,1))),e.lanes|=1),s)}var WZ=Ju.ReactCurrentOwner,qi=!1;function mi(s,t,e,n){t.child=s===null?V4(t,null,e,n):vb(t,s.child,e,n)}function kB(s,t,e,n,i){e=e.render;var r=t.ref;return gv(t,i),n=l2(s,t,e,n,r,i),e=c2(),s!==null&&!qi?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Hu(s,t,i)):(He&&e&&YF(t),t.flags|=1,mi(s,t,n,i),t.child)}function RB(s,t,e,n,i){if(s===null){var r=e.type;return typeof r=="function"&&!w2(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,pW(s,t,r,n,i)):(s=cT(e.type,null,n,t,t.mode,i),s.ref=t.ref,s.return=t,t.child=s)}if(r=s.child,!(s.lanes&i)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:Nx,e(o,n)&&s.ref===t.ref)return Hu(s,t,i)}return t.flags|=1,s=hf(r,n),s.ref=t.ref,s.return=t,t.child=s}function pW(s,t,e,n,i){if(s!==null){var r=s.memoizedProps;if(Nx(r,n)&&s.ref===t.ref)if(qi=!1,t.pendingProps=n=r,(s.lanes&i)!==0)s.flags&131072&&(qi=!0);else return t.lanes=s.lanes,Hu(s,t,i)}return FI(s,t,e,n,i)}function gW(s,t,e){var n=t.pendingProps,i=n.children,r=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Zy,Ir),Ir|=e;else{if(!(e&1073741824))return s=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:s,cachePool:null,transitions:null},t.updateQueue=null,Pe(Zy,Ir),Ir|=s,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:e,Pe(Zy,Ir),Ir|=n}else r!==null?(n=r.baseLanes|e,t.memoizedState=null):n=e,Pe(Zy,Ir),Ir|=n;return mi(s,t,i,e),t.child}function mW(s,t){var e=t.ref;(s===null&&e!==null||s!==null&&s.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function FI(s,t,e,n,i){var r=Yi(e)?jm:ii.current;return r=mb(t,r),gv(t,i),e=l2(s,t,e,n,r,i),n=c2(),s!==null&&!qi?(t.updateQueue=s.updateQueue,t.flags&=-2053,s.lanes&=~i,Hu(s,t,i)):(He&&n&&YF(t),t.flags|=1,mi(s,t,e,i),t.child)}function MB(s,t,e,n,i){if(Yi(e)){var r=!0;FP(t)}else r=!1;if(gv(t,i),t.stateNode===null)oT(s,t),hW(t,e,n),NI(t,e,n,i),n=!0;else if(s===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=No(u):(u=Yi(e)?jm:ii.current,u=mb(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||c!==u)&&EB(t,o,n,u),wh=!1;var f=t.memoizedState;o.state=f,VP(t,n,o,i),c=t.memoizedState,a!==n||f!==c||Xi.current||wh?(typeof h=="function"&&(LI(t,e,h,n),c=t.memoizedState),(a=wh||_B(t,e,a,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,z4(s,t),a=t.memoizedProps,u=t.type===t.elementType?a:qo(t.type,a),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=No(c):(c=Yi(e)?jm:ii.current,c=mb(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&EB(t,o,n,c),wh=!1,f=t.memoizedState,o.state=f,VP(t,n,o,i);var m=t.memoizedState;a!==d||f!==m||Xi.current||wh?(typeof p=="function"&&(LI(t,e,p,n),m=t.memoizedState),(u=wh||_B(t,e,u,n,f,m,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(t.flags|=1024),n=!1)}return jI(s,t,e,n,r,i)}function jI(s,t,e,n,i,r){mW(s,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&mB(t,e,!1),Hu(s,t,r);n=t.stateNode,WZ.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,s!==null&&o?(t.child=vb(t,s.child,null,r),t.child=vb(t,null,a,r)):mi(s,t,a,r),t.memoizedState=n.state,i&&mB(t,e,!0),t.child}function yW(s){var t=s.stateNode;t.pendingContext?gB(s,t.pendingContext,t.pendingContext!==t.context):t.context&&gB(s,t.context,!1),i2(s,t.containerInfo)}function DB(s,t,e,n,i){return yb(),JF(i),t.flags|=256,mi(s,t,e,n),t.child}var $I={dehydrated:null,treeContext:null,retryLane:0};function BI(s){return{baseLanes:s,cachePool:null,transitions:null}}function vW(s,t,e){var n=t.pendingProps,i=Ye.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=s!==null&&s.memoizedState===null?!1:(i&2)!==0),a?(r=!0,t.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Pe(Ye,i&1),s===null)return DI(t),s=t.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(t.mode&1?s.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,s=n.fallback,r?(n=t.mode,r=t.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=TR(o,n,0,null),s=Nm(s,n,e,null),r.return=t,s.return=t,r.sibling=s,t.child=r,t.child.memoizedState=BI(e),t.memoizedState=$I,s):d2(t,o));if(i=s.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GZ(s,t,o,n,a,i,e);if(r){r=n.fallback,o=t.mode,i=s.child,a=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=hf(i,c),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=hf(a,r):(r=Nm(r,o,e,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,o=s.child.memoizedState,o=o===null?BI(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=s.childLanes&~e,t.memoizedState=$I,n}return r=s.child,s=r.sibling,n=hf(r,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,s!==null&&(e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)),t.child=n,t.memoizedState=null,n}function d2(s,t){return t=TR({mode:"visible",children:t},s.mode,0,null),t.return=s,s.child=t}function mC(s,t,e,n){return n!==null&&JF(n),vb(t,s.child,null,e),s=d2(t,t.pendingProps.children),s.flags|=2,t.memoizedState=null,s}function GZ(s,t,e,n,i,r,o){if(e)return t.flags&256?(t.flags&=-257,n=YM(Error(G(422))),mC(s,t,o,n)):t.memoizedState!==null?(t.child=s.child,t.flags|=128,null):(r=n.fallback,i=t.mode,n=TR({mode:"visible",children:n.children},i,0,null),r=Nm(r,i,o,null),r.flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,t.mode&1&&vb(t,s.child,null,o),t.child.memoizedState=BI(o),t.memoizedState=$I,r);if(!(t.mode&1))return mC(s,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(G(419)),n=YM(r,n,void 0),mC(s,t,o,n)}if(a=(o&s.childLanes)!==0,qi||a){if(n=cs,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Vu(s,i),Ra(n,s,i,-1))}return v2(),n=YM(Error(G(421))),mC(s,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=s.child,t=rtt.bind(null,s),i._reactRetry=t,null):(s=r.treeContext,Ur=af(i.nextSibling),Vr=t,He=!0,Ea=null,s!==null&&(So[_o++]=ku,So[_o++]=Ru,So[_o++]=$m,ku=s.id,Ru=s.overflow,$m=t),t=d2(t,n.children),t.flags|=4096,t)}function IB(s,t,e){s.lanes|=t;var n=s.alternate;n!==null&&(n.lanes|=t),II(s.return,t,e)}function QM(s,t,e,n,i){var r=s.memoizedState;r===null?s.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=e,r.tailMode=i)}function wW(s,t,e){var n=t.pendingProps,i=n.revealOrder,r=n.tail;if(mi(s,t,n.children,e),n=Ye.current,n&2)n=n&1|2,t.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=t.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&IB(s,e,t);else if(s.tag===19)IB(s,e,t);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(Pe(Ye,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)s=e.alternate,s!==null&&HP(s)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),QM(t,!1,i,e,r);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(s=i.alternate,s!==null&&HP(s)===null){t.child=i;break}s=i.sibling,i.sibling=e,e=i,i=s}QM(t,!0,e,null,r);break;case"together":QM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oT(s,t){!(t.mode&1)&&s!==null&&(s.alternate=null,t.alternate=null,t.flags|=2)}function Hu(s,t,e){if(s!==null&&(t.dependencies=s.dependencies),Um|=t.lanes,!(e&t.childLanes))return null;if(s!==null&&t.child!==s.child)throw Error(G(153));if(t.child!==null){for(s=t.child,e=hf(s,s.pendingProps),t.child=e,e.return=t;s.sibling!==null;)s=s.sibling,e=e.sibling=hf(s,s.pendingProps),e.return=t;e.sibling=null}return t.child}function qZ(s,t,e){switch(t.tag){case 3:yW(t),yb();break;case 5:W4(t);break;case 1:Yi(t.type)&&FP(t);break;case 4:i2(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Pe(BP,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Pe(Ye,Ye.current&1),t.flags|=128,null):e&t.child.childLanes?vW(s,t,e):(Pe(Ye,Ye.current&1),s=Hu(s,t,e),s!==null?s.sibling:null);Pe(Ye,Ye.current&1);break;case 19:if(n=(e&t.childLanes)!==0,s.flags&128){if(n)return wW(s,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ye,Ye.current),n)break;return null;case 22:case 23:return t.lanes=0,gW(s,t,e)}return Hu(s,t,e)}var bW,UI,AW,xW;bW=function(s,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)s.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};UI=function(){};AW=function(s,t,e,n){var i=s.memoizedProps;if(i!==n){s=t.stateNode,op(Jl.current);var r=null;switch(e){case"input":i=cI(s,i),n=cI(s,n),r=[];break;case"select":i=en({},i,{value:void 0}),n=en({},n,{value:void 0}),r=[];break;case"textarea":i=dI(s,i),n=dI(s,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=NP)}pI(e,n);var o;e=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Px.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var c=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Px.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Me("scroll",s),r||a===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};xW=function(s,t,e,n){e!==n&&(t.flags|=4)};function Zb(s,t){if(!He)switch(s.tailMode){case"hidden":t=s.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?s.tail=null:e.sibling=null;break;case"collapsed":e=s.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function Ns(s){var t=s.alternate!==null&&s.alternate.child===s.child,e=0,n=0;if(t)for(var i=s.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)e|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=n,s.childLanes=e,t}function KZ(s,t,e){var n=t.pendingProps;switch(QF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(t),null;case 1:return Yi(t.type)&&OP(),Ns(t),null;case 3:return n=t.stateNode,wb(),Le(Xi),Le(ii),o2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(pC(t)?t.flags|=4:s===null||s.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ea!==null&&(XI(Ea),Ea=null))),UI(s,t),Ns(t),null;case 5:r2(t);var i=op(Bx.current);if(e=t.type,s!==null&&t.stateNode!=null)AW(s,t,e,n,i),s.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(G(166));return Ns(t),null}if(s=op(Jl.current),pC(t)){n=t.stateNode,e=t.type;var r=t.memoizedProps;switch(n[Vl]=t,n[jx]=r,s=(t.mode&1)!==0,e){case"dialog":Me("cancel",n),Me("close",n);break;case"iframe":case"object":case"embed":Me("load",n);break;case"video":case"audio":for(i=0;i<yA.length;i++)Me(yA[i],n);break;case"source":Me("error",n);break;case"img":case"image":case"link":Me("error",n),Me("load",n);break;case"details":Me("toggle",n);break;case"input":V$(n,r),Me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Me("invalid",n);break;case"textarea":z$(n,r),Me("invalid",n)}pI(e,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&fC(n.textContent,a,s),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&fC(n.textContent,a,s),i=["children",""+a]):Px.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",n)}switch(e){case"input":rC(n),H$(n,r,!0);break;case"textarea":rC(n),W$(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=NP)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Yz(e)),s==="http://www.w3.org/1999/xhtml"?e==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=o.createElement(e,{is:n.is}):(s=o.createElement(e),e==="select"&&(o=s,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):s=o.createElementNS(s,e),s[Vl]=t,s[jx]=n,bW(s,t,!1,!1),t.stateNode=s;t:{switch(o=gI(e,n),e){case"dialog":Me("cancel",s),Me("close",s),i=n;break;case"iframe":case"object":case"embed":Me("load",s),i=n;break;case"video":case"audio":for(i=0;i<yA.length;i++)Me(yA[i],s);i=n;break;case"source":Me("error",s),i=n;break;case"img":case"image":case"link":Me("error",s),Me("load",s),i=n;break;case"details":Me("toggle",s),i=n;break;case"input":V$(s,n),i=cI(s,n),Me("invalid",s);break;case"option":i=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},i=en({},n,{value:void 0}),Me("invalid",s);break;case"textarea":z$(s,n),i=dI(s,n),Me("invalid",s);break;default:i=n}pI(e,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var c=a[r];r==="style"?Zz(s,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qz(s,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&kx(s,c):typeof c=="number"&&kx(s,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Px.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Me("scroll",s):c!=null&&OF(s,r,c,o))}switch(e){case"input":rC(s),H$(s,n,!1);break;case"textarea":rC(s),W$(s);break;case"option":n.value!=null&&s.setAttribute("value",""+pf(n.value));break;case"select":s.multiple=!!n.multiple,r=n.value,r!=null?hv(s,!!n.multiple,r,!1):n.defaultValue!=null&&hv(s,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=NP)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ns(t),null;case 6:if(s&&t.stateNode!=null)xW(s,t,s.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(G(166));if(e=op(Bx.current),op(Jl.current),pC(t)){if(n=t.stateNode,e=t.memoizedProps,n[Vl]=t,(r=n.nodeValue!==e)&&(s=Vr,s!==null))switch(s.tag){case 3:fC(n.nodeValue,e,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&fC(n.nodeValue,e,(s.mode&1)!==0)}r&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[Vl]=t,t.stateNode=n}return Ns(t),null;case 13:if(Le(Ye),n=t.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(He&&Ur!==null&&t.mode&1&&!(t.flags&128))B4(),yb(),t.flags|=98560,r=!1;else if(r=pC(t),n!==null&&n.dehydrated!==null){if(s===null){if(!r)throw Error(G(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(G(317));r[Vl]=t}else yb(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ns(t),r=!1}else Ea!==null&&(XI(Ea),Ea=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(s===null||Ye.current&1?Wn===0&&(Wn=3):v2())),t.updateQueue!==null&&(t.flags|=4),Ns(t),null);case 4:return wb(),UI(s,t),s===null&&Ox(t.stateNode.containerInfo),Ns(t),null;case 10:return e2(t.type._context),Ns(t),null;case 17:return Yi(t.type)&&OP(),Ns(t),null;case 19:if(Le(Ye),r=t.memoizedState,r===null)return Ns(t),null;if(n=(t.flags&128)!==0,o=r.rendering,o===null)if(n)Zb(r,!1);else{if(Wn!==0||s!==null&&s.flags&128)for(s=t.child;s!==null;){if(o=HP(s),o!==null){for(t.flags|=128,Zb(r,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)r=e,s=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e=e.sibling;return Pe(Ye,Ye.current&1|2),t.child}s=s.sibling}r.tail!==null&&xn()>Ab&&(t.flags|=128,n=!0,Zb(r,!1),t.lanes=4194304)}else{if(!n)if(s=HP(o),s!==null){if(t.flags|=128,n=!0,e=s.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Zb(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!He)return Ns(t),null}else 2*xn()-r.renderingStartTime>Ab&&e!==1073741824&&(t.flags|=128,n=!0,Zb(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=xn(),t.sibling=null,e=Ye.current,Pe(Ye,n?e&1|2:e&1),t):(Ns(t),null);case 22:case 23:return y2(),n=t.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ir&1073741824&&(Ns(t),t.subtreeFlags&6&&(t.flags|=8192)):Ns(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function XZ(s,t){switch(QF(t),t.tag){case 1:return Yi(t.type)&&OP(),s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 3:return wb(),Le(Xi),Le(ii),o2(),s=t.flags,s&65536&&!(s&128)?(t.flags=s&-65537|128,t):null;case 5:return r2(t),null;case 13:if(Le(Ye),s=t.memoizedState,s!==null&&s.dehydrated!==null){if(t.alternate===null)throw Error(G(340));yb()}return s=t.flags,s&65536?(t.flags=s&-65537|128,t):null;case 19:return Le(Ye),null;case 4:return wb(),null;case 10:return e2(t.type._context),null;case 22:case 23:return y2(),null;case 24:return null;default:return null}}var yC=!1,ti=!1,YZ=typeof WeakSet=="function"?WeakSet:Set,it=null;function Jy(s,t){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){gn(s,t,n)}else e.current=null}function VI(s,t,e){try{e()}catch(n){gn(s,t,n)}}var LB=!1;function QZ(s,t){if(EI=DP,s=T4(),XF(s)){if("selectionStart"in s)var e={start:s.selectionStart,end:s.selectionEnd};else t:{e=(e=s.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,a=-1,c=-1,u=0,h=0,d=s,f=null;e:for(;;){for(var p;d!==e||i!==0&&d.nodeType!==3||(a=o+i),d!==r||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===s)break e;if(f===e&&++u===i&&(a=o),f===r&&++h===n&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=a===-1||c===-1?null:{start:a,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(CI={focusedElem:s,selectionRange:e},DP=!1,it=t;it!==null;)if(t=it,s=t.child,(t.subtreeFlags&1028)!==0&&s!==null)s.return=t,it=s;else for(;it!==null;){t=it;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,w=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:qo(t.type,g),w);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(E){gn(t,t.return,E)}if(s=t.sibling,s!==null){s.return=t.return,it=s;break}it=t.return}return m=LB,LB=!1,m}function dx(s,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&s)===s){var r=i.destroy;i.destroy=void 0,r!==void 0&&VI(t,e,r)}i=i.next}while(i!==n)}}function ER(s,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&s)===s){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function HI(s){var t=s.ref;if(t!==null){var e=s.stateNode;switch(s.tag){case 5:s=e;break;default:s=e}typeof t=="function"?t(s):t.current=s}}function SW(s){var t=s.alternate;t!==null&&(s.alternate=null,SW(t)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(t=s.stateNode,t!==null&&(delete t[Vl],delete t[jx],delete t[kI],delete t[IZ],delete t[LZ])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function _W(s){return s.tag===5||s.tag===3||s.tag===4}function NB(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||_W(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zI(s,t,e){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(s,t):e.insertBefore(s,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(s,e)):(t=e,t.appendChild(s)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=NP));else if(n!==4&&(s=s.child,s!==null))for(zI(s,t,e),s=s.sibling;s!==null;)zI(s,t,e),s=s.sibling}function WI(s,t,e){var n=s.tag;if(n===5||n===6)s=s.stateNode,t?e.insertBefore(s,t):e.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(WI(s,t,e),s=s.sibling;s!==null;)WI(s,t,e),s=s.sibling}var _s=null,Sa=!1;function ah(s,t,e){for(e=e.child;e!==null;)EW(s,t,e),e=e.sibling}function EW(s,t,e){if(Ql&&typeof Ql.onCommitFiberUnmount=="function")try{Ql.onCommitFiberUnmount(yR,e)}catch{}switch(e.tag){case 5:ti||Jy(e,t);case 6:var n=_s,i=Sa;_s=null,ah(s,t,e),_s=n,Sa=i,_s!==null&&(Sa?(s=_s,e=e.stateNode,s.nodeType===8?s.parentNode.removeChild(e):s.removeChild(e)):_s.removeChild(e.stateNode));break;case 18:_s!==null&&(Sa?(s=_s,e=e.stateNode,s.nodeType===8?zM(s.parentNode,e):s.nodeType===1&&zM(s,e),Ix(s)):zM(_s,e.stateNode));break;case 4:n=_s,i=Sa,_s=e.stateNode.containerInfo,Sa=!0,ah(s,t,e),_s=n,Sa=i;break;case 0:case 11:case 14:case 15:if(!ti&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&VI(e,t,o),i=i.next}while(i!==n)}ah(s,t,e);break;case 1:if(!ti&&(Jy(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(a){gn(e,t,a)}ah(s,t,e);break;case 21:ah(s,t,e);break;case 22:e.mode&1?(ti=(n=ti)||e.memoizedState!==null,ah(s,t,e),ti=n):ah(s,t,e);break;default:ah(s,t,e)}}function OB(s){var t=s.updateQueue;if(t!==null){s.updateQueue=null;var e=s.stateNode;e===null&&(e=s.stateNode=new YZ),t.forEach(function(n){var i=ott.bind(null,s,n);e.has(n)||(e.add(n),n.then(i,i))})}}function Uo(s,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];try{var r=s,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:_s=a.stateNode,Sa=!1;break t;case 3:_s=a.stateNode.containerInfo,Sa=!0;break t;case 4:_s=a.stateNode.containerInfo,Sa=!0;break t}a=a.return}if(_s===null)throw Error(G(160));EW(r,o,i),_s=null,Sa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){gn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CW(t,s),t=t.sibling}function CW(s,t){var e=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Uo(t,s),za(s),n&4){try{dx(3,s,s.return),ER(3,s)}catch(g){gn(s,s.return,g)}try{dx(5,s,s.return)}catch(g){gn(s,s.return,g)}}break;case 1:Uo(t,s),za(s),n&512&&e!==null&&Jy(e,e.return);break;case 5:if(Uo(t,s),za(s),n&512&&e!==null&&Jy(e,e.return),s.flags&32){var i=s.stateNode;try{kx(i,"")}catch(g){gn(s,s.return,g)}}if(n&4&&(i=s.stateNode,i!=null)){var r=s.memoizedProps,o=e!==null?e.memoizedProps:r,a=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Kz(i,r),gI(a,o);var u=gI(a,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Zz(i,d):h==="dangerouslySetInnerHTML"?Qz(i,d):h==="children"?kx(i,d):OF(i,h,d,u)}switch(a){case"input":uI(i,r);break;case"textarea":Xz(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?hv(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?hv(i,!!r.multiple,r.defaultValue,!0):hv(i,!!r.multiple,r.multiple?[]:"",!1))}i[jx]=r}catch(g){gn(s,s.return,g)}}break;case 6:if(Uo(t,s),za(s),n&4){if(s.stateNode===null)throw Error(G(162));i=s.stateNode,r=s.memoizedProps;try{i.nodeValue=r}catch(g){gn(s,s.return,g)}}break;case 3:if(Uo(t,s),za(s),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Ix(t.containerInfo)}catch(g){gn(s,s.return,g)}break;case 4:Uo(t,s),za(s);break;case 13:Uo(t,s),za(s),i=s.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(g2=xn())),n&4&&OB(s);break;case 22:if(h=e!==null&&e.memoizedState!==null,s.mode&1?(ti=(u=ti)||h,Uo(t,s),ti=u):Uo(t,s),za(s),n&8192){if(u=s.memoizedState!==null,(s.stateNode.isHidden=u)&&!h&&s.mode&1)for(it=s,h=s.child;h!==null;){for(d=it=h;it!==null;){switch(f=it,p=f.child,f.tag){case 0:case 11:case 14:case 15:dx(4,f,f.return);break;case 1:Jy(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,e=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){gn(n,e,g)}}break;case 5:Jy(f,f.return);break;case 22:if(f.memoizedState!==null){jB(d);continue}}p!==null?(p.return=f,it=p):jB(d)}h=h.sibling}t:for(h=null,d=s;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Jz("display",o))}catch(g){gn(s,s.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){gn(s,s.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break t;for(;d.sibling===null;){if(d.return===null||d.return===s)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Uo(t,s),za(s),n&4&&OB(s);break;case 21:break;default:Uo(t,s),za(s)}}function za(s){var t=s.flags;if(t&2){try{t:{for(var e=s.return;e!==null;){if(_W(e)){var n=e;break t}e=e.return}throw Error(G(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(kx(i,""),n.flags&=-33);var r=NB(s);WI(s,r,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=NB(s);zI(s,a,o);break;default:throw Error(G(161))}}catch(c){gn(s,s.return,c)}s.flags&=-3}t&4096&&(s.flags&=-4097)}function JZ(s,t,e){it=s,TW(s)}function TW(s,t,e){for(var n=(s.mode&1)!==0;it!==null;){var i=it,r=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||yC;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||ti;a=yC;var u=ti;if(yC=o,(ti=c)&&!u)for(it=i;it!==null;)o=it,c=o.child,o.tag===22&&o.memoizedState!==null?$B(i):c!==null?(c.return=o,it=c):$B(i);for(;r!==null;)it=r,TW(r),r=r.sibling;it=i,yC=a,ti=u}FB(s)}else i.subtreeFlags&8772&&r!==null?(r.return=i,it=r):FB(s)}}function FB(s){for(;it!==null;){var t=it;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ti||ER(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ti)if(e===null)n.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:qo(t.type,e.memoizedProps);n.componentDidUpdate(i,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&AB(t,r,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}AB(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ix(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ti||t.flags&512&&HI(t)}catch(f){gn(t,t.return,f)}}if(t===s){it=null;break}if(e=t.sibling,e!==null){e.return=t.return,it=e;break}it=t.return}}function jB(s){for(;it!==null;){var t=it;if(t===s){it=null;break}var e=t.sibling;if(e!==null){e.return=t.return,it=e;break}it=t.return}}function $B(s){for(;it!==null;){var t=it;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{ER(4,t)}catch(c){gn(t,e,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){gn(t,i,c)}}var r=t.return;try{HI(t)}catch(c){gn(t,r,c)}break;case 5:var o=t.return;try{HI(t)}catch(c){gn(t,o,c)}}}catch(c){gn(t,t.return,c)}if(t===s){it=null;break}var a=t.sibling;if(a!==null){a.return=t.return,it=a;break}it=t.return}}var ZZ=Math.ceil,GP=Ju.ReactCurrentDispatcher,f2=Ju.ReactCurrentOwner,Mo=Ju.ReactCurrentBatchConfig,Gt=0,cs=null,kn=null,Ms=0,Ir=0,Zy=Pf(0),Wn=0,zx=null,Um=0,CR=0,p2=0,fx=null,Gi=null,g2=0,Ab=1/0,gc=null,qP=!1,GI=null,cf=null,vC=!1,ef=null,KP=0,px=0,qI=null,aT=-1,lT=0;function wi(){return Gt&6?xn():aT!==-1?aT:aT=xn()}function uf(s){return s.mode&1?Gt&2&&Ms!==0?Ms&-Ms:OZ.transition!==null?(lT===0&&(lT=h4()),lT):(s=oe,s!==0||(s=window.event,s=s===void 0?16:v4(s.type)),s):1}function Ra(s,t,e,n){if(50<px)throw px=0,qI=null,Error(G(185));C1(s,e,n),(!(Gt&2)||s!==cs)&&(s===cs&&(!(Gt&2)&&(CR|=e),Wn===4&&xh(s,Ms)),Qi(s,n),e===1&&Gt===0&&!(t.mode&1)&&(Ab=xn()+500,xR&&kf()))}function Qi(s,t){var e=s.callbackNode;OJ(s,t);var n=MP(s,s===cs?Ms:0);if(n===0)e!==null&&K$(e),s.callbackNode=null,s.callbackPriority=0;else if(t=n&-n,s.callbackPriority!==t){if(e!=null&&K$(e),t===1)s.tag===0?NZ(BB.bind(null,s)):F4(BB.bind(null,s)),MZ(function(){!(Gt&6)&&kf()}),e=null;else{switch(d4(n)){case 1:e=UF;break;case 4:e=c4;break;case 16:e=RP;break;case 536870912:e=u4;break;default:e=RP}e=NW(e,PW.bind(null,s))}s.callbackPriority=t,s.callbackNode=e}}function PW(s,t){if(aT=-1,lT=0,Gt&6)throw Error(G(327));var e=s.callbackNode;if(mv()&&s.callbackNode!==e)return null;var n=MP(s,s===cs?Ms:0);if(n===0)return null;if(n&30||n&s.expiredLanes||t)t=XP(s,n);else{t=n;var i=Gt;Gt|=2;var r=RW();(cs!==s||Ms!==t)&&(gc=null,Ab=xn()+500,Lm(s,t));do try{ntt();break}catch(a){kW(s,a)}while(!0);t2(),GP.current=r,Gt=i,kn!==null?t=0:(cs=null,Ms=0,t=Wn)}if(t!==0){if(t===2&&(i=bI(s),i!==0&&(n=i,t=KI(s,i))),t===1)throw e=zx,Lm(s,0),xh(s,n),Qi(s,xn()),e;if(t===6)xh(s,n);else{if(i=s.current.alternate,!(n&30)&&!ttt(i)&&(t=XP(s,n),t===2&&(r=bI(s),r!==0&&(n=r,t=KI(s,r))),t===1))throw e=zx,Lm(s,0),xh(s,n),Qi(s,xn()),e;switch(s.finishedWork=i,s.finishedLanes=n,t){case 0:case 1:throw Error(G(345));case 2:Vf(s,Gi,gc);break;case 3:if(xh(s,n),(n&130023424)===n&&(t=g2+500-xn(),10<t)){if(MP(s,0)!==0)break;if(i=s.suspendedLanes,(i&n)!==n){wi(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=PI(Vf.bind(null,s,Gi,gc),t);break}Vf(s,Gi,gc);break;case 4:if(xh(s,n),(n&4194240)===n)break;for(t=s.eventTimes,i=-1;0<n;){var o=31-ka(n);r=1<<o,o=t[o],o>i&&(i=o),n&=~r}if(n=i,n=xn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ZZ(n/1960))-n,10<n){s.timeoutHandle=PI(Vf.bind(null,s,Gi,gc),n);break}Vf(s,Gi,gc);break;case 5:Vf(s,Gi,gc);break;default:throw Error(G(329))}}}return Qi(s,xn()),s.callbackNode===e?PW.bind(null,s):null}function KI(s,t){var e=fx;return s.current.memoizedState.isDehydrated&&(Lm(s,t).flags|=256),s=XP(s,t),s!==2&&(t=Gi,Gi=e,t!==null&&XI(t)),s}function XI(s){Gi===null?Gi=s:Gi.push.apply(Gi,s)}function ttt(s){for(var t=s;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var i=e[n],r=i.getSnapshot;i=i.value;try{if(!Ia(r(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===s)break;for(;t.sibling===null;){if(t.return===null||t.return===s)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xh(s,t){for(t&=~p2,t&=~CR,s.suspendedLanes|=t,s.pingedLanes&=~t,s=s.expirationTimes;0<t;){var e=31-ka(t),n=1<<e;s[e]=-1,t&=~n}}function BB(s){if(Gt&6)throw Error(G(327));mv();var t=MP(s,0);if(!(t&1))return Qi(s,xn()),null;var e=XP(s,t);if(s.tag!==0&&e===2){var n=bI(s);n!==0&&(t=n,e=KI(s,n))}if(e===1)throw e=zx,Lm(s,0),xh(s,t),Qi(s,xn()),e;if(e===6)throw Error(G(345));return s.finishedWork=s.current.alternate,s.finishedLanes=t,Vf(s,Gi,gc),Qi(s,xn()),null}function m2(s,t){var e=Gt;Gt|=1;try{return s(t)}finally{Gt=e,Gt===0&&(Ab=xn()+500,xR&&kf())}}function Vm(s){ef!==null&&ef.tag===0&&!(Gt&6)&&mv();var t=Gt;Gt|=1;var e=Mo.transition,n=oe;try{if(Mo.transition=null,oe=1,s)return s()}finally{oe=n,Mo.transition=e,Gt=t,!(Gt&6)&&kf()}}function y2(){Ir=Zy.current,Le(Zy)}function Lm(s,t){s.finishedWork=null,s.finishedLanes=0;var e=s.timeoutHandle;if(e!==-1&&(s.timeoutHandle=-1,RZ(e)),kn!==null)for(e=kn.return;e!==null;){var n=e;switch(QF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&OP();break;case 3:wb(),Le(Xi),Le(ii),o2();break;case 5:r2(n);break;case 4:wb();break;case 13:Le(Ye);break;case 19:Le(Ye);break;case 10:e2(n.type._context);break;case 22:case 23:y2()}e=e.return}if(cs=s,kn=s=hf(s.current,null),Ms=Ir=t,Wn=0,zx=null,p2=CR=Um=0,Gi=fx=null,rp!==null){for(t=0;t<rp.length;t++)if(e=rp[t],n=e.interleaved,n!==null){e.interleaved=null;var i=n.next,r=e.pending;if(r!==null){var o=r.next;r.next=i,n.next=o}e.pending=n}rp=null}return s}function kW(s,t){do{var e=kn;try{if(t2(),iT.current=WP,zP){for(var n=tn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zP=!1}if(Bm=0,ls=Vn=tn=null,hx=!1,Ux=0,f2.current=null,e===null||e.return===null){Wn=1,zx=t,kn=null;break}t:{var r=s,o=e.return,a=e,c=t;if(t=Ms,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=TB(o);if(p!==null){p.flags&=-257,PB(p,o,a,r,t),p.mode&1&&CB(r,u,t),t=p,c=u;var m=t.updateQueue;if(m===null){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break t}else{if(!(t&1)){CB(r,u,t),v2();break t}c=Error(G(426))}}else if(He&&a.mode&1){var w=TB(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),PB(w,o,a,r,t),JF(bb(c,a));break t}}r=c=bb(c,a),Wn!==4&&(Wn=2),fx===null?fx=[r]:fx.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var v=dW(r,c,t);bB(r,v);break t;case 1:a=c;var b=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(cf===null||!cf.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t;var E=fW(r,a,t);bB(r,E);break t}}r=r.return}while(r!==null)}DW(e)}catch(T){t=T,kn===e&&e!==null&&(kn=e=e.return);continue}break}while(!0)}function RW(){var s=GP.current;return GP.current=WP,s===null?WP:s}function v2(){(Wn===0||Wn===3||Wn===2)&&(Wn=4),cs===null||!(Um&268435455)&&!(CR&268435455)||xh(cs,Ms)}function XP(s,t){var e=Gt;Gt|=2;var n=RW();(cs!==s||Ms!==t)&&(gc=null,Lm(s,t));do try{ett();break}catch(i){kW(s,i)}while(!0);if(t2(),Gt=e,GP.current=n,kn!==null)throw Error(G(261));return cs=null,Ms=0,Wn}function ett(){for(;kn!==null;)MW(kn)}function ntt(){for(;kn!==null&&!TJ();)MW(kn)}function MW(s){var t=LW(s.alternate,s,Ir);s.memoizedProps=s.pendingProps,t===null?DW(s):kn=t,f2.current=null}function DW(s){var t=s;do{var e=t.alternate;if(s=t.return,t.flags&32768){if(e=XZ(e,t),e!==null){e.flags&=32767,kn=e;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Wn=6,kn=null;return}}else if(e=KZ(e,t,Ir),e!==null){kn=e;return}if(t=t.sibling,t!==null){kn=t;return}kn=t=s}while(t!==null);Wn===0&&(Wn=5)}function Vf(s,t,e){var n=oe,i=Mo.transition;try{Mo.transition=null,oe=1,stt(s,t,e,n)}finally{Mo.transition=i,oe=n}return null}function stt(s,t,e,n){do mv();while(ef!==null);if(Gt&6)throw Error(G(327));e=s.finishedWork;var i=s.finishedLanes;if(e===null)return null;if(s.finishedWork=null,s.finishedLanes=0,e===s.current)throw Error(G(177));s.callbackNode=null,s.callbackPriority=0;var r=e.lanes|e.childLanes;if(FJ(s,r),s===cs&&(kn=cs=null,Ms=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||vC||(vC=!0,NW(RP,function(){return mv(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Mo.transition,Mo.transition=null;var o=oe;oe=1;var a=Gt;Gt|=4,f2.current=null,QZ(s,e),CW(e,s),SZ(CI),DP=!!EI,CI=EI=null,s.current=e,JZ(e),PJ(),Gt=a,oe=o,Mo.transition=r}else s.current=e;if(vC&&(vC=!1,ef=s,KP=i),r=s.pendingLanes,r===0&&(cf=null),MJ(e.stateNode),Qi(s,xn()),t!==null)for(n=s.onRecoverableError,e=0;e<t.length;e++)i=t[e],n(i.value,{componentStack:i.stack,digest:i.digest});if(qP)throw qP=!1,s=GI,GI=null,s;return KP&1&&s.tag!==0&&mv(),r=s.pendingLanes,r&1?s===qI?px++:(px=0,qI=s):px=0,kf(),null}function mv(){if(ef!==null){var s=d4(KP),t=Mo.transition,e=oe;try{if(Mo.transition=null,oe=16>s?16:s,ef===null)var n=!1;else{if(s=ef,ef=null,KP=0,Gt&6)throw Error(G(331));var i=Gt;for(Gt|=4,it=s.current;it!==null;){var r=it,o=r.child;if(it.flags&16){var a=r.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(it=u;it!==null;){var h=it;switch(h.tag){case 0:case 11:case 15:dx(8,h,r)}var d=h.child;if(d!==null)d.return=h,it=d;else for(;it!==null;){h=it;var f=h.sibling,p=h.return;if(SW(h),h===u){it=null;break}if(f!==null){f.return=p,it=f;break}it=p}}}var m=r.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}it=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,it=o;else t:for(;it!==null;){if(r=it,r.flags&2048)switch(r.tag){case 0:case 11:case 15:dx(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,it=v;break t}it=r.return}}var b=s.current;for(it=b;it!==null;){o=it;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,it=x;else t:for(o=b;it!==null;){if(a=it,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ER(9,a)}}catch(T){gn(a,a.return,T)}if(a===o){it=null;break t}var E=a.sibling;if(E!==null){E.return=a.return,it=E;break t}it=a.return}}if(Gt=i,kf(),Ql&&typeof Ql.onPostCommitFiberRoot=="function")try{Ql.onPostCommitFiberRoot(yR,s)}catch{}n=!0}return n}finally{oe=e,Mo.transition=t}}return!1}function UB(s,t,e){t=bb(e,t),t=dW(s,t,1),s=lf(s,t,1),t=wi(),s!==null&&(C1(s,1,t),Qi(s,t))}function gn(s,t,e){if(s.tag===3)UB(s,s,e);else for(;t!==null;){if(t.tag===3){UB(t,s,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cf===null||!cf.has(n))){s=bb(e,s),s=fW(t,s,1),t=lf(t,s,1),s=wi(),t!==null&&(C1(t,1,s),Qi(t,s));break}}t=t.return}}function itt(s,t,e){var n=s.pingCache;n!==null&&n.delete(t),t=wi(),s.pingedLanes|=s.suspendedLanes&e,cs===s&&(Ms&e)===e&&(Wn===4||Wn===3&&(Ms&130023424)===Ms&&500>xn()-g2?Lm(s,0):p2|=e),Qi(s,t)}function IW(s,t){t===0&&(s.mode&1?(t=lC,lC<<=1,!(lC&130023424)&&(lC=4194304)):t=1);var e=wi();s=Vu(s,t),s!==null&&(C1(s,t,e),Qi(s,e))}function rtt(s){var t=s.memoizedState,e=0;t!==null&&(e=t.retryLane),IW(s,e)}function ott(s,t){var e=0;switch(s.tag){case 13:var n=s.stateNode,i=s.memoizedState;i!==null&&(e=i.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(G(314))}n!==null&&n.delete(t),IW(s,e)}var LW;LW=function(s,t,e){if(s!==null)if(s.memoizedProps!==t.pendingProps||Xi.current)qi=!0;else{if(!(s.lanes&e)&&!(t.flags&128))return qi=!1,qZ(s,t,e);qi=!!(s.flags&131072)}else qi=!1,He&&t.flags&1048576&&j4(t,$P,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;oT(s,t),s=t.pendingProps;var i=mb(t,ii.current);gv(t,e),i=l2(null,t,n,s,i,e);var r=c2();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yi(n)?(r=!0,FP(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,s2(t),i.updater=_R,t.stateNode=i,i._reactInternals=t,NI(t,n,s,e),t=jI(null,t,n,!0,r,e)):(t.tag=0,He&&r&&YF(t),mi(null,t,i,e),t=t.child),t;case 16:n=t.elementType;t:{switch(oT(s,t),s=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=ltt(n),s=qo(n,s),i){case 0:t=FI(null,t,n,s,e);break t;case 1:t=MB(null,t,n,s,e);break t;case 11:t=kB(null,t,n,s,e);break t;case 14:t=RB(null,t,n,qo(n.type,s),e);break t}throw Error(G(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:qo(n,i),FI(s,t,n,i,e);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:qo(n,i),MB(s,t,n,i,e);case 3:t:{if(yW(t),s===null)throw Error(G(387));n=t.pendingProps,r=t.memoizedState,i=r.element,z4(s,t),VP(t,n,null,e);var o=t.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=bb(Error(G(423)),t),t=DB(s,t,n,e,i);break t}else if(n!==i){i=bb(Error(G(424)),t),t=DB(s,t,n,e,i);break t}else for(Ur=af(t.stateNode.containerInfo.firstChild),Vr=t,He=!0,Ea=null,e=V4(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(yb(),n===i){t=Hu(s,t,e);break t}mi(s,t,n,e)}t=t.child}return t;case 5:return W4(t),s===null&&DI(t),n=t.type,i=t.pendingProps,r=s!==null?s.memoizedProps:null,o=i.children,TI(n,i)?o=null:r!==null&&TI(n,r)&&(t.flags|=32),mW(s,t),mi(s,t,o,e),t.child;case 6:return s===null&&DI(t),null;case 13:return vW(s,t,e);case 4:return i2(t,t.stateNode.containerInfo),n=t.pendingProps,s===null?t.child=vb(t,null,n,e):mi(s,t,n,e),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:qo(n,i),kB(s,t,n,i,e);case 7:return mi(s,t,t.pendingProps,e),t.child;case 8:return mi(s,t,t.pendingProps.children,e),t.child;case 12:return mi(s,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,i=t.pendingProps,r=t.memoizedProps,o=i.value,Pe(BP,n._currentValue),n._currentValue=o,r!==null)if(Ia(r.value,o)){if(r.children===i.children&&!Xi.current){t=Hu(s,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var c=a.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=Mu(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),II(r.return,e,t),a.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(G(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),II(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}mi(s,t,i.children,e),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,gv(t,e),i=No(i),n=n(i),t.flags|=1,mi(s,t,n,e),t.child;case 14:return n=t.type,i=qo(n,t.pendingProps),i=qo(n.type,i),RB(s,t,n,i,e);case 15:return pW(s,t,t.type,t.pendingProps,e);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:qo(n,i),oT(s,t),t.tag=1,Yi(n)?(s=!0,FP(t)):s=!1,gv(t,e),hW(t,n,i),NI(t,n,i,e),jI(null,t,n,!0,s,e);case 19:return wW(s,t,e);case 22:return gW(s,t,e)}throw Error(G(156,t.tag))};function NW(s,t){return l4(s,t)}function att(s,t,e,n){this.tag=s,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ro(s,t,e,n){return new att(s,t,e,n)}function w2(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ltt(s){if(typeof s=="function")return w2(s)?1:0;if(s!=null){if(s=s.$$typeof,s===jF)return 11;if(s===$F)return 14}return 2}function hf(s,t){var e=s.alternate;return e===null?(e=Ro(s.tag,t,s.key,s.mode),e.elementType=s.elementType,e.type=s.type,e.stateNode=s.stateNode,e.alternate=s,s.alternate=e):(e.pendingProps=t,e.type=s.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=s.flags&14680064,e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=s.sibling,e.index=s.index,e.ref=s.ref,e}function cT(s,t,e,n,i,r){var o=2;if(n=s,typeof s=="function")w2(s)&&(o=1);else if(typeof s=="string")o=5;else t:switch(s){case Hy:return Nm(e.children,i,r,t);case FF:o=8,i|=8;break;case rI:return s=Ro(12,e,t,i|2),s.elementType=rI,s.lanes=r,s;case oI:return s=Ro(13,e,t,i),s.elementType=oI,s.lanes=r,s;case aI:return s=Ro(19,e,t,i),s.elementType=aI,s.lanes=r,s;case Wz:return TR(e,i,r,t);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Hz:o=10;break t;case zz:o=9;break t;case jF:o=11;break t;case $F:o=14;break t;case vh:o=16,n=null;break t}throw Error(G(130,s==null?s:typeof s,""))}return t=Ro(o,e,t,i),t.elementType=s,t.type=n,t.lanes=r,t}function Nm(s,t,e,n){return s=Ro(7,s,n,t),s.lanes=e,s}function TR(s,t,e,n){return s=Ro(22,s,n,t),s.elementType=Wz,s.lanes=e,s.stateNode={isHidden:!1},s}function JM(s,t,e){return s=Ro(6,s,null,t),s.lanes=e,s}function ZM(s,t,e){return t=Ro(4,s.children!==null?s.children:[],s.key,t),t.lanes=e,t.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},t}function ctt(s,t,e,n,i){this.tag=t,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IM(0),this.expirationTimes=IM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IM(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function b2(s,t,e,n,i,r,o,a,c){return s=new ctt(s,t,e,a,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ro(3,null,null,t),s.current=r,r.stateNode=s,r.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},s2(r),s}function utt(s,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vy,key:n==null?null:""+n,children:s,containerInfo:t,implementation:e}}function OW(s){if(!s)return gf;s=s._reactInternals;t:{if(ty(s)!==s||s.tag!==1)throw Error(G(170));var t=s;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Yi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(G(171))}if(s.tag===1){var e=s.type;if(Yi(e))return O4(s,e,t)}return t}function FW(s,t,e,n,i,r,o,a,c){return s=b2(e,n,!0,s,i,r,o,a,c),s.context=OW(null),e=s.current,n=wi(),i=uf(e),r=Mu(n,i),r.callback=t??null,lf(e,r,i),s.current.lanes=i,C1(s,i,n),Qi(s,n),s}function PR(s,t,e,n){var i=t.current,r=wi(),o=uf(i);return e=OW(e),t.context===null?t.context=e:t.pendingContext=e,t=Mu(r,o),t.payload={element:s},n=n===void 0?null:n,n!==null&&(t.callback=n),s=lf(i,t,o),s!==null&&(Ra(s,i,o,r),sT(s,i,o)),o}function YP(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function VB(s,t){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var e=s.retryLane;s.retryLane=e!==0&&e<t?e:t}}function A2(s,t){VB(s,t),(s=s.alternate)&&VB(s,t)}function htt(){return null}var jW=typeof reportError=="function"?reportError:function(s){console.error(s)};function x2(s){this._internalRoot=s}kR.prototype.render=x2.prototype.render=function(s){var t=this._internalRoot;if(t===null)throw Error(G(409));PR(s,t,null,null)};kR.prototype.unmount=x2.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var t=s.containerInfo;Vm(function(){PR(null,s,null,null)}),t[Uu]=null}};function kR(s){this._internalRoot=s}kR.prototype.unstable_scheduleHydration=function(s){if(s){var t=g4();s={blockedOn:null,target:s,priority:t};for(var e=0;e<Ah.length&&t!==0&&t<Ah[e].priority;e++);Ah.splice(e,0,s),e===0&&y4(s)}};function S2(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function RR(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function HB(){}function dtt(s,t,e,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=YP(o);r.call(u)}}var o=FW(t,n,s,0,null,!1,!1,"",HB);return s._reactRootContainer=o,s[Uu]=o.current,Ox(s.nodeType===8?s.parentNode:s),Vm(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=YP(c);a.call(u)}}var c=b2(s,0,!1,null,null,!1,!1,"",HB);return s._reactRootContainer=c,s[Uu]=c.current,Ox(s.nodeType===8?s.parentNode:s),Vm(function(){PR(t,c,e,n)}),c}function MR(s,t,e,n,i){var r=e._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var c=YP(o);a.call(c)}}PR(t,o,s,i)}else o=dtt(e,t,s,i,n);return YP(o)}f4=function(s){switch(s.tag){case 3:var t=s.stateNode;if(t.current.memoizedState.isDehydrated){var e=mA(t.pendingLanes);e!==0&&(VF(t,e|1),Qi(t,xn()),!(Gt&6)&&(Ab=xn()+500,kf()))}break;case 13:Vm(function(){var n=Vu(s,1);if(n!==null){var i=wi();Ra(n,s,1,i)}}),A2(s,1)}};HF=function(s){if(s.tag===13){var t=Vu(s,134217728);if(t!==null){var e=wi();Ra(t,s,134217728,e)}A2(s,134217728)}};p4=function(s){if(s.tag===13){var t=uf(s),e=Vu(s,t);if(e!==null){var n=wi();Ra(e,s,t,n)}A2(s,t)}};g4=function(){return oe};m4=function(s,t){var e=oe;try{return oe=s,t()}finally{oe=e}};yI=function(s,t,e){switch(t){case"input":if(uI(s,e),t=e.name,e.type==="radio"&&t!=null){for(e=s;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==s&&n.form===s.form){var i=AR(n);if(!i)throw Error(G(90));qz(n),uI(n,i)}}}break;case"textarea":Xz(s,e);break;case"select":t=e.value,t!=null&&hv(s,!!e.multiple,t,!1)}};n4=m2;s4=Vm;var ftt={usingClientEntryPoint:!1,Events:[P1,qy,AR,t4,e4,m2]},tA={findFiberByHostInstance:ip,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ptt={bundleType:tA.bundleType,version:tA.version,rendererPackageName:tA.rendererPackageName,rendererConfig:tA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ju.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=o4(s),s===null?null:s.stateNode},findFiberByHostInstance:tA.findFiberByHostInstance||htt,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wC.isDisabled&&wC.supportsFiber)try{yR=wC.inject(ptt),Ql=wC}catch{}}Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ftt;Yr.createPortal=function(s,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S2(t))throw Error(G(200));return utt(s,t,null,e)};Yr.createRoot=function(s,t){if(!S2(s))throw Error(G(299));var e=!1,n="",i=jW;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=b2(s,1,!1,null,null,e,!1,n,i),s[Uu]=t.current,Ox(s.nodeType===8?s.parentNode:s),new x2(t)};Yr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var t=s._reactInternals;if(t===void 0)throw typeof s.render=="function"?Error(G(188)):(s=Object.keys(s).join(","),Error(G(268,s)));return s=o4(t),s=s===null?null:s.stateNode,s};Yr.flushSync=function(s){return Vm(s)};Yr.hydrate=function(s,t,e){if(!RR(t))throw Error(G(200));return MR(null,s,t,!0,e)};Yr.hydrateRoot=function(s,t,e){if(!S2(s))throw Error(G(405));var n=e!=null&&e.hydratedSources||null,i=!1,r="",o=jW;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=FW(t,null,s,1,e??null,i,!1,r,o),s[Uu]=t.current,Ox(s),n)for(s=0;s<n.length;s++)e=n[s],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new kR(t)};Yr.render=function(s,t,e){if(!RR(t))throw Error(G(200));return MR(null,s,t,!1,e)};Yr.unmountComponentAtNode=function(s){if(!RR(s))throw Error(G(40));return s._reactRootContainer?(Vm(function(){MR(null,null,s,!1,function(){s._reactRootContainer=null,s[Uu]=null})}),!0):!1};Yr.unstable_batchedUpdates=m2;Yr.unstable_renderSubtreeIntoContainer=function(s,t,e,n){if(!RR(e))throw Error(G(200));if(s==null||s._reactInternals===void 0)throw Error(G(38));return MR(s,t,e,!1,n)};Yr.version="18.3.1-next-f1338f8080-20240426";function $W(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($W)}catch(s){console.error(s)}}$W(),$z.exports=Yr;var R1=$z.exports;const BW=PF(R1);var UW,zB=R1;UW=zB.createRoot,zB.hydrateRoot;const gtt=1,mtt=1e6;let tD=0;function ytt(){return tD=(tD+1)%Number.MAX_SAFE_INTEGER,tD.toString()}const eD=new Map,WB=s=>{if(eD.has(s))return;const t=setTimeout(()=>{eD.delete(s),gx({type:"REMOVE_TOAST",toastId:s})},mtt);eD.set(s,t)},vtt=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,gtt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:e}=t;return e?WB(e):s.toasts.forEach(n=>{WB(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===e||e===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(e=>e.id!==t.toastId)}}},uT=[];let hT={toasts:[]};function gx(s){hT=vtt(hT,s),uT.forEach(t=>{t(hT)})}function wtt({...s}){const t=ytt(),e=i=>gx({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>gx({type:"DISMISS_TOAST",toastId:t});return gx({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:e}}function btt(){const[s,t]=C.useState(hT);return C.useEffect(()=>(uT.push(t),()=>{const e=uT.indexOf(t);e>-1&&uT.splice(e,1)}),[s]),{...s,toast:wtt,dismiss:e=>gx({type:"DISMISS_TOAST",toastId:e})}}function ct(s,t,{checkForDefaultPrevented:e=!0}={}){return function(i){if(s==null||s(i),e===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function GB(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function DR(...s){return t=>{let e=!1;const n=s.map(i=>{const r=GB(i,t);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let i=0;i<n.length;i++){const r=n[i];typeof r=="function"?r():GB(s[i],null)}}}}function nn(...s){return C.useCallback(DR(...s),s)}function Att(s,t){const e=C.createContext(t),n=r=>{const{children:o,...a}=r,c=C.useMemo(()=>a,Object.values(a));return _.jsx(e.Provider,{value:c,children:o})};n.displayName=s+"Provider";function i(r){const o=C.useContext(e);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${r}\` must be used within \`${s}\``)}return[n,i]}function $a(s,t=[]){let e=[];function n(r,o){const a=C.createContext(o),c=e.length;e=[...e,o];const u=d=>{var v;const{scope:f,children:p,...m}=d,g=((v=f==null?void 0:f[s])==null?void 0:v[c])||a,w=C.useMemo(()=>m,Object.values(m));return _.jsx(g.Provider,{value:w,children:p})};u.displayName=r+"Provider";function h(d,f){var g;const p=((g=f==null?void 0:f[s])==null?void 0:g[c])||a,m=C.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[u,h]}const i=()=>{const r=e.map(o=>C.createContext(o));return function(a){const c=(a==null?void 0:a[s])||r;return C.useMemo(()=>({[`__scope${s}`]:{...a,[s]:c}}),[a,c])}};return i.scopeName=s,[n,xtt(i,...t)]}function xtt(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const o=n.reduce((a,{useScope:c,scopeName:u})=>{const d=c(r)[`__scope${u}`];return{...a,...d}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}function xb(s){const t=_tt(s),e=C.forwardRef((n,i)=>{const{children:r,...o}=n,a=C.Children.toArray(r),c=a.find(Ett);if(c){const u=c.props.children,h=a.map(d=>d===c?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:d);return _.jsx(t,{...o,ref:i,children:C.isValidElement(u)?C.cloneElement(u,void 0,h):null})}return _.jsx(t,{...o,ref:i,children:r})});return e.displayName=`${s}.Slot`,e}var Stt=xb("Slot");function _tt(s){const t=C.forwardRef((e,n)=>{const{children:i,...r}=e;if(C.isValidElement(i)){const o=Ttt(i),a=Ctt(r,i.props);return i.type!==C.Fragment&&(a.ref=n?DR(n,o):o),C.cloneElement(i,a)}return C.Children.count(i)>1?C.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var VW=Symbol("radix.slottable");function HW(s){const t=({children:e})=>_.jsx(_.Fragment,{children:e});return t.displayName=`${s}.Slottable`,t.__radixId=VW,t}function Ett(s){return C.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===VW}function Ctt(s,t){const e={...t};for(const n in t){const i=s[n],r=t[n];/^on[A-Z]/.test(n)?i&&r?e[n]=(...a)=>{const c=r(...a);return i(...a),c}:i&&(e[n]=i):n==="style"?e[n]={...i,...r}:n==="className"&&(e[n]=[i,r].filter(Boolean).join(" "))}return{...s,...e}}function Ttt(s){var n,i;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(i=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function _2(s){const t=s+"CollectionProvider",[e,n]=$a(t),[i,r]=e(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:v}=g,b=K.useRef(null),x=K.useRef(new Map).current;return _.jsx(i,{scope:w,itemMap:x,collectionRef:b,children:v})};o.displayName=t;const a=s+"CollectionSlot",c=xb(a),u=K.forwardRef((g,w)=>{const{scope:v,children:b}=g,x=r(a,v),E=nn(w,x.collectionRef);return _.jsx(c,{ref:E,children:b})});u.displayName=a;const h=s+"CollectionItemSlot",d="data-radix-collection-item",f=xb(h),p=K.forwardRef((g,w)=>{const{scope:v,children:b,...x}=g,E=K.useRef(null),T=nn(w,E),P=r(h,v);return K.useEffect(()=>(P.itemMap.set(E,{ref:E,...x}),()=>void P.itemMap.delete(E))),_.jsx(f,{[d]:"",ref:T,children:b})});p.displayName=h;function m(g){const w=r(s+"CollectionConsumer",g);return K.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(w.itemMap.values()).sort((P,k)=>x.indexOf(P.ref.current)-x.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},m,n]}var Ptt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ut=Ptt.reduce((s,t)=>{const e=xb(`Primitive.${t}`),n=C.forwardRef((i,r)=>{const{asChild:o,...a}=i,c=o?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),_.jsx(c,{...a,ref:r})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function E2(s,t){s&&R1.flushSync(()=>s.dispatchEvent(t))}function Ji(s){const t=C.useRef(s);return C.useEffect(()=>{t.current=s}),C.useMemo(()=>(...e)=>{var n;return(n=t.current)==null?void 0:n.call(t,...e)},[])}function ktt(s,t=globalThis==null?void 0:globalThis.document){const e=Ji(s);C.useEffect(()=>{const n=i=>{i.key==="Escape"&&e(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var Rtt="DismissableLayer",YI="dismissableLayer.update",Mtt="dismissableLayer.pointerDownOutside",Dtt="dismissableLayer.focusOutside",qB,zW=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),M1=C.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...c}=s,u=C.useContext(zW),[h,d]=C.useState(null),f=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=C.useState({}),m=nn(t,k=>d(k)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),b=h?g.indexOf(h):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,E=b>=v,T=Ltt(k=>{const R=k.target,M=[...u.branches].some(D=>D.contains(R));!E||M||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),P=Ntt(k=>{const R=k.target;[...u.branches].some(D=>D.contains(R))||(r==null||r(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return ktt(k=>{b===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),C.useEffect(()=>{if(h)return e&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(qB=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),KB(),()=>{e&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=qB)}},[h,f,e,u]),C.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),KB())},[h,u]),C.useEffect(()=>{const k=()=>p({});return document.addEventListener(YI,k),()=>document.removeEventListener(YI,k)},[]),_.jsx(Ut.div,{...c,ref:m,style:{pointerEvents:x?E?"auto":"none":void 0,...s.style},onFocusCapture:ct(s.onFocusCapture,P.onFocusCapture),onBlurCapture:ct(s.onBlurCapture,P.onBlurCapture),onPointerDownCapture:ct(s.onPointerDownCapture,T.onPointerDownCapture)})});M1.displayName=Rtt;var Itt="DismissableLayerBranch",WW=C.forwardRef((s,t)=>{const e=C.useContext(zW),n=C.useRef(null),i=nn(t,n);return C.useEffect(()=>{const r=n.current;if(r)return e.branches.add(r),()=>{e.branches.delete(r)}},[e.branches]),_.jsx(Ut.div,{...s,ref:i})});WW.displayName=Itt;function Ltt(s,t=globalThis==null?void 0:globalThis.document){const e=Ji(s),n=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const r=a=>{if(a.target&&!n.current){let c=function(){GW(Mtt,e,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",r),t.removeEventListener("click",i.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function Ntt(s,t=globalThis==null?void 0:globalThis.document){const e=Ji(s),n=C.useRef(!1);return C.useEffect(()=>{const i=r=>{r.target&&!n.current&&GW(Dtt,e,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function KB(){const s=new CustomEvent(YI);document.dispatchEvent(s)}function GW(s,t,e,{discrete:n}){const i=e.originalEvent.target,r=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&i.addEventListener(s,t,{once:!0}),n?E2(i,r):i.dispatchEvent(r)}var Ott=M1,Ftt=WW,Fo=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},jtt="Portal",IR=C.forwardRef((s,t)=>{var a;const{container:e,...n}=s,[i,r]=C.useState(!1);Fo(()=>r(!0),[]);const o=e||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?BW.createPortal(_.jsx(Ut.div,{...n,ref:t}),o):null});IR.displayName=jtt;function $tt(s,t){return C.useReducer((e,n)=>t[e][n]??e,s)}var Ba=s=>{const{present:t,children:e}=s,n=Btt(t),i=typeof e=="function"?e({present:n.isPresent}):C.Children.only(e),r=nn(n.ref,Utt(i));return typeof e=="function"||n.isPresent?C.cloneElement(i,{ref:r}):null};Ba.displayName="Presence";function Btt(s){const[t,e]=C.useState(),n=C.useRef(null),i=C.useRef(s),r=C.useRef("none"),o=s?"mounted":"unmounted",[a,c]=$tt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=bC(n.current);r.current=a==="mounted"?u:"none"},[a]),Fo(()=>{const u=n.current,h=i.current;if(h!==s){const f=r.current,p=bC(u);s?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=s}},[s,c]),Fo(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,d=p=>{const g=bC(n.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!i.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},f=p=>{p.target===t&&(r.current=bC(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(u=>{n.current=u?getComputedStyle(u):null,e(u)},[])}}function bC(s){return(s==null?void 0:s.animationName)||"none"}function Utt(s){var n,i;let t=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(i=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var Vtt=IF[" useInsertionEffect ".trim().toString()]||Fo;function D1({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[i,r,o]=Htt({defaultProp:t,onChange:e}),a=s!==void 0,c=a?s:i;{const h=C.useRef(s!==void 0);C.useEffect(()=>{const d=h.current;d!==a&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,n])}const u=C.useCallback(h=>{var d;if(a){const f=ztt(h)?h(s):h;f!==s&&((d=o.current)==null||d.call(o,f))}else r(h)},[a,s,r,o]);return[c,u]}function Htt({defaultProp:s,onChange:t}){const[e,n]=C.useState(s),i=C.useRef(e),r=C.useRef(t);return Vtt(()=>{r.current=t},[t]),C.useEffect(()=>{var o;i.current!==e&&((o=r.current)==null||o.call(r,e),i.current=e)},[e,i]),[e,n,r]}function ztt(s){return typeof s=="function"}var Wtt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Gtt="VisuallyHidden",LR=C.forwardRef((s,t)=>_.jsx(Ut.span,{...s,ref:t,style:{...Wtt,...s.style}}));LR.displayName=Gtt;var qtt=LR,C2="ToastProvider",[T2,Ktt,Xtt]=_2("Toast"),[qW,OAt]=$a("Toast",[Xtt]),[Ytt,NR]=qW(C2),KW=s=>{const{__scopeToast:t,label:e="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:r=50,children:o}=s,[a,c]=C.useState(null),[u,h]=C.useState(0),d=C.useRef(!1),f=C.useRef(!1);return e.trim()||console.error(`Invalid prop \`label\` supplied to \`${C2}\`. Expected non-empty \`string\`.`),_.jsx(T2.Provider,{scope:t,children:_.jsx(Ytt,{scope:t,label:e,duration:n,swipeDirection:i,swipeThreshold:r,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:C.useCallback(()=>h(p=>p+1),[]),onToastRemove:C.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};KW.displayName=C2;var XW="ToastViewport",Qtt=["F8"],QI="toast.viewportPause",JI="toast.viewportResume",YW=C.forwardRef((s,t)=>{const{__scopeToast:e,hotkey:n=Qtt,label:i="Notifications ({hotkey})",...r}=s,o=NR(XW,e),a=Ktt(e),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),d=C.useRef(null),f=nn(t,d,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;C.useEffect(()=>{const w=v=>{var x;n.length!==0&&n.every(E=>v[E]||v.code===E)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),C.useEffect(()=>{const w=c.current,v=d.current;if(m&&w&&v){const b=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(QI);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(JI);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},E=P=>{!w.contains(P.relatedTarget)&&x()},T=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",b),w.addEventListener("focusout",E),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",T),window.addEventListener("blur",b),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",T),window.removeEventListener("blur",b),window.removeEventListener("focus",x)}}},[m,o.isClosePausedRef]);const g=C.useCallback(({tabbingDirection:w})=>{const b=a().map(x=>{const E=x.ref.current,T=[E,...het(E)];return w==="forwards"?T:T.reverse()});return(w==="forwards"?b.reverse():b).flat()},[a]);return C.useEffect(()=>{const w=d.current;if(w){const v=b=>{var T,P,k;const x=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!x){const R=document.activeElement,M=b.shiftKey;if(b.target===w&&M){(T=u.current)==null||T.focus();return}const $=g({tabbingDirection:M?"backwards":"forwards"}),U=$.findIndex(I=>I===R);nD($.slice(U+1))?b.preventDefault():M?(P=u.current)==null||P.focus():(k=h.current)==null||k.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,g]),_.jsxs(Ftt,{ref:c,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&_.jsx(ZI,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});nD(w)}}),_.jsx(T2.Slot,{scope:e,children:_.jsx(Ut.ol,{tabIndex:-1,...r,ref:f})}),m&&_.jsx(ZI,{ref:h,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});nD(w)}})]})});YW.displayName=XW;var QW="ToastFocusProxy",ZI=C.forwardRef((s,t)=>{const{__scopeToast:e,onFocusFromOutsideViewport:n,...i}=s,r=NR(QW,e);return _.jsx(LR,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=r.viewport)!=null&&u.contains(a))&&n()}})});ZI.displayName=QW;var I1="Toast",Jtt="toast.swipeStart",Ztt="toast.swipeMove",tet="toast.swipeCancel",eet="toast.swipeEnd",JW=C.forwardRef((s,t)=>{const{forceMount:e,open:n,defaultOpen:i,onOpenChange:r,...o}=s,[a,c]=D1({prop:n,defaultProp:i??!0,onChange:r,caller:I1});return _.jsx(Ba,{present:e||a,children:_.jsx(iet,{open:a,...o,ref:t,onClose:()=>c(!1),onPause:Ji(s.onPause),onResume:Ji(s.onResume),onSwipeStart:ct(s.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ct(s.onSwipeMove,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ct(s.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ct(s.onSwipeEnd,u=>{const{x:h,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});JW.displayName=I1;var[net,set]=qW(I1,{onClose(){}}),iet=C.forwardRef((s,t)=>{const{__scopeToast:e,type:n="foreground",duration:i,open:r,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=s,g=NR(I1,e),[w,v]=C.useState(null),b=nn(t,I=>v(I)),x=C.useRef(null),E=C.useRef(null),T=i||g.duration,P=C.useRef(0),k=C.useRef(T),R=C.useRef(0),{onToastAdd:M,onToastRemove:D}=g,L=Ji(()=>{var H;(w==null?void 0:w.contains(document.activeElement))&&((H=g.viewport)==null||H.focus()),o()}),$=C.useCallback(I=>{!I||I===1/0||(window.clearTimeout(R.current),P.current=new Date().getTime(),R.current=window.setTimeout(L,I))},[L]);C.useEffect(()=>{const I=g.viewport;if(I){const H=()=>{$(k.current),u==null||u()},N=()=>{const j=new Date().getTime()-P.current;k.current=k.current-j,window.clearTimeout(R.current),c==null||c()};return I.addEventListener(QI,N),I.addEventListener(JI,H),()=>{I.removeEventListener(QI,N),I.removeEventListener(JI,H)}}},[g.viewport,T,c,u,$]),C.useEffect(()=>{r&&!g.isClosePausedRef.current&&$(T)},[r,T,g.isClosePausedRef,$]),C.useEffect(()=>(M(),()=>D()),[M,D]);const U=C.useMemo(()=>w?r5(w):null,[w]);return g.viewport?_.jsxs(_.Fragment,{children:[U&&_.jsx(ret,{__scopeToast:e,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),_.jsx(net,{scope:e,onClose:L,children:R1.createPortal(_.jsx(T2.ItemSlot,{scope:e,children:_.jsx(Ott,{asChild:!0,onEscapeKeyDown:ct(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:_.jsx(Ut.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:b,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:ct(s.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ct(s.onPointerDown,I=>{I.button===0&&(x.current={x:I.clientX,y:I.clientY})}),onPointerMove:ct(s.onPointerMove,I=>{if(!x.current)return;const H=I.clientX-x.current.x,N=I.clientY-x.current.y,j=!!E.current,F=["left","right"].includes(g.swipeDirection),O=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=F?O(0,H):0,X=F?0:O(0,N),z=I.pointerType==="touch"?10:2,W={x:V,y:X},et={originalEvent:I,delta:W};j?(E.current=W,AC(Ztt,d,et,{discrete:!1})):XB(W,g.swipeDirection,z)?(E.current=W,AC(Jtt,h,et,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>z||Math.abs(N)>z)&&(x.current=null)}),onPointerUp:ct(s.onPointerUp,I=>{const H=E.current,N=I.target;if(N.hasPointerCapture(I.pointerId)&&N.releasePointerCapture(I.pointerId),E.current=null,x.current=null,H){const j=I.currentTarget,F={originalEvent:I,delta:H};XB(H,g.swipeDirection,g.swipeThreshold)?AC(eet,p,F,{discrete:!0}):AC(tet,f,F,{discrete:!0}),j.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),ret=s=>{const{__scopeToast:t,children:e,...n}=s,i=NR(I1,t),[r,o]=C.useState(!1),[a,c]=C.useState(!1);return cet(()=>o(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:_.jsx(IR,{asChild:!0,children:_.jsx(LR,{...n,children:r&&_.jsxs(_.Fragment,{children:[i.label," ",e]})})})},oet="ToastTitle",ZW=C.forwardRef((s,t)=>{const{__scopeToast:e,...n}=s;return _.jsx(Ut.div,{...n,ref:t})});ZW.displayName=oet;var aet="ToastDescription",t5=C.forwardRef((s,t)=>{const{__scopeToast:e,...n}=s;return _.jsx(Ut.div,{...n,ref:t})});t5.displayName=aet;var e5="ToastAction",n5=C.forwardRef((s,t)=>{const{altText:e,...n}=s;return e.trim()?_.jsx(i5,{altText:e,asChild:!0,children:_.jsx(P2,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${e5}\`. Expected non-empty \`string\`.`),null)});n5.displayName=e5;var s5="ToastClose",P2=C.forwardRef((s,t)=>{const{__scopeToast:e,...n}=s,i=set(s5,e);return _.jsx(i5,{asChild:!0,children:_.jsx(Ut.button,{type:"button",...n,ref:t,onClick:ct(s.onClick,i.onClose)})})});P2.displayName=s5;var i5=C.forwardRef((s,t)=>{const{__scopeToast:e,altText:n,...i}=s;return _.jsx(Ut.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function r5(s){const t=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),uet(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",r=n.dataset.radixToastAnnounceExclude==="";if(!i)if(r){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...r5(n))}}),t}function AC(s,t,e,{discrete:n}){const i=e.originalEvent.currentTarget,r=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:e});t&&i.addEventListener(s,t,{once:!0}),n?E2(i,r):i.dispatchEvent(r)}var XB=(s,t,e=0)=>{const n=Math.abs(s.x),i=Math.abs(s.y),r=n>i;return t==="left"||t==="right"?r&&n>e:!r&&i>e};function cet(s=()=>{}){const t=Ji(s);Fo(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}function uet(s){return s.nodeType===s.ELEMENT_NODE}function het(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function nD(s){const t=document.activeElement;return s.some(e=>e===t?!0:(e.focus(),document.activeElement!==t))}var det=KW,o5=YW,a5=JW,l5=ZW,c5=t5,u5=n5,h5=P2;function d5(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(t=0;t<i;t++)s[t]&&(e=d5(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Nb(){for(var s,t,e=0,n="",i=arguments.length;e<i;e++)(s=arguments[e])&&(t=d5(s))&&(n&&(n+=" "),n+=t);return n}const YB=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,QB=Nb,OR=(s,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return QB(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:i,defaultVariants:r}=t,o=Object.keys(i).map(u=>{const h=e==null?void 0:e[u],d=r==null?void 0:r[u];if(h===null)return null;const f=YB(h)||YB(d);return i[u][f]}),a=e&&Object.entries(e).reduce((u,h)=>{let[d,f]=h;return f===void 0||(u[d]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:d,className:f,...p}=h;return Object.entries(p).every(m=>{let[g,w]=m;return Array.isArray(w)?w.includes({...r,...a}[g]):{...r,...a}[g]===w})?[...u,d,f]:u},[]);return QB(s,o,c,e==null?void 0:e.class,e==null?void 0:e.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fet=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f5=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pet={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const get=C.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:r,iconNode:o,...a},c)=>C.createElement("svg",{ref:c,...pet,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:f5("lucide",i),...a},[...o.map(([u,h])=>C.createElement(u,h)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(s,t)=>{const e=C.forwardRef(({className:n,...i},r)=>C.createElement(get,{ref:r,iconNode:t,className:f5(`lucide-${fet(s)}`,n),...i}));return e.displayName=`${s}`,e};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=Oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const met=Oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yet=Oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vet=Oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wet=Oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bet=Oe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=Oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=Oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=Oe("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aet=Oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xet=Oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _et=Oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eet=Oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cet=Oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tet=Oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=Oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pet=Oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ket=Oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ret=Oe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Met=Oe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=Oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Det=Oe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iet=Oe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),k2="-",Let=s=>{const t=Oet(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{const a=o.split(k2);return a[0]===""&&a.length!==1&&a.shift(),v5(a,t)||Net(o)},getConflictingClassGroupIds:(o,a)=>{const c=e[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},v5=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const e=s[0],n=t.nextPart.get(e),i=n?v5(s.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const r=s.join(k2);return(o=t.validators.find(({validator:a})=>a(r)))==null?void 0:o.classGroupId},ZB=/^\[(.+)\]$/,Net=s=>{if(ZB.test(s)){const t=ZB.exec(s)[1],e=t==null?void 0:t.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},Oet=s=>{const{theme:t,prefix:e}=s,n={nextPart:new Map,validators:[]};return jet(Object.entries(s.classGroups),e).forEach(([r,o])=>{tL(o,n,r,t)}),n},tL=(s,t,e,n)=>{s.forEach(i=>{if(typeof i=="string"){const r=i===""?t:tU(t,i);r.classGroupId=e;return}if(typeof i=="function"){if(Fet(i)){tL(i(n),t,e,n);return}t.validators.push({validator:i,classGroupId:e});return}Object.entries(i).forEach(([r,o])=>{tL(o,tU(t,r),e,n)})})},tU=(s,t)=>{let e=s;return t.split(k2).forEach(n=>{e.nextPart.has(n)||e.nextPart.set(n,{nextPart:new Map,validators:[]}),e=e.nextPart.get(n)}),e},Fet=s=>s.isThemeGetter,jet=(s,t)=>t?s.map(([e,n])=>{const i=n.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([o,a])=>[t+o,a])):r);return[e,i]}):s,$et=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,n=new Map;const i=(r,o)=>{e.set(r,o),t++,t>s&&(t=0,n=e,e=new Map)};return{get(r){let o=e.get(r);if(o!==void 0)return o;if((o=n.get(r))!==void 0)return i(r,o),o},set(r,o){e.has(r)?e.set(r,o):i(r,o)}}},w5="!",Bet=s=>{const{separator:t,experimentalParseClassName:e}=s,n=t.length===1,i=t[0],r=t.length,o=a=>{const c=[];let u=0,h=0,d;for(let w=0;w<a.length;w++){let v=a[w];if(u===0){if(v===i&&(n||a.slice(w,w+r)===t)){c.push(a.slice(h,w)),h=w+r;continue}if(v==="/"){d=w;continue}}v==="["?u++:v==="]"&&u--}const f=c.length===0?a:a.substring(h),p=f.startsWith(w5),m=p?f.substring(1):f,g=d&&d>h?d-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return e?a=>e({className:a,parseClassName:o}):o},Uet=s=>{if(s.length<=1)return s;const t=[];let e=[];return s.forEach(n=>{n[0]==="["?(t.push(...e.sort(),n),e=[]):e.push(n)}),t.push(...e.sort()),t},Vet=s=>({cache:$et(s.cacheSize),parseClassName:Bet(s),...Let(s)}),Het=/\s+/,zet=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:i}=t,r=[],o=s.trim().split(Het);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=e(u);let m=!!p,g=n(m?f.substring(0,p):f);if(!g){if(!m){a=u+(a.length>0?" "+a:a);continue}if(g=n(f),!g){a=u+(a.length>0?" "+a:a);continue}m=!1}const w=Uet(h).join(":"),v=d?w+w5:w,b=v+g;if(r.includes(b))continue;r.push(b);const x=i(g,m);for(let E=0;E<x.length;++E){const T=x[E];r.push(v+T)}a=u+(a.length>0?" "+a:a)}return a};function Wet(){let s=0,t,e,n="";for(;s<arguments.length;)(t=arguments[s++])&&(e=b5(t))&&(n&&(n+=" "),n+=e);return n}const b5=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=b5(s[n]))&&(e&&(e+=" "),e+=t);return e};function Get(s,...t){let e,n,i,r=o;function o(c){const u=t.reduce((h,d)=>d(h),s());return e=Vet(u),n=e.cache.get,i=e.cache.set,r=a,a(c)}function a(c){const u=n(c);if(u)return u;const h=zet(c,e);return i(c,h),h}return function(){return r(Wet.apply(null,arguments))}}const Re=s=>{const t=e=>e[s]||[];return t.isThemeGetter=!0,t},A5=/^\[(?:([a-z-]+):)?(.+)\]$/i,qet=/^\d+\/\d+$/,Ket=new Set(["px","full","screen"]),Xet=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yet=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qet=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jet=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zet=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ac=s=>yv(s)||Ket.has(s)||qet.test(s),lh=s=>Ob(s,"length",ant),yv=s=>!!s&&!Number.isNaN(Number(s)),sD=s=>Ob(s,"number",yv),eA=s=>!!s&&Number.isInteger(Number(s)),tnt=s=>s.endsWith("%")&&yv(s.slice(0,-1)),Tt=s=>A5.test(s),ch=s=>Xet.test(s),ent=new Set(["length","size","percentage"]),nnt=s=>Ob(s,ent,x5),snt=s=>Ob(s,"position",x5),int=new Set(["image","url"]),rnt=s=>Ob(s,int,cnt),ont=s=>Ob(s,"",lnt),nA=()=>!0,Ob=(s,t,e)=>{const n=A5.exec(s);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):e(n[2]):!1},ant=s=>Yet.test(s)&&!Qet.test(s),x5=()=>!1,lnt=s=>Jet.test(s),cnt=s=>Zet.test(s),unt=()=>{const s=Re("colors"),t=Re("spacing"),e=Re("blur"),n=Re("brightness"),i=Re("borderColor"),r=Re("borderRadius"),o=Re("borderSpacing"),a=Re("borderWidth"),c=Re("contrast"),u=Re("grayscale"),h=Re("hueRotate"),d=Re("invert"),f=Re("gap"),p=Re("gradientColorStops"),m=Re("gradientColorStopPositions"),g=Re("inset"),w=Re("margin"),v=Re("opacity"),b=Re("padding"),x=Re("saturate"),E=Re("scale"),T=Re("sepia"),P=Re("skew"),k=Re("space"),R=Re("translate"),M=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",Tt,t],$=()=>[Tt,t],U=()=>["",ac,lh],I=()=>["auto",yv,Tt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],j=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",Tt],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[yv,Tt];return{cacheSize:500,separator:":",theme:{colors:[nA],spacing:[ac,lh],blur:["none","",ch,Tt],brightness:X(),borderColor:[s],borderRadius:["none","","full",ch,Tt],borderSpacing:$(),borderWidth:U(),contrast:X(),grayscale:O(),hueRotate:X(),invert:O(),gap:$(),gradientColorStops:[s],gradientColorStopPositions:[tnt,lh],inset:L(),margin:L(),opacity:X(),padding:$(),saturate:X(),scale:X(),sepia:O(),skew:X(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",Tt]}],container:["container"],columns:[{columns:[ch]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Tt]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",eA,Tt]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Tt]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",eA,Tt]}],"grid-cols":[{"grid-cols":[nA]}],"col-start-end":[{col:["auto",{span:["full",eA,Tt]},Tt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[nA]}],"row-start-end":[{row:["auto",{span:[eA,Tt]},Tt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Tt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Tt,t]}],"min-w":[{"min-w":[Tt,t,"min","max","fit"]}],"max-w":[{"max-w":[Tt,t,"none","full","min","max","fit","prose",{screen:[ch]},ch]}],h:[{h:[Tt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Tt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Tt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Tt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ch,lh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sD]}],"font-family":[{font:[nA]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Tt]}],"line-clamp":[{"line-clamp":["none",yv,sD]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ac,Tt]}],"list-image":[{"list-image":["none",Tt]}],"list-style-type":[{list:["none","disc","decimal",Tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ac,lh]}],"underline-offset":[{"underline-offset":["auto",ac,Tt]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),snt]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nnt]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rnt]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:N()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[ac,Tt]}],"outline-w":[{outline:[ac,lh]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ac,lh]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ch,ont]}],"shadow-color":[{shadow:[nA]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...j(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":j()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ch,Tt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Tt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Tt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[eA,Tt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Tt]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tt]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tt]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[ac,lh,sD]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hnt=Get(unt);function dt(...s){return hnt(Nb(s))}const dnt=det,S5=C.forwardRef(({className:s,...t},e)=>_.jsx(o5,{ref:e,className:dt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));S5.displayName=o5.displayName;const fnt=OR("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_5=C.forwardRef(({className:s,variant:t,...e},n)=>_.jsx(a5,{ref:n,className:dt(fnt({variant:t}),s),...e}));_5.displayName=a5.displayName;const pnt=C.forwardRef(({className:s,...t},e)=>_.jsx(u5,{ref:e,className:dt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",s),...t}));pnt.displayName=u5.displayName;const E5=C.forwardRef(({className:s,...t},e)=>_.jsx(h5,{ref:e,className:dt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:_.jsx(y5,{className:"h-4 w-4"})}));E5.displayName=h5.displayName;const C5=C.forwardRef(({className:s,...t},e)=>_.jsx(l5,{ref:e,className:dt("text-sm font-semibold",s),...t}));C5.displayName=l5.displayName;const T5=C.forwardRef(({className:s,...t},e)=>_.jsx(c5,{ref:e,className:dt("text-sm opacity-90",s),...t}));T5.displayName=c5.displayName;function gnt(){const{toasts:s}=btt();return _.jsxs(dnt,{children:[s.map(function({id:t,title:e,description:n,action:i,...r}){return _.jsxs(_5,{...r,children:[_.jsxs("div",{className:"grid gap-1",children:[e&&_.jsx(C5,{children:e}),n&&_.jsx(T5,{children:n})]}),i,_.jsx(E5,{})]},t)}),_.jsx(S5,{})]})}var eU=["light","dark"],mnt="(prefers-color-scheme: dark)",ynt=C.createContext(void 0),vnt={setTheme:s=>{},themes:[]},wnt=()=>{var s;return(s=C.useContext(ynt))!=null?s:vnt};C.memo(({forcedTheme:s,storageKey:t,attribute:e,enableSystem:n,enableColorScheme:i,defaultTheme:r,value:o,attrs:a,nonce:c})=>{let u=r==="system",h=e==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${e}',s='setAttribute';`,d=i?eU.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,w=!0)=>{let v=o?o[m]:m,b=g?m+"|| ''":`'${v}'`,x="";return i&&w&&!g&&eU.includes(m)&&(x+=`d.style.colorScheme = '${m}';`),e==="class"?g||v?x+=`c.add(${b})`:x+="null":v&&(x+=`d[s](n,${b})`),x},p=s?`!function(){${h}${f(s)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${mnt}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(r,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(r,!1,!1)};}${d}}catch(t){}}();`;return C.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var bnt=s=>{switch(s){case"success":return Snt;case"info":return Ent;case"warning":return _nt;case"error":return Cnt;default:return null}},Ant=Array(12).fill(0),xnt=({visible:s,className:t})=>K.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},K.createElement("div",{className:"sonner-spinner"},Ant.map((e,n)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Snt=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_nt=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ent=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Cnt=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tnt=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Pnt=()=>{let[s,t]=K.useState(document.hidden);return K.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),s},eL=1,knt=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:e,...n}=s,i=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:eL++,r=this.toasts.find(a=>a.id===i),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),r?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...s,id:i,title:e}),{...a,...s,id:i,dismissible:o,title:e}):a):this.addToast({title:e,...n,dismissible:o,id:i}),i},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(t=>{this.subscribers.forEach(e=>e({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let e;t.loading!==void 0&&(e=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=s instanceof Promise?s:s(),i=e!==void 0,r,o=n.then(async c=>{if(r=["resolve",c],K.isValidElement(c))i=!1,this.create({id:e,type:"default",message:c});else if(Mnt(c)&&!c.ok){i=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:e,type:"error",message:u,description:h})}else if(t.success!==void 0){i=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:e,type:"success",message:u,description:h})}}).catch(async c=>{if(r=["reject",c],t.error!==void 0){i=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:e,type:"error",message:u,description:h})}}).finally(()=>{var c;i&&(this.dismiss(e),e=void 0),(c=t.finally)==null||c.call(t)}),a=()=>new Promise((c,u)=>o.then(()=>r[0]==="reject"?u(r[1]):c(r[1])).catch(u));return typeof e!="string"&&typeof e!="number"?{unwrap:a}:Object.assign(e,{unwrap:a})},this.custom=(s,t)=>{let e=(t==null?void 0:t.id)||eL++;return this.create({jsx:s(e),id:e,...t}),e},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Vi=new knt,Rnt=(s,t)=>{let e=(t==null?void 0:t.id)||eL++;return Vi.addToast({title:s,...t,id:e}),e},Mnt=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Dnt=Rnt,Int=()=>Vi.toasts,Lnt=()=>Vi.getActiveToasts(),Hn=Object.assign(Dnt,{success:Vi.success,info:Vi.info,warning:Vi.warning,error:Vi.error,custom:Vi.custom,message:Vi.message,promise:Vi.promise,dismiss:Vi.dismiss,loading:Vi.loading},{getHistory:Int,getToasts:Lnt});function Nnt(s,{insertAt:t}={}){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}Nnt(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xC(s){return s.label!==void 0}var Ont=3,Fnt="32px",jnt="16px",nU=4e3,$nt=356,Bnt=14,Unt=20,Vnt=200;function Vo(...s){return s.filter(Boolean).join(" ")}function Hnt(s){let[t,e]=s.split("-"),n=[];return t&&n.push(t),e&&n.push(e),n}var znt=s=>{var t,e,n,i,r,o,a,c,u,h,d;let{invert:f,toast:p,unstyled:m,interacting:g,setHeights:w,visibleToasts:v,heights:b,index:x,toasts:E,expanded:T,removeToast:P,defaultRichColors:k,closeButton:R,style:M,cancelButtonStyle:D,actionButtonStyle:L,className:$="",descriptionClassName:U="",duration:I,position:H,gap:N,loadingIcon:j,expandByDefault:F,classNames:O,icons:V,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:z}=s,[W,et]=K.useState(null),[wt,ft]=K.useState(null),[q,Se]=K.useState(!1),[Qt,_e]=K.useState(!1),[Lt,Is]=K.useState(!1),[Wt,Jt]=K.useState(!1),[ke,Ln]=K.useState(!1),[sn,If]=K.useState(0),[eh,ly]=K.useState(0),Lf=K.useRef(p.duration||I||nU),Nf=K.useRef(null),oc=K.useRef(null),SM=x===0,_M=x+1<=v,Ti=p.type,nh=p.dismissible!==!1,Ha=p.className||"",sh=p.descriptionClassName||"",Zi=K.useMemo(()=>b.findIndex(_t=>_t.toastId===p.id)||0,[b,p.id]),Gb=K.useMemo(()=>{var _t;return(_t=p.closeButton)!=null?_t:R},[p.closeButton,R]),M$=K.useMemo(()=>p.duration||I||nU,[p.duration,I]),EM=K.useRef(0),cy=K.useRef(0),D$=K.useRef(0),uy=K.useRef(null),[FQ,jQ]=H.split("-"),I$=K.useMemo(()=>b.reduce((_t,ae,Fe)=>Fe>=Zi?_t:_t+ae.height,0),[b,Zi]),L$=Pnt(),$Q=p.invert||f,CM=Ti==="loading";cy.current=K.useMemo(()=>Zi*N+I$,[Zi,I$]),K.useEffect(()=>{Lf.current=M$},[M$]),K.useEffect(()=>{Se(!0)},[]),K.useEffect(()=>{let _t=oc.current;if(_t){let ae=_t.getBoundingClientRect().height;return ly(ae),w(Fe=>[{toastId:p.id,height:ae,position:p.position},...Fe]),()=>w(Fe=>Fe.filter(jo=>jo.toastId!==p.id))}},[w,p.id]),K.useLayoutEffect(()=>{if(!q)return;let _t=oc.current,ae=_t.style.height;_t.style.height="auto";let Fe=_t.getBoundingClientRect().height;_t.style.height=ae,ly(Fe),w(jo=>jo.find($o=>$o.toastId===p.id)?jo.map($o=>$o.toastId===p.id?{...$o,height:Fe}:$o):[{toastId:p.id,height:Fe,position:p.position},...jo])},[q,p.title,p.description,w,p.id]);let ih=K.useCallback(()=>{_e(!0),If(cy.current),w(_t=>_t.filter(ae=>ae.toastId!==p.id)),setTimeout(()=>{P(p)},Vnt)},[p,P,w,cy]);K.useEffect(()=>{if(p.promise&&Ti==="loading"||p.duration===1/0||p.type==="loading")return;let _t;return T||g||z&&L$?(()=>{if(D$.current<EM.current){let ae=new Date().getTime()-EM.current;Lf.current=Lf.current-ae}D$.current=new Date().getTime()})():Lf.current!==1/0&&(EM.current=new Date().getTime(),_t=setTimeout(()=>{var ae;(ae=p.onAutoClose)==null||ae.call(p,p),ih()},Lf.current)),()=>clearTimeout(_t)},[T,g,p,Ti,z,L$,ih]),K.useEffect(()=>{p.delete&&ih()},[ih,p.delete]);function BQ(){var _t,ae,Fe;return V!=null&&V.loading?K.createElement("div",{className:Vo(O==null?void 0:O.loader,(_t=p==null?void 0:p.classNames)==null?void 0:_t.loader,"sonner-loader"),"data-visible":Ti==="loading"},V.loading):j?K.createElement("div",{className:Vo(O==null?void 0:O.loader,(ae=p==null?void 0:p.classNames)==null?void 0:ae.loader,"sonner-loader"),"data-visible":Ti==="loading"},j):K.createElement(xnt,{className:Vo(O==null?void 0:O.loader,(Fe=p==null?void 0:p.classNames)==null?void 0:Fe.loader),visible:Ti==="loading"})}return K.createElement("li",{tabIndex:0,ref:oc,className:Vo($,Ha,O==null?void 0:O.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[Ti],(e=p==null?void 0:p.classNames)==null?void 0:e[Ti]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:k,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":q,"data-promise":!!p.promise,"data-swiped":ke,"data-removed":Qt,"data-visible":_M,"data-y-position":FQ,"data-x-position":jQ,"data-index":x,"data-front":SM,"data-swiping":Lt,"data-dismissible":nh,"data-type":Ti,"data-invert":$Q,"data-swipe-out":Wt,"data-swipe-direction":wt,"data-expanded":!!(T||F&&q),style:{"--index":x,"--toasts-before":x,"--z-index":E.length-x,"--offset":`${Qt?sn:cy.current}px`,"--initial-height":F?"auto":`${eh}px`,...M,...p.style},onDragEnd:()=>{Is(!1),et(null),uy.current=null},onPointerDown:_t=>{CM||!nh||(Nf.current=new Date,If(cy.current),_t.target.setPointerCapture(_t.pointerId),_t.target.tagName!=="BUTTON"&&(Is(!0),uy.current={x:_t.clientX,y:_t.clientY}))},onPointerUp:()=>{var _t,ae,Fe,jo;if(Wt||!nh)return;uy.current=null;let $o=Number(((_t=oc.current)==null?void 0:_t.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rh=Number(((ae=oc.current)==null?void 0:ae.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Of=new Date().getTime()-((Fe=Nf.current)==null?void 0:Fe.getTime()),Bo=W==="x"?$o:rh,oh=Math.abs(Bo)/Of;if(Math.abs(Bo)>=Unt||oh>.11){If(cy.current),(jo=p.onDismiss)==null||jo.call(p,p),ft(W==="x"?$o>0?"right":"left":rh>0?"down":"up"),ih(),Jt(!0),Ln(!1);return}Is(!1),et(null)},onPointerMove:_t=>{var ae,Fe,jo,$o;if(!uy.current||!nh||((ae=window.getSelection())==null?void 0:ae.toString().length)>0)return;let rh=_t.clientY-uy.current.y,Of=_t.clientX-uy.current.x,Bo=(Fe=s.swipeDirections)!=null?Fe:Hnt(H);!W&&(Math.abs(Of)>1||Math.abs(rh)>1)&&et(Math.abs(Of)>Math.abs(rh)?"x":"y");let oh={x:0,y:0};W==="y"?(Bo.includes("top")||Bo.includes("bottom"))&&(Bo.includes("top")&&rh<0||Bo.includes("bottom")&&rh>0)&&(oh.y=rh):W==="x"&&(Bo.includes("left")||Bo.includes("right"))&&(Bo.includes("left")&&Of<0||Bo.includes("right")&&Of>0)&&(oh.x=Of),(Math.abs(oh.x)>0||Math.abs(oh.y)>0)&&Ln(!0),(jo=oc.current)==null||jo.style.setProperty("--swipe-amount-x",`${oh.x}px`),($o=oc.current)==null||$o.style.setProperty("--swipe-amount-y",`${oh.y}px`)}},Gb&&!p.jsx?K.createElement("button",{"aria-label":X,"data-disabled":CM,"data-close-button":!0,onClick:CM||!nh?()=>{}:()=>{var _t;ih(),(_t=p.onDismiss)==null||_t.call(p,p)},className:Vo(O==null?void 0:O.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(r=V==null?void 0:V.close)!=null?r:Tnt):null,p.jsx||C.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:K.createElement(K.Fragment,null,Ti||p.icon||p.promise?K.createElement("div",{"data-icon":"",className:Vo(O==null?void 0:O.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||BQ():null,p.type!=="loading"?p.icon||(V==null?void 0:V[Ti])||bnt(Ti):null):null,K.createElement("div",{"data-content":"",className:Vo(O==null?void 0:O.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},K.createElement("div",{"data-title":"",className:Vo(O==null?void 0:O.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?K.createElement("div",{"data-description":"",className:Vo(U,sh,O==null?void 0:O.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),C.isValidElement(p.cancel)?p.cancel:p.cancel&&xC(p.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||D,onClick:_t=>{var ae,Fe;xC(p.cancel)&&nh&&((Fe=(ae=p.cancel).onClick)==null||Fe.call(ae,_t),ih())},className:Vo(O==null?void 0:O.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,C.isValidElement(p.action)?p.action:p.action&&xC(p.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||L,onClick:_t=>{var ae,Fe;xC(p.action)&&((Fe=(ae=p.action).onClick)==null||Fe.call(ae,_t),!_t.defaultPrevented&&ih())},className:Vo(O==null?void 0:O.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function sU(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Wnt(s,t){let e={};return[s,t].forEach((n,i)=>{let r=i===1,o=r?"--mobile-offset":"--offset",a=r?jnt:Fnt;function c(u){["top","right","bottom","left"].forEach(h=>{e[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?e[`${o}-${u}`]=a:e[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(a)}),e}var Gnt=C.forwardRef(function(s,t){let{invert:e,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:r,closeButton:o,className:a,offset:c,mobileOffset:u,theme:h="light",richColors:d,duration:f,style:p,visibleToasts:m=Ont,toastOptions:g,dir:w=sU(),gap:v=Bnt,loadingIcon:b,icons:x,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:T}=s,[P,k]=K.useState([]),R=K.useMemo(()=>Array.from(new Set([n].concat(P.filter(z=>z.position).map(z=>z.position)))),[P,n]),[M,D]=K.useState([]),[L,$]=K.useState(!1),[U,I]=K.useState(!1),[H,N]=K.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=K.useRef(null),F=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=K.useRef(null),V=K.useRef(!1),X=K.useCallback(z=>{k(W=>{var et;return(et=W.find(wt=>wt.id===z.id))!=null&&et.delete||Vi.dismiss(z.id),W.filter(({id:wt})=>wt!==z.id)})},[]);return K.useEffect(()=>Vi.subscribe(z=>{if(z.dismiss){k(W=>W.map(et=>et.id===z.id?{...et,delete:!0}:et));return}setTimeout(()=>{BW.flushSync(()=>{k(W=>{let et=W.findIndex(wt=>wt.id===z.id);return et!==-1?[...W.slice(0,et),{...W[et],...z},...W.slice(et+1)]:[z,...W]})})})}),[]),K.useEffect(()=>{if(h!=="system"){N(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:W})=>{N(W?"dark":"light")})}catch{z.addListener(({matches:et})=>{try{N(et?"dark":"light")}catch(wt){console.error(wt)}})}},[h]),K.useEffect(()=>{P.length<=1&&$(!1)},[P]),K.useEffect(()=>{let z=W=>{var et,wt;i.every(ft=>W[ft]||W.code===ft)&&($(!0),(et=j.current)==null||et.focus()),W.code==="Escape"&&(document.activeElement===j.current||(wt=j.current)!=null&&wt.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[i]),K.useEffect(()=>{if(j.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,V.current=!1)}},[j.current]),K.createElement("section",{ref:t,"aria-label":`${E} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((z,W)=>{var et;let[wt,ft]=z.split("-");return P.length?K.createElement("ol",{key:z,dir:w==="auto"?sU():w,tabIndex:-1,ref:j,className:a,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":wt,"data-lifted":L&&P.length>1&&!r,"data-x-position":ft,style:{"--front-toast-height":`${((et=M[0])==null?void 0:et.height)||0}px`,"--width":`${$nt}px`,"--gap":`${v}px`,...p,...Wnt(c,u)},onBlur:q=>{V.current&&!q.currentTarget.contains(q.relatedTarget)&&(V.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||V.current||(V.current=!0,O.current=q.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{U||$(!1)},onDragEnd:()=>$(!1),onPointerDown:q=>{q.target instanceof HTMLElement&&q.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},P.filter(q=>!q.position&&W===0||q.position===z).map((q,Se)=>{var Qt,_e;return K.createElement(znt,{key:q.id,icons:x,index:Se,toast:q,defaultRichColors:d,duration:(Qt=g==null?void 0:g.duration)!=null?Qt:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:e,visibleToasts:m,closeButton:(_e=g==null?void 0:g.closeButton)!=null?_e:o,interacting:U,position:z,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:X,toasts:P.filter(Lt=>Lt.position==q.position),heights:M.filter(Lt=>Lt.position==q.position),setHeights:D,expandByDefault:r,gap:v,loadingIcon:b,expanded:L,pauseWhenPageIsHidden:T,swipeDirections:s.swipeDirections})})):null}))});const qnt=({...s})=>{const{theme:t="system"}=wnt();return _.jsx(Gnt,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};var Knt=IF[" useId ".trim().toString()]||(()=>{}),Xnt=0;function Om(s){const[t,e]=C.useState(Knt());return Fo(()=>{s||e(n=>n??String(Xnt++))},[s]),s||(t?`radix-${t}`:"")}const Ynt=["top","right","bottom","left"],mf=Math.min,Nr=Math.max,JP=Math.round,SC=Math.floor,Zl=s=>({x:s,y:s}),Qnt={left:"right",right:"left",bottom:"top",top:"bottom"},Jnt={start:"end",end:"start"};function nL(s,t,e){return Nr(s,mf(t,e))}function zu(s,t){return typeof s=="function"?s(t):s}function Wu(s){return s.split("-")[0]}function Fb(s){return s.split("-")[1]}function R2(s){return s==="x"?"y":"x"}function M2(s){return s==="y"?"height":"width"}const Znt=new Set(["top","bottom"]);function Xl(s){return Znt.has(Wu(s))?"y":"x"}function D2(s){return R2(Xl(s))}function tst(s,t,e){e===void 0&&(e=!1);const n=Fb(s),i=D2(s),r=M2(i);let o=i==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=ZP(o)),[o,ZP(o)]}function est(s){const t=ZP(s);return[sL(s),t,sL(t)]}function sL(s){return s.replace(/start|end/g,t=>Jnt[t])}const iU=["left","right"],rU=["right","left"],nst=["top","bottom"],sst=["bottom","top"];function ist(s,t,e){switch(s){case"top":case"bottom":return e?t?rU:iU:t?iU:rU;case"left":case"right":return t?nst:sst;default:return[]}}function rst(s,t,e,n){const i=Fb(s);let r=ist(Wu(s),e==="start",n);return i&&(r=r.map(o=>o+"-"+i),t&&(r=r.concat(r.map(sL)))),r}function ZP(s){return s.replace(/left|right|bottom|top/g,t=>Qnt[t])}function ost(s){return{top:0,right:0,bottom:0,left:0,...s}}function P5(s){return typeof s!="number"?ost(s):{top:s,right:s,bottom:s,left:s}}function tk(s){const{x:t,y:e,width:n,height:i}=s;return{width:n,height:i,top:e,left:t,right:t+n,bottom:e+i,x:t,y:e}}function oU(s,t,e){let{reference:n,floating:i}=s;const r=Xl(t),o=D2(t),a=M2(o),c=Wu(t),u=r==="y",h=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let p;switch(c){case"top":p={x:h,y:n.y-i.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:d};break;case"left":p={x:n.x-i.width,y:d};break;default:p={x:n.x,y:n.y}}switch(Fb(t)){case"start":p[o]-=f*(e&&u?-1:1);break;case"end":p[o]+=f*(e&&u?-1:1);break}return p}const ast=async(s,t,e)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:o}=e,a=r.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:s,floating:t,strategy:i}),{x:h,y:d}=oU(u,n,c),f=n,p={},m=0;for(let g=0;g<a.length;g++){const{name:w,fn:v}=a[g],{x:b,y:x,data:E,reset:T}=await v({x:h,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:s,floating:t}});h=b??h,d=x??d,p={...p,[w]:{...p[w],...E}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(f=T.placement),T.rects&&(u=T.rects===!0?await o.getElementRects({reference:s,floating:t,strategy:i}):T.rects),{x:h,y:d}=oU(u,f,c)),g=-1)}return{x:h,y:d,placement:f,strategy:i,middlewareData:p}};async function Wx(s,t){var e;t===void 0&&(t={});const{x:n,y:i,platform:r,rects:o,elements:a,strategy:c}=s,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=zu(t,s),m=P5(p),w=a[f?d==="floating"?"reference":"floating":d],v=tk(await r.getClippingRect({element:(e=await(r.isElement==null?void 0:r.isElement(w)))==null||e?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),b=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),E=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},T=tk(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-T.top+m.top)/E.y,bottom:(T.bottom-v.bottom+m.bottom)/E.y,left:(v.left-T.left+m.left)/E.x,right:(T.right-v.right+m.right)/E.x}}const lst=s=>({name:"arrow",options:s,async fn(t){const{x:e,y:n,placement:i,rects:r,platform:o,elements:a,middlewareData:c}=t,{element:u,padding:h=0}=zu(s,t)||{};if(u==null)return{};const d=P5(h),f={x:e,y:n},p=D2(i),m=M2(p),g=await o.getDimensions(u),w=p==="y",v=w?"top":"left",b=w?"bottom":"right",x=w?"clientHeight":"clientWidth",E=r.reference[m]+r.reference[p]-f[p]-r.floating[m],T=f[p]-r.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=P?P[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(P)))&&(k=a.floating[x]||r.floating[m]);const R=E/2-T/2,M=k/2-g[m]/2-1,D=mf(d[v],M),L=mf(d[b],M),$=D,U=k-g[m]-L,I=k/2-g[m]/2+R,H=nL($,I,U),N=!c.arrow&&Fb(i)!=null&&I!==H&&r.reference[m]/2-(I<$?D:L)-g[m]/2<0,j=N?I<$?I-$:I-U:0;return{[p]:f[p]+j,data:{[p]:H,centerOffset:I-H-j,...N&&{alignmentOffset:j}},reset:N}}}),cst=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,n;const{placement:i,middlewareData:r,rects:o,initialPlacement:a,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...w}=zu(s,t);if((e=r.arrow)!=null&&e.alignmentOffset)return{};const v=Wu(i),b=Xl(a),x=Wu(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),T=f||(x||!g?[ZP(a)]:est(a)),P=m!=="none";!f&&P&&T.push(...rst(a,g,m,E));const k=[a,...T],R=await Wx(t,w),M=[];let D=((n=r.flip)==null?void 0:n.overflows)||[];if(h&&M.push(R[v]),d){const I=tst(i,o,E);M.push(R[I[0]],R[I[1]])}if(D=[...D,{placement:i,overflows:M}],!M.every(I=>I<=0)){var L,$;const I=(((L=r.flip)==null?void 0:L.index)||0)+1,H=k[I];if(H&&(!(d==="alignment"?b!==Xl(H):!1)||D.every(F=>F.overflows[0]>0&&Xl(F.placement)===b)))return{data:{index:I,overflows:D},reset:{placement:H}};let N=($=D.filter(j=>j.overflows[0]<=0).sort((j,F)=>j.overflows[1]-F.overflows[1])[0])==null?void 0:$.placement;if(!N)switch(p){case"bestFit":{var U;const j=(U=D.filter(F=>{if(P){const O=Xl(F.placement);return O===b||O==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(O=>O>0).reduce((O,V)=>O+V,0)]).sort((F,O)=>F[1]-O[1])[0])==null?void 0:U[0];j&&(N=j);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function aU(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function lU(s){return Ynt.some(t=>s[t]>=0)}const ust=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:e}=t,{strategy:n="referenceHidden",...i}=zu(s,t);switch(n){case"referenceHidden":{const r=await Wx(t,{...i,elementContext:"reference"}),o=aU(r,e.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lU(o)}}}case"escaped":{const r=await Wx(t,{...i,altBoundary:!0}),o=aU(r,e.floating);return{data:{escapedOffsets:o,escaped:lU(o)}}}default:return{}}}}},k5=new Set(["left","top"]);async function hst(s,t){const{placement:e,platform:n,elements:i}=s,r=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Wu(e),a=Fb(e),c=Xl(e)==="y",u=k5.has(o)?-1:1,h=r&&c?-1:1,d=zu(t,s);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),c?{x:p*h,y:f*u}:{x:f*u,y:p*h}}const dst=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,n;const{x:i,y:r,placement:o,middlewareData:a}=t,c=await hst(t,s);return o===((e=a.offset)==null?void 0:e.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:r+c.y,data:{...c,placement:o}}}}},fst=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:n,placement:i}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:b}=w;return{x:v,y:b}}},...c}=zu(s,t),u={x:e,y:n},h=await Wx(t,c),d=Xl(Wu(i)),f=R2(d);let p=u[f],m=u[d];if(r){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+h[w],x=p-h[v];p=nL(b,p,x)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=m+h[w],x=m-h[v];m=nL(b,m,x)}const g=a.fn({...t,[f]:p,[d]:m});return{...g,data:{x:g.x-e,y:g.y-n,enabled:{[f]:r,[d]:o}}}}}},pst=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:e,y:n,placement:i,rects:r,middlewareData:o}=t,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=zu(s,t),h={x:e,y:n},d=Xl(i),f=R2(d);let p=h[f],m=h[d];const g=zu(a,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=f==="y"?"height":"width",E=r.reference[f]-r.floating[x]+w.mainAxis,T=r.reference[f]+r.reference[x]-w.mainAxis;p<E?p=E:p>T&&(p=T)}if(u){var v,b;const x=f==="y"?"width":"height",E=k5.has(Wu(i)),T=r.reference[d]-r.floating[x]+(E&&((v=o.offset)==null?void 0:v[d])||0)+(E?0:w.crossAxis),P=r.reference[d]+r.reference[x]+(E?0:((b=o.offset)==null?void 0:b[d])||0)-(E?w.crossAxis:0);m<T?m=T:m>P&&(m=P)}return{[f]:p,[d]:m}}}},gst=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var e,n;const{placement:i,rects:r,platform:o,elements:a}=t,{apply:c=()=>{},...u}=zu(s,t),h=await Wx(t,u),d=Wu(i),f=Fb(i),p=Xl(i)==="y",{width:m,height:g}=r.floating;let w,v;d==="top"||d==="bottom"?(w=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,w=f==="end"?"top":"bottom");const b=g-h.top-h.bottom,x=m-h.left-h.right,E=mf(g-h[w],b),T=mf(m-h[v],x),P=!t.middlewareData.shift;let k=E,R=T;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(R=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=b),P&&!f){const D=Nr(h.left,0),L=Nr(h.right,0),$=Nr(h.top,0),U=Nr(h.bottom,0);p?R=m-2*(D!==0||L!==0?D+L:Nr(h.left,h.right)):k=g-2*($!==0||U!==0?$+U:Nr(h.top,h.bottom))}await c({...t,availableWidth:R,availableHeight:k});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function FR(){return typeof window<"u"}function jb(s){return R5(s)?(s.nodeName||"").toLowerCase():"#document"}function Hr(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function rc(s){var t;return(t=(R5(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function R5(s){return FR()?s instanceof Node||s instanceof Hr(s).Node:!1}function La(s){return FR()?s instanceof Element||s instanceof Hr(s).Element:!1}function nc(s){return FR()?s instanceof HTMLElement||s instanceof Hr(s).HTMLElement:!1}function cU(s){return!FR()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Hr(s).ShadowRoot}const mst=new Set(["inline","contents"]);function N1(s){const{overflow:t,overflowX:e,overflowY:n,display:i}=Na(s);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!mst.has(i)}const yst=new Set(["table","td","th"]);function vst(s){return yst.has(jb(s))}const wst=[":popover-open",":modal"];function jR(s){return wst.some(t=>{try{return s.matches(t)}catch{return!1}})}const bst=["transform","translate","scale","rotate","perspective"],Ast=["transform","translate","scale","rotate","perspective","filter"],xst=["paint","layout","strict","content"];function I2(s){const t=L2(),e=La(s)?Na(s):s;return bst.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||Ast.some(n=>(e.willChange||"").includes(n))||xst.some(n=>(e.contain||"").includes(n))}function Sst(s){let t=yf(s);for(;nc(t)&&!Sb(t);){if(I2(t))return t;if(jR(t))return null;t=yf(t)}return null}function L2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _st=new Set(["html","body","#document"]);function Sb(s){return _st.has(jb(s))}function Na(s){return Hr(s).getComputedStyle(s)}function $R(s){return La(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function yf(s){if(jb(s)==="html")return s;const t=s.assignedSlot||s.parentNode||cU(s)&&s.host||rc(s);return cU(t)?t.host:t}function M5(s){const t=yf(s);return Sb(t)?s.ownerDocument?s.ownerDocument.body:s.body:nc(t)&&N1(t)?t:M5(t)}function Gx(s,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const i=M5(s),r=i===((n=s.ownerDocument)==null?void 0:n.body),o=Hr(i);if(r){const a=iL(o);return t.concat(o,o.visualViewport||[],N1(i)?i:[],a&&e?Gx(a):[])}return t.concat(i,Gx(i,[],e))}function iL(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function D5(s){const t=Na(s);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=nc(s),r=i?s.offsetWidth:e,o=i?s.offsetHeight:n,a=JP(e)!==r||JP(n)!==o;return a&&(e=r,n=o),{width:e,height:n,$:a}}function N2(s){return La(s)?s:s.contextElement}function vv(s){const t=N2(s);if(!nc(t))return Zl(1);const e=t.getBoundingClientRect(),{width:n,height:i,$:r}=D5(t);let o=(r?JP(e.width):e.width)/n,a=(r?JP(e.height):e.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Est=Zl(0);function I5(s){const t=Hr(s);return!L2()||!t.visualViewport?Est:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Cst(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==Hr(s)?!1:t}function Hm(s,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const i=s.getBoundingClientRect(),r=N2(s);let o=Zl(1);t&&(n?La(n)&&(o=vv(n)):o=vv(s));const a=Cst(r,e,n)?I5(r):Zl(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,h=i.width/o.x,d=i.height/o.y;if(r){const f=Hr(r),p=n&&La(n)?Hr(n):n;let m=f,g=iL(m);for(;g&&n&&p!==m;){const w=vv(g),v=g.getBoundingClientRect(),b=Na(g),x=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*w.x,E=v.top+(g.clientTop+parseFloat(b.paddingTop))*w.y;c*=w.x,u*=w.y,h*=w.x,d*=w.y,c+=x,u+=E,m=Hr(g),g=iL(m)}}return tk({width:h,height:d,x:c,y:u})}function O2(s,t){const e=$R(s).scrollLeft;return t?t.left+e:Hm(rc(s)).left+e}function L5(s,t,e){e===void 0&&(e=!1);const n=s.getBoundingClientRect(),i=n.left+t.scrollLeft-(e?0:O2(s,n)),r=n.top+t.scrollTop;return{x:i,y:r}}function Tst(s){let{elements:t,rect:e,offsetParent:n,strategy:i}=s;const r=i==="fixed",o=rc(n),a=t?jR(t.floating):!1;if(n===o||a&&r)return e;let c={scrollLeft:0,scrollTop:0},u=Zl(1);const h=Zl(0),d=nc(n);if((d||!d&&!r)&&((jb(n)!=="body"||N1(o))&&(c=$R(n)),nc(n))){const p=Hm(n);u=vv(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const f=o&&!d&&!r?L5(o,c,!0):Zl(0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-c.scrollLeft*u.x+h.x+f.x,y:e.y*u.y-c.scrollTop*u.y+h.y+f.y}}function Pst(s){return Array.from(s.getClientRects())}function kst(s){const t=rc(s),e=$R(s),n=s.ownerDocument.body,i=Nr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=Nr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-e.scrollLeft+O2(s);const a=-e.scrollTop;return Na(n).direction==="rtl"&&(o+=Nr(t.clientWidth,n.clientWidth)-i),{width:i,height:r,x:o,y:a}}function Rst(s,t){const e=Hr(s),n=rc(s),i=e.visualViewport;let r=n.clientWidth,o=n.clientHeight,a=0,c=0;if(i){r=i.width,o=i.height;const u=L2();(!u||u&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:r,height:o,x:a,y:c}}const Mst=new Set(["absolute","fixed"]);function Dst(s,t){const e=Hm(s,!0,t==="fixed"),n=e.top+s.clientTop,i=e.left+s.clientLeft,r=nc(s)?vv(s):Zl(1),o=s.clientWidth*r.x,a=s.clientHeight*r.y,c=i*r.x,u=n*r.y;return{width:o,height:a,x:c,y:u}}function uU(s,t,e){let n;if(t==="viewport")n=Rst(s,e);else if(t==="document")n=kst(rc(s));else if(La(t))n=Dst(t,e);else{const i=I5(s);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return tk(n)}function N5(s,t){const e=yf(s);return e===t||!La(e)||Sb(e)?!1:Na(e).position==="fixed"||N5(e,t)}function Ist(s,t){const e=t.get(s);if(e)return e;let n=Gx(s,[],!1).filter(a=>La(a)&&jb(a)!=="body"),i=null;const r=Na(s).position==="fixed";let o=r?yf(s):s;for(;La(o)&&!Sb(o);){const a=Na(o),c=I2(o);!c&&a.position==="fixed"&&(i=null),(r?!c&&!i:!c&&a.position==="static"&&!!i&&Mst.has(i.position)||N1(o)&&!c&&N5(s,o))?n=n.filter(h=>h!==o):i=a,o=yf(o)}return t.set(s,n),n}function Lst(s){let{element:t,boundary:e,rootBoundary:n,strategy:i}=s;const o=[...e==="clippingAncestors"?jR(t)?[]:Ist(t,this._c):[].concat(e),n],a=o[0],c=o.reduce((u,h)=>{const d=uU(t,h,i);return u.top=Nr(d.top,u.top),u.right=mf(d.right,u.right),u.bottom=mf(d.bottom,u.bottom),u.left=Nr(d.left,u.left),u},uU(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Nst(s){const{width:t,height:e}=D5(s);return{width:t,height:e}}function Ost(s,t,e){const n=nc(t),i=rc(t),r=e==="fixed",o=Hm(s,!0,r,t);let a={scrollLeft:0,scrollTop:0};const c=Zl(0);function u(){c.x=O2(i)}if(n||!n&&!r)if((jb(t)!=="body"||N1(i))&&(a=$R(t)),n){const p=Hm(t,!0,r,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&u();r&&!n&&i&&u();const h=i&&!n&&!r?L5(i,a):Zl(0),d=o.left+a.scrollLeft-c.x-h.x,f=o.top+a.scrollTop-c.y-h.y;return{x:d,y:f,width:o.width,height:o.height}}function iD(s){return Na(s).position==="static"}function hU(s,t){if(!nc(s)||Na(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return rc(s)===e&&(e=e.ownerDocument.body),e}function O5(s,t){const e=Hr(s);if(jR(s))return e;if(!nc(s)){let i=yf(s);for(;i&&!Sb(i);){if(La(i)&&!iD(i))return i;i=yf(i)}return e}let n=hU(s,t);for(;n&&vst(n)&&iD(n);)n=hU(n,t);return n&&Sb(n)&&iD(n)&&!I2(n)?e:n||Sst(s)||e}const Fst=async function(s){const t=this.getOffsetParent||O5,e=this.getDimensions,n=await e(s.floating);return{reference:Ost(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function jst(s){return Na(s).direction==="rtl"}const $st={convertOffsetParentRelativeRectToViewportRelativeRect:Tst,getDocumentElement:rc,getClippingRect:Lst,getOffsetParent:O5,getElementRects:Fst,getClientRects:Pst,getDimensions:Nst,getScale:vv,isElement:La,isRTL:jst};function F5(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function Bst(s,t){let e=null,n;const i=rc(s);function r(){var a;clearTimeout(n),(a=e)==null||a.disconnect(),e=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),r();const u=s.getBoundingClientRect(),{left:h,top:d,width:f,height:p}=u;if(a||t(),!f||!p)return;const m=SC(d),g=SC(i.clientWidth-(h+f)),w=SC(i.clientHeight-(d+p)),v=SC(h),x={rootMargin:-m+"px "+-g+"px "+-w+"px "+-v+"px",threshold:Nr(0,mf(1,c))||1};let E=!0;function T(P){const k=P[0].intersectionRatio;if(k!==c){if(!E)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!F5(u,s.getBoundingClientRect())&&o(),E=!1}try{e=new IntersectionObserver(T,{...x,root:i.ownerDocument})}catch{e=new IntersectionObserver(T,x)}e.observe(s)}return o(!0),r}function Ust(s,t,e,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=N2(s),h=i||r?[...u?Gx(u):[],...Gx(t)]:[];h.forEach(v=>{i&&v.addEventListener("scroll",e,{passive:!0}),r&&v.addEventListener("resize",e)});const d=u&&a?Bst(u,e):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(t)})),e()}),u&&!c&&p.observe(u),p.observe(t));let m,g=c?Hm(s):null;c&&w();function w(){const v=Hm(s);g&&!F5(g,v)&&e(),g=v,m=requestAnimationFrame(w)}return e(),()=>{var v;h.forEach(b=>{i&&b.removeEventListener("scroll",e),r&&b.removeEventListener("resize",e)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const Vst=dst,Hst=fst,zst=cst,Wst=gst,Gst=ust,dU=lst,qst=pst,Kst=(s,t,e)=>{const n=new Map,i={platform:$st,...e},r={...i.platform,_c:n};return ast(s,t,{...i,platform:r})};var Xst=typeof document<"u",Yst=function(){},dT=Xst?C.useLayoutEffect:Yst;function ek(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let e,n,i;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(e=s.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!ek(s[n],t[n]))return!1;return!0}if(i=Object.keys(s),e=i.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=e;n--!==0;){const r=i[n];if(!(r==="_owner"&&s.$$typeof)&&!ek(s[r],t[r]))return!1}return!0}return s!==s&&t!==t}function j5(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function fU(s,t){const e=j5(s);return Math.round(t*e)/e}function rD(s){const t=C.useRef(s);return dT(()=>{t.current=s}),t}function Qst(s){s===void 0&&(s={});const{placement:t="bottom",strategy:e="absolute",middleware:n=[],platform:i,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=s,[h,d]=C.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=C.useState(n);ek(f,n)||p(n);const[m,g]=C.useState(null),[w,v]=C.useState(null),b=C.useCallback(F=>{F!==P.current&&(P.current=F,g(F))},[]),x=C.useCallback(F=>{F!==k.current&&(k.current=F,v(F))},[]),E=r||m,T=o||w,P=C.useRef(null),k=C.useRef(null),R=C.useRef(h),M=c!=null,D=rD(c),L=rD(i),$=rD(u),U=C.useCallback(()=>{if(!P.current||!k.current)return;const F={placement:t,strategy:e,middleware:f};L.current&&(F.platform=L.current),Kst(P.current,k.current,F).then(O=>{const V={...O,isPositioned:$.current!==!1};I.current&&!ek(R.current,V)&&(R.current=V,R1.flushSync(()=>{d(V)}))})},[f,t,e,L,$]);dT(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d(F=>({...F,isPositioned:!1})))},[u]);const I=C.useRef(!1);dT(()=>(I.current=!0,()=>{I.current=!1}),[]),dT(()=>{if(E&&(P.current=E),T&&(k.current=T),E&&T){if(D.current)return D.current(E,T,U);U()}},[E,T,U,D,M]);const H=C.useMemo(()=>({reference:P,floating:k,setReference:b,setFloating:x}),[b,x]),N=C.useMemo(()=>({reference:E,floating:T}),[E,T]),j=C.useMemo(()=>{const F={position:e,left:0,top:0};if(!N.floating)return F;const O=fU(N.floating,h.x),V=fU(N.floating,h.y);return a?{...F,transform:"translate("+O+"px, "+V+"px)",...j5(N.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:O,top:V}},[e,a,N.floating,h.x,h.y]);return C.useMemo(()=>({...h,update:U,refs:H,elements:N,floatingStyles:j}),[h,U,H,N,j])}const Jst=s=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:s,fn(e){const{element:n,padding:i}=typeof s=="function"?s(e):s;return n&&t(n)?n.current!=null?dU({element:n.current,padding:i}).fn(e):{}:n?dU({element:n,padding:i}).fn(e):{}}}},Zst=(s,t)=>({...Vst(s),options:[s,t]}),tit=(s,t)=>({...Hst(s),options:[s,t]}),eit=(s,t)=>({...qst(s),options:[s,t]}),nit=(s,t)=>({...zst(s),options:[s,t]}),sit=(s,t)=>({...Wst(s),options:[s,t]}),iit=(s,t)=>({...Gst(s),options:[s,t]}),rit=(s,t)=>({...Jst(s),options:[s,t]});var oit="Arrow",$5=C.forwardRef((s,t)=>{const{children:e,width:n=10,height:i=5,...r}=s;return _.jsx(Ut.svg,{...r,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?e:_.jsx("polygon",{points:"0,0 30,0 15,10"})})});$5.displayName=oit;var ait=$5;function lit(s){const[t,e]=C.useState(void 0);return Fo(()=>{if(s){e({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let o,a;if("borderBoxSize"in r){const c=r.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=s.offsetWidth,a=s.offsetHeight;e({width:o,height:a})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else e(void 0)},[s]),t}var F2="Popper",[B5,BR]=$a(F2),[cit,U5]=B5(F2),V5=s=>{const{__scopePopper:t,children:e}=s,[n,i]=C.useState(null);return _.jsx(cit,{scope:t,anchor:n,onAnchorChange:i,children:e})};V5.displayName=F2;var H5="PopperAnchor",z5=C.forwardRef((s,t)=>{const{__scopePopper:e,virtualRef:n,...i}=s,r=U5(H5,e),o=C.useRef(null),a=nn(t,o);return C.useEffect(()=>{r.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:_.jsx(Ut.div,{...i,ref:a})});z5.displayName=H5;var j2="PopperContent",[uit,hit]=B5(j2),W5=C.forwardRef((s,t)=>{var q,Se,Qt,_e,Lt,Is;const{__scopePopper:e,side:n="bottom",sideOffset:i=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=s,w=U5(j2,e),[v,b]=C.useState(null),x=nn(t,Wt=>b(Wt)),[E,T]=C.useState(null),P=lit(E),k=(P==null?void 0:P.width)??0,R=(P==null?void 0:P.height)??0,M=n+(r!=="center"?"-"+r:""),D=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},L=Array.isArray(u)?u:[u],$=L.length>0,U={padding:D,boundary:L.filter(fit),altBoundary:$},{refs:I,floatingStyles:H,placement:N,isPositioned:j,middlewareData:F}=Qst({strategy:"fixed",placement:M,whileElementsMounted:(...Wt)=>Ust(...Wt,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[Zst({mainAxis:i+R,alignmentAxis:o}),c&&tit({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?eit():void 0,...U}),c&&nit({...U}),sit({...U,apply:({elements:Wt,rects:Jt,availableWidth:ke,availableHeight:Ln})=>{const{width:sn,height:If}=Jt.reference,eh=Wt.floating.style;eh.setProperty("--radix-popper-available-width",`${ke}px`),eh.setProperty("--radix-popper-available-height",`${Ln}px`),eh.setProperty("--radix-popper-anchor-width",`${sn}px`),eh.setProperty("--radix-popper-anchor-height",`${If}px`)}}),E&&rit({element:E,padding:a}),pit({arrowWidth:k,arrowHeight:R}),f&&iit({strategy:"referenceHidden",...U})]}),[O,V]=K5(N),X=Ji(m);Fo(()=>{j&&(X==null||X())},[j,X]);const z=(q=F.arrow)==null?void 0:q.x,W=(Se=F.arrow)==null?void 0:Se.y,et=((Qt=F.arrow)==null?void 0:Qt.centerOffset)!==0,[wt,ft]=C.useState();return Fo(()=>{v&&ft(window.getComputedStyle(v).zIndex)},[v]),_.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:j?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:wt,"--radix-popper-transform-origin":[(_e=F.transformOrigin)==null?void 0:_e.x,(Lt=F.transformOrigin)==null?void 0:Lt.y].join(" "),...((Is=F.hide)==null?void 0:Is.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:_.jsx(uit,{scope:e,placedSide:O,onArrowChange:T,arrowX:z,arrowY:W,shouldHideArrow:et,children:_.jsx(Ut.div,{"data-side":O,"data-align":V,...g,ref:x,style:{...g.style,animation:j?void 0:"none"}})})})});W5.displayName=j2;var G5="PopperArrow",dit={top:"bottom",right:"left",bottom:"top",left:"right"},q5=C.forwardRef(function(t,e){const{__scopePopper:n,...i}=t,r=hit(G5,n),o=dit[r.placedSide];return _.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:_.jsx(ait,{...i,ref:e,style:{...i.style,display:"block"}})})});q5.displayName=G5;function fit(s){return s!==null}var pit=s=>({name:"transformOrigin",options:s,fn(t){var w,v,b;const{placement:e,rects:n,middlewareData:i}=t,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:s.arrowWidth,c=o?0:s.arrowHeight,[u,h]=K5(e),d={start:"0%",center:"50%",end:"100%"}[h],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+c/2;let m="",g="";return u==="bottom"?(m=o?d:`${f}px`,g=`${-c}px`):u==="top"?(m=o?d:`${f}px`,g=`${n.floating.height+c}px`):u==="right"?(m=`${-c}px`,g=o?d:`${p}px`):u==="left"&&(m=`${n.floating.width+c}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function K5(s){const[t,e="center"]=s.split("-");return[t,e]}var git=V5,X5=z5,Y5=W5,Q5=q5,[UR,FAt]=$a("Tooltip",[BR]),$2=BR(),J5="TooltipProvider",mit=700,pU="tooltip.open",[yit,Z5]=UR(J5),tG=s=>{const{__scopeTooltip:t,delayDuration:e=mit,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:r}=s,o=C.useRef(!0),a=C.useRef(!1),c=C.useRef(0);return C.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),_.jsx(yit,{scope:t,isOpenDelayedRef:o,delayDuration:e,onOpen:C.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:C.useCallback(u=>{a.current=u},[]),disableHoverableContent:i,children:r})};tG.displayName=J5;var eG="Tooltip",[jAt,VR]=UR(eG),rL="TooltipTrigger",vit=C.forwardRef((s,t)=>{const{__scopeTooltip:e,...n}=s,i=VR(rL,e),r=Z5(rL,e),o=$2(e),a=C.useRef(null),c=nn(t,a,i.onTriggerChange),u=C.useRef(!1),h=C.useRef(!1),d=C.useCallback(()=>u.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),_.jsx(X5,{asChild:!0,...o,children:_.jsx(Ut.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:ct(s.onPointerMove,f=>{f.pointerType!=="touch"&&!h.current&&!r.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:ct(s.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:ct(s.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ct(s.onFocus,()=>{u.current||i.onOpen()}),onBlur:ct(s.onBlur,i.onClose),onClick:ct(s.onClick,i.onClose)})})});vit.displayName=rL;var wit="TooltipPortal",[$At,bit]=UR(wit,{forceMount:void 0}),_b="TooltipContent",nG=C.forwardRef((s,t)=>{const e=bit(_b,s.__scopeTooltip),{forceMount:n=e.forceMount,side:i="top",...r}=s,o=VR(_b,s.__scopeTooltip);return _.jsx(Ba,{present:n||o.open,children:o.disableHoverableContent?_.jsx(sG,{side:i,...r,ref:t}):_.jsx(Ait,{side:i,...r,ref:t})})}),Ait=C.forwardRef((s,t)=>{const e=VR(_b,s.__scopeTooltip),n=Z5(_b,s.__scopeTooltip),i=C.useRef(null),r=nn(t,i),[o,a]=C.useState(null),{trigger:c,onClose:u}=e,h=i.current,{onPointerInTransitChange:d}=n,f=C.useCallback(()=>{a(null),d(!1)},[d]),p=C.useCallback((m,g)=>{const w=m.currentTarget,v={x:m.clientX,y:m.clientY},b=Cit(v,w.getBoundingClientRect()),x=Tit(v,b),E=Pit(g.getBoundingClientRect()),T=Rit([...x,...E]);a(T),d(!0)},[d]);return C.useEffect(()=>()=>f(),[f]),C.useEffect(()=>{if(c&&h){const m=w=>p(w,h),g=w=>p(w,c);return c.addEventListener("pointerleave",m),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),h.removeEventListener("pointerleave",g)}}},[c,h,p,f]),C.useEffect(()=>{if(o){const m=g=>{const w=g.target,v={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),x=!kit(v,o);b?f():x&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,h,o,u,f]),_.jsx(sG,{...s,ref:r})}),[xit,Sit]=UR(eG,{isInside:!1}),_it=HW("TooltipContent"),sG=C.forwardRef((s,t)=>{const{__scopeTooltip:e,children:n,"aria-label":i,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=s,c=VR(_b,e),u=$2(e),{onClose:h}=c;return C.useEffect(()=>(document.addEventListener(pU,h),()=>document.removeEventListener(pU,h)),[h]),C.useEffect(()=>{if(c.trigger){const d=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&h()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,h]),_.jsx(M1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:h,children:_.jsxs(Y5,{"data-state":c.stateAttribute,...u,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[_.jsx(_it,{children:n}),_.jsx(xit,{scope:e,isInside:!0,children:_.jsx(qtt,{id:c.contentId,role:"tooltip",children:i||n})})]})})});nG.displayName=_b;var iG="TooltipArrow",Eit=C.forwardRef((s,t)=>{const{__scopeTooltip:e,...n}=s,i=$2(e);return Sit(iG,e).isInside?null:_.jsx(Q5,{...i,...n,ref:t})});Eit.displayName=iG;function Cit(s,t){const e=Math.abs(t.top-s.y),n=Math.abs(t.bottom-s.y),i=Math.abs(t.right-s.x),r=Math.abs(t.left-s.x);switch(Math.min(e,n,i,r)){case r:return"left";case i:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Tit(s,t,e=5){const n=[];switch(t){case"top":n.push({x:s.x-e,y:s.y+e},{x:s.x+e,y:s.y+e});break;case"bottom":n.push({x:s.x-e,y:s.y-e},{x:s.x+e,y:s.y-e});break;case"left":n.push({x:s.x+e,y:s.y-e},{x:s.x+e,y:s.y+e});break;case"right":n.push({x:s.x-e,y:s.y-e},{x:s.x-e,y:s.y+e});break}return n}function Pit(s){const{top:t,right:e,bottom:n,left:i}=s;return[{x:i,y:t},{x:e,y:t},{x:e,y:n},{x:i,y:n}]}function kit(s,t){const{x:e,y:n}=s;let i=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r],c=t[o],u=a.x,h=a.y,d=c.x,f=c.y;h>n!=f>n&&e<(d-u)*(n-h)/(f-h)+u&&(i=!i)}return i}function Rit(s){const t=s.slice();return t.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),Mit(t)}function Mit(s){if(s.length<=1)return s.slice();const t=[];for(let n=0;n<s.length;n++){const i=s[n];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const e=[];for(let n=s.length-1;n>=0;n--){const i=s[n];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}var Dit=tG,rG=nG;const Iit=Dit,Lit=C.forwardRef(({className:s,sideOffset:t=4,...e},n)=>_.jsx(rG,{ref:n,sideOffset:t,className:dt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...e}));Lit.displayName=rG.displayName;var HR=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zR=typeof window>"u"||"Deno"in globalThis;function Ko(){}function Nit(s,t){return typeof s=="function"?s(t):s}function Oit(s){return typeof s=="number"&&s>=0&&s!==1/0}function Fit(s,t){return Math.max(s+(t||0)-Date.now(),0)}function oL(s,t){return typeof s=="function"?s(t):s}function jit(s,t){return typeof s=="function"?s(t):s}function gU(s,t){const{type:e="all",exact:n,fetchStatus:i,predicate:r,queryKey:o,stale:a}=s;if(o){if(n){if(t.queryHash!==B2(o,t.options))return!1}else if(!Kx(t.queryKey,o))return!1}if(e!=="all"){const c=t.isActive();if(e==="active"&&!c||e==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||r&&!r(t))}function mU(s,t){const{exact:e,status:n,predicate:i,mutationKey:r}=s;if(r){if(!t.options.mutationKey)return!1;if(e){if(qx(t.options.mutationKey)!==qx(r))return!1}else if(!Kx(t.options.mutationKey,r))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function B2(s,t){return((t==null?void 0:t.queryKeyHashFn)||qx)(s)}function qx(s){return JSON.stringify(s,(t,e)=>aL(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e)}function Kx(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(e=>Kx(s[e],t[e])):!1}function oG(s,t){if(s===t)return s;const e=yU(s)&&yU(t);if(e||aL(s)&&aL(t)){const n=e?s:Object.keys(s),i=n.length,r=e?t:Object.keys(t),o=r.length,a=e?[]:{},c=new Set(n);let u=0;for(let h=0;h<o;h++){const d=e?h:r[h];(!e&&c.has(d)||e)&&s[d]===void 0&&t[d]===void 0?(a[d]=void 0,u++):(a[d]=oG(s[d],t[d]),a[d]===s[d]&&s[d]!==void 0&&u++)}return i===o&&u===i?s:a}return t}function yU(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function aL(s){if(!vU(s))return!1;const t=s.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!vU(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function vU(s){return Object.prototype.toString.call(s)==="[object Object]"}function $it(s){return new Promise(t=>{setTimeout(t,s)})}function Bit(s,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(s,t):e.structuralSharing!==!1?oG(s,t):t}function Uit(s,t,e=0){const n=[...s,t];return e&&n.length>e?n.slice(1):n}function Vit(s,t,e=0){const n=[t,...s];return e&&n.length>e?n.slice(0,-1):n}var U2=Symbol();function aG(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===U2?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var cp,Eh,Cv,j3,Hit=(j3=class extends HR{constructor(){super();A(this,cp);A(this,Eh);A(this,Cv);y(this,Cv,t=>{if(!zR&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){l(this,Eh)||this.setEventListener(l(this,Cv))}onUnsubscribe(){var t;this.hasListeners()||((t=l(this,Eh))==null||t.call(this),y(this,Eh,void 0))}setEventListener(t){var e;y(this,Cv,t),(e=l(this,Eh))==null||e.call(this),y(this,Eh,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){l(this,cp)!==t&&(y(this,cp,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof l(this,cp)=="boolean"?l(this,cp):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},cp=new WeakMap,Eh=new WeakMap,Cv=new WeakMap,j3),lG=new Hit,Tv,Ch,Pv,$3,zit=($3=class extends HR{constructor(){super();A(this,Tv,!0);A(this,Ch);A(this,Pv);y(this,Pv,t=>{if(!zR&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){l(this,Ch)||this.setEventListener(l(this,Pv))}onUnsubscribe(){var t;this.hasListeners()||((t=l(this,Ch))==null||t.call(this),y(this,Ch,void 0))}setEventListener(t){var e;y(this,Pv,t),(e=l(this,Ch))==null||e.call(this),y(this,Ch,t(this.setOnline.bind(this)))}setOnline(t){l(this,Tv)!==t&&(y(this,Tv,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return l(this,Tv)}},Tv=new WeakMap,Ch=new WeakMap,Pv=new WeakMap,$3),nk=new zit;function Wit(){let s,t;const e=new Promise((i,r)=>{s=i,t=r});e.status="pending",e.catch(()=>{});function n(i){Object.assign(e,i),delete e.resolve,delete e.reject}return e.resolve=i=>{n({status:"fulfilled",value:i}),s(i)},e.reject=i=>{n({status:"rejected",reason:i}),t(i)},e}function Git(s){return Math.min(1e3*2**s,3e4)}function cG(s){return(s??"online")==="online"?nk.isOnline():!0}var uG=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function oD(s){return s instanceof uG}function hG(s){let t=!1,e=0,n=!1,i;const r=Wit(),o=g=>{var w;n||(f(new uG(g)),(w=s.abort)==null||w.call(s))},a=()=>{t=!0},c=()=>{t=!1},u=()=>lG.isFocused()&&(s.networkMode==="always"||nk.isOnline())&&s.canRun(),h=()=>cG(s.networkMode)&&s.canRun(),d=g=>{var w;n||(n=!0,(w=s.onSuccess)==null||w.call(s,g),i==null||i(),r.resolve(g))},f=g=>{var w;n||(n=!0,(w=s.onError)==null||w.call(s,g),i==null||i(),r.reject(g))},p=()=>new Promise(g=>{var w;i=v=>{(n||u())&&g(v)},(w=s.onPause)==null||w.call(s)}).then(()=>{var g;i=void 0,n||(g=s.onContinue)==null||g.call(s)}),m=()=>{if(n)return;let g;const w=e===0?s.initialPromise:void 0;try{g=w??s.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var P;if(n)return;const b=s.retry??(zR?0:3),x=s.retryDelay??Git,E=typeof x=="function"?x(e,v):x,T=b===!0||typeof b=="number"&&e<b||typeof b=="function"&&b(e,v);if(t||!T){f(v);return}e++,(P=s.onFail)==null||P.call(s,e,v),$it(E).then(()=>u()?void 0:p()).then(()=>{t?f(v):m()})})};return{promise:r,cancel:o,continue:()=>(i==null||i(),r),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?m():p().then(m),r)}}var qit=s=>setTimeout(s,0);function Kit(){let s=[],t=0,e=a=>{a()},n=a=>{a()},i=qit;const r=a=>{t?s.push(a):i(()=>{e(a)})},o=()=>{const a=s;s=[],a.length&&i(()=>{n(()=>{a.forEach(c=>{e(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||o()}return c},batchCalls:a=>(...c)=>{r(()=>{a(...c)})},schedule:r,setNotifyFunction:a=>{e=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var yi=Kit(),up,B3,dG=(B3=class{constructor(){A(this,up)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Oit(this.gcTime)&&y(this,up,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(zR?1/0:5*60*1e3))}clearGcTimeout(){l(this,up)&&(clearTimeout(l(this,up)),y(this,up,void 0))}},up=new WeakMap,B3),kv,hp,so,dp,Bs,vS,fp,Qo,lc,U3,Xit=(U3=class extends dG{constructor(t){super();A(this,Qo);A(this,kv);A(this,hp);A(this,so);A(this,dp);A(this,Bs);A(this,vS);A(this,fp);y(this,fp,!1),y(this,vS,t.defaultOptions),this.setOptions(t.options),this.observers=[],y(this,dp,t.client),y(this,so,l(this,dp).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,y(this,kv,Qit(this.options)),this.state=t.state??l(this,kv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=l(this,Bs))==null?void 0:t.promise}setOptions(t){this.options={...l(this,vS),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&l(this,so).remove(this)}setData(t,e){const n=Bit(this.state.data,t,this.options);return S(this,Qo,lc).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(t,e){S(this,Qo,lc).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var n,i;const e=(n=l(this,Bs))==null?void 0:n.promise;return(i=l(this,Bs))==null||i.cancel(t),e?e.then(Ko).catch(Ko):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(l(this,kv))}isActive(){return this.observers.some(t=>jit(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>oL(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Fit(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=l(this,Bs))==null||e.continue()}onOnline(){var e;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=l(this,Bs))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),l(this,so).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(l(this,Bs)&&(l(this,fp)?l(this,Bs).cancel({revert:!0}):l(this,Bs).cancelRetry()),this.scheduleGc()),l(this,so).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||S(this,Qo,lc).call(this,{type:"invalidate"})}fetch(t,e){var u,h,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(l(this,Bs))return l(this,Bs).continueRetry(),l(this,Bs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(y(this,fp,!0),n.signal)})},r=()=>{const f=aG(this.options,e),m=(()=>{const g={client:l(this,dp),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return y(this,fp,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a=(()=>{const f={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:l(this,dp),state:this.state,fetchFn:r};return i(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),y(this,hp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&S(this,Qo,lc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=f=>{var p,m,g,w;oD(f)&&f.silent||S(this,Qo,lc).call(this,{type:"error",error:f}),oD(f)||((m=(p=l(this,so).config).onError)==null||m.call(p,f,this),(w=(g=l(this,so).config).onSettled)==null||w.call(g,this.state.data,f,this)),this.scheduleGc()};return y(this,Bs,hG({initialPromise:e==null?void 0:e.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var p,m,g,w;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(v){c(v);return}(m=(p=l(this,so).config).onSuccess)==null||m.call(p,f,this),(w=(g=l(this,so).config).onSettled)==null||w.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{S(this,Qo,lc).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{S(this,Qo,lc).call(this,{type:"pause"})},onContinue:()=>{S(this,Qo,lc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),l(this,Bs).start()}},kv=new WeakMap,hp=new WeakMap,so=new WeakMap,dp=new WeakMap,Bs=new WeakMap,vS=new WeakMap,fp=new WeakMap,Qo=new WeakSet,lc=function(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Yit(n.data,this.options),fetchMeta:t.meta??null};case"success":return y(this,hp,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return oD(i)&&i.revert&&l(this,hp)?{...l(this,hp),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),yi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),l(this,so).notify({query:this,type:"updated",action:t})})},U3);function Yit(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cG(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Qit(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,e=t!==void 0,n=e?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var Ja,V3,Jit=(V3=class extends HR{constructor(t={}){super();A(this,Ja);this.config=t,y(this,Ja,new Map)}build(t,e,n){const i=e.queryKey,r=e.queryHash??B2(i,e);let o=this.get(r);return o||(o=new Xit({client:t,queryKey:i,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){l(this,Ja).has(t.queryHash)||(l(this,Ja).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=l(this,Ja).get(t.queryHash);e&&(t.destroy(),e===t&&l(this,Ja).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return l(this,Ja).get(t)}getAll(){return[...l(this,Ja).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>gU(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>gU(t,n)):e}notify(t){yi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ja=new WeakMap,V3),Za,li,pp,tl,hh,H3,Zit=(H3=class extends dG{constructor(t){super();A(this,tl);A(this,Za);A(this,li);A(this,pp);this.mutationId=t.mutationId,y(this,li,t.mutationCache),y(this,Za,[]),this.state=t.state||trt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){l(this,Za).includes(t)||(l(this,Za).push(t),this.clearGcTimeout(),l(this,li).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){y(this,Za,l(this,Za).filter(e=>e!==t)),this.scheduleGc(),l(this,li).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){l(this,Za).length||(this.state.status==="pending"?this.scheduleGc():l(this,li).remove(this))}continue(){var t;return((t=l(this,pp))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var r,o,a,c,u,h,d,f,p,m,g,w,v,b,x,E,T,P,k,R;const e=()=>{S(this,tl,hh).call(this,{type:"continue"})};y(this,pp,hG({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,D)=>{S(this,tl,hh).call(this,{type:"failed",failureCount:M,error:D})},onPause:()=>{S(this,tl,hh).call(this,{type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>l(this,li).canRun(this)}));const n=this.state.status==="pending",i=!l(this,pp).canStart();try{if(n)e();else{S(this,tl,hh).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(r=l(this,li).config).onMutate)==null?void 0:o.call(r,t,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t));D!==this.state.context&&S(this,tl,hh).call(this,{type:"pending",context:D,variables:t,isPaused:i})}const M=await l(this,pp).start();return await((h=(u=l(this,li).config).onSuccess)==null?void 0:h.call(u,M,t,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,M,t,this.state.context)),await((m=(p=l(this,li).config).onSettled)==null?void 0:m.call(p,M,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,M,null,t,this.state.context)),S(this,tl,hh).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(v=l(this,li).config).onError)==null?void 0:b.call(v,M,t,this.state.context,this)),await((E=(x=this.options).onError)==null?void 0:E.call(x,M,t,this.state.context)),await((P=(T=l(this,li).config).onSettled)==null?void 0:P.call(T,void 0,M,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,M,t,this.state.context)),M}finally{S(this,tl,hh).call(this,{type:"error",error:M})}}finally{l(this,li).runNext(this)}}},Za=new WeakMap,li=new WeakMap,pp=new WeakMap,tl=new WeakSet,hh=function(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),yi.batch(()=>{l(this,Za).forEach(n=>{n.onMutationUpdate(t)}),l(this,li).notify({mutation:this,type:"updated",action:t})})},H3);function trt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bc,Jo,wS,z3,ert=(z3=class extends HR{constructor(t={}){super();A(this,bc);A(this,Jo);A(this,wS);this.config=t,y(this,bc,new Set),y(this,Jo,new Map),y(this,wS,0)}build(t,e,n){const i=new Zit({mutationCache:this,mutationId:++$t(this,wS)._,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){l(this,bc).add(t);const e=_C(t);if(typeof e=="string"){const n=l(this,Jo).get(e);n?n.push(t):l(this,Jo).set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(l(this,bc).delete(t)){const e=_C(t);if(typeof e=="string"){const n=l(this,Jo).get(e);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&l(this,Jo).delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=_C(t);if(typeof e=="string"){const n=l(this,Jo).get(e),i=n==null?void 0:n.find(r=>r.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const e=_C(t);if(typeof e=="string"){const i=(n=l(this,Jo).get(e))==null?void 0:n.find(r=>r!==t&&r.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yi.batch(()=>{l(this,bc).forEach(t=>{this.notify({type:"removed",mutation:t})}),l(this,bc).clear(),l(this,Jo).clear()})}getAll(){return Array.from(l(this,bc))}find(t){const e={exact:!0,...t};return this.getAll().find(n=>mU(e,n))}findAll(t={}){return this.getAll().filter(e=>mU(t,e))}notify(t){yi.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return yi.batch(()=>Promise.all(t.map(e=>e.continue().catch(Ko))))}},bc=new WeakMap,Jo=new WeakMap,wS=new WeakMap,z3);function _C(s){var t;return(t=s.options.scope)==null?void 0:t.id}function wU(s){return{onFetch:(t,e)=>{var h,d,f,p,m;const n=t.options,i=(f=(d=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,r=((p=t.state.data)==null?void 0:p.pages)||[],o=((m=t.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=aG(t.options,t.fetchOptions),b=async(x,E,T)=>{if(g)return Promise.reject();if(E==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const L={client:t.client,queryKey:t.queryKey,pageParam:E,direction:T?"backward":"forward",meta:t.options.meta};return w(L),L})(),R=await v(k),{maxPages:M}=t.options,D=T?Vit:Uit;return{pages:D(x.pages,R,M),pageParams:D(x.pageParams,E,M)}};if(i&&r.length){const x=i==="backward",E=x?nrt:bU,T={pages:r,pageParams:o},P=E(n,T);a=await b(T,P,x)}else{const x=s??r.length;do{const E=c===0?o[0]??n.initialPageParam:bU(n,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<x)}return a};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=u}}}function bU(s,{pages:t,pageParams:e}){const n=t.length-1;return t.length>0?s.getNextPageParam(t[n],t,e[n],e):void 0}function nrt(s,{pages:t,pageParams:e}){var n;return t.length>0?(n=s.getPreviousPageParam)==null?void 0:n.call(s,t[0],t,e[0],e):void 0}var rn,Th,Ph,Rv,Mv,kh,Dv,Iv,W3,srt=(W3=class{constructor(s={}){A(this,rn);A(this,Th);A(this,Ph);A(this,Rv);A(this,Mv);A(this,kh);A(this,Dv);A(this,Iv);y(this,rn,s.queryCache||new Jit),y(this,Th,s.mutationCache||new ert),y(this,Ph,s.defaultOptions||{}),y(this,Rv,new Map),y(this,Mv,new Map),y(this,kh,0)}mount(){$t(this,kh)._++,l(this,kh)===1&&(y(this,Dv,lG.subscribe(async s=>{s&&(await this.resumePausedMutations(),l(this,rn).onFocus())})),y(this,Iv,nk.subscribe(async s=>{s&&(await this.resumePausedMutations(),l(this,rn).onOnline())})))}unmount(){var s,t;$t(this,kh)._--,l(this,kh)===0&&((s=l(this,Dv))==null||s.call(this),y(this,Dv,void 0),(t=l(this,Iv))==null||t.call(this),y(this,Iv,void 0))}isFetching(s){return l(this,rn).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return l(this,Th).findAll({...s,status:"pending"}).length}getQueryData(s){var e;const t=this.defaultQueryOptions({queryKey:s});return(e=l(this,rn).get(t.queryHash))==null?void 0:e.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),e=l(this,rn).build(this,t),n=e.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&e.isStaleByTime(oL(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(s){return l(this,rn).findAll(s).map(({queryKey:t,state:e})=>{const n=e.data;return[t,n]})}setQueryData(s,t,e){const n=this.defaultQueryOptions({queryKey:s}),i=l(this,rn).get(n.queryHash),r=i==null?void 0:i.state.data,o=Nit(t,r);if(o!==void 0)return l(this,rn).build(this,n).setData(o,{...e,manual:!0})}setQueriesData(s,t,e){return yi.batch(()=>l(this,rn).findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,t,e)]))}getQueryState(s){var e;const t=this.defaultQueryOptions({queryKey:s});return(e=l(this,rn).get(t.queryHash))==null?void 0:e.state}removeQueries(s){const t=l(this,rn);yi.batch(()=>{t.findAll(s).forEach(e=>{t.remove(e)})})}resetQueries(s,t){const e=l(this,rn);return yi.batch(()=>(e.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const e={revert:!0,...t},n=yi.batch(()=>l(this,rn).findAll(s).map(i=>i.cancel(e)));return Promise.all(n).then(Ko).catch(Ko)}invalidateQueries(s,t={}){return yi.batch(()=>(l(this,rn).findAll(s).forEach(e=>{e.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},t)))}refetchQueries(s,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},n=yi.batch(()=>l(this,rn).findAll(s).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let r=i.fetch(void 0,e);return e.throwOnError||(r=r.catch(Ko)),i.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(n).then(Ko)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const e=l(this,rn).build(this,t);return e.isStaleByTime(oL(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ko).catch(Ko)}fetchInfiniteQuery(s){return s.behavior=wU(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ko).catch(Ko)}ensureInfiniteQueryData(s){return s.behavior=wU(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return nk.isOnline()?l(this,Th).resumePausedMutations():Promise.resolve()}getQueryCache(){return l(this,rn)}getMutationCache(){return l(this,Th)}getDefaultOptions(){return l(this,Ph)}setDefaultOptions(s){y(this,Ph,s)}setQueryDefaults(s,t){l(this,Rv).set(qx(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...l(this,Rv).values()],e={};return t.forEach(n=>{Kx(s,n.queryKey)&&Object.assign(e,n.defaultOptions)}),e}setMutationDefaults(s,t){l(this,Mv).set(qx(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...l(this,Mv).values()],e={};return t.forEach(n=>{Kx(s,n.mutationKey)&&Object.assign(e,n.defaultOptions)}),e}defaultQueryOptions(s){if(s._defaulted)return s;const t={...l(this,Ph).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=B2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===U2&&(t.enabled=!1),t}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...l(this,Ph).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){l(this,rn).clear(),l(this,Th).clear()}},rn=new WeakMap,Th=new WeakMap,Ph=new WeakMap,Rv=new WeakMap,Mv=new WeakMap,kh=new WeakMap,Dv=new WeakMap,Iv=new WeakMap,W3),irt=C.createContext(void 0),rrt=({client:s,children:t})=>(C.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),_.jsx(irt.Provider,{value:s,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xx(){return Xx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},Xx.apply(this,arguments)}var nf;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(nf||(nf={}));const AU="popstate";function ort(s){s===void 0&&(s={});function t(n,i){let{pathname:r,search:o,hash:a}=n.location;return lL("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:sk(i)}return lrt(t,e,null,s)}function Mn(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function fG(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function art(){return Math.random().toString(36).substr(2,8)}function xU(s,t){return{usr:s.state,key:s.key,idx:t}}function lL(s,t,e,n){return e===void 0&&(e=null),Xx({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?$b(t):t,{state:e,key:t&&t.key||n||art()})}function sk(s){let{pathname:t="/",search:e="",hash:n=""}=s;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $b(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substr(e),s=s.substr(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substr(n),s=s.substr(0,n)),s&&(t.pathname=s)}return t}function lrt(s,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:r=!1}=n,o=i.history,a=nf.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Xx({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=nf.Pop;let w=h(),v=w==null?null:w-u;u=w,c&&c({action:a,location:g.location,delta:v})}function f(w,v){a=nf.Push;let b=lL(g.location,w,v);u=h()+1;let x=xU(b,u),E=g.createHref(b);try{o.pushState(x,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}r&&c&&c({action:a,location:g.location,delta:1})}function p(w,v){a=nf.Replace;let b=lL(g.location,w,v);u=h();let x=xU(b,u),E=g.createHref(b);o.replaceState(x,"",E),r&&c&&c({action:a,location:g.location,delta:0})}function m(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:sk(w);return b=b.replace(/ $/,"%20"),Mn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let g={get action(){return a},get location(){return s(i,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(AU,d),c=w,()=>{i.removeEventListener(AU,d),c=null}},createHref(w){return t(i,w)},createURL:m,encodeLocation(w){let v=m(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return g}var SU;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(SU||(SU={}));function crt(s,t,e){return e===void 0&&(e="/"),urt(s,t,e,!1)}function urt(s,t,e,n){let i=typeof t=="string"?$b(t):t,r=V2(i.pathname||"/",e);if(r==null)return null;let o=pG(s);hrt(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=xrt(r);a=brt(o[c],u,n)}return a}function pG(s,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(r,o,a)=>{let c={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};c.relativePath.startsWith("/")&&(Mn(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=df([n,c.relativePath]),h=e.concat(c);r.children&&r.children.length>0&&(Mn(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pG(r.children,t,h,u)),!(r.path==null&&!r.index)&&t.push({path:u,score:vrt(u,r.index),routesMeta:h})};return s.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))i(r,o);else for(let c of gG(r.path))i(r,o,c)}),t}function gG(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let o=gG(n.join("/")),a=[];return a.push(...o.map(c=>c===""?r:[r,c].join("/"))),i&&a.push(...o),a.map(c=>s.startsWith("/")&&c===""?"/":c)}function hrt(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:wrt(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const drt=/^:[\w-]+$/,frt=3,prt=2,grt=1,mrt=10,yrt=-2,_U=s=>s==="*";function vrt(s,t){let e=s.split("/"),n=e.length;return e.some(_U)&&(n+=yrt),t&&(n+=prt),e.filter(i=>!_U(i)).reduce((i,r)=>i+(drt.test(r)?frt:r===""?grt:mrt),n)}function wrt(s,t){return s.length===t.length&&s.slice(0,-1).every((n,i)=>n===t[i])?s[s.length-1]-t[t.length-1]:0}function brt(s,t,e){let{routesMeta:n}=s,i={},r="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],u=a===n.length-1,h=r==="/"?t:t.slice(r.length)||"/",d=EU({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d&&u&&e&&!n[n.length-1].route.index&&(d=EU({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:df([r,d.pathname]),pathnameBase:Crt(df([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=df([r,d.pathnameBase]))}return o}function EU(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=Art(s.path,s.caseSensitive,s.end),i=t.match(e);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let g=a[d]||"";o=r.slice(0,r.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:s}}function Art(s,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),fG(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function xrt(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fG(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function V2(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}function Srt(s,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof s=="string"?$b(s):s;return{pathname:e?e.startsWith("/")?e:_rt(e,t):t,search:Trt(n),hash:Prt(i)}}function _rt(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function aD(s,t,e,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ert(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function mG(s,t){let e=Ert(s);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function yG(s,t,e,n){n===void 0&&(n=!1);let i;typeof s=="string"?i=$b(s):(i=Xx({},s),Mn(!i.pathname||!i.pathname.includes("?"),aD("?","pathname","search",i)),Mn(!i.pathname||!i.pathname.includes("#"),aD("#","pathname","hash",i)),Mn(!i.search||!i.search.includes("#"),aD("#","search","hash",i)));let r=s===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=e;else{let d=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let c=Srt(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const df=s=>s.join("/").replace(/\/\/+/g,"/"),Crt=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Trt=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Prt=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function krt(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const vG=["post","put","patch","delete"];new Set(vG);const Rrt=["get",...vG];new Set(Rrt);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yx(){return Yx=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},Yx.apply(this,arguments)}const H2=C.createContext(null),Mrt=C.createContext(null),ey=C.createContext(null),WR=C.createContext(null),Rf=C.createContext({outlet:null,matches:[],isDataRoute:!1}),wG=C.createContext(null);function Drt(s,t){let{relative:e}=t===void 0?{}:t;O1()||Mn(!1);let{basename:n,navigator:i}=C.useContext(ey),{hash:r,pathname:o,search:a}=AG(s,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:df([n,o])),i.createHref({pathname:c,search:a,hash:r})}function O1(){return C.useContext(WR)!=null}function F1(){return O1()||Mn(!1),C.useContext(WR).location}function bG(s){C.useContext(ey).static||C.useLayoutEffect(s)}function Bb(){let{isDataRoute:s}=C.useContext(Rf);return s?Grt():Irt()}function Irt(){O1()||Mn(!1);let s=C.useContext(H2),{basename:t,future:e,navigator:n}=C.useContext(ey),{matches:i}=C.useContext(Rf),{pathname:r}=F1(),o=JSON.stringify(mG(i,e.v7_relativeSplatPath)),a=C.useRef(!1);return bG(()=>{a.current=!0}),C.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let d=yG(u,JSON.parse(o),r,h.relative==="path");s==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:df([t,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[t,n,o,r,s])}function Lrt(){let{matches:s}=C.useContext(Rf),t=s[s.length-1];return t?t.params:{}}function AG(s,t){let{relative:e}=t===void 0?{}:t,{future:n}=C.useContext(ey),{matches:i}=C.useContext(Rf),{pathname:r}=F1(),o=JSON.stringify(mG(i,n.v7_relativeSplatPath));return C.useMemo(()=>yG(s,JSON.parse(o),r,e==="path"),[s,o,r,e])}function Nrt(s,t){return Ort(s,t)}function Ort(s,t,e,n){O1()||Mn(!1);let{navigator:i}=C.useContext(ey),{matches:r}=C.useContext(Rf),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=F1(),h;if(t){var d;let w=typeof t=="string"?$b(t):t;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Mn(!1),h=w}else h=u;let f=h.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=crt(s,{pathname:p}),g=Urt(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:df([c,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:df([c,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,e,n);return t&&g?C.createElement(WR.Provider,{value:{location:Yx({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:nf.Pop}},g):g}function Frt(){let s=Wrt(),t=krt(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),e?C.createElement("pre",{style:i},e):null,null)}const jrt=C.createElement(Frt,null);class $rt extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?C.createElement(Rf.Provider,{value:this.props.routeContext},C.createElement(wG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Brt(s){let{routeContext:t,match:e,children:n}=s,i=C.useContext(H2);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Rf.Provider,{value:t},n)}function Urt(s,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),s==null){var r;if(!e)return null;if(e.errors)s=e.matches;else if((r=n)!=null&&r.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,a=(i=e)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Mn(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(e&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=e,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let p,m=!1,g=null,w=null;e&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||jrt,c&&(u<0&&f===0?(m=!0,w=null):u===f&&(m=!0,w=d.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,f+1)),b=()=>{let x;return p?x=g:m?x=w:d.route.Component?x=C.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,C.createElement(Brt,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:e!=null},children:x})};return e&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?C.createElement($rt,{location:e.location,revalidation:e.revalidation,component:g,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var xG=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(xG||{}),ik=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(ik||{});function Vrt(s){let t=C.useContext(H2);return t||Mn(!1),t}function Hrt(s){let t=C.useContext(Mrt);return t||Mn(!1),t}function zrt(s){let t=C.useContext(Rf);return t||Mn(!1),t}function SG(s){let t=zrt(),e=t.matches[t.matches.length-1];return e.route.id||Mn(!1),e.route.id}function Wrt(){var s;let t=C.useContext(wG),e=Hrt(ik.UseRouteError),n=SG(ik.UseRouteError);return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function Grt(){let{router:s}=Vrt(xG.UseNavigateStable),t=SG(ik.UseNavigateStable),e=C.useRef(!1);return bG(()=>{e.current=!0}),C.useCallback(function(i,r){r===void 0&&(r={}),e.current&&(typeof i=="number"?s.navigate(i):s.navigate(i,Yx({fromRouteId:t},r)))},[s,t])}function qrt(s,t){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Sy(s){Mn(!1)}function Krt(s){let{basename:t="/",children:e=null,location:n,navigationType:i=nf.Pop,navigator:r,static:o=!1,future:a}=s;O1()&&Mn(!1);let c=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:r,static:o,future:Yx({v7_relativeSplatPath:!1},a)}),[c,a,r,o]);typeof n=="string"&&(n=$b(n));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=n,g=C.useMemo(()=>{let w=V2(h,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:p,key:m},navigationType:i}},[c,h,d,f,p,m,i]);return g==null?null:C.createElement(ey.Provider,{value:u},C.createElement(WR.Provider,{children:e,value:g}))}function Xrt(s){let{children:t,location:e}=s;return Nrt(cL(t),e)}new Promise(()=>{});function cL(s,t){t===void 0&&(t=[]);let e=[];return C.Children.forEach(s,(n,i)=>{if(!C.isValidElement(n))return;let r=[...t,i];if(n.type===C.Fragment){e.push.apply(e,cL(n.props.children,r));return}n.type!==Sy&&Mn(!1),!n.props.index||!n.props.children||Mn(!1);let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=cL(n.props.children,r)),e.push(o)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uL(){return uL=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n])}return s},uL.apply(this,arguments)}function Yrt(s,t){if(s==null)return{};var e={},n=Object.keys(s),i,r;for(r=0;r<n.length;r++)i=n[r],!(t.indexOf(i)>=0)&&(e[i]=s[i]);return e}function Qrt(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Jrt(s,t){return s.button===0&&(!t||t==="_self")&&!Qrt(s)}const Zrt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tot="6";try{window.__reactRouterVersion=tot}catch{}const eot="startTransition",CU=IF[eot];function not(s){let{basename:t,children:e,future:n,window:i}=s,r=C.useRef();r.current==null&&(r.current=ort({window:i,v5Compat:!0}));let o=r.current,[a,c]=C.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=C.useCallback(d=>{u&&CU?CU(()=>c(d)):c(d)},[c,u]);return C.useLayoutEffect(()=>o.listen(h),[o,h]),C.useEffect(()=>qrt(n),[n]),C.createElement(Krt,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o,future:n})}const sot=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iot=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TU=C.forwardRef(function(t,e){let{onClick:n,relative:i,reloadDocument:r,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:d}=t,f=Yrt(t,Zrt),{basename:p}=C.useContext(ey),m,g=!1;if(typeof u=="string"&&iot.test(u)&&(m=u,sot))try{let x=new URL(window.location.href),E=u.startsWith("//")?new URL(x.protocol+u):new URL(u),T=V2(E.pathname,p);E.origin===x.origin&&T!=null?u=T+E.search+E.hash:g=!0}catch{}let w=Drt(u,{relative:i}),v=rot(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:d});function b(x){n&&n(x),x.defaultPrevented||v(x)}return C.createElement("a",uL({},f,{href:m||w,onClick:g||r?n:b,ref:e,target:c}))});var PU;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(PU||(PU={}));var kU;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(kU||(kU={}));function rot(s,t){let{target:e,replace:n,state:i,preventScrollReset:r,relative:o,viewTransition:a}=t===void 0?{}:t,c=Bb(),u=F1(),h=AG(s,{relative:o});return C.useCallback(d=>{if(Jrt(d,e)){d.preventDefault();let f=n!==void 0?n:sk(u)===sk(h);c(s,{replace:f,state:i,preventScrollReset:r,relative:o,viewTransition:a})}},[u,c,h,n,i,e,s,r,o,a])}var zl=function(){return zl=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zl.apply(this,arguments)};function Ub(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]]);return e}function oot(s,t,e,n){function i(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function a(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?r(h.value):i(h.value).then(a,c)}u((n=n.apply(s,t||[])).next())})}function aot(s,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,r;n<i;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return s.concat(r||Array.prototype.slice.call(t))}const lot=s=>s?(...t)=>s(...t):(...t)=>fetch(...t);class z2 extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}}class cot extends z2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class RU extends z2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class MU extends z2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hL;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(hL||(hL={}));class uot{constructor(t,{headers:e={},customFetch:n,region:i=hL.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=lot(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return oot(this,arguments,void 0,function*(e,n={}){var i;let r,o;try{const{headers:a,method:c,body:u,signal:h,timeout:d}=n;let f={},{region:p}=n;p||(p=this.region);const m=new URL(`${this.url}/${e}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let w=h;d&&(o=new AbortController,r=setTimeout(()=>o.abort(),d),h?(w=o.signal,h.addEventListener("abort",()=>o.abort())):w=o.signal);const v=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:g,signal:w}).catch(T=>{throw new cot(T)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new RU(v);if(!v.ok)throw new MU(v);let x=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return x==="application/json"?E=yield v.json():x==="application/octet-stream"||x==="application/pdf"?E=yield v.blob():x==="text/event-stream"?E=v:x==="multipart/form-data"?E=yield v.formData():E=yield v.text(),{data:E,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof MU||a instanceof RU?a.context:void 0}}finally{r&&clearTimeout(r)}})}}var hot=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},dot=class{constructor(s){var t,e;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(t=s.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=s.signal,this.isMaybeSingle=(e=s.isMaybeSingle)!==null&&e!==void 0?e:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,t){return this.headers=new Headers(this.headers),this.headers.set(s,t),this}then(s,t){var e=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{let o=null,a=null,c=null,u=r.status,h=r.statusText;if(r.ok){var d,f;if(e.method!=="HEAD"){var p;const v=await r.text();v===""||(e.headers.get("Accept")==="text/csv"||e.headers.get("Accept")&&(!((p=e.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const g=(d=e.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(f=r.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&w&&w.length>1&&(c=parseInt(w[1])),e.isMaybeSingle&&e.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,h="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const g=await r.text();try{o=JSON.parse(g),Array.isArray(o)&&r.status===404&&(a=[],o=null,u=200,h="OK")}catch{r.status===404&&g===""?(u=204,h="No Content"):o={message:g}}if(o&&e.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&e.shouldThrowOnError)throw new hot(o)}return{error:o,data:a,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(i=i.catch(r=>{var o;let a="";const c=r==null?void 0:r.cause;if(c){var u,h,d,f;const m=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";a=`${(d=r==null?void 0:r.name)!==null&&d!==void 0?d:"FetchError"}: ${r==null?void 0:r.message}`,a+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${m}`,g&&(a+=` (${g})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var p;a=(p=r==null?void 0:r.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(s,t)}returns(){return this}overrideTypes(){return this}},fot=class extends dot{select(s){let t=!1;const e=(s??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",e),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:t=!0,nullsFirst:e,foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.order`:"order",o=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${o?`${o},`:""}${s}.${t?"asc":"desc"}${e===void 0?"":e?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:t,referencedTable:e=t}={}){const n=typeof e>"u"?"limit":`${e}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"offset":`${n}.offset`,r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${s}`),this.url.searchParams.set(r,`${t-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:t=!1,settings:e=!1,buffers:n=!1,wal:i=!1,format:r="text"}={}){var o;const a=[s?"analyze":null,t?"verbose":null,e?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${r}; for="${c}"; options=${a};`),r==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const DU=new RegExp("[,()]");var _y=class extends fot{eq(s,t){return this.url.searchParams.append(s,`eq.${t}`),this}neq(s,t){return this.url.searchParams.append(s,`neq.${t}`),this}gt(s,t){return this.url.searchParams.append(s,`gt.${t}`),this}gte(s,t){return this.url.searchParams.append(s,`gte.${t}`),this}lt(s,t){return this.url.searchParams.append(s,`lt.${t}`),this}lte(s,t){return this.url.searchParams.append(s,`lte.${t}`),this}like(s,t){return this.url.searchParams.append(s,`like.${t}`),this}likeAllOf(s,t){return this.url.searchParams.append(s,`like(all).{${t.join(",")}}`),this}likeAnyOf(s,t){return this.url.searchParams.append(s,`like(any).{${t.join(",")}}`),this}ilike(s,t){return this.url.searchParams.append(s,`ilike.${t}`),this}ilikeAllOf(s,t){return this.url.searchParams.append(s,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(s,t){return this.url.searchParams.append(s,`ilike(any).{${t.join(",")}}`),this}regexMatch(s,t){return this.url.searchParams.append(s,`match.${t}`),this}regexIMatch(s,t){return this.url.searchParams.append(s,`imatch.${t}`),this}is(s,t){return this.url.searchParams.append(s,`is.${t}`),this}isDistinct(s,t){return this.url.searchParams.append(s,`isdistinct.${t}`),this}in(s,t){const e=Array.from(new Set(t)).map(n=>typeof n=="string"&&DU.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${e})`),this}notIn(s,t){const e=Array.from(new Set(t)).map(n=>typeof n=="string"&&DU.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${e})`),this}contains(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cs.{${t.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(t)}`),this}containedBy(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cd.{${t.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(t)}`),this}rangeGt(s,t){return this.url.searchParams.append(s,`sr.${t}`),this}rangeGte(s,t){return this.url.searchParams.append(s,`nxl.${t}`),this}rangeLt(s,t){return this.url.searchParams.append(s,`sl.${t}`),this}rangeLte(s,t){return this.url.searchParams.append(s,`nxr.${t}`),this}rangeAdjacent(s,t){return this.url.searchParams.append(s,`adj.${t}`),this}overlaps(s,t){return typeof t=="string"?this.url.searchParams.append(s,`ov.${t}`):this.url.searchParams.append(s,`ov.{${t.join(",")}}`),this}textSearch(s,t,{config:e,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const r=e===void 0?"":`(${e})`;return this.url.searchParams.append(s,`${i}fts${r}.${t}`),this}match(s){return Object.entries(s).forEach(([t,e])=>{this.url.searchParams.append(t,`eq.${e}`)}),this}not(s,t,e){return this.url.searchParams.append(s,`not.${t}.${e}`),this}or(s,{foreignTable:t,referencedTable:e=t}={}){const n=e?`${e}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,t,e){return this.url.searchParams.append(s,`${t}.${e}`),this}},pot=class{constructor(s,{headers:t={},schema:e,fetch:n}){this.url=s,this.headers=new Headers(t),this.schema=e,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,t){const{head:e=!1,count:n}=t??{},i=e?"HEAD":"GET";let r=!1;const o=(s??"*").split("").map(u=>/\s/.test(u)&&!r?"":(u==='"'&&(r=!r),u)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new _y({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(s,{count:t,defaultToNull:e=!0}={}){var n;const i="POST",{url:r,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),e||o.append("Prefer","missing=default"),Array.isArray(s)){const a=s.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){const c=[...new Set(a)].map(u=>`"${u}"`);r.searchParams.set("columns",c.join(","))}}return new _y({method:i,url:r,headers:o,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(s,{onConflict:t,ignoreDuplicates:e=!1,count:n,defaultToNull:i=!0}={}){var r;const o="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${e?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),i||c.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(u.length>0){const h=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",h.join(","))}}return new _y({method:o,url:a,headers:c,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}update(s,{count:t}={}){var e;const n="PATCH",{url:i,headers:r}=this.cloneRequestState();return t&&r.append("Prefer",`count=${t}`),new _y({method:n,url:i,headers:r,schema:this.schema,body:s,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}delete({count:s}={}){var t;const e="DELETE",{url:n,headers:i}=this.cloneRequestState();return s&&i.append("Prefer",`count=${s}`),new _y({method:e,url:n,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},got=class _G{constructor(t,{headers:e={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(e),this.schemaName=n,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pot(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new _G(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:n=!1,get:i=!1,count:r}={}){var o;let a;const c=new URL(`${this.url}/rpc/${t}`);let u;const h=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(h)),d=n&&Object.values(e).some(h);d?(a="POST",u=e):n||i?(a=n?"HEAD":"GET",Object.entries(e).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{c.searchParams.append(p,m)})):(a="POST",u=e);const f=new Headers(this.headers);return d?f.set("Prefer",r?`count=${r},return=minimal`:"return=minimal"):r&&f.set("Prefer",`count=${r}`),new _y({method:a,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class mot{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const e=globalThis.process;if(e){const n=e.versions;if(n&&n.node){const i=n.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const n=this.getWebSocketConstructor();return new n(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const yot="2.90.1",vot=`realtime-js/${yot}`,EG="1.0.0",wot="2.0.0",IU=EG,dL=1e4,bot=1e3,Aot=100;var bh;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(bh||(bh={}));var On;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(On||(On={}));var _a;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(_a||(_a={}));var fL;(function(s){s.websocket="websocket"})(fL||(fL={}));var Zf;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Zf||(Zf={}));class xot{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,e){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer((e=t.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,n;const i=(n=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var e,n;const i=(n=(e=t.payload)===null||e===void 0?void 0:e.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,e,n){var i,r;const o=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(r=t.join_ref)!==null&&r!==void 0?r:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+o.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,a.length),m.setUint8(g++,o.length),m.setUint8(g++,u.length),m.setUint8(g++,d.length),m.setUint8(g++,e),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(u,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(d,v=>m.setUint8(g++,v.charCodeAt(0)));var w=new Uint8Array(p.byteLength+n.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(n),p.byteLength),w.buffer}decode(t,e){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return e(n)}if(typeof t=="string"){const n=JSON.parse(t),[i,r,o,a,c]=n;return e({join_ref:i,ref:r,topic:o,event:a,payload:c})}return e({})}_binaryDecode(t){const e=new DataView(t),n=e.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,i)}}_decodeUserBroadcast(t,e,n){const i=e.getUint8(1),r=e.getUint8(2),o=e.getUint8(3),a=e.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+r));c=c+r;const d=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),p=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,m={type:this.BROADCAST_EVENT,event:h,payload:p};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||((e=t==null?void 0:t.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(t,e){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>e.includes(n)))}}class CG{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ee||(Ee={}));const LU=(s,t,e={})=>{var n;const i=(n=e.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((r,o)=>(r[o]=Sot(o,s,t,i),r),{}):{}},Sot=(s,t,e,n)=>{const i=t.find(a=>a.name===s),r=i==null?void 0:i.type,o=e[s];return r&&!n.includes(r)?TG(r,o):pL(o)},TG=(s,t)=>{if(s.charAt(0)==="_"){const e=s.slice(1,s.length);return Tot(t,e)}switch(s){case Ee.bool:return _ot(t);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return Eot(t);case Ee.json:case Ee.jsonb:return Cot(t);case Ee.timestamp:return Pot(t);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return pL(t);default:return pL(t)}},pL=s=>s,_ot=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Eot=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},Cot=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Tot=(s,t)=>{if(typeof s!="string")return s;const e=s.length-1,n=s[e];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,e);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>TG(t,a))}return s},Pot=s=>typeof s=="string"?s.replace(" ","T"):s,PG=s=>{const t=new URL(s);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class lD{constructor(t,e,n={},i=dL){this.channel=t,this.event=e,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var NU;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(NU||(NU={}));class mx{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mx.syncState(this.state,i,r,o),this.pendingDiffs.forEach(c=>{this.state=mx.syncDiff(this.state,c,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=mx.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,n,i){const r=this.cloneDeep(t),o=this.transformState(e),a={},c={};return this.map(r,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=r[u];if(d){const f=h.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),m=h.filter(w=>p.indexOf(w.presence_ref)<0),g=d.filter(w=>f.indexOf(w.presence_ref)<0);m.length>0&&(a[u]=m),g.length>0&&(c[u]=g)}else a[u]=h}),this.syncDiff(r,{joins:a,leaves:c},n,i)}static syncDiff(t,e,n,i){const{joins:r,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,c)=>{var u;const h=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(c),h.length>0){const d=t[a].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,h,c)}),this.map(o,(a,c)=>{let u=t[a];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,c),u.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(n=>e(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,n)=>{const i=t[n];return"metas"in i?e[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):e[n]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var OU;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(OU||(OU={}));var yx;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(yx||(yx={}));var mc;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(mc||(mc={}));class tv{constructor(t,e={config:{}},n){var i,r;if(this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=On.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new lD(this,_a.join,this.params,this.timeout),this.rejoinTimer=new CG(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=On.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=On.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_a.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new mx(this),this.broadcastEndpointURL=PG(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var n,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==On.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[yx.PRESENCE]&&this.bindings[yx.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(mc.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(mc.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(mc.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,v=[];for(let b=0;b<w;b++){const x=g[b],{filter:{event:E,schema:T,table:P,filter:k}}=x,R=p&&p[b];if(R&&R.event===E&&tv.isFilterValueEqual(R.schema,T)&&tv.isFilterValueEqual(R.table,P)&&tv.isFilterValueEqual(R.filter,k))v.push(Object.assign(Object.assign({},x),{id:R.id}));else{this.unsubscribe(),this.state=On.errored,t==null||t(mc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(mc.SUBSCRIBED);return}}).receive("error",p=>{this.state=On.errored,t==null||t(mc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this.state===On.joined&&t===yx.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,e,n)}async httpSend(t,e,n={}){var i;if(e==null)return Promise.reject("Payload is required for httpSend()");const r={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(r.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:r,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,e={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:o}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=e.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,c;const u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&r("ok"),u.receive("ok",()=>r("ok")),u.receive("error",()=>r("error")),u.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=On.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_a.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new lD(this,_a.leave,{},t),n.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=On.closed,this.bindings={}}async _fetchWithTimeout(t,e,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(r),o}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new lD(this,t,e,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Aot){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var i,r;const o=t.toLocaleLowerCase(),{close:a,error:c,leave:u,join:h}=_a;if(n&&[a,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,e,n);if(e&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var m,g,w;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((w=(g=p.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(r=this.bindings[o])===null||r===void 0||r.filter(p=>{var m,g,w,v,b,x,E,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const P=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return P&&((g=e.ids)===null||g===void 0?void 0:g.includes(P))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=e.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))&&(!(!((v=p.filter)===null||v===void 0)&&v.table)||p.filter.table===((b=e.data)===null||b===void 0?void 0:b.table))}else{const P=(E=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return P==="*"||P===((T=e==null?void 0:e.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:w,commit_timestamp:v,type:b,errors:x}=m;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===On.closed}_isJoined(){return this.state===On.joined}_isJoining(){return this.state===On.joining}_isLeaving(){return this.state===On.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){const i=t.toLocaleLowerCase(),r={type:i,filter:e,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&tv.isEqual(i.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}static isFilterValueEqual(t,e){return(t??void 0)===(e??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_a.close,{},t)}_onError(t){this._on(_a.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=On.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=LU(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=LU(t.columns,t.old_record)),e}}const cD=()=>{},EC={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kot=[1e3,2e3,5e3,1e4],Rot=1e4,Mot=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dot{constructor(t,e){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=dL,this.transport=null,this.heartbeatIntervalMs=EC.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cD,this.ref=0,this.reconnectTimer=null,this.vsn=IU,this.logger=cD,this.conn=null,this.sendBuffer=[],this.serializer=new xot,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),!(!((n=e==null?void 0:e.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${fL.websocket}`,this.httpEndpoint=PG(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mot.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bh.connecting:return Zf.Connecting;case bh.open:return Zf.Open;case bh.closing:return Zf.Closing;default:return Zf.Closed}}isConnected(){return this.connectionState()===Zf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new tv(`realtime:${t}`,e,this);return this.channels.push(r),r}}push(t){const{topic:e,event:n,payload:i,ref:r}=t,o=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(bot,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},EC.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply"&&e.ref&&e.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error",u)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:r,ref:o}=e,a=o?`(${o})`:"",c=r.status||"";this.log("receive",`${c} ${n} ${i} ${a}`.trim(),r),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,r,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bh.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bh.open||this.conn.readyState===bh.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_a.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${n}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{const n=new Blob([Mot],{type:"application/javascript"});e=URL.createObjectURL(n)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e,n=!1;if(t)e=t,n=!0;else if(this.accessToken)try{e=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),e=this.accessTokenValue}else e=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(i=>{const r={access_token:e,version:vot};e&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(_a.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(e=>{this.log("error",`Error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(e)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new CG(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},EC.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,n,i,r,o,a,c,u,h,d,f,p;switch(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:dL,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:EC.HEARTBEAT_INTERVAL,this.worker=(r=t==null?void 0:t.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:cD,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:IU,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:m=>kot[m-1]||Rot,this.vsn){case EG:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(m,g)=>g(JSON.stringify(m)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(m,g)=>g(JSON.parse(m));break;case wot:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Qx=class extends Error{constructor(s,t){var e;super(s),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((e=t.icebergType)==null?void 0:e.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Iot(s,t,e){const n=new URL(t,s);if(e)for(const[i,r]of Object.entries(e))r!==void 0&&n.searchParams.set(i,r);return n.toString()}async function Lot(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Not(s){const t=s.fetchImpl??globalThis.fetch;return{async request({method:e,path:n,query:i,body:r,headers:o}){const a=Iot(s.baseUrl,n,i),c=await Lot(s.auth),u=await t(a,{method:e,headers:{...r?{"Content-Type":"application/json"}:{},...c,...o},body:r?JSON.stringify(r):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const p=d?f:void 0,m=p==null?void 0:p.error;throw new Qx((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function CC(s){return s.join("")}var Oot=class{constructor(s,t=""){this.client=s,this.prefix=t}async listNamespaces(s){const t=s?{parent:CC(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(s,t){const e={namespace:s.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${CC(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${CC(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${CC(s.namespace)}`}),!0}catch(t){if(t instanceof Qx&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(s,t){try{return await this.createNamespace(s,t)}catch(e){if(e instanceof Qx&&e.status===409)return;throw e}}};function dy(s){return s.join("")}var Fot=class{constructor(s,t="",e){this.client=s,this.prefix=t,this.accessDelegation=e}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables`})).data.identifiers}async createTable(s,t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables`,body:t,headers:e})).data.metadata}async updateTable(s,t){const e=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables/${s.name}`,body:t});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}}async dropTable(s,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(s){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables/${s.name}`,headers:t})).data.metadata}async tableExists(s){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dy(s.namespace)}/tables/${s.name}`,headers:t}),!0}catch(e){if(e instanceof Qx&&e.status===404)return!1;throw e}}async createTableIfNotExists(s,t){try{return await this.createTable(s,t)}catch(e){if(e instanceof Qx&&e.status===409)return await this.loadTable({namespace:s.namespace,name:t.name});throw e}}},jot=class{constructor(s){var n;let t="v1";s.catalogName&&(t+=`/${s.catalogName}`);const e=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Not({baseUrl:e,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(n=s.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Oot(this.client,t),this.tableOps=new Fot(this.client,t,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,t){return this.namespaceOps.createNamespace(s,t)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,t){return this.tableOps.createTable(s,t)}async updateTable(s,t){return this.tableOps.updateTable(s,t)}async dropTable(s,t){await this.tableOps.dropTable(s,t)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,t){return this.namespaceOps.createNamespaceIfNotExists(s,t)}async createTableIfNotExists(s,t){return this.tableOps.createTableIfNotExists(s,t)}},GR=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Xe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var $ot=class extends GR{constructor(s,t,e){super(s),this.name="StorageApiError",this.status=t,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gL=class extends GR{constructor(s,t){super(s),this.name="StorageUnknownError",this.originalError=t}};const W2=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Bot=()=>Response,mL=s=>{if(Array.isArray(s))return s.map(e=>mL(e));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([e,n])=>{const i=e.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=mL(n)}),t},Uot=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Vot=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Jx(s){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(s)}function Hot(s,t){if(Jx(s)!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t||"default");if(Jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function zot(s){var t=Hot(s,"string");return Jx(t)=="symbol"?t:t+""}function Wot(s,t,e){return(t=zot(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function FU(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function vt(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(e),!0).forEach(function(n){Wot(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):FU(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}const uD=s=>{var t;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(t=s.error)===null||t===void 0?void 0:t.message)||JSON.stringify(s)},Got=async(s,t,e)=>{s instanceof await Bot()&&!(e!=null&&e.noResolveJson)?s.json().then(n=>{const i=s.status||500,r=(n==null?void 0:n.statusCode)||i+"";t(new $ot(uD(n),i,r))}).catch(n=>{t(new gL(uD(n),n))}):t(new gL(uD(s),s))},qot=(s,t,e,n)=>{const i={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!n?i:(Uot(n)?(i.headers=vt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),vt(vt({},i),e))};async function j1(s,t,e,n,i,r){return new Promise((o,a)=>{s(e,qot(t,n,i,r)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Got(c,a,n))})}async function Zx(s,t,e,n){return j1(s,"GET",t,e,n)}async function Xo(s,t,e,n,i){return j1(s,"POST",t,n,i,e)}async function yL(s,t,e,n,i){return j1(s,"PUT",t,n,i,e)}async function Kot(s,t,e,n){return j1(s,"HEAD",t,vt(vt({},e),{},{noResolveJson:!0}),n)}async function G2(s,t,e,n,i){return j1(s,"DELETE",t,n,i,e)}var Xot=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t}then(s,t){return this.execute().then(s,t)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}}};let kG;kG=Symbol.toStringTag;var Yot=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t,this[kG]="BlobDownloadBuilder",this.promise=null}asStream(){return new Xot(this.downloadFn,this.shouldThrowOnError)}then(s,t){return this.getPromise().then(s,t)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}}};const Qot={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jU={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Jot=class{constructor(s,t={},e,n){this.shouldThrowOnError=!1,this.url=s,this.headers=t,this.bucketId=e,this.fetch=W2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,t,e,n){var i=this;try{let r;const o=vt(vt({},jU),n);let a=vt(vt({},i.headers),s==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&e instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),c&&r.append("metadata",i.encodeMetadata(c)),r.append("",e)):typeof FormData<"u"&&e instanceof FormData?(r=e,r.has("cacheControl")||r.append("cacheControl",o.cacheControl),c&&!r.has("metadata")&&r.append("metadata",i.encodeMetadata(c))):(r=e,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=vt(vt({},a),n.headers));const u=i._removeEmptyFolders(t),h=i._getFinalPath(u),d=await(s=="PUT"?yL:Xo)(i.fetch,`${i.url}/object/${h}`,r,vt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async upload(s,t,e){return this.uploadOrUpdate("POST",s,t,e)}async uploadToSignedUrl(s,t,e,n){var i=this;const r=i._removeEmptyFolders(s),o=i._getFinalPath(r),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=vt({upsert:jU.upsert},n),h=vt(vt({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&e instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",e)):typeof FormData<"u"&&e instanceof FormData?(c=e,c.append("cacheControl",u.cacheControl)):(c=e,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:r,fullPath:(await yL(i.fetch,a.toString(),c,{headers:h})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(s,t){var e=this;try{let n=e._getFinalPath(s);const i=vt({},e.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const r=await Xo(e.fetch,`${e.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(e.url+r.url),a=o.searchParams.get("token");if(!a)throw new GR("No token returned by API");return{data:{signedUrl:o.toString(),path:s,token:a},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async update(s,t,e){return this.uploadOrUpdate("PUT",s,t,e)}async move(s,t,e){var n=this;try{return{data:await Xo(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:e==null?void 0:e.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async copy(s,t,e){var n=this;try{return{data:{path:(await Xo(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:e==null?void 0:e.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async createSignedUrl(s,t,e){var n=this;try{let i=n._getFinalPath(s),r=await Xo(n.fetch,`${n.url}/object/sign/${i}`,vt({expiresIn:t},e!=null&&e.transform?{transform:e.transform}:{}),{headers:n.headers});const o=e!=null&&e.download?`&download=${e.download===!0?"":e.download}`:"";return r={signedUrl:encodeURI(`${n.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async createSignedUrls(s,t,e){var n=this;try{const i=await Xo(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:s},{headers:n.headers}),r=e!=null&&e.download?`&download=${e.download===!0?"":e.download}`:"";return{data:i.map(o=>vt(vt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}download(s,t){const e=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=n?`?${n}`:"",r=this._getFinalPath(s),o=()=>Zx(this.fetch,`${this.url}/${e}/${r}${i}`,{headers:this.headers,noResolveJson:!0});return new Yot(o,this.shouldThrowOnError)}async info(s){var t=this;const e=t._getFinalPath(s);try{return{data:mL(await Zx(t.fetch,`${t.url}/object/info/${e}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async exists(s){var t=this;const e=t._getFinalPath(s);try{return await Kot(t.fetch,`${t.url}/object/${e}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n)&&n instanceof gL){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(s,t){const e=this._getFinalPath(s),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const r=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${e}${a}`)}}}async remove(s){var t=this;try{return{data:await G2(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:s},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async list(s,t,e){var n=this;try{const i=vt(vt(vt({},Qot),t),{},{prefix:s||""});return{data:await Xo(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},e),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(Xe(i))return{data:null,error:i};throw i}}async listV2(s,t){var e=this;try{const n=vt({},s);return{data:await Xo(e.fetch,`${e.url}/object/list-v2/${e.bucketId}`,n,{headers:e.headers},t),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const t=[];return s.width&&t.push(`width=${s.width}`),s.height&&t.push(`height=${s.height}`),s.resize&&t.push(`resize=${s.resize}`),s.format&&t.push(`format=${s.format}`),s.quality&&t.push(`quality=${s.quality}`),t.join("&")}};const RG="2.90.1",MG={"X-Client-Info":`storage-js/${RG}`};var Zot=class{constructor(s,t={},e,n){this.shouldThrowOnError=!1;const i=new URL(s);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=vt(vt({},MG),t),this.fetch=W2(e)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var t=this;try{const e=t.listBucketOptionsToQueryString(s);return{data:await Zx(t.fetch,`${t.url}/bucket${e}`,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async getBucket(s){var t=this;try{return{data:await Zx(t.fetch,`${t.url}/bucket/${s}`,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async createBucket(s,t={public:!1}){var e=this;try{return{data:await Xo(e.fetch,`${e.url}/bucket`,{id:s,name:s,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async updateBucket(s,t){var e=this;try{return{data:await yL(e.fetch,`${e.url}/bucket/${s}`,{id:s,name:s,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async emptyBucket(s){var t=this;try{return{data:await Xo(t.fetch,`${t.url}/bucket/${s}/empty`,{},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async deleteBucket(s){var t=this;try{return{data:await G2(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}listBucketOptionsToQueryString(s){const t={};return s&&("limit"in s&&(t.limit=String(s.limit)),"offset"in s&&(t.offset=String(s.offset)),s.search&&(t.search=s.search),s.sortColumn&&(t.sortColumn=s.sortColumn),s.sortOrder&&(t.sortOrder=s.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},tat=class{constructor(s,t={},e){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=vt(vt({},MG),t),this.fetch=W2(e)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var t=this;try{return{data:await Xo(t.fetch,`${t.url}/bucket`,{name:s},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async listBuckets(s){var t=this;try{const e=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&e.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&e.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&e.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&e.set("sortOrder",s.sortOrder),s!=null&&s.search&&e.set("search",s.search);const n=e.toString(),i=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Zx(t.fetch,i,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}async deleteBucket(s){var t=this;try{return{data:await G2(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}}from(s){var t=this;if(!Vot(s))throw new GR("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const e=new jot({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(e,{get(i,r){const o=i[r];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const q2={"X-Client-Info":`storage-js/${RG}`,"Content-Type":"application/json"};var DG=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jr(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var hD=class extends DG{constructor(s,t,e){super(s),this.name="StorageVectorsApiError",this.status=t,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eat=class extends DG{constructor(s,t){super(s),this.name="StorageVectorsUnknownError",this.originalError=t}};const K2=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),nat=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},$U=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),sat=async(s,t,e)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(e!=null&&e.noResolveJson)){const n=s.status||500,i=s;if(typeof i.json=="function")i.json().then(r=>{const o=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||n+"";t(new hD($U(r),n,o))}).catch(()=>{const r=n+"";t(new hD(i.statusText||`HTTP ${n} error`,n,r))});else{const r=n+"";t(new hD(i.statusText||`HTTP ${n} error`,n,r))}}else t(new eat($U(s),s))},iat=(s,t,e,n)=>{const i={method:s,headers:(t==null?void 0:t.headers)||{}};return n?(nat(n)?(i.headers=vt({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,vt(vt({},i),e)):i};async function rat(s,t,e,n,i,r){return new Promise((o,a)=>{s(e,iat(t,n,i,r)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>sat(c,a,n))})}async function $r(s,t,e,n,i){return rat(s,"POST",t,n,i,e)}var oat=class{constructor(s,t={},e){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=vt(vt({},q2),t),this.fetch=K2(e)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/CreateIndex`,s,{headers:t.headers})||{},error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async getIndex(s,t){var e=this;try{return{data:await $r(e.fetch,`${e.url}/GetIndex`,{vectorBucketName:s,indexName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async listIndexes(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/ListIndexes`,s,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async deleteIndex(s,t){var e=this;try{return{data:await $r(e.fetch,`${e.url}/DeleteIndex`,{vectorBucketName:s,indexName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}},aat=class{constructor(s,t={},e){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=vt(vt({},q2),t),this.fetch=K2(e)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var t=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $r(t.fetch,`${t.url}/PutVectors`,s,{headers:t.headers})||{},error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async getVectors(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/GetVectors`,s,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async listVectors(s){var t=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await $r(t.fetch,`${t.url}/ListVectors`,s,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async queryVectors(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/QueryVectors`,s,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async deleteVectors(s){var t=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $r(t.fetch,`${t.url}/DeleteVectors`,s,{headers:t.headers})||{},error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}},lat=class{constructor(s,t={},e){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=vt(vt({},q2),t),this.fetch=K2(e)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{},error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async getBucket(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:s},{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async listBuckets(s={}){var t=this;try{return{data:await $r(t.fetch,`${t.url}/ListVectorBuckets`,s,{headers:t.headers}),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}async deleteBucket(s){var t=this;try{return{data:await $r(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:t.headers})||{},error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jr(e))return{data:null,error:e};throw e}}},cat=class extends lat{constructor(s,t={}){super(s,t.headers||{},t.fetch)}from(s){return new uat(this.url,this.headers,s,this.fetch)}async createBucket(s){var t=()=>super.createBucket,e=this;return t().call(e,s)}async getBucket(s){var t=()=>super.getBucket,e=this;return t().call(e,s)}async listBuckets(s={}){var t=()=>super.listBuckets,e=this;return t().call(e,s)}async deleteBucket(s){var t=()=>super.deleteBucket,e=this;return t().call(e,s)}},uat=class extends oat{constructor(s,t,e,n){super(s,t,n),this.vectorBucketName=e}async createIndex(s){var t=()=>super.createIndex,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName}))}async listIndexes(s={}){var t=()=>super.listIndexes,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName}))}async getIndex(s){var t=()=>super.getIndex,e=this;return t().call(e,e.vectorBucketName,s)}async deleteIndex(s){var t=()=>super.deleteIndex,e=this;return t().call(e,e.vectorBucketName,s)}index(s){return new hat(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},hat=class extends aat{constructor(s,t,e,n,i){super(s,t,i),this.vectorBucketName=e,this.indexName=n}async putVectors(s){var t=()=>super.putVectors,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async getVectors(s){var t=()=>super.getVectors,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async listVectors(s={}){var t=()=>super.listVectors,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async queryVectors(s){var t=()=>super.queryVectors,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}async deleteVectors(s){var t=()=>super.deleteVectors,e=this;return t().call(e,vt(vt({},s),{},{vectorBucketName:e.vectorBucketName,indexName:e.indexName}))}},dat=class extends Zot{constructor(s,t={},e,n){super(s,t,e,n)}from(s){return new Jot(this.url,this.headers,s,this.fetch)}get vectors(){return new cat(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tat(this.url+"/iceberg",this.headers,this.fetch)}};const IG="2.90.1",Ey=30*1e3,vL=3,dD=vL*Ey,fat="http://localhost:9999",pat="supabase.auth.token",gat={"X-Client-Info":`gotrue-js/${IG}`},wL="X-Supabase-Api-Version",LG={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mat=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yat=10*60*1e3;class tS extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}}function ut(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class vat extends tS{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}}function wat(s){return ut(s)&&s.name==="AuthApiError"}class tp extends tS{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Zu extends tS{constructor(t,e,n,i){super(t,n,i),this.name=e,this.status=n}}class tr extends Zu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function bat(s){return ut(s)&&s.name==="AuthSessionMissingError"}class fy extends Zu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class TC extends Zu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class PC extends Zu{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Aat(s){return ut(s)&&s.name==="AuthImplicitGrantRedirectError"}class BU extends Zu{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xat extends Zu{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class bL extends Zu{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function fD(s){return ut(s)&&s.name==="AuthRetryableFetchError"}class UU extends Zu{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}}class AL extends Zu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),VU=` 	
\r=`.split(""),Sat=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<VU.length;t+=1)s[VU[t].charCodeAt(0)]=-2;for(let t=0;t<rk.length;t+=1)s[rk[t].charCodeAt(0)]=t;return s})();function HU(s,t,e){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(rk[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(rk[n]),t.queuedBits-=6}}function NG(s,t,e){const n=Sat[s];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function zU(s){const t=[],e=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{Cat(o,n,e)};for(let o=0;o<s.length;o+=1)NG(s.charCodeAt(o),i,r);return t.join("")}function _at(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Eat(s,t){for(let e=0;e<s.length;e+=1){let n=s.charCodeAt(e);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(s.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}_at(n,t)}}function Cat(s,t,e){if(t.utf8seq===0){if(s<=127){e(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function wv(s){const t=[],e={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<s.length;i+=1)NG(s.charCodeAt(i),e,n);return new Uint8Array(t)}function Tat(s){const t=[];return Eat(s,e=>t.push(e)),new Uint8Array(t)}function ap(s){const t=[],e={queue:0,queuedBits:0},n=i=>{t.push(i)};return s.forEach(i=>HU(i,e,n)),HU(null,e,n),t.join("")}function Pat(s){return Math.round(Date.now()/1e3)+s}function kat(){return Symbol("auth-callback")}const fs=()=>typeof window<"u"&&typeof document<"u",Ff={tested:!1,writable:!1},OG=()=>{if(!fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ff.tested)return Ff.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ff.tested=!0,Ff.writable=!0}catch{Ff.tested=!0,Ff.writable=!1}return Ff.writable};function Rat(s){const t={},e=new URL(s);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return e.searchParams.forEach((n,i)=>{t[i]=n}),t}const FG=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Mat=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Cy=async(s,t,e)=>{await s.setItem(t,JSON.stringify(e))},jf=async(s,t)=>{const e=await s.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},hs=async(s,t)=>{await s.removeItem(t)};class qR{constructor(){this.promise=new qR.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}qR.promiseConstructor=Promise;function pD(s){const t=s.split(".");if(t.length!==3)throw new AL("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!mat.test(t[n]))throw new AL("JWT not in base64url format");return{header:JSON.parse(zU(t[0])),payload:JSON.parse(zU(t[1])),signature:wv(t[2]),raw:{header:t[0],payload:t[1]}}}async function Dat(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function Iat(s,t){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!t(r,null,o)){n(o);return}}catch(o){if(!t(r,o)){i(o);return}}})()})}function Lat(s){return("0"+s.toString(16)).substr(-2)}function Nat(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length;let i="";for(let r=0;r<56;r++)i+=e.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Lat).join("")}async function Oat(s){const e=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function Fat(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=await Oat(s);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function py(s,t,e=!1){const n=Nat();let i=n;e&&(i+="/PASSWORD_RECOVERY"),await Cy(s,`${t}-code-verifier`,i);const r=await Fat(n);return[r,n===r?"plain":"s256"]}const jat=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $at(s){const t=s.headers.get(wL);if(!t||!t.match(jat))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Bat(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function Uat(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vat=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gy(s){if(!Vat.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gD(){const s={};return new Proxy(s,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const n=e.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hat(s,t){return new Proxy(s,{get:(e,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,i)}})}function WU(s){return JSON.parse(JSON.stringify(s))}const Hf=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),zat=[502,503,504];async function GU(s){var t;if(!Mat(s))throw new bL(Hf(s),0);if(zat.includes(s.status))throw new bL(Hf(s),s.status);let e;try{e=await s.json()}catch(r){throw new tp(Hf(r),r)}let n;const i=$at(s);if(i&&i.getTime()>=LG["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?n=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(n=e.error_code),n){if(n==="weak_password")throw new UU(Hf(e),s.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new tr}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new UU(Hf(e),s.status,e.weak_password.reasons);throw new vat(Hf(e),s.status||500,n)}const Wat=(s,t,e,n)=>{const i={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),e))};async function mt(s,t,e,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[wL]||(r[wL]=LG["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Gat(s,t,e+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Gat(s,t,e,n,i,r){const o=Wat(t,n,i,r);let a;try{a=await s(e,Object.assign({},o))}catch(c){throw console.error(c),new bL(Hf(c),0)}if(a.ok||await GU(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await GU(c)}}function Ho(s){var t;let e=null;Xat(s)&&(e=Object.assign({},s),s.expires_at||(e.expires_at=Pat(s.expires_in)));const n=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:e,user:n},error:null}}function qU(s){const t=Ho(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((e,n)=>e&&typeof n=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Sh(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function qat(s){return{data:s,error:null}}function Kat(s){const{action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:r}=s,o=Ub(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:r},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function KU(s){return s}function Xat(s){return s.access_token&&s.refresh_token&&s.expires_in}const mD=["global","local","others"];class Yat{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=FG(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=mD[0]){if(mD.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mD.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,e={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Sh})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=Ub(t,["options"]),i=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Kat,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(ut(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sh})}catch(e){if(ut(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,i,r,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:KU});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ut(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){gy(t);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sh})}catch(e){if(ut(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){gy(t);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Sh})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,e=!1){gy(t);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Sh})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){gy(t.userId);try{const{data:e,error:n}=await mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:n}}catch(e){if(ut(e))return{data:null,error:e};throw e}}async _deleteFactor(t){gy(t.userId),gy(t.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(ut(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,n,i,r,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:KU});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(m.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ut(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(ut(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await mt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(ut(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await mt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ut(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await mt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(ut(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(ut(e))return{data:null,error:e};throw e}}}function XU(s={}){return{getItem:t=>s[t]||null,setItem:(t,e)=>{s[t]=e},removeItem:t=>{delete s[t]}}}const my={debug:!!(globalThis&&OG()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jG extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Qat extends jG{}async function Jat(s,t,e){my.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),my.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){my.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await e()}finally{my.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(t===0)throw my.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Qat(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(my.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function Zat(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $G(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function tlt(s){return parseInt(s,16)}function elt(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function nlt(s){var t;const{chainId:e,domain:n,expirationTime:i,issuedAt:r=new Date,nonce:o,notBefore:a,requestId:c,resources:u,scheme:h,uri:d,version:f}=s;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const p=$G(s.address),m=h?`${h}://${n}`:n,g=s.statement?`${s.statement}
`:"",w=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let v=`URI: ${d}
Version: ${f}
Chain ID: ${e}${o?`
Nonce: ${o}`:""}
Issued At: ${r.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);b+=`
- ${x}`}v+=b}return`${w}
${v}`}class Pn extends Error{constructor({message:t,code:e,cause:n,name:i}){var r;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(r=i??(n instanceof Error?n.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=e}}class ok extends Pn{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function slt({error:s,options:t}){var e,n,i;const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((e=r.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new Pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((n=r.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Pn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return r.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(BG(o)){if(r.rp.id!==o)return new Pn({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new Pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function ilt({error:s,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Pn({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(BG(n)){if(e.rpId!==n)return new Pn({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class rlt{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const olt=new rlt;function alt(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:e,excludeCredentials:n}=s,i=Ub(s,["challenge","user","excludeCredentials"]),r=wv(t).buffer,o=Object.assign(Object.assign({},e),{id:wv(e.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:r,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:wv(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function llt(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:e}=s,n=Ub(s,["challenge","allowCredentials"]),i=wv(t).buffer,r=Object.assign(Object.assign({},n),{challenge:i});if(e&&e.length>0){r.allowCredentials=new Array(e.length);for(let o=0;o<e.length;o++){const a=e[o];r.allowCredentials[o]=Object.assign(Object.assign({},a),{id:wv(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return r}function clt(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const e=s;return{id:s.id,rawId:s.id,response:{attestationObject:ap(new Uint8Array(s.response.attestationObject)),clientDataJSON:ap(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ult(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const e=s,n=s.getClientExtensionResults(),i=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ap(new Uint8Array(i.authenticatorData)),clientDataJSON:ap(new Uint8Array(i.clientDataJSON)),signature:ap(new Uint8Array(i.signature)),userHandle:i.userHandle?ap(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BG(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function YU(){var s,t;return!!(fs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function hlt(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ok("Browser returned unexpected credential type",t)}:{data:null,error:new ok("Empty credential response",t)}}catch(t){return{data:null,error:slt({error:t,options:s})}}}async function dlt(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ok("Browser returned unexpected credential type",t)}:{data:null,error:new ok("Empty credential response",t)}}catch(t){return{data:null,error:ilt({error:t,options:s})}}}const flt={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},plt={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ak(...s){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of s)if(i)for(const r in i){const o=i[r];if(o!==void 0)if(Array.isArray(o))n[r]=o;else if(e(o))n[r]=o;else if(t(o)){const a=n[r];t(a)?n[r]=ak(a,o):n[r]=ak(o)}else n[r]=o}return n}function glt(s,t){return ak(flt,s,t||{})}function mlt(s,t){return ak(plt,s,t||{})}class ylt{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:n,signal:i},r){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!o)return{data:null,error:a};const c=i??olt.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=glt(o.webauthn.credential_options.publicKey,r==null?void 0:r.create),{data:h,error:d}=await hlt({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=mlt(o.webauthn.credential_options.publicKey,r==null?void 0:r.request),{data:h,error:d}=await dlt(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return ut(o)?{data:null,error:o}:{data:null,error:new tp("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:e,webauthn:n}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!e)return{data:null,error:new tS("rpId is required for WebAuthn authentication")};try{if(!YU())return{data:null,error:new tp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:n},signal:i},{request:r});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:e,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return ut(o)?{data:null,error:o}:{data:null,error:new tp("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},r){if(!e)return{data:null,error:new tS("rpId is required for WebAuthn registration")};try{if(!YU())return{data:null,error:new tp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:e,rpOrigins:n},signal:i},{create:r});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:e,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ut(o)?{data:null,error:o}:{data:null,error:new tp("Unexpected error in register",o)}}}}Zat();const vlt={url:fat,storageKey:pat,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gat,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function QU(s,t,e){return await e()}const yy={};class eS{get jwks(){var t,e;return(e=(t=yy[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){yy[this.storageKey]=Object.assign(Object.assign({},yy[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=yy[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yy[this.storageKey]=Object.assign(Object.assign({},yy[this.storageKey]),{cachedAt:t})}constructor(t){var e,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},vlt),t);if(this.storageKey=r.storageKey,this.instanceID=(e=eS.nextInstanceID[this.storageKey])!==null&&e!==void 0?e:0,eS.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&fs()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Yat({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=FG(r.fetch),this.lock=r.lock||QU,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,this.lockAcquireTimeout=r.lockAcquireTimeout,r.lock?this.lock=r.lock:this.persistSession&&fs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Jat:this.lock=QU,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ylt(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:OG()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=XU(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=XU(this.memoryStorage)),fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${IG}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let e={},n="none";if(fs()&&(e=Rat(window.location.href),this._isImplicitGrantCallback(e)?n="implicit":await this._isPKCECallback(e)&&(n="pkce")),fs()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(e,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),Aat(r)){const c=(t=r.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:r}}return{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ut(e)?this._returnResult({error:e}):this._returnResult({error:new tp("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,i;try{const r=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ho}),{data:o,error:a}=r;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(r){if(ut(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(t){var e,n,i;try{let r;if("email"in t){const{email:h,password:d,options:f}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await py(this.storage,this.storageKey)),r=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(e=f==null?void 0:f.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ho})}else if("phone"in t){const{phone:h,password:d,options:f}=t;r=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ho})}else throw new TC("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return await hs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(r){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(t){try{let e;if("email"in t){const{email:r,password:o,options:a}=t;e=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qU})}else if("phone"in t){const{phone:r,password:o,options:a}=t;e=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qU})}else throw new TC("You must provide either an email or phone number and a password");const{data:n,error:i}=e;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const r=new fy;return this._returnResult({data:{user:null,session:null},error:r})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(e){if(ut(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,n,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,n,i,r,o,a,c,u,h,d,f;let p,m;if("message"in t)p=t.message,m=t.signature;else{const{chain:g,wallet:w,statement:v,options:b}=t;let x;if(fs())if(typeof w=="object")x=w;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")x=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const E=new URL((e=b==null?void 0:b.url)!==null&&e!==void 0?e:window.location.href),T=await x.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=$G(T[0]);let k=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const M=await x.request({method:"eth_chainId"});k=tlt(M)}const R={domain:E.host,address:P,statement:v,uri:E.href,version:"1",chainId:k,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=nlt(R),m=await x.request({method:"personal_sign",params:[elt(p),P]})}try{const{data:g,error:w}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ho});if(w)throw w;if(!g||!g.session||!g.user){const v=new fy;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:w})}catch(g){if(ut(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var e,n,i,r,o,a,c,u,h,d,f,p;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:w,wallet:v,statement:b,options:x}=t;let E;if(fs())if(typeof v=="object")E=v;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))E=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=v}const T=new URL((e=x==null?void 0:x.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in E&&E.signIn){const P=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),b?{statement:b}:null));let k;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")k=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)k=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${T.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=x==null?void 0:x.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const P=await E.signMessage(new TextEncoder().encode(m),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=P}}try{const{data:w,error:v}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ap(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ho});if(v)throw v;if(!w||!w.session||!w.user){const b=new fy;return this._returnResult({data:{user:null,session:null},error:b})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(ut(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const e=await jf(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(e??"").split("/");try{if(!n&&this.flowType==="pkce")throw new xat;const{data:r,error:o}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ho});if(await hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!r||!r.session||!r.user){const a=new fy;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(t){try{const{options:e,provider:n,token:i,access_token:r,nonce:o}=t,a=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Ho}),{data:c,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new fy;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(e){if(ut(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,n,i,r,o;try{if("email"in t){const{email:a,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await py(this.storage,this.storageKey));const{error:d}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(e=c==null?void 0:c.data)!==null&&e!==void 0?e:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:a,options:c}=t,{data:u,error:h}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new TC("You must provide either an email or phone number.")}catch(a){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(t){var e,n;try{let i,r;"options"in t&&(i=(e=t.options)===null||e===void 0?void 0:e.redirectTo,r=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Ho});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ut(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var e,n,i,r,o;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await py(this.storage,this.storageKey));const u=await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:qat});return!((r=u.data)===null||r===void 0)&&r.url&&fs()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new tr;const{error:i}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(ut(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:r}=t,{error:o}=await mt(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:i,options:r}=t,{data:o,error:a}=await mt(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new TC("You must provide either an email or phone number and a type")}catch(e){if(ut(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await e()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=e();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await jf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<dD:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await jf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=gD()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=Hat(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const e=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return e.data.user&&(this.suppressGetSessionWarning=!0),e}async _getUser(t){try{return t?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Sh}):await this._useSession(async e=>{var n,i,r;const{data:o,error:a}=e;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tr}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Sh})})}catch(e){if(ut(e))return bat(e)&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new tr;const o=i.session;let a=null,c=null;this.flowType==="pkce"&&t.email!=null&&([a,c]=await py(this.storage,this.storageKey));const{data:u,error:h}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Sh});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new tr;const e=Date.now()/1e3;let n=e,i=!0,r=null;const{payload:o}=pD(t.access_token);if(o.exp&&(n=o.exp,i=n<=e),i){const{data:a,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:c}=await this._getUser(t.access_token);if(c)throw c;r={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(e){if(ut(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var n;if(!t){const{data:o,error:a}=e;if(a)throw a;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new tr;const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(ut(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!fs())throw new PC("No browser detected.");if(t.error||t.error_description||t.error_code)throw new PC(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new BU("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new PC("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new BU("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:c,token_type:u}=t;if(!r||!a||!o||!u)throw new PC("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(a);let f=h+d;c&&(f=parseInt(c));const p=f-h;p*1e3<=Ey&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,h);const{data:g,error:w}=await this._getUser(r);if(w)throw w;const v={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(ut(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await jf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var n;const{data:i,error:r}=e;if(r)return this._returnResult({error:r});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(wat(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return t!=="others"&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const e=kat(),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async e=>{var n,i;try{const{data:{session:r},error:o}=e;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,e={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await py(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(r){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,c,u,h;const{data:d,error:f}=r;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return fs()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ut(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async e=>{var n;try{const{error:i,data:{session:r}}=e;if(i)throw i;const{options:o,provider:a,token:c,access_token:u,nonce:h}=t,d=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=r==null?void 0:r.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ho}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new fy}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(i){if(await hs(this.storage,`${this.storageKey}-code-verifier`),ut(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async e=>{var n,i;const{data:r,error:o}=e;if(o)throw o;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const n=Date.now();return await Iat(async i=>(i>0&&await Dat(200*Math.pow(2,i-1)),this._debug(e,"refreshing attempt",i),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ho})),(i,r)=>{const o=200*Math.pow(2,i);return r&&fD(r)&&Date.now()+o-n<Ey})}catch(n){if(this._debug(e,"error",n),ut(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),fs()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await jf(this.storage,this.storageKey);if(i&&this.userStorage){let o=await jf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Cy(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:gD()}else if(i&&!i.user&&!i.user){const o=await jf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await hs(this.storage,this.storageKey+"-user"),await Cy(this.storage,this.storageKey,i)):i.user=gD()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((e=i.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<dD;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${dD}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),fD(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new tr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qR;const{data:r,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!r.session)throw new tr;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={data:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),ut(r)){const o={data:null,error:r};return fD(r)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,e,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",e,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,e)}catch(c){r.push(c)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await hs(this.storage,`${this.storageKey}-code-verifier`);const e=Object.assign({},t),n=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&e.user&&await Cy(this.userStorage,this.storageKey+"-user",{user:e.user});const i=Object.assign({},e);delete i.user;const r=WU(i);await Cy(this.storage,this.storageKey,r)}else{const i=WU(e);await Cy(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await hs(this.storage,this.storageKey),await hs(this.storage,this.storageKey+"-code-verifier"),await hs(this.storage,this.storageKey+"-user"),this.userStorage&&await hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&fs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ey);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const e=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const e=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,e&&clearTimeout(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Ey);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ey}ms, refresh threshold is ${vL} ticks`),i<=vL&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jG)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const i=[`provider=${encodeURIComponent(e)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await py(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;return r?this._returnResult({data:null,error:r}):await mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession(async e=>{var n,i;const{data:r,error:o}=e;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;if(r)return this._returnResult({data:null,error:r});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?clt(t.webauthn.credential_response):ult(t.webauthn.credential_response)})}:{code:t.code}),{data:a,error:c}=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async e=>{var n;const{data:i,error:r}=e;if(r)return this._returnResult({data:null,error:r});const o=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:alt(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:llt(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of(t=e==null?void 0:e.factors)!==null&&t!==void 0?t:[])i.all.push(r),r.status==="verified"&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,e;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=pD(n.access_token);let o=null;r.aal&&(o=r.aal);let a=o;((e=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&e!==void 0?e:[]).length>0&&(a="aal2");const u=r.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await mt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new tr})})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new tr});const o=await mt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&fs()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ut(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!i)return this._returnResult({data:null,error:new tr});const o=await mt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&fs()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ut(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;return n?this._returnResult({data:null,error:n}):e?await mt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:e.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new tr})})}catch(t){if(ut(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?(await mt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new tr})})}catch(e){if(ut(e))return this._returnResult({data:null,error:e});throw e}}async fetchJwk(t,e={keys:[]}){let n=e.keys.find(a=>a.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+yat>i)return n;const{data:r,error:o}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===t),!n)?null:n}async getClaims(t,e={}){try{let n=t;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});n=p.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:c}}=pD(n);e!=null&&e.allowExpired||Bat(r.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:r,header:i,signature:o},error:null}}const h=Uat(i.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,Tat(`${a}.${c}`)))throw new AL("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(ut(n))return this._returnResult({data:null,error:n});throw n}}}eS.nextInstanceID={};const wlt=eS,blt="2.90.1";let vA="";typeof Deno<"u"?vA="deno":typeof document<"u"?vA="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vA="react-native":vA="node";const Alt={"X-Client-Info":`supabase-js-${vA}/${blt}`},xlt={headers:Alt},Slt={schema:"public"},_lt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Elt={};function nS(s){"@babel/helpers - typeof";return nS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nS(s)}function Clt(s,t){if(nS(s)!="object"||!s)return s;var e=s[Symbol.toPrimitive];if(e!==void 0){var n=e.call(s,t||"default");if(nS(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Tlt(s){var t=Clt(s,"string");return nS(t)=="symbol"?t:t+""}function Plt(s,t,e){return(t=Tlt(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function JU(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable})),e.push.apply(e,n)}return e}function hn(s){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(e),!0).forEach(function(n){Plt(s,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):JU(Object(e)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(e,n))})}return s}const klt=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Rlt=()=>Headers,Mlt=(s,t,e)=>{const n=klt(e),i=Rlt();return async(r,o)=>{var a;const c=(a=await t())!==null&&a!==void 0?a:s;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(r,hn(hn({},o),{},{headers:u}))}};function Dlt(s){return s.endsWith("/")?s:s+"/"}function Ilt(s,t){var e,n;const{db:i,auth:r,realtime:o,global:a}=s,{db:c,auth:u,realtime:h,global:d}=t,f={db:hn(hn({},c),i),auth:hn(hn({},u),r),realtime:hn(hn({},h),o),storage:{},global:hn(hn(hn({},d),a),{},{headers:hn(hn({},(e=d==null?void 0:d.headers)!==null&&e!==void 0?e:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return s.accessToken?f.accessToken=s.accessToken:delete f.accessToken,f}function Llt(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dlt(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Nlt=class extends wlt{constructor(s){super(s)}},Olt=class{constructor(s,t,e){var n,i;this.supabaseUrl=s,this.supabaseKey=t;const r=Llt(s);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",r),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",r),this.storageUrl=new URL("storage/v1",r),this.functionsUrl=new URL("functions/v1",r);const o=`sb-${r.hostname.split(".")[0]}-auth-token`,a={db:Slt,realtime:Elt,auth:hn(hn({},_lt),{},{storageKey:o}),global:xlt},c=Ilt(e??{},a);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=Mlt(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(hn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new got(new URL("rest/v1",r).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new dat(this.storageUrl.href,this.headers,this.fetch,e==null?void 0:e.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new uot(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,t={},e={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,t,e)}channel(s,t={config:{}}){return this.realtime.channel(s,t)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,t,e;if(s.accessToken)return await s.accessToken();const{data:n}=await s.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:t,detectSessionInUrl:e,storage:n,userStorage:i,storageKey:r,flowType:o,lock:a,debug:c,throwOnError:u},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nlt({url:this.authUrl.href,headers:hn(hn({},f),h),storageKey:r,autoRefreshToken:s,persistSession:t,detectSessionInUrl:e,storage:n,userStorage:i,flowType:o,lock:a,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Dot(this.realtimeUrl.href,hn(hn({},s),{},{params:hn(hn({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,t)=>{this._handleTokenChanged(s,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(s,t,e){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==e?(this.changedAccessToken=e,this.realtime.setAuth(e)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Flt=(s,t,e)=>new Olt(s,t,e);function jlt(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const t=s.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jlt()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const UG="https://sqryteqjvaqcxnqkkarv.supabase.co",$lt="sb_publishable_Mb6yZi2m3v1dQtuUpGlAmw_okCDge-2";console.log("SUPABASE_URL:",UG);console.log("SUPABASE_PUBLISHABLE_KEY:","Present");const Ie=Flt(UG,$lt,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),VG=C.createContext(void 0),Blt=({children:s})=>{const[t,e]=C.useState(null),[n,i]=C.useState(null),[r,o]=C.useState(!0),[a,c]=C.useState(null),[u,h]=C.useState(null),d=async g=>{try{const{data:w}=await Ie.from("user_roles").select("role").eq("user_id",g).maybeSingle();w&&c(w.role);const{data:v}=await Ie.from("profiles").select("email, full_name, approval_status").eq("user_id",g).maybeSingle();v&&h(v)}catch(w){console.error("Error fetching user data:",w)}};C.useEffect(()=>{const{data:{subscription:g}}=Ie.auth.onAuthStateChange(async(w,v)=>{i(v),e((v==null?void 0:v.user)??null),v!=null&&v.user?setTimeout(()=>d(v.user.id),0):(c(null),h(null)),o(!1)});return Ie.auth.getSession().then(({data:{session:w}})=>{i(w),e((w==null?void 0:w.user)??null),w!=null&&w.user&&d(w.user.id),o(!1)}),()=>g.unsubscribe()},[]);const f=async(g,w)=>{const{data:v,error:b}=await Ie.auth.signInWithPassword({email:g,password:w});if(b)return{error:b};if(v.user){const{data:x}=await Ie.from("user_roles").select("role").eq("user_id",v.user.id).eq("role","admin").maybeSingle();if(!x){const{data:E,error:T}=await Ie.from("profiles").select("approval_status").eq("user_id",v.user.id).maybeSingle();if(T)return console.error("Error fetching profile:",T),{error:new Error("Failed to verify account status")};if(!E||E.approval_status!=="approved")return await Ie.auth.signOut(),{error:new Error("Your account is pending approval. Please contact an administrator.")}}}return{error:null}},p=async(g,w,v)=>{const{data:b,error:x}=await Ie.auth.signUp({email:g,password:w,options:{emailRedirectTo:window.location.origin,data:{full_name:v}}});if(x)return{error:x};if(b.user){const{error:E}=await Ie.from("profiles").insert({user_id:b.user.id,email:b.user.email,full_name:v||null,approval_status:"pending"});E&&console.error("Error creating profile:",E)}return{error:null}},m=async()=>{await Ie.auth.signOut()};return _.jsx(VG.Provider,{value:{user:t,session:n,loading:r,userRole:a,profile:u,signIn:f,signUp:p,signOut:m},children:s})},Vb=()=>{const s=C.useContext(VG);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s};function Ult(s){if(typeof Proxy>"u")return s;const t=new Map,e=(...n)=>s(...n);return new Proxy(e,{get:(n,i)=>i==="create"?s:(t.has(i)||t.set(i,s(i)),t.get(i))})}function KR(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const xL=s=>Array.isArray(s);function HG(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}function sS(s){return typeof s=="string"||Array.isArray(s)}function ZU(s){const t=[{},{}];return s==null||s.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function X2(s,t,e,n){if(typeof t=="function"){const[i,r]=ZU(n);t=t(e!==void 0?e:s.custom,i,r)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[i,r]=ZU(n);t=t(e!==void 0?e:s.custom,i,r)}return t}function XR(s,t,e){const n=s.getProps();return X2(n,t,e!==void 0?e:n.custom,s)}const Y2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Q2=["initial",...Y2],$1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ny=new Set($1),Du=s=>s*1e3,Iu=s=>s/1e3,Vlt={type:"spring",stiffness:500,damping:25,restSpeed:10},Hlt=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),zlt={type:"keyframes",duration:.8},Wlt={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Glt=(s,{keyframes:t})=>t.length>2?zlt:ny.has(s)?s.startsWith("scale")?Hlt(t[1]):Vlt:Wlt;function J2(s,t){return s?s[t]||s.default||s:void 0}const qlt={skipAnimations:!1,useManualTiming:!1},Klt=s=>s!==null;function YR(s,{repeat:t,repeatType:e="loop"},n){const i=s.filter(Klt),r=t&&e!=="loop"&&t%2===1?0:i.length-1;return!r||n===void 0?i[r]:n}const zr=s=>s;let SL=zr;function Xlt(s){let t=new Set,e=new Set,n=!1,i=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){r.has(u)&&(c.schedule(u),s()),u(o)}const c={schedule:(u,h=!1,d=!1)=>{const p=d&&n?t:e;return h&&r.add(u),p.has(u)||p.add(u),u},cancel:u=>{e.delete(u),r.delete(u)},process:u=>{if(o=u,n){i=!0;return}n=!0,[t,e]=[e,t],t.forEach(a),t.clear(),n=!1,i&&(i=!1,c.process(u))}};return c}const kC=["read","resolveKeyframes","update","preRender","render","postRender"],Ylt=40;function zG(s,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=kC.reduce((v,b)=>(v[b]=Xlt(r),v),{}),{read:a,resolveKeyframes:c,update:u,preRender:h,render:d,postRender:f}=o,p=()=>{const v=performance.now();e=!1,i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,Ylt),1),i.timestamp=v,i.isProcessing=!0,a.process(i),c.process(i),u.process(i),h.process(i),d.process(i),f.process(i),i.isProcessing=!1,e&&t&&(n=!1,s(p))},m=()=>{e=!0,n=!0,i.isProcessing||s(p)};return{schedule:kC.reduce((v,b)=>{const x=o[b];return v[b]=(E,T=!1,P=!1)=>(e||m(),x.schedule(E,T,P)),v},{}),cancel:v=>{for(let b=0;b<kC.length;b++)o[kC[b]].cancel(v)},state:i,steps:o}}const{schedule:Ne,cancel:vf,state:Es,steps:yD}=zG(typeof requestAnimationFrame<"u"?requestAnimationFrame:zr,!0),WG=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,Qlt=1e-7,Jlt=12;function Zlt(s,t,e,n,i){let r,o,a=0;do o=t+(e-t)/2,r=WG(o,n,i)-s,r>0?e=o:t=o;while(Math.abs(r)>Qlt&&++a<Jlt);return o}function B1(s,t,e,n){if(s===t&&e===n)return zr;const i=r=>Zlt(r,0,1,s,e);return r=>r===0||r===1?r:WG(i(r),t,n)}const GG=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,qG=s=>t=>1-s(1-t),KG=B1(.33,1.53,.69,.99),Z2=qG(KG),XG=GG(Z2),YG=s=>(s*=2)<1?.5*Z2(s):.5*(2-Math.pow(2,-10*(s-1))),tj=s=>1-Math.sin(Math.acos(s)),QG=qG(tj),JG=GG(tj),ZG=s=>/^0[^.\s]+$/u.test(s);function tct(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||ZG(s):!0}const t6=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s),e6=s=>t=>typeof t=="string"&&t.startsWith(s),n6=e6("--"),ect=e6("var(--"),ej=s=>ect(s)?nct.test(s.split("/*")[0].trim()):!1,nct=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sct=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ict(s){const t=sct.exec(s);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function s6(s,t,e=1){const[n,i]=ict(s);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const o=r.trim();return t6(o)?parseFloat(o):o}return ej(i)?s6(i,t,e+1):i}const Gu=(s,t,e)=>e>t?t:e<s?s:e,Hb={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},iS={...Hb,transform:s=>Gu(0,1,s)},RC={...Hb,default:1},U1=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),dh=U1("deg"),tc=U1("%"),yt=U1("px"),rct=U1("vh"),oct=U1("vw"),tV={...tc,parse:s=>tc.parse(s)/100,transform:s=>tc.transform(s*100)},act=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eV=s=>s===Hb||s===yt,nV=(s,t)=>parseFloat(s.split(", ")[t]),sV=(s,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return nV(i[1],t);{const r=n.match(/^matrix\((.+)\)$/u);return r?nV(r[1],s):0}},lct=new Set(["x","y","z"]),cct=$1.filter(s=>!lct.has(s));function uct(s){const t=[];return cct.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Eb={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:sV(4,13),y:sV(5,14)};Eb.translateX=Eb.x;Eb.translateY=Eb.y;const i6=s=>t=>t.test(s),hct={test:s=>s==="auto",parse:s=>s},r6=[Hb,yt,tc,dh,oct,rct,hct],iV=s=>r6.find(i6(s)),Fm=new Set;let _L=!1,EL=!1;function o6(){if(EL){const s=Array.from(Fm).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=uct(n);i.length&&(e.set(n,i),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([r,o])=>{var a;(a=n.getValue(r))===null||a===void 0||a.set(o)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}EL=!1,_L=!1,Fm.forEach(s=>s.complete()),Fm.clear()}function a6(){Fm.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(EL=!0)})}function dct(){a6(),o6()}class nj{constructor(t,e,n,i,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fm.add(this),_L||(_L=!0,Ne.read(a6),Ne.resolveKeyframes(o6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const o=i==null?void 0:i.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const c=n.readValue(e,a);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=a),i&&o===void 0&&i.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const vx=s=>Math.round(s*1e5)/1e5,sj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fct(s){return s==null}const pct=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ij=(s,t)=>e=>!!(typeof e=="string"&&pct.test(e)&&e.startsWith(s)||t&&!fct(e)&&Object.prototype.hasOwnProperty.call(e,t)),l6=(s,t,e)=>n=>{if(typeof n!="string")return n;const[i,r,o,a]=n.match(sj);return{[s]:parseFloat(i),[t]:parseFloat(r),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},gct=s=>Gu(0,255,s),vD={...Hb,transform:s=>Math.round(gct(s))},lp={test:ij("rgb","red"),parse:l6("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+vD.transform(s)+", "+vD.transform(t)+", "+vD.transform(e)+", "+vx(iS.transform(n))+")"};function mct(s){let t="",e="",n="",i="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),i=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),i=s.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const CL={test:ij("#"),parse:mct,transform:lp.transform},ev={test:ij("hsl","hue"),parse:l6("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+tc.transform(vx(t))+", "+tc.transform(vx(e))+", "+vx(iS.transform(n))+")"},Qs={test:s=>lp.test(s)||CL.test(s)||ev.test(s),parse:s=>lp.test(s)?lp.parse(s):ev.test(s)?ev.parse(s):CL.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?lp.transform(s):ev.transform(s)},yct=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vct(s){var t,e;return isNaN(s)&&typeof s=="string"&&(((t=s.match(sj))===null||t===void 0?void 0:t.length)||0)+(((e=s.match(yct))===null||e===void 0?void 0:e.length)||0)>0}const c6="number",u6="color",wct="var",bct="var(",rV="${}",Act=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rS(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},i=[];let r=0;const a=t.replace(Act,c=>(Qs.test(c)?(n.color.push(r),i.push(u6),e.push(Qs.parse(c))):c.startsWith(bct)?(n.var.push(r),i.push(wct),e.push(c)):(n.number.push(r),i.push(c6),e.push(parseFloat(c))),++r,rV)).split(rV);return{values:e,split:a,indexes:n,types:i}}function h6(s){return rS(s).values}function d6(s){const{split:t,types:e}=rS(s),n=t.length;return i=>{let r="";for(let o=0;o<n;o++)if(r+=t[o],i[o]!==void 0){const a=e[o];a===c6?r+=vx(i[o]):a===u6?r+=Qs.transform(i[o]):r+=i[o]}return r}}const xct=s=>typeof s=="number"?0:s;function Sct(s){const t=h6(s);return d6(s)(t.map(xct))}const wf={test:vct,parse:h6,createTransformer:d6,getAnimatableNone:Sct},_ct=new Set(["brightness","contrast","saturate","opacity"]);function Ect(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(sj)||[];if(!n)return s;const i=e.replace(n,"");let r=_ct.has(t)?1:0;return n!==e&&(r*=100),t+"("+r+i+")"}const Cct=/\b([a-z-]*)\(.*?\)/gu,TL={...wf,getAnimatableNone:s=>{const t=s.match(Cct);return t?t.map(Ect).join(" "):s}},Tct={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,backgroundPositionX:yt,backgroundPositionY:yt},Pct={rotate:dh,rotateX:dh,rotateY:dh,rotateZ:dh,scale:RC,scaleX:RC,scaleY:RC,scaleZ:RC,skew:dh,skewX:dh,skewY:dh,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:iS,originX:tV,originY:tV,originZ:yt},oV={...Hb,transform:Math.round},rj={...Tct,...Pct,zIndex:oV,size:yt,fillOpacity:iS,strokeOpacity:iS,numOctaves:oV},kct={...rj,color:Qs,backgroundColor:Qs,outlineColor:Qs,fill:Qs,stroke:Qs,borderColor:Qs,borderTopColor:Qs,borderRightColor:Qs,borderBottomColor:Qs,borderLeftColor:Qs,filter:TL,WebkitFilter:TL},oj=s=>kct[s];function f6(s,t){let e=oj(s);return e!==TL&&(e=wf),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Rct=new Set(["auto","none","0"]);function Mct(s,t,e){let n=0,i;for(;n<s.length&&!i;){const r=s[n];typeof r=="string"&&!Rct.has(r)&&rS(r).values.length&&(i=s[n]),n++}if(i&&e)for(const r of t)s[r]=f6(e,i)}class p6 extends nj{constructor(t,e,n,i,r){super(t,e,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),ej(u))){const h=s6(u,e.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!act.has(n)||t.length!==2)return;const[i,r]=t,o=iV(i),a=iV(r);if(o!==a)if(eV(o)&&eV(a))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)tct(t[i])&&n.push(i);n.length&&Mct(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Eb[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Eb[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function aj(s){return typeof s=="function"}let fT;function Dct(){fT=void 0}const ec={now:()=>(fT===void 0&&ec.set(Es.isProcessing||qlt.useManualTiming?Es.timestamp:performance.now()),fT),set:s=>{fT=s,queueMicrotask(Dct)}},aV=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(wf.test(s)||s==="0")&&!s.startsWith("url("));function Ict(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function Lct(s,t,e,n){const i=s[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const r=s[s.length-1],o=aV(i,t),a=aV(r,t);return!o||!a?!1:Ict(s)||(e==="spring"||aj(e))&&n}const Nct=40;class g6{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ec.now(),this.options={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Nct?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&dct(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=ec.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:o,onComplete:a,onUpdate:c,isGenerator:u}=this.options;if(!u&&!Lct(t,n,i,r))if(o)this.options.duration=0;else{c==null||c(YR(t,this.options,e)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,e);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...h},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Cb=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n},m6=(s,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let r=0;r<i;r++)n+=s(Cb(0,i-1,r))+", ";return`linear(${n.substring(0,n.length-2)})`};function y6(s,t){return t?s*(1e3/t):0}const Oct=5;function v6(s,t,e){const n=Math.max(t-Oct,0);return y6(e-s(n),t-n)}const fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wD=.001;function Fct({duration:s=fn.duration,bounce:t=fn.bounce,velocity:e=fn.velocity,mass:n=fn.mass}){let i,r,o=1-t;o=Gu(fn.minDamping,fn.maxDamping,o),s=Gu(fn.minDuration,fn.maxDuration,Iu(s)),o<1?(i=u=>{const h=u*o,d=h*s,f=h-e,p=PL(u,o),m=Math.exp(-d);return wD-f/p*m},r=u=>{const d=u*o*s,f=d*e+e,p=Math.pow(o,2)*Math.pow(u,2)*s,m=Math.exp(-d),g=PL(Math.pow(u,2),o);return(-i(u)+wD>0?-1:1)*((f-p)*m)/g}):(i=u=>{const h=Math.exp(-u*s),d=(u-e)*s+1;return-wD+h*d},r=u=>{const h=Math.exp(-u*s),d=(e-u)*(s*s);return h*d});const a=5/s,c=$ct(i,r,a);if(s=Du(s),isNaN(c))return{stiffness:fn.stiffness,damping:fn.damping,duration:s};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:s}}}const jct=12;function $ct(s,t,e){let n=e;for(let i=1;i<jct;i++)n=n-s(n)/t(n);return n}function PL(s,t){return s*Math.sqrt(1-t*t)}const kL=2e4;function w6(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<kL;)t+=e,n=s.next(t);return t>=kL?1/0:t}const Bct=["duration","bounce"],Uct=["stiffness","damping","mass"];function lV(s,t){return t.some(e=>s[e]!==void 0)}function Vct(s){let t={velocity:fn.velocity,stiffness:fn.stiffness,damping:fn.damping,mass:fn.mass,isResolvedFromDuration:!1,...s};if(!lV(s,Uct)&&lV(s,Bct))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,r=2*Gu(.05,1,1-s.bounce)*Math.sqrt(i);t={...t,mass:fn.mass,stiffness:i,damping:r}}else{const e=Fct(s);t={...t,...e,mass:fn.mass},t.isResolvedFromDuration=!0}return t}function b6(s=fn.visualDuration,t=fn.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:i}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:r},{stiffness:c,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=Vct({...e,velocity:-Iu(e.velocity||0)}),m=f||0,g=u/(2*Math.sqrt(c*h)),w=o-r,v=Iu(Math.sqrt(c/h)),b=Math.abs(w)<5;n||(n=b?fn.restSpeed.granular:fn.restSpeed.default),i||(i=b?fn.restDelta.granular:fn.restDelta.default);let x;if(g<1){const T=PL(v,g);x=P=>{const k=Math.exp(-g*v*P);return o-k*((m+g*v*w)/T*Math.sin(T*P)+w*Math.cos(T*P))}}else if(g===1)x=T=>o-Math.exp(-v*T)*(w+(m+v*w)*T);else{const T=v*Math.sqrt(g*g-1);x=P=>{const k=Math.exp(-g*v*P),R=Math.min(T*P,300);return o-k*((m+g*v*w)*Math.sinh(R)+T*w*Math.cosh(R))/T}}const E={calculatedDuration:p&&d||null,next:T=>{const P=x(T);if(p)a.done=T>=d;else{let k=0;g<1&&(k=T===0?Du(m):v6(x,T,P));const R=Math.abs(k)<=n,M=Math.abs(o-P)<=i;a.done=R&&M}return a.value=a.done?o:P,a},toString:()=>{const T=Math.min(w6(E),kL),P=m6(k=>E.next(T*k).value,T,30);return T+"ms "+P}};return E}function cV({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=s[0],f={done:!1,value:d},p=R=>a!==void 0&&R<a||c!==void 0&&R>c,m=R=>a===void 0?c:c===void 0||Math.abs(a-R)<Math.abs(c-R)?a:c;let g=e*t;const w=d+g,v=o===void 0?w:o(w);v!==w&&(g=v-d);const b=R=>-g*Math.exp(-R/n),x=R=>v+b(R),E=R=>{const M=b(R),D=x(R);f.done=Math.abs(M)<=u,f.value=f.done?v:D};let T,P;const k=R=>{p(f.value)&&(T=R,P=b6({keyframes:[f.value,m(f.value)],velocity:v6(x,R,f.value),damping:i,stiffness:r,restDelta:u,restSpeed:h}))};return k(0),{calculatedDuration:null,next:R=>{let M=!1;return!P&&T===void 0&&(M=!0,E(R),k(R)),T!==void 0&&R>=T?P.next(R-T):(!M&&E(R),f)}}}const Hct=B1(.42,0,1,1),zct=B1(0,0,.58,1),A6=B1(.42,0,.58,1),Wct=s=>Array.isArray(s)&&typeof s[0]!="number",lj=s=>Array.isArray(s)&&typeof s[0]=="number",uV={linear:zr,easeIn:Hct,easeInOut:A6,easeOut:zct,circIn:tj,circInOut:JG,circOut:QG,backIn:Z2,backInOut:XG,backOut:KG,anticipate:YG},hV=s=>{if(lj(s)){SL(s.length===4);const[t,e,n,i]=s;return B1(t,e,n,i)}else if(typeof s=="string")return SL(uV[s]!==void 0),uV[s];return s},Gct=(s,t)=>e=>t(s(e)),V1=(...s)=>s.reduce(Gct),Je=(s,t,e)=>s+(t-s)*e;function bD(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function qct({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let i=0,r=0,o=0;if(!t)i=r=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,c=2*e-a;i=bD(c,a,s+1/3),r=bD(c,a,s),o=bD(c,a,s-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:n}}function lk(s,t){return e=>e>0?t:s}const AD=(s,t,e)=>{const n=s*s,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},Kct=[CL,lp,ev],Xct=s=>Kct.find(t=>t.test(s));function dV(s){const t=Xct(s);if(!t)return!1;let e=t.parse(s);return t===ev&&(e=qct(e)),e}const fV=(s,t)=>{const e=dV(s),n=dV(t);if(!e||!n)return lk(s,t);const i={...e};return r=>(i.red=AD(e.red,n.red,r),i.green=AD(e.green,n.green,r),i.blue=AD(e.blue,n.blue,r),i.alpha=Je(e.alpha,n.alpha,r),lp.transform(i))},RL=new Set(["none","hidden"]);function Yct(s,t){return RL.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function Qct(s,t){return e=>Je(s,t,e)}function cj(s){return typeof s=="number"?Qct:typeof s=="string"?ej(s)?lk:Qs.test(s)?fV:tut:Array.isArray(s)?x6:typeof s=="object"?Qs.test(s)?fV:Jct:lk}function x6(s,t){const e=[...s],n=e.length,i=s.map((r,o)=>cj(r)(r,t[o]));return r=>{for(let o=0;o<n;o++)e[o]=i[o](r);return e}}function Jct(s,t){const e={...s,...t},n={};for(const i in e)s[i]!==void 0&&t[i]!==void 0&&(n[i]=cj(s[i])(s[i],t[i]));return i=>{for(const r in n)e[r]=n[r](i);return e}}function Zct(s,t){var e;const n=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=s.indexes[o][i[o]],c=(e=s.values[a])!==null&&e!==void 0?e:0;n[r]=c,i[o]++}return n}const tut=(s,t)=>{const e=wf.createTransformer(t),n=rS(s),i=rS(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?RL.has(s)&&!i.values.length||RL.has(t)&&!n.values.length?Yct(s,t):V1(x6(Zct(n,i),i.values),e):lk(s,t)};function S6(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Je(s,t,e):cj(s)(s,t)}function eut(s,t,e){const n=[],i=e||S6,r=s.length-1;for(let o=0;o<r;o++){let a=i(s[o],s[o+1]);if(t){const c=Array.isArray(t)?t[o]||zr:t;a=V1(c,a)}n.push(a)}return n}function nut(s,t,{clamp:e=!0,ease:n,mixer:i}={}){const r=s.length;if(SL(r===t.length),r===1)return()=>t[0];if(r===2&&s[0]===s[1])return()=>t[1];s[0]>s[r-1]&&(s=[...s].reverse(),t=[...t].reverse());const o=eut(t,n,i),a=o.length,c=u=>{let h=0;if(a>1)for(;h<s.length-2&&!(u<s[h+1]);h++);const d=Cb(s[h],s[h+1],u);return o[h](d)};return e?u=>c(Gu(s[0],s[r-1],u)):c}function sut(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const i=Cb(0,t,n);s.push(Je(e,1,i))}}function iut(s){const t=[0];return sut(t,s.length-1),t}function rut(s,t){return s.map(e=>e*t)}function out(s,t){return s.map(()=>t||A6).splice(0,s.length-1)}function ck({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=Wct(n)?n.map(hV):hV(n),r={done:!1,value:t[0]},o=rut(e&&e.length===t.length?e:iut(t),s),a=nut(o,t,{ease:Array.isArray(i)?i:out(t,i)});return{calculatedDuration:s,next:c=>(r.value=a(c),r.done=c>=s,r)}}const aut=s=>{const t=({timestamp:e})=>s(e);return{start:()=>Ne.update(t,!0),stop:()=>vf(t),now:()=>Es.isProcessing?Es.timestamp:ec.now()}},lut={decay:cV,inertia:cV,tween:ck,keyframes:ck,spring:b6},cut=s=>s/100;class uj extends g6{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:e,motionValue:n,element:i,keyframes:r}=this.options,o=(i==null?void 0:i.KeyframeResolver)||nj,a=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(r,a,e,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,a=aj(e)?e:lut[e]||ck;let c,u;a!==ck&&typeof t[0]!="number"&&(c=V1(cut,S6(t[0],t[1])),t=[0,100]);const h=a({...this.options,keyframes:t});r==="mirror"&&(u=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=w6(h));const{calculatedDuration:d}=h,f=d+i,p=f*(n+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:c,calculatedDuration:u,totalDuration:h,resolvedDuration:d}=n;if(this.startTime===null)return r.next(0);const{delay:f,repeat:p,repeatType:m,repeatDelay:g,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),b=this.speed>=0?v<0:v>h;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let x=this.currentTime,E=r;if(p){const R=Math.min(this.currentTime,h)/d;let M=Math.floor(R),D=R%1;!D&&R>=1&&(D=1),D===1&&M--,M=Math.min(M,p+1),!!(M%2)&&(m==="reverse"?(D=1-D,g&&(D-=g/d)):m==="mirror"&&(E=o)),x=Gu(0,1,D)*d}const T=b?{done:!1,value:c[0]}:E.next(x);a&&(T.value=a(T.value));let{done:P}=T;!b&&u!==null&&(P=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return k&&i!==void 0&&(T.value=YR(c,this.options,i)),w&&w(T.value),k&&this.finish(),T}get duration(){const{resolved:t}=this;return t?Iu(t.calculatedDuration):0}get time(){return Iu(this.currentTime)}set time(t){t=Du(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Iu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=aut,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),e&&e();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const uut=new Set(["opacity","clipPath","filter","transform"]);function hj(s){let t;return()=>(t===void 0&&(t=s()),t)}const hut={linearEasing:void 0};function dut(s,t){const e=hj(s);return()=>{var n;return(n=hut[t])!==null&&n!==void 0?n:e()}}const uk=dut(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function _6(s){return!!(typeof s=="function"&&uk()||!s||typeof s=="string"&&(s in ML||uk())||lj(s)||Array.isArray(s)&&s.every(_6))}const wA=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,ML={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wA([0,.65,.55,1]),circOut:wA([.55,0,1,.45]),backIn:wA([.31,.01,.66,-.59]),backOut:wA([.33,1.53,.69,.99])};function E6(s,t){if(s)return typeof s=="function"&&uk()?m6(s,t):lj(s)?wA(s):Array.isArray(s)?s.map(e=>E6(e,t)||ML.easeOut):ML[s]}function fut(s,t,e,{delay:n=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:c}={}){const u={[t]:e};c&&(u.offset=c);const h=E6(a,i);return Array.isArray(h)&&(u.easing=h),s.animate(u,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function pV(s,t){s.timeline=t,s.onfinish=null}const put=hj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hk=10,gut=2e4;function mut(s){return aj(s.type)||s.type==="spring"||!_6(s.ease)}function yut(s,t){const e=new uj({...t,keyframes:s,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:s[0]};const i=[];let r=0;for(;!n.done&&r<gut;)n=e.sample(r),i.push(n.value),r+=hk;return{times:void 0,keyframes:i,duration:r-hk,ease:"linear"}}const C6={anticipate:YG,backInOut:XG,circInOut:JG};function vut(s){return s in C6}class gV extends g6{constructor(t){super(t);const{name:e,motionValue:n,element:i,keyframes:r}=this.options;this.resolver=new p6(r,(o,a)=>this.onKeyframesResolved(o,a),e,n,i),this.resolver.scheduleResolve()}initPlayback(t,e){var n;let{duration:i=300,times:r,ease:o,type:a,motionValue:c,name:u,startTime:h}=this.options;if(!(!((n=c.owner)===null||n===void 0)&&n.current))return!1;if(typeof o=="string"&&uk()&&vut(o)&&(o=C6[o]),mut(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:g,...w}=this.options,v=yut(t,w);t=v.keyframes,t.length===1&&(t[1]=t[0]),i=v.duration,r=v.times,o=v.ease,a="keyframes"}const d=fut(c.owner.current,u,t,{...this.options,duration:i,times:r,ease:o});return d.startTime=h??this.calcStartTime(),this.pendingTimeline?(pV(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;c.set(YR(t,this.options,e)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:r,type:a,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return Iu(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return Iu(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=Du(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return zr;const{animation:n}=e;pV(n,t)}return zr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:i,type:r,ease:o,times:a}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:d,element:f,...p}=this.options,m=new uj({...p,keyframes:n,duration:i,type:r,ease:o,times:a,isGenerator:!0}),g=Du(this.time);u.setWithVelocity(m.sample(g-hk).value,m.sample(g).value,hk)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:o,type:a}=t;return put()&&n&&uut.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!i&&r!=="mirror"&&o!==0&&a!=="inertia"}}const wut=hj(()=>window.ScrollTimeline!==void 0);class but{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(i=>wut()&&i.attachTimeline?i.attachTimeline(t):e(i));return()=>{n.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Aut({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const dj=(s,t,e,n={},i,r)=>o=>{const a=J2(n,s)||{},c=a.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Du(c);let h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:s,motionValue:t,element:r?void 0:i};Aut(a)||(h={...h,...Glt(s,h)}),h.duration&&(h.duration=Du(h.duration)),h.repeatDelay&&(h.repeatDelay=Du(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!r&&t.get()!==void 0){const f=YR(h.keyframes,a);if(f!==void 0)return Ne.update(()=>{h.onUpdate(f),h.onComplete()}),new but([])}return!r&&gV.supports(h)?new gV(h):new uj(h)},xut=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),Sut=s=>xL(s)?s[s.length-1]||0:s;function fj(s,t){s.indexOf(t)===-1&&s.push(t)}function pj(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}class gj{constructor(){this.subscriptions=[]}add(t){return fj(this.subscriptions,t),()=>pj(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mV=30,_ut=s=>!isNaN(parseFloat(s));class Eut{constructor(t,e={}){this.version="11.15.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const r=ec.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=ec.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=_ut(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new gj);const n=this.events[t].add(e);return t==="change"?()=>{n(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ec.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>mV)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,mV);return y6(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oS(s,t){return new Eut(s,t)}function Cut(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,oS(e))}function Tut(s,t){const e=XR(s,t);let{transitionEnd:n={},transition:i={},...r}=e||{};r={...r,...n};for(const o in r){const a=Sut(r[o]);Cut(s,o,a)}}const mj=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Put="framerAppearId",T6="data-"+mj(Put);function P6(s){return s.props[T6]}const si=s=>!!(s&&s.getVelocity);function kut(s){return!!(si(s)&&s.add)}function DL(s,t){const e=s.getValue("willChange");if(kut(e))return e.add(t)}function Rut({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function k6(s,t,{delay:e=0,transitionOverride:n,type:i}={}){var r;let{transition:o=s.getDefaultTransition(),transitionEnd:a,...c}=t;n&&(o=n);const u=[],h=i&&s.animationState&&s.animationState.getState()[i];for(const d in c){const f=s.getValue(d,(r=s.latestValues[d])!==null&&r!==void 0?r:null),p=c[d];if(p===void 0||h&&Rut(h,d))continue;const m={delay:e,...J2(o||{},d)};let g=!1;if(window.MotionHandoffAnimation){const v=P6(s);if(v){const b=window.MotionHandoffAnimation(v,d,Ne);b!==null&&(m.startTime=b,g=!0)}}DL(s,d),f.start(dj(d,f,p,s.shouldReduceMotion&&ny.has(d)?{type:!1}:m,s,g));const w=f.animation;w&&u.push(w)}return a&&Promise.all(u).then(()=>{Ne.update(()=>{a&&Tut(s,a)})}),u}function IL(s,t,e={}){var n;const i=XR(s,t,e.type==="exit"?(n=s.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:r=s.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(r=e.transitionOverride);const o=i?()=>Promise.all(k6(s,i,e)):()=>Promise.resolve(),a=s.variantChildren&&s.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=r;return Mut(s,t,h+u,d,f,e)}:()=>Promise.resolve(),{when:c}=r;if(c){const[u,h]=c==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(e.delay)])}function Mut(s,t,e=0,n=0,i=1,r){const o=[],a=(s.variantChildren.size-1)*n,c=i===1?(u=0)=>u*n:(u=0)=>a-u*n;return Array.from(s.variantChildren).sort(Dut).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(IL(u,t,{...r,delay:e+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Dut(s,t){return s.sortNodePosition(t)}function Iut(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(r=>IL(s,r,e));n=Promise.all(i)}else if(typeof t=="string")n=IL(s,t,e);else{const i=typeof t=="function"?XR(s,t,e.custom):t;n=Promise.all(k6(s,i,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const Lut=Q2.length;function R6(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?R6(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<Lut;e++){const n=Q2[e],i=s.props[n];(sS(i)||i===!1)&&(t[n]=i)}return t}const Nut=[...Y2].reverse(),Out=Y2.length;function Fut(s){return t=>Promise.all(t.map(({animation:e,options:n})=>Iut(s,e,n)))}function jut(s){let t=Fut(s),e=yV(),n=!0;const i=c=>(u,h)=>{var d;const f=XR(s,h,c==="exit"?(d=s.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:m,...g}=f;u={...u,...g,...m}}return u};function r(c){t=c(s)}function o(c){const{props:u}=s,h=R6(s.parent)||{},d=[],f=new Set;let p={},m=1/0;for(let w=0;w<Out;w++){const v=Nut[w],b=e[v],x=u[v]!==void 0?u[v]:h[v],E=sS(x),T=v===c?b.isActive:null;T===!1&&(m=w);let P=x===h[v]&&x!==u[v]&&E;if(P&&n&&s.manuallyAnimateOnMount&&(P=!1),b.protectedKeys={...p},!b.isActive&&T===null||!x&&!b.prevProp||KR(x)||typeof x=="boolean")continue;const k=$ut(b.prevProp,x);let R=k||v===c&&b.isActive&&!P&&E||w>m&&E,M=!1;const D=Array.isArray(x)?x:[x];let L=D.reduce(i(v),{});T===!1&&(L={});const{prevResolvedValues:$={}}=b,U={...$,...L},I=j=>{R=!0,f.has(j)&&(M=!0,f.delete(j)),b.needsAnimating[j]=!0;const F=s.getValue(j);F&&(F.liveStyle=!1)};for(const j in U){const F=L[j],O=$[j];if(p.hasOwnProperty(j))continue;let V=!1;xL(F)&&xL(O)?V=!HG(F,O):V=F!==O,V?F!=null?I(j):f.add(j):F!==void 0&&f.has(j)?I(j):b.protectedKeys[j]=!0}b.prevProp=x,b.prevResolvedValues=L,b.isActive&&(p={...p,...L}),n&&s.blockInitialAnimation&&(R=!1),R&&(!(P&&k)||M)&&d.push(...D.map(j=>({animation:j,options:{type:v}})))}if(f.size){const w={};f.forEach(v=>{const b=s.getBaseTarget(v),x=s.getValue(v);x&&(x.liveStyle=!0),w[v]=b??null}),d.push({animation:w})}let g=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!s.manuallyAnimateOnMount&&(g=!1),n=!1,g?t(d):Promise.resolve()}function a(c,u){var h;if(e[c].isActive===u)return Promise.resolve();(h=s.variantChildren)===null||h===void 0||h.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),e[c].isActive=u;const d=o(c);for(const f in e)e[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>e,reset:()=>{e=yV(),n=!0}}}function $ut(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!HG(t,s):!1}function $f(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yV(){return{animate:$f(!0),whileInView:$f(),whileHover:$f(),whileTap:$f(),whileDrag:$f(),whileFocus:$f(),exit:$f()}}class Mf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class But extends Mf{constructor(t){super(t),t.animationState||(t.animationState=jut(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();KR(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Uut=0;class Vut extends Mf{constructor(){super(...arguments),this.id=Uut++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Hut={animation:{Feature:But},exit:{Feature:Vut}},Wo={x:!1,y:!1};function M6(){return Wo.x||Wo.y}function zut(s,t,e){var n;if(s instanceof Element)return[s];if(typeof s=="string"){let i=document;const r=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(s);return r?Array.from(r):[]}return Array.from(s)}function D6(s,t){const e=zut(s),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function vV(s){return t=>{t.pointerType==="touch"||M6()||s(t)}}function Wut(s,t,e={}){const[n,i,r]=D6(s,e),o=vV(a=>{const{target:c}=a,u=t(a);if(typeof u!="function"||!c)return;const h=vV(d=>{u(d),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,i)});return n.forEach(a=>{a.addEventListener("pointerenter",o,i)}),r}const I6=(s,t)=>t?s===t?!0:I6(s,t.parentElement):!1,yj=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,Gut=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qut(s){return Gut.has(s.tagName)||s.tabIndex!==-1}const bA=new WeakSet;function wV(s){return t=>{t.key==="Enter"&&s(t)}}function xD(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Kut=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=wV(()=>{if(bA.has(e))return;xD(e,"down");const i=wV(()=>{xD(e,"up")}),r=()=>xD(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function bV(s){return yj(s)&&!M6()}function Xut(s,t,e={}){const[n,i,r]=D6(s,e),o=a=>{const c=a.currentTarget;if(!bV(a)||bA.has(c))return;bA.add(c);const u=t(a),h=(p,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!bV(p)||!bA.has(c))&&(bA.delete(c),typeof u=="function"&&u(p,{success:m}))},d=p=>{h(p,e.useGlobalTarget||I6(c,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return n.forEach(a=>{!qut(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>Kut(u,i),i)}),r}function Yut(s){return s==="x"||s==="y"?Wo[s]?null:(Wo[s]=!0,()=>{Wo[s]=!1}):Wo.x||Wo.y?null:(Wo.x=Wo.y=!0,()=>{Wo.x=Wo.y=!1})}function H1(s){return{point:{x:s.pageX,y:s.pageY}}}const Qut=s=>t=>yj(t)&&s(t,H1(t));function aS(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}function wx(s,t,e,n){return aS(s,t,Qut(e),n)}const AV=(s,t)=>Math.abs(s-t);function Jut(s,t){const e=AV(s.x,t.x),n=AV(s.y,t.y);return Math.sqrt(e**2+n**2)}class L6{constructor(t,e,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_D(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Jut(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:m}=d,{timestamp:g}=Es;this.history.push({...m,timestamp:g});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=SD(f,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=_D(d.type==="pointercancel"?this.lastMoveEventInfo:SD(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,w),m&&m(d,w)},!yj(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=n,this.contextWindow=i||window;const o=H1(t),a=SD(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Es;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=e;h&&h(t,_D(a,this.history)),this.removeListeners=V1(wx(this.contextWindow,"pointermove",this.handlePointerMove),wx(this.contextWindow,"pointerup",this.handlePointerUp),wx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vf(this.updatePoint)}}function SD(s,t){return t?{point:t(s.point)}:s}function xV(s,t){return{x:s.x-t.x,y:s.y-t.y}}function _D({point:s},t){return{point:s,delta:xV(s,N6(t)),offset:xV(s,Zut(t)),velocity:tht(t,.1)}}function Zut(s){return s[0]}function N6(s){return s[s.length-1]}function tht(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const i=N6(s);for(;e>=0&&(n=s[e],!(i.timestamp-n.timestamp>Du(t)));)e--;if(!n)return{x:0,y:0};const r=Iu(i.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-n.x)/r,y:(i.y-n.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function nv(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}const O6=1e-4,eht=1-O6,nht=1+O6,F6=.01,sht=0-F6,iht=0+F6;function Kr(s){return s.max-s.min}function rht(s,t,e){return Math.abs(s-t)<=e}function SV(s,t,e,n=.5){s.origin=n,s.originPoint=Je(t.min,t.max,s.origin),s.scale=Kr(e)/Kr(t),s.translate=Je(e.min,e.max,s.origin)-s.originPoint,(s.scale>=eht&&s.scale<=nht||isNaN(s.scale))&&(s.scale=1),(s.translate>=sht&&s.translate<=iht||isNaN(s.translate))&&(s.translate=0)}function bx(s,t,e,n){SV(s.x,t.x,e.x,n?n.originX:void 0),SV(s.y,t.y,e.y,n?n.originY:void 0)}function _V(s,t,e){s.min=e.min+t.min,s.max=s.min+Kr(t)}function oht(s,t,e){_V(s.x,t.x,e.x),_V(s.y,t.y,e.y)}function EV(s,t,e){s.min=t.min-e.min,s.max=s.min+Kr(t)}function Ax(s,t,e){EV(s.x,t.x,e.x),EV(s.y,t.y,e.y)}function aht(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Je(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Je(e,s,n.max):Math.min(s,e)),s}function CV(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function lht(s,{top:t,left:e,bottom:n,right:i}){return{x:CV(s.x,e,i),y:CV(s.y,t,n)}}function TV(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function cht(s,t){return{x:TV(s.x,t.x),y:TV(s.y,t.y)}}function uht(s,t){let e=.5;const n=Kr(s),i=Kr(t);return i>n?e=Cb(t.min,t.max-n,s.min):n>i&&(e=Cb(s.min,s.max-i,t.min)),Gu(0,1,e)}function hht(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const LL=.35;function dht(s=LL){return s===!1?s=0:s===!0&&(s=LL),{x:PV(s,"left","right"),y:PV(s,"top","bottom")}}function PV(s,t,e){return{min:kV(s,t),max:kV(s,e)}}function kV(s,t){return typeof s=="number"?s:s[t]||0}const RV=()=>({translate:0,scale:1,origin:0,originPoint:0}),sv=()=>({x:RV(),y:RV()}),MV=()=>({min:0,max:0}),An=()=>({x:MV(),y:MV()});function no(s){return[s("x"),s("y")]}function j6({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function fht({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function pht(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function ED(s){return s===void 0||s===1}function NL({scale:s,scaleX:t,scaleY:e}){return!ED(s)||!ED(t)||!ED(e)}function zf(s){return NL(s)||$6(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function $6(s){return DV(s.x)||DV(s.y)}function DV(s){return s&&s!=="0%"}function dk(s,t,e){const n=s-e,i=t*n;return e+i}function IV(s,t,e,n,i){return i!==void 0&&(s=dk(s,i,n)),dk(s,e,n)+t}function OL(s,t=0,e=1,n,i){s.min=IV(s.min,t,e,n,i),s.max=IV(s.max,t,e,n,i)}function B6(s,{x:t,y:e}){OL(s.x,t.translate,t.scale,t.originPoint),OL(s.y,e.translate,e.scale,e.originPoint)}const LV=.999999999999,NV=1.0000000000001;function ght(s,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let r,o;for(let a=0;a<i;a++){r=e[a],o=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&rv(s,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,B6(s,o)),n&&zf(r.latestValues)&&rv(s,r.latestValues))}t.x<NV&&t.x>LV&&(t.x=1),t.y<NV&&t.y>LV&&(t.y=1)}function iv(s,t){s.min=s.min+t,s.max=s.max+t}function OV(s,t,e,n,i=.5){const r=Je(s.min,s.max,i);OL(s,t,e,r,n)}function rv(s,t){OV(s.x,t.x,t.scaleX,t.scale,t.originX),OV(s.y,t.y,t.scaleY,t.scale,t.originY)}function U6(s,t){return j6(pht(s.getBoundingClientRect(),t))}function mht(s,t,e){const n=U6(s,e),{scroll:i}=t;return i&&(iv(n.x,i.offset.x),iv(n.y,i.offset.y)),n}const V6=({current:s})=>s?s.ownerDocument.defaultView:null,yht=new WeakMap;class vht{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(H1(h).point)},r=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Yut(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),no(w=>{let v=this.getAxisMotionValue(w).get()||0;if(tc.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const x=b.layout.layoutBox[w];x&&(v=Kr(x)*(parseFloat(v)/100))}}this.originPoint[w]=v}),m&&Ne.postRender(()=>m(h,d)),DL(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=d;if(p&&this.currentDirection===null){this.currentDirection=wht(w),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),g&&g(h,d)},a=(h,d)=>this.stop(h,d),c=()=>no(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new L6(t,{onSessionStart:i,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:V6(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&Ne.postRender(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!MC(t,i,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=aht(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&nv(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=lht(i.layoutBox,e):this.constraints=!1,this.elastic=dht(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&no(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=hht(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!nv(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=mht(n,i.root,this.visualElement.getTransformPagePoint());let o=cht(i.layout.layoutBox,r);if(e){const a=e(fht(o));this.hasMutatedConstraints=!!a,a&&(o=j6(a))}return o}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=no(h=>{if(!MC(h,e,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:n?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,m)});return Promise.all(u).then(a)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return DL(this.visualElement,t),n.start(dj(t,n,0,e,this.visualElement,!1))}stopAnimation(){no(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){no(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){no(e=>{const{drag:n}=this.getProps();if(!MC(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(e);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[e];r.set(t[e]-Je(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!nv(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};no(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();i[o]=uht({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),no(o=>{if(!MC(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Je(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;yht.set(this.visualElement,this);const t=this.visualElement.current,e=wx(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();nv(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ne.read(n);const o=aS(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(no(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=LL,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function MC(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function wht(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class bht extends Mf{constructor(t){super(t),this.removeGroupControls=zr,this.removeListeners=zr,this.controls=new vht(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const FV=s=>(t,e)=>{s&&Ne.postRender(()=>s(t,e))};class Aht extends Mf{constructor(){super(...arguments),this.removePointerDownListener=zr}onPointerDown(t){this.session=new L6(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V6(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:FV(t),onStart:FV(e),onMove:n,onEnd:(r,o)=>{delete this.session,i&&Ne.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=wx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vj=C.createContext(null);function xht(){const s=C.useContext(vj);if(s===null)return[!0,null];const{isPresent:t,onExitComplete:e,register:n}=s,i=C.useId();C.useEffect(()=>n(i),[]);const r=C.useCallback(()=>e&&e(i),[i,e]);return!t&&e?[!1,r]:[!0]}const H6=C.createContext({}),z6=C.createContext({}),pT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jV(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const sA={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(yt.test(s))s=parseFloat(s);else return s;const e=jV(s,t.target.x),n=jV(s,t.target.y);return`${e}% ${n}%`}},Sht={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,i=wf.parse(s);if(i.length>5)return n;const r=wf.createTransformer(s),o=typeof i[0]!="number"?1:0,a=e.x.scale*t.x,c=e.y.scale*t.y;i[0+o]/=a,i[1+o]/=c;const u=Je(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),r(i)}},fk={};function _ht(s){Object.assign(fk,s)}const{schedule:wj,cancel:BAt}=zG(queueMicrotask,!1);class Eht extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=t;_ht(Cht),r&&(e.group&&e.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),pT.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:r}=this.props,o=n.projection;return o&&(o.isPresent=r,i||t.layoutDependency!==e||e===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Ne.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),wj.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function W6(s){const[t,e]=xht(),n=C.useContext(H6);return _.jsx(Eht,{...s,layoutGroup:n,switchLayoutGroup:C.useContext(z6),isPresent:t,safeToRemove:e})}const Cht={borderRadius:{...sA,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sA,borderTopRightRadius:sA,borderBottomLeftRadius:sA,borderBottomRightRadius:sA,boxShadow:Sht},G6=["TopLeft","TopRight","BottomLeft","BottomRight"],Tht=G6.length,$V=s=>typeof s=="string"?parseFloat(s):s,BV=s=>typeof s=="number"||yt.test(s);function Pht(s,t,e,n,i,r){i?(s.opacity=Je(0,e.opacity!==void 0?e.opacity:1,kht(n)),s.opacityExit=Je(t.opacity!==void 0?t.opacity:1,0,Rht(n))):r&&(s.opacity=Je(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let o=0;o<Tht;o++){const a=`border${G6[o]}Radius`;let c=UV(t,a),u=UV(e,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||BV(c)===BV(u)?(s[a]=Math.max(Je($V(c),$V(u),n),0),(tc.test(u)||tc.test(c))&&(s[a]+="%")):s[a]=u}(t.rotate||e.rotate)&&(s.rotate=Je(t.rotate||0,e.rotate||0,n))}function UV(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const kht=q6(0,.5,QG),Rht=q6(.5,.95,zr);function q6(s,t,e){return n=>n<s?0:n>t?1:e(Cb(s,t,n))}function VV(s,t){s.min=t.min,s.max=t.max}function Jr(s,t){VV(s.x,t.x),VV(s.y,t.y)}function HV(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}function zV(s,t,e,n,i){return s-=t,s=dk(s,1/e,n),i!==void 0&&(s=dk(s,1/i,n)),s}function Mht(s,t=0,e=1,n=.5,i,r=s,o=s){if(tc.test(t)&&(t=parseFloat(t),t=Je(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Je(r.min,r.max,n);s===r&&(a-=t),s.min=zV(s.min,t,e,a,i),s.max=zV(s.max,t,e,a,i)}function WV(s,t,[e,n,i],r,o){Mht(s,t[e],t[n],t[i],t.scale,r,o)}const Dht=["x","scaleX","originX"],Iht=["y","scaleY","originY"];function GV(s,t,e,n){WV(s.x,t,Dht,e?e.x:void 0,n?n.x:void 0),WV(s.y,t,Iht,e?e.y:void 0,n?n.y:void 0)}function qV(s){return s.translate===0&&s.scale===1}function K6(s){return qV(s.x)&&qV(s.y)}function KV(s,t){return s.min===t.min&&s.max===t.max}function Lht(s,t){return KV(s.x,t.x)&&KV(s.y,t.y)}function XV(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function X6(s,t){return XV(s.x,t.x)&&XV(s.y,t.y)}function YV(s){return Kr(s.x)/Kr(s.y)}function QV(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}class Nht{constructor(){this.members=[]}add(t){fj(this.members,t),t.scheduleRender()}remove(t){if(pj(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Oht(s,t,e){let n="";const i=s.x.translate/t.x,r=s.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((i||r||o)&&(n=`translate3d(${i}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:m}=e;u&&(n=`perspective(${u}px) ${n}`),h&&(n+=`rotate(${h}deg) `),d&&(n+=`rotateX(${d}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),m&&(n+=`skewY(${m}deg) `)}const a=s.x.scale*t.x,c=s.y.scale*t.y;return(a!==1||c!==1)&&(n+=`scale(${a}, ${c})`),n||"none"}const Fht=(s,t)=>s.depth-t.depth;class jht{constructor(){this.children=[],this.isDirty=!1}add(t){fj(this.children,t),this.isDirty=!0}remove(t){pj(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Fht),this.isDirty=!1,this.children.forEach(t)}}function gT(s){const t=si(s)?s.get():s;return xut(t)?t.toValue():t}function $ht(s,t){const e=ec.now(),n=({timestamp:i})=>{const r=i-e;r>=t&&(vf(n),s(r-t))};return Ne.read(n,!0),()=>vf(n)}function Bht(s){return s instanceof SVGElement&&s.tagName!=="svg"}function Uht(s,t,e){const n=si(s)?s:oS(s);return n.start(dj("",n,t,e)),n.animation}const Wf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},AA=typeof window<"u"&&window.MotionDebug!==void 0,CD=["","X","Y","Z"],Vht={visibility:"hidden"},JV=1e3;let Hht=0;function TD(s,t,e,n){const{latestValues:i}=t;i[s]&&(e[s]=i[s],t.setStaticValue(s,0),n&&(n[s]=0))}function Y6(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=P6(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:r}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",Ne,!(i||r))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&Y6(n)}function Q6({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Hht++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,AA&&(Wf.totalNodes=Wf.resolvedTargetDeltas=Wf.recalculatedProjection=0),this.nodes.forEach(Ght),this.nodes.forEach(Qht),this.nodes.forEach(Jht),this.nodes.forEach(qht),AA&&window.MotionDebug.record(Wf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new jht)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new gj),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Bht(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),s){let d;const f=()=>this.root.updateBlockedByResize=!1;s(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=$ht(f,250),pT.hasAnimatedSinceResize&&(pT.hasAnimatedSinceResize=!1,this.nodes.forEach(tH))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||h.getDefaultTransition()||sdt,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=h.getProps(),b=!this.targetLayout||!X6(this.targetLayout,m)||p,x=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const E={...J2(g,"layout"),onPlay:w,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||tH(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zht),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Y6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZV);return}this.isUpdating||this.nodes.forEach(Xht),this.isUpdating=!1,this.nodes.forEach(Yht),this.nodes.forEach(zht),this.nodes.forEach(Wht),this.clearAllSnapshots();const a=ec.now();Es.delta=Gu(0,1e3/60,a-Es.timestamp),Es.timestamp=a,Es.isProcessing=!0,yD.update.process(Es),yD.preRender.process(Es),yD.render.process(Es),Es.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Kht),this.sharedNodes.forEach(tdt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!K6(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||zf(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),idt(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return An();const c=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(rdt))){const{scroll:h}=this.root;h&&(iv(c.x,h.offset.x),iv(c.y,h.offset.y))}return c}removeElementScroll(o){var a;const c=An();if(Jr(c,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Jr(c,o),iv(c.x,d.offset.x),iv(c.y,d.offset.y))}return c}applyTransform(o,a=!1){const c=An();Jr(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&rv(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),zf(h.latestValues)&&rv(c,h.latestValues)}return zf(this.latestValues)&&rv(c,this.latestValues),c}removeTransform(o){const a=An();Jr(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zf(u.latestValues))continue;NL(u.latestValues)&&u.updateSnapshot();const h=An(),d=u.measurePageBox();Jr(h,d),GV(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return zf(this.latestValues)&&GV(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Es.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Es.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Ax(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oht(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jr(this.target,this.layout.layoutBox),B6(this.target,this.targetDelta)):Jr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Ax(this.relativeTargetOrigin,this.target,p.target),Jr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}AA&&Wf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||NL(this.parent.latestValues)||$6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Es.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Jr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;ght(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=An());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HV(this.prevProjectionDelta.x,this.projectionDelta.x),HV(this.prevProjectionDelta.y,this.projectionDelta.y)),bx(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!QV(this.projectionDelta.x,this.prevProjectionDelta.x)||!QV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),AA&&Wf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sv(),this.projectionDelta=sv(),this.projectionDeltaWithTransform=sv()}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=sv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=An(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,w=this.getStack(),v=!w||w.members.length<=1,b=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(ndt));this.animationProgress=0;let x;this.mixTargetDelta=E=>{const T=E/1e3;eH(d.x,o.x,T),eH(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ax(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),edt(this.relativeTarget,this.relativeTargetOrigin,f,T),x&&Lht(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=An()),Jr(x,this.relativeTarget)),g&&(this.animationValues=h,Pht(h,u,this.latestValues,T,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{pT.hasAnimatedSinceResize=!0,this.currentAnimation=Uht(0,JV,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&J6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||An();const d=Kr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Kr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Jr(a,c),rv(a,h),bx(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Nht),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&TD("z",o,u,this.animationValues);for(let h=0;h<CD.length;h++)TD(`rotate${CD[h]}`,o,u,this.animationValues),TD(`skew${CD[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Vht;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=gT(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=gT(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!zf(this.latestValues)&&(g.transform=h?h({},""):"none",this.hasProjected=!1),g}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Oht(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in fk){if(f[g]===void 0)continue;const{correct:w,applyTo:v}=fk[g],b=u.transform==="none"?f[g]:w(f[g],d);if(v){const x=v.length;for(let E=0;E<x;E++)u[v[E]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=d===this?gT(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ZV),this.root.sharedNodes.clear()}}}function zht(s){s.updateLayout()}function Wht(s){var t;const e=((t=s.resumeFrom)===null||t===void 0?void 0:t.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&e&&s.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=s.layout,{animationType:r}=s.options,o=e.source!==s.layout.source;r==="size"?no(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=Kr(f);f.min=n[d].min,f.max=f.min+p}):J6(r,e.layoutBox,n)&&no(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=Kr(n[d]);f.max=f.min+p,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[d].max=s.relativeTarget[d].min+p)});const a=sv();bx(a,n,e.layoutBox);const c=sv();o?bx(c,s.applyTransform(i,!0),e.measuredBox):bx(c,n,e.layoutBox);const u=!K6(a);let h=!1;if(!s.resumeFrom){const d=s.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const m=An();Ax(m,e.layoutBox,f.layoutBox);const g=An();Ax(g,n,p.layoutBox),X6(m,g)||(h=!0),d.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=m,s.relativeParent=d)}}}s.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(s.isLead()){const{onExitComplete:n}=s.options;n&&n()}s.options.transition=void 0}function Ght(s){AA&&Wf.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function qht(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Kht(s){s.clearSnapshot()}function ZV(s){s.clearMeasurements()}function Xht(s){s.isLayoutDirty=!1}function Yht(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function tH(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Qht(s){s.resolveTargetDelta()}function Jht(s){s.calcProjection()}function Zht(s){s.resetSkewAndRotation()}function tdt(s){s.removeLeadSnapshot()}function eH(s,t,e){s.translate=Je(t.translate,0,e),s.scale=Je(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function nH(s,t,e,n){s.min=Je(t.min,e.min,n),s.max=Je(t.max,e.max,n)}function edt(s,t,e,n){nH(s.x,t.x,e.x,n),nH(s.y,t.y,e.y,n)}function ndt(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const sdt={duration:.45,ease:[.4,0,.1,1]},sH=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),iH=sH("applewebkit/")&&!sH("chrome/")?Math.round:zr;function rH(s){s.min=iH(s.min),s.max=iH(s.max)}function idt(s){rH(s.x),rH(s.y)}function J6(s,t,e){return s==="position"||s==="preserve-aspect"&&!rht(YV(t),YV(e),.2)}function rdt(s){var t;return s!==s.root&&((t=s.scroll)===null||t===void 0?void 0:t.wasRoot)}const odt=Q6({attachResizeListener:(s,t)=>aS(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),PD={current:void 0},Z6=Q6({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!PD.current){const s=new odt({});s.mount(window),s.setOptions({layoutScroll:!0}),PD.current=s}return PD.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),adt={pan:{Feature:Aht},drag:{Feature:bht,ProjectionNode:Z6,MeasureLayout:W6}};function oH(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,r=n[i];r&&Ne.postRender(()=>r(t,H1(t)))}class ldt extends Mf{mount(){const{current:t}=this.node;t&&(this.unmount=Wut(t,e=>(oH(this.node,e,"Start"),n=>oH(this.node,n,"End"))))}unmount(){}}class cdt extends Mf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=V1(aS(this.node.current,"focus",()=>this.onFocus()),aS(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aH(s,t,e){const{props:n}=s;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),r=n[i];r&&Ne.postRender(()=>r(t,H1(t)))}class udt extends Mf{mount(){const{current:t}=this.node;t&&(this.unmount=Xut(t,e=>(aH(this.node,e,"Start"),(n,{success:i})=>aH(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const FL=new WeakMap,kD=new WeakMap,hdt=s=>{const t=FL.get(s.target);t&&t(s)},ddt=s=>{s.forEach(hdt)};function fdt({root:s,...t}){const e=s||document;kD.has(e)||kD.set(e,{});const n=kD.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(ddt,{root:s,...t})),n[i]}function pdt(s,t,e){const n=fdt(t);return FL.set(s,e),n.observe(s),()=>{FL.delete(s),n.unobserve(s)}}const gdt={some:0,all:1};class mdt extends Mf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:gdt[i]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return pdt(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(ydt(t,e))&&this.startObserver()}unmount(){}}function ydt({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const vdt={inView:{Feature:mdt},tap:{Feature:udt},focus:{Feature:cdt},hover:{Feature:ldt}},wdt={layout:{ProjectionNode:Z6,MeasureLayout:W6}},t8=C.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"}),QR=C.createContext({}),bj=typeof window<"u",bdt=bj?C.useLayoutEffect:C.useEffect,e8=C.createContext({strict:!1});function Adt(s,t,e,n,i){var r,o;const{visualElement:a}=C.useContext(QR),c=C.useContext(e8),u=C.useContext(vj),h=C.useContext(t8).reducedMotion,d=C.useRef(null);n=n||c.renderer,!d.current&&n&&(d.current=n(s,{visualState:t,parent:a,props:e,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,p=C.useContext(z6);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&xdt(d.current,e,i,p);const m=C.useRef(!1);C.useInsertionEffect(()=>{f&&m.current&&f.update(e,u)});const g=e[T6],w=C.useRef(!!g&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return bdt(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),wj.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),C.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,g)}),w.current=!1))}),f}function xdt(s,t,e,n){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:u}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:n8(s.parent)),s.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||a&&nv(a),visualElement:s,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function n8(s){if(s)return s.options.allowProjection!==!1?s.projection:n8(s.parent)}function Sdt(s,t,e){return C.useCallback(n=>{n&&s.mount&&s.mount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):nv(e)&&(e.current=n))},[t])}function JR(s){return KR(s.animate)||Q2.some(t=>sS(s[t]))}function s8(s){return!!(JR(s)||s.variants)}function _dt(s,t){if(JR(s)){const{initial:e,animate:n}=s;return{initial:e===!1||sS(e)?e:void 0,animate:sS(n)?n:void 0}}return s.inherit!==!1?t:{}}function Edt(s){const{initial:t,animate:e}=_dt(s,C.useContext(QR));return C.useMemo(()=>({initial:t,animate:e}),[lH(t),lH(e)])}function lH(s){return Array.isArray(s)?s.join(" "):s}const cH={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tb={};for(const s in cH)Tb[s]={isEnabled:t=>cH[s].some(e=>!!t[e])};function Cdt(s){for(const t in s)Tb[t]={...Tb[t],...s[t]}}const Tdt=Symbol.for("motionComponentSymbol");function Pdt({preloadedFeatures:s,createVisualElement:t,useRender:e,useVisualState:n,Component:i}){s&&Cdt(s);function r(a,c){let u;const h={...C.useContext(t8),...a,layoutId:kdt(a)},{isStatic:d}=h,f=Edt(a),p=n(a,d);if(!d&&bj){Rdt();const m=Mdt(h);u=m.MeasureLayout,f.visualElement=Adt(i,p,h,t,m.ProjectionNode)}return _.jsxs(QR.Provider,{value:f,children:[u&&f.visualElement?_.jsx(u,{visualElement:f.visualElement,...h}):null,e(i,a,Sdt(p,f.visualElement,c),p,d,f.visualElement)]})}const o=C.forwardRef(r);return o[Tdt]=i,o}function kdt({layoutId:s}){const t=C.useContext(H6).id;return t&&s!==void 0?t+"-"+s:s}function Rdt(s,t){C.useContext(e8).strict}function Mdt(s){const{drag:t,layout:e}=Tb;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(s)||e!=null&&e.isEnabled(s)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Ddt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Aj(s){return typeof s!="string"||s.includes("-")?!1:!!(Ddt.indexOf(s)>-1||/[A-Z]/u.test(s))}function i8(s,{style:t,vars:e},n,i){Object.assign(s.style,t,i&&i.getProjectionStyles(n));for(const r in e)s.style.setProperty(r,e[r])}const r8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o8(s,t,e,n){i8(s,t,void 0,n);for(const i in t.attrs)s.setAttribute(r8.has(i)?i:mj(i),t.attrs[i])}function a8(s,{layout:t,layoutId:e}){return ny.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!fk[s]||s==="opacity")}function xj(s,t,e){var n;const{style:i}=s,r={};for(const o in i)(si(i[o])||t.style&&si(t.style[o])||a8(o,s)||((n=e==null?void 0:e.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(r[o]=i[o]);return r}function l8(s,t,e){const n=xj(s,t,e);for(const i in s)if(si(s[i])||si(t[i])){const r=$1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=s[i]}return n}function Idt(s){const t=C.useRef(null);return t.current===null&&(t.current=s()),t.current}function Ldt({scrapeMotionValuesFromProps:s,createRenderState:t,onMount:e},n,i,r){const o={latestValues:Ndt(n,i,r,s),renderState:t()};return e&&(o.mount=a=>e(n,a,o)),o}const c8=s=>(t,e)=>{const n=C.useContext(QR),i=C.useContext(vj),r=()=>Ldt(s,t,n,i);return e?r():Idt(r)};function Ndt(s,t,e,n){const i={},r=n(s,{});for(const f in r)i[f]=gT(r[f]);let{initial:o,animate:a}=s;const c=JR(s),u=s8(s);t&&u&&!c&&s.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=e?e.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!KR(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const m=X2(s,f[p]);if(m){const{transitionEnd:g,transition:w,...v}=m;for(const b in v){let x=v[b];if(Array.isArray(x)){const E=h?x.length-1:0;x=x[E]}x!==null&&(i[b]=x)}for(const b in g)i[b]=g[b]}}}return i}const Sj=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),u8=()=>({...Sj(),attrs:{}}),h8=(s,t)=>t&&typeof s=="number"?t.transform(s):s,Odt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fdt=$1.length;function jdt(s,t,e){let n="",i=!0;for(let r=0;r<Fdt;r++){const o=$1[r],a=s[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||e){const u=h8(a,rj[o]);if(!c){i=!1;const h=Odt[o]||o;n+=`${h}(${u}) `}e&&(t[o]=u)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function _j(s,t,e){const{style:n,vars:i,transformOrigin:r}=s;let o=!1,a=!1;for(const c in t){const u=t[c];if(ny.has(c)){o=!0;continue}else if(n6(c)){i[c]=u;continue}else{const h=h8(u,rj[c]);c.startsWith("origin")?(a=!0,r[c]=h):n[c]=h}}if(t.transform||(o||e?n.transform=jdt(t,s.transform,e):n.transform&&(n.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:h=0}=r;n.transformOrigin=`${c} ${u} ${h}`}}function uH(s,t,e){return typeof s=="string"?s:yt.transform(t+e*s)}function $dt(s,t,e){const n=uH(t,s.x,s.width),i=uH(e,s.y,s.height);return`${n} ${i}`}const Bdt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Udt={offset:"strokeDashoffset",array:"strokeDasharray"};function Vdt(s,t,e=1,n=0,i=!0){s.pathLength=1;const r=i?Bdt:Udt;s[r.offset]=yt.transform(-n);const o=yt.transform(t),a=yt.transform(e);s[r.array]=`${o} ${a}`}function Ej(s,{attrX:t,attrY:e,attrScale:n,originX:i,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d){if(_j(s,u,d),h){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:f,style:p,dimensions:m}=s;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(i!==void 0||r!==void 0||p.transform)&&(p.transformOrigin=$dt(m,i!==void 0?i:.5,r!==void 0?r:.5)),t!==void 0&&(f.x=t),e!==void 0&&(f.y=e),n!==void 0&&(f.scale=n),o!==void 0&&Vdt(f,o,a,c,!1)}const Cj=s=>typeof s=="string"&&s.toLowerCase()==="svg",Hdt={useVisualState:c8({scrapeMotionValuesFromProps:l8,createRenderState:u8,onMount:(s,t,{renderState:e,latestValues:n})=>{Ne.read(()=>{try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}),Ne.render(()=>{Ej(e,n,Cj(t.tagName),s.transformTemplate),o8(t,e)})}})},zdt={useVisualState:c8({scrapeMotionValuesFromProps:xj,createRenderState:Sj})};function d8(s,t,e){for(const n in t)!si(t[n])&&!a8(n,e)&&(s[n]=t[n])}function Wdt({transformTemplate:s},t){return C.useMemo(()=>{const e=Sj();return _j(e,t,s),Object.assign({},e.vars,e.style)},[t])}function Gdt(s,t){const e=s.style||{},n={};return d8(n,e,s),Object.assign(n,Wdt(s,t)),n}function qdt(s,t){const e={},n=Gdt(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const Kdt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pk(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||Kdt.has(s)}let f8=s=>!pk(s);function Xdt(s){s&&(f8=t=>t.startsWith("on")?!pk(t):s(t))}try{Xdt(require("@emotion/is-prop-valid").default)}catch{}function Ydt(s,t,e){const n={};for(const i in s)i==="values"&&typeof s.values=="object"||(f8(i)||e===!0&&pk(i)||!t&&!pk(i)||s.draggable&&i.startsWith("onDrag"))&&(n[i]=s[i]);return n}function Qdt(s,t,e,n){const i=C.useMemo(()=>{const r=u8();return Ej(r,t,Cj(n),s.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(s.style){const r={};d8(r,s.style,s),i.style={...r,...i.style}}return i}function Jdt(s=!1){return(e,n,i,{latestValues:r},o)=>{const c=(Aj(e)?Qdt:qdt)(n,r,o,e),u=Ydt(n,typeof e=="string",s),h=e!==C.Fragment?{...u,...c,ref:i}:{},{children:d}=n,f=C.useMemo(()=>si(d)?d.get():d,[d]);return C.createElement(e,{...h,children:f})}}function Zdt(s,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Aj(n)?Hdt:zdt,preloadedFeatures:s,useRender:Jdt(i),createVisualElement:t,Component:n};return Pdt(o)}}const jL={current:null},p8={current:!1};function tft(){if(p8.current=!0,!!bj)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>jL.current=s.matches;s.addListener(t),t()}else jL.current=!1}function eft(s,t,e){for(const n in t){const i=t[n],r=e[n];if(si(i))s.addValue(n,i);else if(si(r))s.addValue(n,oS(i,{owner:s}));else if(r!==i)if(s.hasValue(n)){const o=s.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=s.getStaticValue(n);s.addValue(n,oS(o!==void 0?o:i,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const hH=new WeakMap,nft=[...r6,Qs,wf],sft=s=>nft.find(i6(s)),dH=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ift{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=ec.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ne.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=JR(e),this.isVariantNode=s8(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(e,{},this);for(const f in d){const p=d[f];c[f]!==void 0&&si(p)&&p.set(c[f],!1)}}mount(t){this.current=t,hH.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),p8.current||tft(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jL.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hH.delete(this.current),this.projection&&this.projection.unmount(),vf(this.notifyUpdate),vf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ny.has(t),i=e.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ne.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),r(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Tb){const e=Tb[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<dH.length;n++){const i=dH[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=t[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=eft(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=oS(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(t6(i)||ZG(i))?i=parseFloat(i):!sft(i)&&wf.test(e)&&(i=f6(t,e)),this.setBaseTarget(t,si(i)?i.get():i)),si(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=X2(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);o&&(i=o[t])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!si(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new gj),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class g8 extends ift{constructor(){super(...arguments),this.KeyframeResolver=p6}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;si(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function rft(s){return window.getComputedStyle(s)}class oft extends g8{constructor(){super(...arguments),this.type="html",this.renderInstance=i8}readValueFromInstance(t,e){if(ny.has(e)){const n=oj(e);return n&&n.default||0}else{const n=rft(t),i=(n6(e)?n.getPropertyValue(e):n[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return U6(t,e)}build(t,e,n){_j(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return xj(t,e,n)}}class aft extends g8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=An}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ny.has(e)){const n=oj(e);return n&&n.default||0}return e=r8.has(e)?e:mj(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return l8(t,e,n)}build(t,e,n){Ej(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,i){o8(t,e,n,i)}mount(t){this.isSVGTag=Cj(t.tagName),super.mount(t)}}const lft=(s,t)=>Aj(s)?new aft(t):new oft(t,{allowProjection:s!==C.Fragment}),cft=Zdt({...Hut,...vdt,...adt,...wdt},lft),Ki=Ult(cft),Tj=OR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zn=C.forwardRef(({className:s,variant:t,size:e,asChild:n=!1,...i},r)=>{const o=n?Stt:"button";return _.jsx(o,{className:dt(Tj({variant:t,size:e,className:s})),ref:r,...i})});zn.displayName="Button";var uft=C.createContext(void 0);function Pj(s){const t=C.useContext(uft);return s||t||"ltr"}var RD=0;function m8(){C.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??fH()),document.body.insertAdjacentElement("beforeend",s[1]??fH()),RD++,()=>{RD===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),RD--}},[])}function fH(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var MD="focusScope.autoFocusOnMount",DD="focusScope.autoFocusOnUnmount",pH={bubbles:!1,cancelable:!0},hft="FocusScope",kj=C.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...o}=s,[a,c]=C.useState(null),u=Ji(i),h=Ji(r),d=C.useRef(null),f=nn(t,g=>c(g)),p=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(n){let g=function(x){if(p.paused||!a)return;const E=x.target;a.contains(E)?d.current=E:fh(d.current,{select:!0})},w=function(x){if(p.paused||!a)return;const E=x.relatedTarget;E!==null&&(a.contains(E)||fh(d.current,{select:!0}))},v=function(x){if(document.activeElement===document.body)for(const T of x)T.removedNodes.length>0&&fh(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const b=new MutationObserver(v);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),b.disconnect()}}},[n,a,p.paused]),C.useEffect(()=>{if(a){mH.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(MD,pH);a.addEventListener(MD,u),a.dispatchEvent(v),v.defaultPrevented||(dft(yft(y8(a)),{select:!0}),document.activeElement===g&&fh(a))}return()=>{a.removeEventListener(MD,u),setTimeout(()=>{const v=new CustomEvent(DD,pH);a.addEventListener(DD,h),a.dispatchEvent(v),v.defaultPrevented||fh(g??document.body,{select:!0}),a.removeEventListener(DD,h),mH.remove(p)},0)}}},[a,u,h,p]);const m=C.useCallback(g=>{if(!e&&!n||p.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const b=g.currentTarget,[x,E]=fft(b);x&&E?!g.shiftKey&&v===E?(g.preventDefault(),e&&fh(x,{select:!0})):g.shiftKey&&v===x&&(g.preventDefault(),e&&fh(E,{select:!0})):v===b&&g.preventDefault()}},[e,n,p.paused]);return _.jsx(Ut.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});kj.displayName=hft;function dft(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(fh(n,{select:t}),document.activeElement!==e)return}function fft(s){const t=y8(s),e=gH(t,s),n=gH(t.reverse(),s);return[e,n]}function y8(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function gH(s,t){for(const e of s)if(!pft(e,{upTo:t}))return e}function pft(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function gft(s){return s instanceof HTMLInputElement&&"select"in s}function fh(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&gft(s)&&t&&s.select()}}var mH=mft();function mft(){let s=[];return{add(t){const e=s[0];t!==e&&(e==null||e.pause()),s=yH(s,t),s.unshift(t)},remove(t){var e;s=yH(s,t),(e=s[0])==null||e.resume()}}}function yH(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function yft(s){return s.filter(t=>t.tagName!=="A")}var ID="rovingFocusGroup.onEntryFocus",vft={bubbles:!1,cancelable:!0},z1="RovingFocusGroup",[$L,v8,wft]=_2(z1),[bft,ZR]=$a(z1,[wft]),[Aft,xft]=bft(z1),w8=C.forwardRef((s,t)=>_.jsx($L.Provider,{scope:s.__scopeRovingFocusGroup,children:_.jsx($L.Slot,{scope:s.__scopeRovingFocusGroup,children:_.jsx(Sft,{...s,ref:t})})}));w8.displayName=z1;var Sft=C.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,orientation:n,loop:i=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...d}=s,f=C.useRef(null),p=nn(t,f),m=Pj(r),[g,w]=D1({prop:o,defaultProp:a??null,onChange:c,caller:z1}),[v,b]=C.useState(!1),x=Ji(u),E=v8(e),T=C.useRef(!1),[P,k]=C.useState(0);return C.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(ID,x),()=>R.removeEventListener(ID,x)},[x]),_.jsx(Aft,{scope:e,orientation:n,dir:m,loop:i,currentTabStopId:g,onItemFocus:C.useCallback(R=>w(R),[w]),onItemShiftTab:C.useCallback(()=>b(!0),[]),onFocusableItemAdd:C.useCallback(()=>k(R=>R+1),[]),onFocusableItemRemove:C.useCallback(()=>k(R=>R-1),[]),children:_.jsx(Ut.div,{tabIndex:v||P===0?-1:0,"data-orientation":n,...d,ref:p,style:{outline:"none",...s.style},onMouseDown:ct(s.onMouseDown,()=>{T.current=!0}),onFocus:ct(s.onFocus,R=>{const M=!T.current;if(R.target===R.currentTarget&&M&&!v){const D=new CustomEvent(ID,vft);if(R.currentTarget.dispatchEvent(D),!D.defaultPrevented){const L=E().filter(N=>N.focusable),$=L.find(N=>N.active),U=L.find(N=>N.id===g),H=[$,U,...L].filter(Boolean).map(N=>N.ref.current);x8(H,h)}}T.current=!1}),onBlur:ct(s.onBlur,()=>b(!1))})})}),b8="RovingFocusGroupItem",A8=C.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,focusable:n=!0,active:i=!1,tabStopId:r,children:o,...a}=s,c=Om(),u=r||c,h=xft(b8,e),d=h.currentTabStopId===u,f=v8(e),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=h;return C.useEffect(()=>{if(n)return p(),()=>m()},[n,p,m]),_.jsx($L.ItemSlot,{scope:e,id:u,focusable:n,active:i,children:_.jsx(Ut.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...a,ref:t,onMouseDown:ct(s.onMouseDown,w=>{n?h.onItemFocus(u):w.preventDefault()}),onFocus:ct(s.onFocus,()=>h.onItemFocus(u)),onKeyDown:ct(s.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=Cft(w,h.orientation,h.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let x=f().filter(E=>E.focusable).map(E=>E.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const E=x.indexOf(w.currentTarget);x=h.loop?Tft(x,E+1):x.slice(E+1)}setTimeout(()=>x8(x))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});A8.displayName=b8;var _ft={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Eft(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Cft(s,t,e){const n=Eft(s.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return _ft[n]}function x8(s,t=!1){const e=document.activeElement;for(const n of s)if(n===e||(n.focus({preventScroll:t}),document.activeElement!==e))return}function Tft(s,t){return s.map((e,n)=>s[(t+n)%s.length])}var S8=w8,_8=A8,Pft=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},vy=new WeakMap,DC=new WeakMap,IC={},LD=0,E8=function(s){return s&&(s.host||E8(s.parentNode))},kft=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=E8(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},Rft=function(s,t,e,n){var i=kft(t,Array.isArray(s)?s:[s]);IC[e]||(IC[e]=new WeakMap);var r=IC[e],o=[],a=new Set,c=new Set(i),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};i.forEach(u);var h=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))h(f);else try{var p=f.getAttribute(n),m=p!==null&&p!=="false",g=(vy.get(f)||0)+1,w=(r.get(f)||0)+1;vy.set(f,g),r.set(f,w),o.push(f),g===1&&m&&DC.set(f,!0),w===1&&f.setAttribute(e,"true"),m||f.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return h(t),a.clear(),LD++,function(){o.forEach(function(d){var f=vy.get(d)-1,p=r.get(d)-1;vy.set(d,f),r.set(d,p),f||(DC.has(d)||d.removeAttribute(n),DC.delete(d)),p||d.removeAttribute(e)}),LD--,LD||(vy=new WeakMap,vy=new WeakMap,DC=new WeakMap,IC={})}},C8=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),i=Pft(s);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),Rft(n,i,e,"aria-hidden")):function(){return null}},mT="right-scroll-bar-position",yT="width-before-scroll-bar",Mft="with-scroll-bars-hidden",Dft="--removed-body-scroll-bar-size";function ND(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function Ift(s,t){var e=C.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var i=e.value;i!==n&&(e.value=n,e.callback(n,i))}}}})[0];return e.callback=t,e.facade}var Lft=typeof window<"u"?C.useLayoutEffect:C.useEffect,vH=new WeakMap;function Nft(s,t){var e=Ift(null,function(n){return s.forEach(function(i){return ND(i,n)})});return Lft(function(){var n=vH.get(e);if(n){var i=new Set(n),r=new Set(s),o=e.current;i.forEach(function(a){r.has(a)||ND(a,null)}),r.forEach(function(a){i.has(a)||ND(a,o)})}vH.set(e,s)},[s]),e}function Oft(s){return s}function Fft(s,t){t===void 0&&(t=Oft);var e=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(r){var o=t(r,n);return e.push(o),function(){e=e.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(n=!0;e.length;){var o=e;e=[],o.forEach(r)}e={push:function(a){return r(a)},filter:function(){return e}}},assignMedium:function(r){n=!0;var o=[];if(e.length){var a=e;e=[],a.forEach(r),o=e}var c=function(){var h=o;o=[],h.forEach(r)},u=function(){return Promise.resolve().then(c)};u(),e={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),e}}}};return i}function jft(s){s===void 0&&(s={});var t=Fft(null);return t.options=zl({async:!0,ssr:!1},s),t}var T8=function(s){var t=s.sideCar,e=Ub(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return C.createElement(n,zl({},e))};T8.isSideCarExport=!0;function $ft(s,t){return s.useMedium(t),T8}var P8=jft(),OD=function(){},tM=C.forwardRef(function(s,t){var e=C.useRef(null),n=C.useState({onScrollCapture:OD,onWheelCapture:OD,onTouchMoveCapture:OD}),i=n[0],r=n[1],o=s.forwardProps,a=s.children,c=s.className,u=s.removeScrollBar,h=s.enabled,d=s.shards,f=s.sideCar,p=s.noRelative,m=s.noIsolation,g=s.inert,w=s.allowPinchZoom,v=s.as,b=v===void 0?"div":v,x=s.gapMode,E=Ub(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=f,P=Nft([e,t]),k=zl(zl({},E),i);return C.createElement(C.Fragment,null,h&&C.createElement(T,{sideCar:P8,removeScrollBar:u,shards:d,noRelative:p,noIsolation:m,inert:g,setCallbacks:r,allowPinchZoom:!!w,lockRef:e,gapMode:x}),o?C.cloneElement(C.Children.only(a),zl(zl({},k),{ref:P})):C.createElement(b,zl({},k,{className:c,ref:P}),a))});tM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};tM.classNames={fullWidth:yT,zeroRight:mT};var Bft=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Uft(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=Bft();return t&&s.setAttribute("nonce",t),s}function Vft(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function Hft(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var zft=function(){var s=0,t=null;return{add:function(e){s==0&&(t=Uft())&&(Vft(t,e),Hft(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Wft=function(){var s=zft();return function(t,e){C.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},k8=function(){var s=Wft(),t=function(e){var n=e.styles,i=e.dynamic;return s(n,i),null};return t},Gft={left:0,top:0,right:0,gap:0},FD=function(s){return parseInt(s||"",10)||0},qft=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],i=t[s==="padding"?"paddingRight":"marginRight"];return[FD(e),FD(n),FD(i)]},Kft=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return Gft;var t=qft(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},Xft=k8(),bv="data-scroll-locked",Yft=function(s,t,e,n){var i=s.left,r=s.top,o=s.right,a=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(Mft,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(bv,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mT,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(yT,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(mT," .").concat(mT,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(yT," .").concat(yT,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(bv,`] {
    `).concat(Dft,": ").concat(a,`px;
  }
`)},wH=function(){var s=parseInt(document.body.getAttribute(bv)||"0",10);return isFinite(s)?s:0},Qft=function(){C.useEffect(function(){return document.body.setAttribute(bv,(wH()+1).toString()),function(){var s=wH()-1;s<=0?document.body.removeAttribute(bv):document.body.setAttribute(bv,s.toString())}},[])},Jft=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,i=n===void 0?"margin":n;Qft();var r=C.useMemo(function(){return Kft(i)},[i]);return C.createElement(Xft,{styles:Yft(r,!t,i,e?"":"!important")})},BL=!1;if(typeof window<"u")try{var LC=Object.defineProperty({},"passive",{get:function(){return BL=!0,!0}});window.addEventListener("test",LC,LC),window.removeEventListener("test",LC,LC)}catch{BL=!1}var wy=BL?{passive:!1}:!1,Zft=function(s){return s.tagName==="TEXTAREA"},R8=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!Zft(s)&&e[t]==="visible")},tpt=function(s){return R8(s,"overflowY")},ept=function(s){return R8(s,"overflowX")},bH=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=M8(s,n);if(i){var r=D8(s,n),o=r[1],a=r[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},npt=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},spt=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},M8=function(s,t){return s==="v"?tpt(t):ept(t)},D8=function(s,t){return s==="v"?npt(t):spt(t)},ipt=function(s,t){return s==="h"&&t==="rtl"?-1:1},rpt=function(s,t,e,n,i){var r=ipt(s,window.getComputedStyle(t).direction),o=r*n,a=e.target,c=t.contains(a),u=!1,h=o>0,d=0,f=0;do{if(!a)break;var p=D8(s,a),m=p[0],g=p[1],w=p[2],v=g-w-r*m;(m||v)&&M8(s,a)&&(d+=v,f+=m);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(h&&(Math.abs(d)<1||!i)||!h&&(Math.abs(f)<1||!i))&&(u=!0),u},NC=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},AH=function(s){return[s.deltaX,s.deltaY]},xH=function(s){return s&&"current"in s?s.current:s},opt=function(s,t){return s[0]===t[0]&&s[1]===t[1]},apt=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},lpt=0,by=[];function cpt(s){var t=C.useRef([]),e=C.useRef([0,0]),n=C.useRef(),i=C.useState(lpt++)[0],r=C.useState(k8)[0],o=C.useRef(s);C.useEffect(function(){o.current=s},[s]),C.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(i));var g=aot([s.lockRef.current],(s.shards||[]).map(xH),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[s.inert,s.lockRef.current,s.shards]);var a=C.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=NC(g),b=e.current,x="deltaX"in g?g.deltaX:b[0]-v[0],E="deltaY"in g?g.deltaY:b[1]-v[1],T,P=g.target,k=Math.abs(x)>Math.abs(E)?"h":"v";if("touches"in g&&k==="h"&&P.type==="range")return!1;var R=bH(k,P);if(!R)return!0;if(R?T=k:(T=k==="v"?"h":"v",R=bH(k,P)),!R)return!1;if(!n.current&&"changedTouches"in g&&(x||E)&&(n.current=T),!T)return!0;var M=n.current||T;return rpt(M,w,g,M==="h"?x:E,!0)},[]),c=C.useCallback(function(g){var w=g;if(!(!by.length||by[by.length-1]!==r)){var v="deltaY"in w?AH(w):NC(w),b=t.current.filter(function(T){return T.name===w.type&&(T.target===w.target||w.target===T.shadowParent)&&opt(T.delta,v)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var x=(o.current.shards||[]).map(xH).filter(Boolean).filter(function(T){return T.contains(w.target)}),E=x.length>0?a(w,x[0]):!o.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),u=C.useCallback(function(g,w,v,b){var x={name:g,delta:w,target:v,should:b,shadowParent:upt(v)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(E){return E!==x})},1)},[]),h=C.useCallback(function(g){e.current=NC(g),n.current=void 0},[]),d=C.useCallback(function(g){u(g.type,AH(g),g.target,a(g,s.lockRef.current))},[]),f=C.useCallback(function(g){u(g.type,NC(g),g.target,a(g,s.lockRef.current))},[]);C.useEffect(function(){return by.push(r),s.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,wy),document.addEventListener("touchmove",c,wy),document.addEventListener("touchstart",h,wy),function(){by=by.filter(function(g){return g!==r}),document.removeEventListener("wheel",c,wy),document.removeEventListener("touchmove",c,wy),document.removeEventListener("touchstart",h,wy)}},[]);var p=s.removeScrollBar,m=s.inert;return C.createElement(C.Fragment,null,m?C.createElement(r,{styles:apt(i)}):null,p?C.createElement(Jft,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function upt(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const hpt=$ft(P8,cpt);var Rj=C.forwardRef(function(s,t){return C.createElement(tM,zl({},s,{ref:t,sideCar:hpt}))});Rj.classNames=tM.classNames;var UL=["Enter"," "],dpt=["ArrowDown","PageUp","Home"],I8=["ArrowUp","PageDown","End"],fpt=[...dpt,...I8],ppt={ltr:[...UL,"ArrowRight"],rtl:[...UL,"ArrowLeft"]},gpt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},W1="Menu",[lS,mpt,ypt]=_2(W1),[sy,L8]=$a(W1,[ypt,BR,ZR]),eM=BR(),N8=ZR(),[vpt,iy]=sy(W1),[wpt,G1]=sy(W1),O8=s=>{const{__scopeMenu:t,open:e=!1,children:n,dir:i,onOpenChange:r,modal:o=!0}=s,a=eM(t),[c,u]=C.useState(null),h=C.useRef(!1),d=Ji(r),f=Pj(i);return C.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),_.jsx(git,{...a,children:_.jsx(vpt,{scope:t,open:e,onOpenChange:d,content:c,onContentChange:u,children:_.jsx(wpt,{scope:t,onClose:C.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:h,dir:f,modal:o,children:n})})})};O8.displayName=W1;var bpt="MenuAnchor",Mj=C.forwardRef((s,t)=>{const{__scopeMenu:e,...n}=s,i=eM(e);return _.jsx(X5,{...i,...n,ref:t})});Mj.displayName=bpt;var Dj="MenuPortal",[Apt,F8]=sy(Dj,{forceMount:void 0}),j8=s=>{const{__scopeMenu:t,forceMount:e,children:n,container:i}=s,r=iy(Dj,t);return _.jsx(Apt,{scope:t,forceMount:e,children:_.jsx(Ba,{present:e||r.open,children:_.jsx(IR,{asChild:!0,container:i,children:n})})})};j8.displayName=Dj;var Do="MenuContent",[xpt,Ij]=sy(Do),$8=C.forwardRef((s,t)=>{const e=F8(Do,s.__scopeMenu),{forceMount:n=e.forceMount,...i}=s,r=iy(Do,s.__scopeMenu),o=G1(Do,s.__scopeMenu);return _.jsx(lS.Provider,{scope:s.__scopeMenu,children:_.jsx(Ba,{present:n||r.open,children:_.jsx(lS.Slot,{scope:s.__scopeMenu,children:o.modal?_.jsx(Spt,{...i,ref:t}):_.jsx(_pt,{...i,ref:t})})})})}),Spt=C.forwardRef((s,t)=>{const e=iy(Do,s.__scopeMenu),n=C.useRef(null),i=nn(t,n);return C.useEffect(()=>{const r=n.current;if(r)return C8(r)},[]),_.jsx(Lj,{...s,ref:i,trapFocus:e.open,disableOutsidePointerEvents:e.open,disableOutsideScroll:!0,onFocusOutside:ct(s.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>e.onOpenChange(!1)})}),_pt=C.forwardRef((s,t)=>{const e=iy(Do,s.__scopeMenu);return _.jsx(Lj,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>e.onOpenChange(!1)})}),Ept=xb("MenuContent.ScrollLock"),Lj=C.forwardRef((s,t)=>{const{__scopeMenu:e,loop:n=!1,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...g}=s,w=iy(Do,e),v=G1(Do,e),b=eM(e),x=N8(e),E=mpt(e),[T,P]=C.useState(null),k=C.useRef(null),R=nn(t,k,w.onContentChange),M=C.useRef(0),D=C.useRef(""),L=C.useRef(0),$=C.useRef(null),U=C.useRef("right"),I=C.useRef(0),H=m?Rj:C.Fragment,N=m?{as:Ept,allowPinchZoom:!0}:void 0,j=O=>{var q,Se;const V=D.current+O,X=E().filter(Qt=>!Qt.disabled),z=document.activeElement,W=(q=X.find(Qt=>Qt.ref.current===z))==null?void 0:q.textValue,et=X.map(Qt=>Qt.textValue),wt=Fpt(et,V,W),ft=(Se=X.find(Qt=>Qt.textValue===wt))==null?void 0:Se.ref.current;(function Qt(_e){D.current=_e,window.clearTimeout(M.current),_e!==""&&(M.current=window.setTimeout(()=>Qt(""),1e3))})(V),ft&&setTimeout(()=>ft.focus())};C.useEffect(()=>()=>window.clearTimeout(M.current),[]),m8();const F=C.useCallback(O=>{var X,z;return U.current===((X=$.current)==null?void 0:X.side)&&$pt(O,(z=$.current)==null?void 0:z.area)},[]);return _.jsx(xpt,{scope:e,searchRef:D,onItemEnter:C.useCallback(O=>{F(O)&&O.preventDefault()},[F]),onItemLeave:C.useCallback(O=>{var V;F(O)||((V=k.current)==null||V.focus(),P(null))},[F]),onTriggerLeave:C.useCallback(O=>{F(O)&&O.preventDefault()},[F]),pointerGraceTimerRef:L,onPointerGraceIntentChange:C.useCallback(O=>{$.current=O},[]),children:_.jsx(H,{...N,children:_.jsx(kj,{asChild:!0,trapped:i,onMountAutoFocus:ct(r,O=>{var V;O.preventDefault(),(V=k.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:_.jsx(M1,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:_.jsx(S8,{asChild:!0,...x,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:T,onCurrentTabStopIdChange:P,onEntryFocus:ct(c,O=>{v.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:_.jsx(Y5,{role:"menu","aria-orientation":"vertical","data-state":eq(w.open),"data-radix-menu-content":"",dir:v.dir,...b,...g,ref:R,style:{outline:"none",...g.style},onKeyDown:ct(g.onKeyDown,O=>{const X=O.target.closest("[data-radix-menu-content]")===O.currentTarget,z=O.ctrlKey||O.altKey||O.metaKey,W=O.key.length===1;X&&(O.key==="Tab"&&O.preventDefault(),!z&&W&&j(O.key));const et=k.current;if(O.target!==et||!fpt.includes(O.key))return;O.preventDefault();const ft=E().filter(q=>!q.disabled).map(q=>q.ref.current);I8.includes(O.key)&&ft.reverse(),Npt(ft)}),onBlur:ct(s.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(M.current),D.current="")}),onPointerMove:ct(s.onPointerMove,cS(O=>{const V=O.target,X=I.current!==O.clientX;if(O.currentTarget.contains(V)&&X){const z=O.clientX>I.current?"right":"left";U.current=z,I.current=O.clientX}}))})})})})})})});$8.displayName=Do;var Cpt="MenuGroup",Nj=C.forwardRef((s,t)=>{const{__scopeMenu:e,...n}=s;return _.jsx(Ut.div,{role:"group",...n,ref:t})});Nj.displayName=Cpt;var Tpt="MenuLabel",B8=C.forwardRef((s,t)=>{const{__scopeMenu:e,...n}=s;return _.jsx(Ut.div,{...n,ref:t})});B8.displayName=Tpt;var gk="MenuItem",SH="menu.itemSelect",nM=C.forwardRef((s,t)=>{const{disabled:e=!1,onSelect:n,...i}=s,r=C.useRef(null),o=G1(gk,s.__scopeMenu),a=Ij(gk,s.__scopeMenu),c=nn(t,r),u=C.useRef(!1),h=()=>{const d=r.current;if(!e&&d){const f=new CustomEvent(SH,{bubbles:!0,cancelable:!0});d.addEventListener(SH,p=>n==null?void 0:n(p),{once:!0}),E2(d,f),f.defaultPrevented?u.current=!1:o.onClose()}};return _.jsx(U8,{...i,ref:c,disabled:e,onClick:ct(s.onClick,h),onPointerDown:d=>{var f;(f=s.onPointerDown)==null||f.call(s,d),u.current=!0},onPointerUp:ct(s.onPointerUp,d=>{var f;u.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ct(s.onKeyDown,d=>{const f=a.searchRef.current!=="";e||f&&d.key===" "||UL.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});nM.displayName=gk;var U8=C.forwardRef((s,t)=>{const{__scopeMenu:e,disabled:n=!1,textValue:i,...r}=s,o=Ij(gk,e),a=N8(e),c=C.useRef(null),u=nn(t,c),[h,d]=C.useState(!1),[f,p]=C.useState("");return C.useEffect(()=>{const m=c.current;m&&p((m.textContent??"").trim())},[r.children]),_.jsx(lS.ItemSlot,{scope:e,disabled:n,textValue:i??f,children:_.jsx(_8,{asChild:!0,...a,focusable:!n,children:_.jsx(Ut.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...r,ref:u,onPointerMove:ct(s.onPointerMove,cS(m=>{n?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ct(s.onPointerLeave,cS(m=>o.onItemLeave(m))),onFocus:ct(s.onFocus,()=>d(!0)),onBlur:ct(s.onBlur,()=>d(!1))})})})}),Ppt="MenuCheckboxItem",V8=C.forwardRef((s,t)=>{const{checked:e=!1,onCheckedChange:n,...i}=s;return _.jsx(q8,{scope:s.__scopeMenu,checked:e,children:_.jsx(nM,{role:"menuitemcheckbox","aria-checked":mk(e)?"mixed":e,...i,ref:t,"data-state":Fj(e),onSelect:ct(i.onSelect,()=>n==null?void 0:n(mk(e)?!0:!e),{checkForDefaultPrevented:!1})})})});V8.displayName=Ppt;var H8="MenuRadioGroup",[kpt,Rpt]=sy(H8,{value:void 0,onValueChange:()=>{}}),z8=C.forwardRef((s,t)=>{const{value:e,onValueChange:n,...i}=s,r=Ji(n);return _.jsx(kpt,{scope:s.__scopeMenu,value:e,onValueChange:r,children:_.jsx(Nj,{...i,ref:t})})});z8.displayName=H8;var W8="MenuRadioItem",G8=C.forwardRef((s,t)=>{const{value:e,...n}=s,i=Rpt(W8,s.__scopeMenu),r=e===i.value;return _.jsx(q8,{scope:s.__scopeMenu,checked:r,children:_.jsx(nM,{role:"menuitemradio","aria-checked":r,...n,ref:t,"data-state":Fj(r),onSelect:ct(n.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,e)},{checkForDefaultPrevented:!1})})})});G8.displayName=W8;var Oj="MenuItemIndicator",[q8,Mpt]=sy(Oj,{checked:!1}),K8=C.forwardRef((s,t)=>{const{__scopeMenu:e,forceMount:n,...i}=s,r=Mpt(Oj,e);return _.jsx(Ba,{present:n||mk(r.checked)||r.checked===!0,children:_.jsx(Ut.span,{...i,ref:t,"data-state":Fj(r.checked)})})});K8.displayName=Oj;var Dpt="MenuSeparator",X8=C.forwardRef((s,t)=>{const{__scopeMenu:e,...n}=s;return _.jsx(Ut.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});X8.displayName=Dpt;var Ipt="MenuArrow",Y8=C.forwardRef((s,t)=>{const{__scopeMenu:e,...n}=s,i=eM(e);return _.jsx(Q5,{...i,...n,ref:t})});Y8.displayName=Ipt;var Lpt="MenuSub",[VAt,Q8]=sy(Lpt),xA="MenuSubTrigger",J8=C.forwardRef((s,t)=>{const e=iy(xA,s.__scopeMenu),n=G1(xA,s.__scopeMenu),i=Q8(xA,s.__scopeMenu),r=Ij(xA,s.__scopeMenu),o=C.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=r,u={__scopeMenu:s.__scopeMenu},h=C.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return C.useEffect(()=>h,[h]),C.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),_.jsx(Mj,{asChild:!0,...u,children:_.jsx(U8,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":e.open,"aria-controls":i.contentId,"data-state":eq(e.open),...s,ref:DR(t,i.onTriggerChange),onClick:d=>{var f;(f=s.onClick)==null||f.call(s,d),!(s.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),e.open||e.onOpenChange(!0))},onPointerMove:ct(s.onPointerMove,cS(d=>{r.onItemEnter(d),!d.defaultPrevented&&!s.disabled&&!e.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{e.onOpenChange(!0),h()},100))})),onPointerLeave:ct(s.onPointerLeave,cS(d=>{var p,m;h();const f=(p=e.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(m=e.content)==null?void 0:m.dataset.side,w=g==="right",v=w?-5:5,b=f[w?"left":"right"],x=f[w?"right":"left"];r.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:b,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:b,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(d),d.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:ct(s.onKeyDown,d=>{var p;const f=r.searchRef.current!=="";s.disabled||f&&d.key===" "||ppt[n.dir].includes(d.key)&&(e.onOpenChange(!0),(p=e.content)==null||p.focus(),d.preventDefault())})})})});J8.displayName=xA;var Z8="MenuSubContent",tq=C.forwardRef((s,t)=>{const e=F8(Do,s.__scopeMenu),{forceMount:n=e.forceMount,...i}=s,r=iy(Do,s.__scopeMenu),o=G1(Do,s.__scopeMenu),a=Q8(Z8,s.__scopeMenu),c=C.useRef(null),u=nn(t,c);return _.jsx(lS.Provider,{scope:s.__scopeMenu,children:_.jsx(Ba,{present:n||r.open,children:_.jsx(lS.Slot,{scope:s.__scopeMenu,children:_.jsx(Lj,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ct(s.onFocusOutside,h=>{h.target!==a.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:ct(s.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ct(s.onKeyDown,h=>{var p;const d=h.currentTarget.contains(h.target),f=gpt[o.dir].includes(h.key);d&&f&&(r.onOpenChange(!1),(p=a.trigger)==null||p.focus(),h.preventDefault())})})})})})});tq.displayName=Z8;function eq(s){return s?"open":"closed"}function mk(s){return s==="indeterminate"}function Fj(s){return mk(s)?"indeterminate":s?"checked":"unchecked"}function Npt(s){const t=document.activeElement;for(const e of s)if(e===t||(e.focus(),document.activeElement!==t))return}function Opt(s,t){return s.map((e,n)=>s[(t+n)%s.length])}function Fpt(s,t,e){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,r=e?s.indexOf(e):-1;let o=Opt(s,Math.max(r,0));i.length===1&&(o=o.filter(u=>u!==e));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==e?c:void 0}function jpt(s,t){const{x:e,y:n}=s;let i=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r],c=t[o],u=a.x,h=a.y,d=c.x,f=c.y;h>n!=f>n&&e<(d-u)*(n-h)/(f-h)+u&&(i=!i)}return i}function $pt(s,t){if(!t)return!1;const e={x:s.clientX,y:s.clientY};return jpt(e,t)}function cS(s){return t=>t.pointerType==="mouse"?s(t):void 0}var Bpt=O8,Upt=Mj,Vpt=j8,Hpt=$8,zpt=Nj,Wpt=B8,Gpt=nM,qpt=V8,Kpt=z8,Xpt=G8,Ypt=K8,Qpt=X8,Jpt=Y8,Zpt=J8,tgt=tq,sM="DropdownMenu",[egt,HAt]=$a(sM,[L8]),Ci=L8(),[ngt,nq]=egt(sM),sq=s=>{const{__scopeDropdownMenu:t,children:e,dir:n,open:i,defaultOpen:r,onOpenChange:o,modal:a=!0}=s,c=Ci(t),u=C.useRef(null),[h,d]=D1({prop:i,defaultProp:r??!1,onChange:o,caller:sM});return _.jsx(ngt,{scope:t,triggerId:Om(),triggerRef:u,contentId:Om(),open:h,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(f=>!f),[d]),modal:a,children:_.jsx(Bpt,{...c,open:h,onOpenChange:d,dir:n,modal:a,children:e})})};sq.displayName=sM;var iq="DropdownMenuTrigger",rq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,disabled:n=!1,...i}=s,r=nq(iq,e),o=Ci(e);return _.jsx(Upt,{asChild:!0,...o,children:_.jsx(Ut.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:DR(t,r.triggerRef),onPointerDown:ct(s.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(r.onOpenToggle(),r.open||a.preventDefault())}),onKeyDown:ct(s.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&r.onOpenToggle(),a.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});rq.displayName=iq;var sgt="DropdownMenuPortal",oq=s=>{const{__scopeDropdownMenu:t,...e}=s,n=Ci(t);return _.jsx(Vpt,{...n,...e})};oq.displayName=sgt;var aq="DropdownMenuContent",lq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=nq(aq,e),r=Ci(e),o=C.useRef(!1);return _.jsx(Hpt,{id:i.contentId,"aria-labelledby":i.triggerId,...r,...n,ref:t,onCloseAutoFocus:ct(s.onCloseAutoFocus,a=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ct(s.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!i.modal||h)&&(o.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lq.displayName=aq;var igt="DropdownMenuGroup",rgt=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(zpt,{...i,...n,ref:t})});rgt.displayName=igt;var ogt="DropdownMenuLabel",cq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Wpt,{...i,...n,ref:t})});cq.displayName=ogt;var agt="DropdownMenuItem",uq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Gpt,{...i,...n,ref:t})});uq.displayName=agt;var lgt="DropdownMenuCheckboxItem",hq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(qpt,{...i,...n,ref:t})});hq.displayName=lgt;var cgt="DropdownMenuRadioGroup",ugt=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Kpt,{...i,...n,ref:t})});ugt.displayName=cgt;var hgt="DropdownMenuRadioItem",dq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Xpt,{...i,...n,ref:t})});dq.displayName=hgt;var dgt="DropdownMenuItemIndicator",fq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Ypt,{...i,...n,ref:t})});fq.displayName=dgt;var fgt="DropdownMenuSeparator",pq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Qpt,{...i,...n,ref:t})});pq.displayName=fgt;var pgt="DropdownMenuArrow",ggt=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Jpt,{...i,...n,ref:t})});ggt.displayName=pgt;var mgt="DropdownMenuSubTrigger",gq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(Zpt,{...i,...n,ref:t})});gq.displayName=mgt;var ygt="DropdownMenuSubContent",mq=C.forwardRef((s,t)=>{const{__scopeDropdownMenu:e,...n}=s,i=Ci(e);return _.jsx(tgt,{...i,...n,ref:t,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mq.displayName=ygt;var vgt=sq,wgt=rq,bgt=oq,yq=lq,vq=cq,wq=uq,bq=hq,Aq=dq,xq=fq,Sq=pq,_q=gq,Eq=mq;const Agt=vgt,xgt=wgt,Sgt=C.forwardRef(({className:s,inset:t,children:e,...n},i)=>_.jsxs(_q,{ref:i,className:dt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",s),...n,children:[e,_.jsx(yet,{className:"ml-auto h-4 w-4"})]}));Sgt.displayName=_q.displayName;const _gt=C.forwardRef(({className:s,...t},e)=>_.jsx(Eq,{ref:e,className:dt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));_gt.displayName=Eq.displayName;const Cq=C.forwardRef(({className:s,sideOffset:t=4,...e},n)=>_.jsx(bgt,{children:_.jsx(yq,{ref:n,sideOffset:t,className:dt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...e})}));Cq.displayName=yq.displayName;const VL=C.forwardRef(({className:s,inset:t,...e},n)=>_.jsx(wq,{ref:n,className:dt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",s),...e}));VL.displayName=wq.displayName;const Egt=C.forwardRef(({className:s,children:t,checked:e,...n},i)=>_.jsxs(bq,{ref:i,className:dt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),checked:e,...n,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(xq,{children:_.jsx(met,{className:"h-4 w-4"})})}),t]}));Egt.displayName=bq.displayName;const Cgt=C.forwardRef(({className:s,children:t,...e},n)=>_.jsxs(Aq,{ref:n,className:dt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...e,children:[_.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:_.jsx(xq,{children:_.jsx(bet,{className:"h-2 w-2 fill-current"})})}),t]}));Cgt.displayName=Aq.displayName;const Tq=C.forwardRef(({className:s,inset:t,...e},n)=>_.jsx(vq,{ref:n,className:dt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...e}));Tq.displayName=vq.displayName;const HL=C.forwardRef(({className:s,...t},e)=>_.jsx(Sq,{ref:e,className:dt("-mx-1 my-1 h-px bg-muted",s),...t}));HL.displayName=Sq.displayName;var Pq={exports:{}},kq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb=C;function Tgt(s,t){return s===t&&(s!==0||1/s===1/t)||s!==s&&t!==t}var Pgt=typeof Object.is=="function"?Object.is:Tgt,kgt=Pb.useState,Rgt=Pb.useEffect,Mgt=Pb.useLayoutEffect,Dgt=Pb.useDebugValue;function Igt(s,t){var e=t(),n=kgt({inst:{value:e,getSnapshot:t}}),i=n[0].inst,r=n[1];return Mgt(function(){i.value=e,i.getSnapshot=t,jD(i)&&r({inst:i})},[s,e,t]),Rgt(function(){return jD(i)&&r({inst:i}),s(function(){jD(i)&&r({inst:i})})},[s]),Dgt(e),e}function jD(s){var t=s.getSnapshot;s=s.value;try{var e=t();return!Pgt(s,e)}catch{return!0}}function Lgt(s,t){return t()}var Ngt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lgt:Igt;kq.useSyncExternalStore=Pb.useSyncExternalStore!==void 0?Pb.useSyncExternalStore:Ngt;Pq.exports=kq;var Ogt=Pq.exports;function Fgt(){return Ogt.useSyncExternalStore(jgt,()=>!0,()=>!1)}function jgt(){return()=>{}}var jj="Avatar",[$gt,zAt]=$a(jj),[Bgt,Rq]=$gt(jj),Mq=C.forwardRef((s,t)=>{const{__scopeAvatar:e,...n}=s,[i,r]=C.useState("idle");return _.jsx(Bgt,{scope:e,imageLoadingStatus:i,onImageLoadingStatusChange:r,children:_.jsx(Ut.span,{...n,ref:t})})});Mq.displayName=jj;var Dq="AvatarImage",Iq=C.forwardRef((s,t)=>{const{__scopeAvatar:e,src:n,onLoadingStatusChange:i=()=>{},...r}=s,o=Rq(Dq,e),a=Ugt(n,r),c=Ji(u=>{i(u),o.onImageLoadingStatusChange(u)});return Fo(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?_.jsx(Ut.img,{...r,ref:t,src:n}):null});Iq.displayName=Dq;var Lq="AvatarFallback",Nq=C.forwardRef((s,t)=>{const{__scopeAvatar:e,delayMs:n,...i}=s,r=Rq(Lq,e),[o,a]=C.useState(n===void 0);return C.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&r.imageLoadingStatus!=="loaded"?_.jsx(Ut.span,{...i,ref:t}):null});Nq.displayName=Lq;function _H(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Ugt(s,{referrerPolicy:t,crossOrigin:e}){const n=Fgt(),i=C.useRef(null),r=n?(i.current||(i.current=new window.Image),i.current):null,[o,a]=C.useState(()=>_H(r,s));return Fo(()=>{a(_H(r,s))},[r,s]),Fo(()=>{const c=d=>()=>{a(d)};if(!r)return;const u=c("loaded"),h=c("error");return r.addEventListener("load",u),r.addEventListener("error",h),t&&(r.referrerPolicy=t),typeof e=="string"&&(r.crossOrigin=e),()=>{r.removeEventListener("load",u),r.removeEventListener("error",h)}},[r,e,t]),o}var Oq=Mq,Fq=Iq,jq=Nq;const $q=C.forwardRef(({className:s,...t},e)=>_.jsx(Oq,{ref:e,className:dt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));$q.displayName=Oq.displayName;const Vgt=C.forwardRef(({className:s,...t},e)=>_.jsx(Fq,{ref:e,className:dt("aspect-square h-full w-full",s),...t}));Vgt.displayName=Fq.displayName;const Bq=C.forwardRef(({className:s,...t},e)=>_.jsx(jq,{ref:e,className:dt("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Bq.displayName=jq.displayName;const Hgt=OR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function xx({className:s,variant:t,...e}){return _.jsx("div",{className:dt(Hgt({variant:t}),s),...e})}const Sx=()=>{const{user:s,profile:t,userRole:e,signOut:n}=Vb(),i=Bb(),r=(o,a)=>a?a.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2):o.slice(0,2).toUpperCase();return _.jsx(Ki.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"sticky top-0 z-50 w-full border-b border-border/50 glass-effect",children:_.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>i("/"),children:[_.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg gradient-primary",children:_.jsx(QP,{className:"w-5 h-5 text-primary-foreground"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"font-display font-bold text-lg",children:"Peaks Hotel"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure Vault"})]})]}),_.jsxs("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full bg-accent/10 border border-accent/20",children:[_.jsx(L1,{className:"w-4 h-4 text-accent"}),_.jsx("span",{className:"text-xs font-medium text-accent",children:"View-Only Access"})]}),s&&_.jsxs(Agt,{children:[_.jsx(xgt,{asChild:!0,children:_.jsx(zn,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:_.jsx($q,{className:"h-10 w-10 border-2 border-primary/20",children:_.jsx(Bq,{className:"bg-primary text-primary-foreground font-medium",children:r(s.email||"",t==null?void 0:t.full_name)})})})}),_.jsxs(Cq,{className:"w-56",align:"end",forceMount:!0,children:[_.jsx(Tq,{className:"font-normal",children:_.jsxs("div",{className:"flex flex-col space-y-1",children:[_.jsx("p",{className:"text-sm font-medium leading-none",children:(t==null?void 0:t.full_name)||"User"}),_.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:s.email}),e&&_.jsx(xx,{variant:e==="admin"?"default":"secondary",className:"w-fit mt-2 text-xs",children:e})]})}),_.jsx(HL,{}),e==="admin"&&_.jsxs(_.Fragment,{children:[_.jsxs(VL,{className:"cursor-pointer",onClick:()=>i("/admin"),children:[_.jsx(Eet,{className:"mr-2 h-4 w-4"}),_.jsx("span",{children:"Admin Dashboard"})]}),_.jsx(HL,{})]}),_.jsxs(VL,{className:"cursor-pointer",onClick:()=>n(),children:[_.jsx(xet,{className:"mr-2 h-4 w-4"}),_.jsx("span",{children:"Log out"})]})]})]})]})})},Ma=C.forwardRef(({className:s,...t},e)=>_.jsx("div",{ref:e,className:dt("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));Ma.displayName="Card";const Lu=C.forwardRef(({className:s,...t},e)=>_.jsx("div",{ref:e,className:dt("flex flex-col space-y-1.5 p-6",s),...t}));Lu.displayName="CardHeader";const Nu=C.forwardRef(({className:s,...t},e)=>_.jsx("h3",{ref:e,className:dt("text-2xl font-semibold leading-none tracking-tight",s),...t}));Nu.displayName="CardTitle";const zL=C.forwardRef(({className:s,...t},e)=>_.jsx("p",{ref:e,className:dt("text-sm text-muted-foreground",s),...t}));zL.displayName="CardDescription";const Da=C.forwardRef(({className:s,...t},e)=>_.jsx("div",{ref:e,className:dt("p-6 pt-0",s),...t}));Da.displayName="CardContent";const WL=C.forwardRef(({className:s,...t},e)=>_.jsx("div",{ref:e,className:dt("flex items-center p-6 pt-0",s),...t}));WL.displayName="CardFooter";function Ua(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function zm(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}const Uq=6048e5,zgt=864e5;let Wgt={};function iM(){return Wgt}function uS(s,t){var a,c,u,h;const e=iM(),n=(t==null?void 0:t.weekStartsOn)??((c=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??e.weekStartsOn??((h=(u=e.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=Ua(s),r=i.getDay(),o=(r<n?7:0)+r-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function yk(s){return uS(s,{weekStartsOn:1})}function Vq(s){const t=Ua(s),e=t.getFullYear(),n=zm(s,0);n.setFullYear(e+1,0,4),n.setHours(0,0,0,0);const i=yk(n),r=zm(s,0);r.setFullYear(e,0,4),r.setHours(0,0,0,0);const o=yk(r);return t.getTime()>=i.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function EH(s){const t=Ua(s);return t.setHours(0,0,0,0),t}function CH(s){const t=Ua(s),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+s-+e}function Ggt(s,t){const e=EH(s),n=EH(t),i=+e-CH(e),r=+n-CH(n);return Math.round((i-r)/zgt)}function qgt(s){const t=Vq(s),e=zm(s,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),yk(e)}function Kgt(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Xgt(s){if(!Kgt(s)&&typeof s!="number")return!1;const t=Ua(s);return!isNaN(Number(t))}function Ygt(s){const t=Ua(s),e=zm(s,0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}const Qgt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Jgt=(s,t,e)=>{let n;const i=Qgt[s];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+n:n+" ago":n};function $D(s){return(t={})=>{const e=t.width?String(t.width):s.defaultWidth;return s.formats[e]||s.formats[s.defaultWidth]}}const Zgt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tmt={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},emt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nmt={date:$D({formats:Zgt,defaultWidth:"full"}),time:$D({formats:tmt,defaultWidth:"full"}),dateTime:$D({formats:emt,defaultWidth:"full"})},smt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},imt=(s,t,e,n)=>smt[s];function iA(s){return(t,e)=>{const n=e!=null&&e.context?String(e.context):"standalone";let i;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,a=e!=null&&e.width?String(e.width):o;i=s.formattingValues[a]||s.formattingValues[o]}else{const o=s.defaultWidth,a=e!=null&&e.width?String(e.width):s.defaultWidth;i=s.values[a]||s.values[o]}const r=s.argumentCallback?s.argumentCallback(t):t;return i[r]}}const rmt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},omt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},amt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lmt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cmt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},umt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hmt=(s,t)=>{const e=Number(s),n=e%100;if(n>20||n<10)switch(n%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},dmt={ordinalNumber:hmt,era:iA({values:rmt,defaultWidth:"wide"}),quarter:iA({values:omt,defaultWidth:"wide",argumentCallback:s=>s-1}),month:iA({values:amt,defaultWidth:"wide"}),day:iA({values:lmt,defaultWidth:"wide"}),dayPeriod:iA({values:cmt,defaultWidth:"wide",formattingValues:umt,defaultFormattingWidth:"wide"})};function rA(s){return(t,e={})=>{const n=e.width,i=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],r=t.match(i);if(!r)return null;const o=r[0],a=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],c=Array.isArray(a)?pmt(a,d=>d.test(o)):fmt(a,d=>d.test(o));let u;u=s.valueCallback?s.valueCallback(c):c,u=e.valueCallback?e.valueCallback(u):u;const h=t.slice(o.length);return{value:u,rest:h}}}function fmt(s,t){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&t(s[e]))return e}function pmt(s,t){for(let e=0;e<s.length;e++)if(t(s[e]))return e}function gmt(s){return(t,e={})=>{const n=t.match(s.matchPattern);if(!n)return null;const i=n[0],r=t.match(s.parsePattern);if(!r)return null;let o=s.valueCallback?s.valueCallback(r[0]):r[0];o=e.valueCallback?e.valueCallback(o):o;const a=t.slice(i.length);return{value:o,rest:a}}}const mmt=/^(\d+)(th|st|nd|rd)?/i,ymt=/\d+/i,vmt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wmt={any:[/^b/i,/^(a|c)/i]},bmt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Amt={any:[/1/i,/2/i,/3/i,/4/i]},xmt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Smt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_mt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Emt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cmt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tmt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pmt={ordinalNumber:gmt({matchPattern:mmt,parsePattern:ymt,valueCallback:s=>parseInt(s,10)}),era:rA({matchPatterns:vmt,defaultMatchWidth:"wide",parsePatterns:wmt,defaultParseWidth:"any"}),quarter:rA({matchPatterns:bmt,defaultMatchWidth:"wide",parsePatterns:Amt,defaultParseWidth:"any",valueCallback:s=>s+1}),month:rA({matchPatterns:xmt,defaultMatchWidth:"wide",parsePatterns:Smt,defaultParseWidth:"any"}),day:rA({matchPatterns:_mt,defaultMatchWidth:"wide",parsePatterns:Emt,defaultParseWidth:"any"}),dayPeriod:rA({matchPatterns:Cmt,defaultMatchWidth:"any",parsePatterns:Tmt,defaultParseWidth:"any"})},kmt={code:"en-US",formatDistance:Jgt,formatLong:nmt,formatRelative:imt,localize:dmt,match:Pmt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rmt(s){const t=Ua(s);return Ggt(t,Ygt(t))+1}function Mmt(s){const t=Ua(s),e=+yk(t)-+qgt(t);return Math.round(e/Uq)+1}function Hq(s,t){var h,d,f,p;const e=Ua(s),n=e.getFullYear(),i=iM(),r=(t==null?void 0:t.firstWeekContainsDate)??((d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=zm(s,0);o.setFullYear(n+1,0,r),o.setHours(0,0,0,0);const a=uS(o,t),c=zm(s,0);c.setFullYear(n,0,r),c.setHours(0,0,0,0);const u=uS(c,t);return e.getTime()>=a.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function Dmt(s,t){var a,c,u,h;const e=iM(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??e.firstWeekContainsDate??((h=(u=e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=Hq(s,t),r=zm(s,0);return r.setFullYear(i,0,n),r.setHours(0,0,0,0),uS(r,t)}function Imt(s,t){const e=Ua(s),n=+uS(e,t)-+Dmt(e,t);return Math.round(n/Uq)+1}function re(s,t){const e=s<0?"-":"",n=Math.abs(s).toString().padStart(t,"0");return e+n}const uh={y(s,t){const e=s.getFullYear(),n=e>0?e:1-e;return re(t==="yy"?n%100:n,t.length)},M(s,t){const e=s.getMonth();return t==="M"?String(e+1):re(e+1,2)},d(s,t){return re(s.getDate(),t.length)},a(s,t){const e=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(s,t){return re(s.getHours()%12||12,t.length)},H(s,t){return re(s.getHours(),t.length)},m(s,t){return re(s.getMinutes(),t.length)},s(s,t){return re(s.getSeconds(),t.length)},S(s,t){const e=t.length,n=s.getMilliseconds(),i=Math.trunc(n*Math.pow(10,e-3));return re(i,t.length)}},Ay={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},TH={G:function(s,t,e){const n=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(n,{width:"abbreviated"});case"GGGGG":return e.era(n,{width:"narrow"});case"GGGG":default:return e.era(n,{width:"wide"})}},y:function(s,t,e){if(t==="yo"){const n=s.getFullYear(),i=n>0?n:1-n;return e.ordinalNumber(i,{unit:"year"})}return uh.y(s,t)},Y:function(s,t,e,n){const i=Hq(s,n),r=i>0?i:1-i;if(t==="YY"){const o=r%100;return re(o,2)}return t==="Yo"?e.ordinalNumber(r,{unit:"year"}):re(r,t.length)},R:function(s,t){const e=Vq(s);return re(e,t.length)},u:function(s,t){const e=s.getFullYear();return re(e,t.length)},Q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return re(n,2);case"Qo":return e.ordinalNumber(n,{unit:"quarter"});case"QQQ":return e.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,t,e){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return re(n,2);case"qo":return e.ordinalNumber(n,{unit:"quarter"});case"qqq":return e.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,t,e){const n=s.getMonth();switch(t){case"M":case"MM":return uh.M(s,t);case"Mo":return e.ordinalNumber(n+1,{unit:"month"});case"MMM":return e.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(n,{width:"wide",context:"formatting"})}},L:function(s,t,e){const n=s.getMonth();switch(t){case"L":return String(n+1);case"LL":return re(n+1,2);case"Lo":return e.ordinalNumber(n+1,{unit:"month"});case"LLL":return e.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(n,{width:"wide",context:"standalone"})}},w:function(s,t,e,n){const i=Imt(s,n);return t==="wo"?e.ordinalNumber(i,{unit:"week"}):re(i,t.length)},I:function(s,t,e){const n=Mmt(s);return t==="Io"?e.ordinalNumber(n,{unit:"week"}):re(n,t.length)},d:function(s,t,e){return t==="do"?e.ordinalNumber(s.getDate(),{unit:"date"}):uh.d(s,t)},D:function(s,t,e){const n=Rmt(s);return t==="Do"?e.ordinalNumber(n,{unit:"dayOfYear"}):re(n,t.length)},E:function(s,t,e){const n=s.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(n,{width:"short",context:"formatting"});case"EEEE":default:return e.day(n,{width:"wide",context:"formatting"})}},e:function(s,t,e,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return re(r,2);case"eo":return e.ordinalNumber(r,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(s,t,e,n){const i=s.getDay(),r=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return re(r,t.length);case"co":return e.ordinalNumber(r,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(s,t,e){const n=s.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return re(i,t.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(n,{width:"short",context:"formatting"});case"iiii":default:return e.day(n,{width:"wide",context:"formatting"})}},a:function(s,t,e){const i=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(s,t,e){const n=s.getHours();let i;switch(n===12?i=Ay.noon:n===0?i=Ay.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(s,t,e){const n=s.getHours();let i;switch(n>=17?i=Ay.evening:n>=12?i=Ay.afternoon:n>=4?i=Ay.morning:i=Ay.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(s,t,e){if(t==="ho"){let n=s.getHours()%12;return n===0&&(n=12),e.ordinalNumber(n,{unit:"hour"})}return uh.h(s,t)},H:function(s,t,e){return t==="Ho"?e.ordinalNumber(s.getHours(),{unit:"hour"}):uh.H(s,t)},K:function(s,t,e){const n=s.getHours()%12;return t==="Ko"?e.ordinalNumber(n,{unit:"hour"}):re(n,t.length)},k:function(s,t,e){let n=s.getHours();return n===0&&(n=24),t==="ko"?e.ordinalNumber(n,{unit:"hour"}):re(n,t.length)},m:function(s,t,e){return t==="mo"?e.ordinalNumber(s.getMinutes(),{unit:"minute"}):uh.m(s,t)},s:function(s,t,e){return t==="so"?e.ordinalNumber(s.getSeconds(),{unit:"second"}):uh.s(s,t)},S:function(s,t){return uh.S(s,t)},X:function(s,t,e){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return kH(n);case"XXXX":case"XX":return Gf(n);case"XXXXX":case"XXX":default:return Gf(n,":")}},x:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"x":return kH(n);case"xxxx":case"xx":return Gf(n);case"xxxxx":case"xxx":default:return Gf(n,":")}},O:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+PH(n,":");case"OOOO":default:return"GMT"+Gf(n,":")}},z:function(s,t,e){const n=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+PH(n,":");case"zzzz":default:return"GMT"+Gf(n,":")}},t:function(s,t,e){const n=Math.trunc(s.getTime()/1e3);return re(n,t.length)},T:function(s,t,e){const n=s.getTime();return re(n,t.length)}};function PH(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),i=Math.trunc(n/60),r=n%60;return r===0?e+String(i):e+String(i)+t+re(r,2)}function kH(s,t){return s%60===0?(s>0?"-":"+")+re(Math.abs(s)/60,2):Gf(s,t)}function Gf(s,t=""){const e=s>0?"-":"+",n=Math.abs(s),i=re(Math.trunc(n/60),2),r=re(n%60,2);return e+i+t+r}const RH=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},zq=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Lmt=(s,t)=>{const e=s.match(/(P+)(p+)?/)||[],n=e[1],i=e[2];if(!i)return RH(s,t);let r;switch(n){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"});break}return r.replace("{{date}}",RH(n,t)).replace("{{time}}",zq(i,t))},Nmt={p:zq,P:Lmt},Omt=/^D+$/,Fmt=/^Y+$/,jmt=["D","DD","YY","YYYY"];function $mt(s){return Omt.test(s)}function Bmt(s){return Fmt.test(s)}function Umt(s,t,e){const n=Vmt(s,t,e);if(console.warn(n),jmt.includes(s))throw new RangeError(n)}function Vmt(s,t,e){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${n} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Hmt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zmt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wmt=/^'([^]*?)'?$/,Gmt=/''/g,qmt=/[a-zA-Z]/;function Kmt(s,t,e){var h,d,f,p;const n=iM(),i=n.locale??kmt,r=n.firstWeekContainsDate??((d=(h=n.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)??1,o=n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,a=Ua(s);if(!Xgt(a))throw new RangeError("Invalid time value");let c=t.match(zmt).map(m=>{const g=m[0];if(g==="p"||g==="P"){const w=Nmt[g];return w(m,i.formatLong)}return m}).join("").match(Hmt).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Xmt(m)};if(TH[g])return{isToken:!0,value:m};if(g.match(qmt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const u={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return c.map(m=>{if(!m.isToken)return m.value;const g=m.value;(Bmt(g)||$mt(g))&&Umt(g,t,String(s));const w=TH[g[0]];return w(a,g,i.localize,u)}).join("")}function Xmt(s){const t=s.match(Wmt);return t?t[1].replace(Gmt,"'"):s}const Ymt=({id:s,title:t,description:e,pageCount:n,createdAt:i,onClick:r})=>_.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},children:_.jsx(Ma,{className:"cursor-pointer group overflow-hidden shadow-soft hover:shadow-medium transition-all duration-300 border-border/50",onClick:r,children:_.jsxs(Da,{className:"p-0",children:[_.jsxs("div",{className:"relative h-40 bg-gradient-to-br from-primary/5 to-primary/10 flex items-center justify-center",children:[_.jsx(Hl,{className:"w-16 h-16 text-primary/30 group-hover:text-primary/50 transition-colors"}),_.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 px-2 py-1 rounded-full bg-background/80 backdrop-blur-sm text-xs text-muted-foreground",children:[_.jsx(g5,{className:"w-3 h-3"}),"View only"]})]}),_.jsxs("div",{className:"p-4 space-y-2",children:[_.jsx("h3",{className:"font-display font-semibold text-lg text-foreground line-clamp-1 group-hover:text-primary transition-colors",children:t}),e&&_.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e}),_.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t border-border/50",children:[_.jsxs("span",{children:[n," ",n===1?"page":"pages"]}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx(p5,{className:"w-3 h-3"}),Kmt(new Date(i),"MMM d, yyyy")]})]})]})]})})}),Wl=C.forwardRef(({className:s,type:t,...e},n)=>_.jsx("input",{type:t,className:dt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...e}));Wl.displayName="Input";function _x({className:s,...t}){return _.jsx("div",{className:dt("animate-pulse rounded-md bg-muted",s),...t})}const Qmt=()=>{const s=Bb(),{user:t,loading:e}=Vb(),[n,i]=C.useState([]),[r,o]=C.useState(!0),[a,c]=C.useState("");C.useEffect(()=>{!e&&!t&&s("/auth")},[t,e,s]),C.useEffect(()=>{t&&(async()=>{const{data:d,error:f}=await Ie.from("documents").select("id, title, description, page_count, created_at").eq("is_active",!0).order("created_at",{ascending:!1});!f&&d&&i(d),o(!1)})()},[t]);const u=n.filter(h=>{var d;return h.title.toLowerCase().includes(a.toLowerCase())||((d=h.description)==null?void 0:d.toLowerCase().includes(a.toLowerCase()))});return e?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:_.jsx("div",{className:"animate-pulse",children:_.jsx(QP,{className:"w-12 h-12 text-primary/50"})})}):_.jsxs("div",{className:"min-h-screen bg-background",children:[_.jsx(Sx,{}),_.jsxs("main",{className:"container py-8",children:[_.jsxs(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[_.jsx("div",{className:"flex justify-center mb-6",children:_.jsx("img",{src:"/src/assests/logo.png",alt:"Peaks Hotel Logo",className:"h-16 w-auto object-contain"})}),_.jsxs("div",{className:"flex items-center gap-2 text-accent mb-2",children:[_.jsx(L1,{className:"w-4 h-4"}),_.jsx("span",{className:"text-sm font-medium",children:"Secure Repository"})]}),_.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold mb-2",children:"Document Library"}),_.jsx("p",{className:"text-muted-foreground max-w-xl",children:"Browse and view documents securely. All access is monitored and watermarked for your protection."})]}),_.jsx(Ki.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:_.jsxs("div",{className:"relative max-w-md",children:[_.jsx(_et,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),_.jsx(Wl,{placeholder:"Search documents...",value:a,onChange:h=>c(h.target.value),className:"pl-10"})]})}),r?_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(h=>_.jsxs("div",{className:"space-y-3",children:[_.jsx(_x,{className:"h-40 w-full rounded-lg"}),_.jsx(_x,{className:"h-4 w-3/4"}),_.jsx(_x,{className:"h-3 w-1/2"})]},h))}):u.length===0?_.jsxs(Ki.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-16 text-center",children:[_.jsx(QP,{className:"w-16 h-16 text-muted-foreground/50 mb-4"}),_.jsx("h3",{className:"font-display text-xl font-semibold mb-2",children:"No documents found"}),_.jsx("p",{className:"text-muted-foreground max-w-sm",children:a?`No documents match "${a}". Try a different search term.`:"No documents are currently available. Check back later."})]}):_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((h,d)=>_.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.05},children:_.jsx(Ymt,{id:h.id,title:h.title,description:h.description||void 0,pageCount:h.page_count||1,createdAt:h.created_at,onClick:()=>s(`/view/${h.id}`)})},h.id))})]})]})};var Jmt="Label",Wq=C.forwardRef((s,t)=>_.jsx(Ut.label,{...s,ref:t,onMouseDown:e=>{var i;e.target.closest("button, input, select, textarea")||((i=s.onMouseDown)==null||i.call(s,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));Wq.displayName=Jmt;var Gq=Wq;const Zmt=OR("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ca=C.forwardRef(({className:s,...t},e)=>_.jsx(Gq,{ref:e,className:dt(Zmt(),s),...t}));Ca.displayName=Gq.displayName;var rM="Tabs",[tyt,WAt]=$a(rM,[ZR]),qq=ZR(),[eyt,$j]=tyt(rM),Kq=C.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,onValueChange:i,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=s,h=Pj(a),[d,f]=D1({prop:n,onChange:i,defaultProp:r??"",caller:rM});return _.jsx(eyt,{scope:e,baseId:Om(),value:d,onValueChange:f,orientation:o,dir:h,activationMode:c,children:_.jsx(Ut.div,{dir:h,"data-orientation":o,...u,ref:t})})});Kq.displayName=rM;var Xq="TabsList",Yq=C.forwardRef((s,t)=>{const{__scopeTabs:e,loop:n=!0,...i}=s,r=$j(Xq,e),o=qq(e);return _.jsx(S8,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:n,children:_.jsx(Ut.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:t})})});Yq.displayName=Xq;var Qq="TabsTrigger",Jq=C.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,disabled:i=!1,...r}=s,o=$j(Qq,e),a=qq(e),c=eK(o.baseId,n),u=nK(o.baseId,n),h=n===o.value;return _.jsx(_8,{asChild:!0,...a,focusable:!i,active:h,children:_.jsx(Ut.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...r,ref:t,onMouseDown:ct(s.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:ct(s.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:ct(s.onFocus,()=>{const d=o.activationMode!=="manual";!h&&!i&&d&&o.onValueChange(n)})})})});Jq.displayName=Qq;var Zq="TabsContent",tK=C.forwardRef((s,t)=>{const{__scopeTabs:e,value:n,forceMount:i,children:r,...o}=s,a=$j(Zq,e),c=eK(a.baseId,n),u=nK(a.baseId,n),h=n===a.value,d=C.useRef(h);return C.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),_.jsx(Ba,{present:i||h,children:({present:f})=>_.jsx(Ut.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:d.current?"0s":void 0},children:f&&r})})});tK.displayName=Zq;function eK(s,t){return`${s}-trigger-${t}`}function nK(s,t){return`${s}-content-${t}`}var nyt=Kq,sK=Yq,iK=Jq,rK=tK;const syt=nyt,oK=C.forwardRef(({className:s,...t},e)=>_.jsx(sK,{ref:e,className:dt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));oK.displayName=sK.displayName;const GL=C.forwardRef(({className:s,...t},e)=>_.jsx(iK,{ref:e,className:dt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s),...t}));GL.displayName=iK.displayName;const qL=C.forwardRef(({className:s,...t},e)=>_.jsx(rK,{ref:e,className:dt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));qL.displayName=rK.displayName;const iyt=()=>{const s=Bb(),{signIn:t,signUp:e,user:n}=Vb(),[i,r]=C.useState(!1);if(n)return s("/"),null;const o=async c=>{c.preventDefault(),r(!0);const u=new FormData(c.currentTarget),h=u.get("email"),d=u.get("password"),{error:f}=await t(h,d);f?Hn.error("Sign in failed",{description:f.message}):(Hn.success("Welcome back!"),s("/")),r(!1)},a=async c=>{c.preventDefault(),r(!0);const u=new FormData(c.currentTarget),h=u.get("email"),d=u.get("password"),f=u.get("fullName"),{error:p}=await e(h,d,f);p?Hn.error("Sign up failed",{description:p.message}):Hn.success("Account created!",{description:"Your account is pending approval. You will be able to sign in once approved by an administrator."}),r(!1)};return _.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row",children:[_.jsxs("div",{className:"flex w-full lg:w-1/2 gradient-primary relative overflow-hidden",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTM2IDM0djItSDI0di0yaDEyek0zNiAzMHYySCAyNHYtMmgxMnpNMzYgMjZ2LTJIMjR2MmgxMnoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-50"}),_.jsx("div",{className:"relative z-10 flex flex-col justify-start lg:justify-center px-12 py-8 lg:py-0 text-primary-foreground",children:_.jsxs(Ki.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"ml-4",children:[_.jsxs("div",{className:"flex flex-col items-center gap-4 mb-8",children:[_.jsx("img",{src:"/src/assests/logo1.jpeg",alt:"Peaks Hotel Logo",className:"h-40 w-auto object-contain"}),_.jsx("h1",{className:"font-display text-3xl font-bold",children:"Peaks Hotel"})]}),_.jsxs("h2",{className:"text-4xl font-display font-bold mb-6 leading-tight",children:["Secure Document",_.jsx("br",{}),"Viewing Platform"]}),_.jsx("p",{className:"text-lg text-primary-foreground/80 mb-8 max-w-md",children:"Access sensitive documents with enterprise-grade security. View-only mode with watermarking and anti-copy protection."}),_.jsx("div",{className:"space-y-4",children:[{icon:L1,text:"Enterprise-grade security"},{icon:g5,text:"View-only access controls"},{icon:Aet,text:"Dynamic watermarking"}].map((c,u)=>_.jsxs(Ki.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+u*.1},className:"flex items-center gap-3",children:[_.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-white/10",children:_.jsx(c.icon,{className:"w-4 h-4"})}),_.jsx("span",{className:"text-primary-foreground/90",children:c.text})]},u))})]})})]}),_.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-background",children:_.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:_.jsxs(syt,{defaultValue:"signin",className:"w-full",children:[_.jsxs(oK,{className:"grid w-full grid-cols-2 mb-6",children:[_.jsx(GL,{value:"signin",children:"Sign In"}),_.jsx(GL,{value:"signup",children:"Sign Up"})]}),_.jsx(qL,{value:"signin",children:_.jsxs(Ma,{className:"border-border/50 shadow-medium",children:[_.jsxs(Lu,{children:[_.jsx(Nu,{className:"font-display",children:"Welcome back"}),_.jsx(zL,{children:"Sign in to access your documents"})]}),_.jsxs("form",{onSubmit:o,children:[_.jsxs(Da,{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ca,{htmlFor:"signin-email",children:"Email"}),_.jsx(Wl,{id:"signin-email",name:"email",type:"email",placeholder:"you@example.com",required:!0})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ca,{htmlFor:"signin-password",children:"Password"}),_.jsx(Wl,{id:"signin-password",name:"password",type:"password",placeholder:"",required:!0})]})]}),_.jsx(WL,{children:_.jsx(zn,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})})]})]})}),_.jsx(qL,{value:"signup",children:_.jsxs(Ma,{className:"border-border/50 shadow-medium",children:[_.jsxs(Lu,{children:[_.jsx(Nu,{className:"font-display",children:"Create account"}),_.jsx(zL,{children:"Request access to the document repository"})]}),_.jsxs("form",{onSubmit:a,children:[_.jsxs(Da,{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ca,{htmlFor:"signup-name",children:"Full Name"}),_.jsx(Wl,{id:"signup-name",name:"fullName",type:"text",placeholder:"John Doe"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ca,{htmlFor:"signup-email",children:"Email"}),_.jsx(Wl,{id:"signup-email",name:"email",type:"email",placeholder:"you@example.com",required:!0})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx(Ca,{htmlFor:"signup-password",children:"Password"}),_.jsx(Wl,{id:"signup-password",name:"password",type:"password",placeholder:"",minLength:6,required:!0})]})]}),_.jsx(WL,{children:_.jsx(zn,{type:"submit",className:"w-full",disabled:i,children:i?"Creating account...":"Create Account"})})]})]})})]})})})]})},MH=s=>(s.preventDefault(),!1),DH=s=>{if([{key:"c",ctrl:!0},{key:"x",ctrl:!0},{key:"v",ctrl:!0},{key:"s",ctrl:!0},{key:"p",ctrl:!0},{key:"a",ctrl:!0},{key:"u",ctrl:!0},{key:"PrintScreen",ctrl:!1},{key:"F12",ctrl:!1},{key:"i",ctrl:!0,shift:!0},{key:"j",ctrl:!0,shift:!0}].some(n=>{const i=s.key.toLowerCase()===n.key.toLowerCase(),r=n.ctrl?s.ctrlKey||s.metaKey:!0,o=n.shift?s.shiftKey:!0;return i&&r&&o})||s.key==="PrintScreen")return s.preventDefault(),s.stopPropagation(),!1},IH=s=>(s.preventDefault(),!1),LH=()=>{var s;(s=document.getSelection())==null||s.removeAllRanges()},ryt=()=>{document.addEventListener("contextmenu",MH),document.addEventListener("keydown",DH),document.addEventListener("dragstart",IH),document.addEventListener("selectstart",LH);const s=document.createElement("style");return s.textContent=`
    @media print {
      body * {
        display: none !important;
      }
      body::after {
        content: "Printing is disabled for security reasons.";
        display: block;
        font-size: 24px;
        text-align: center;
        padding: 100px;
      }
    }
  `,document.head.appendChild(s),()=>{document.removeEventListener("contextmenu",MH),document.removeEventListener("keydown",DH),document.removeEventListener("dragstart",IH),document.removeEventListener("selectstart",LH),document.head.removeChild(s)}},oyt=(s,t)=>{const e=[];for(let i=50;i<t;i+=250)for(let r=50;r<s;r+=250)e.push({x:r+(Math.random()*30-15),y:i+(Math.random()*30-15),key:`${r}-${i}`});return e},NH=({userEmail:s,userName:t,containerRef:e})=>{const[n,i]=C.useState({width:0,height:0}),[r,o]=C.useState(new Date);C.useEffect(()=>{const u=()=>{e.current&&i({width:e.current.scrollWidth,height:e.current.scrollHeight})};u(),window.addEventListener("resize",u);const h=setInterval(()=>{o(new Date)},6e4);return()=>{window.removeEventListener("resize",u),clearInterval(h)}},[e]);const a=C.useMemo(()=>n.width===0||n.height===0?[]:oyt(n.width,n.height),[n]),c=`${t||s}  ${r.toLocaleDateString()} ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;return _.jsx("div",{className:"watermark-overlay","aria-hidden":"true",children:a.map(u=>_.jsx("span",{className:"watermark-text animate-pulse-glow",style:{left:u.x,top:u.y},children:c},u.key))})},ayt=()=>{const[s,t]=C.useState(!0);return C.useEffect(()=>{const e=()=>{t(document.visibilityState==="visible")},n=()=>{t(!1)},i=()=>{t(!0)};return document.addEventListener("visibilitychange",e),window.addEventListener("blur",n),window.addEventListener("focus",i),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("blur",n),window.removeEventListener("focus",i)}},[]),s},gi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),KL=[.001,0,0,.001,0,0],BD=1.35,Mr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Gl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},hS="pdfjs_internal_editor_",xt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},aK={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ds={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ex={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},mn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ty={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},q1={ERRORS:0,WARNINGS:1,INFOS:5},kb={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},OC={moveTo:0,lineTo:1,curveTo:2,closePath:3},lK={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let oM=q1.WARNINGS;function lyt(s){Number.isInteger(s)&&(oM=s)}function cyt(){return oM}function aM(s){oM>=q1.INFOS&&console.info(`Info: ${s}`)}function St(s){oM>=q1.WARNINGS&&console.warn(`Warning: ${s}`)}function Ae(s){throw new Error(s)}function Vt(s,t){s||Ae(t)}function uyt(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Bj(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=gyt(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return uyt(n)?n:null}function Uj(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&Bj(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Rt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ry=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();let OH=class extends ry{constructor(t,e){super(t,"PasswordException"),this.code=e}},UD=class extends ry{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},vk=class extends ry{constructor(t){super(t,"InvalidPDFException")}};class dS extends ry{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}let hyt=class extends ry{constructor(t){super(t,"FormatError")}},qu=class extends ry{constructor(t){super(t,"AbortException")}};function cK(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Ae("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function K1(s){typeof s!="string"&&Ae("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function dyt(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function fyt(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function pyt(){try{return new Function(""),!0}catch{return!1}}let us=class{static get isLittleEndian(){return Rt(this,"isLittleEndian",fyt())}static get isEvalSupported(){return Rt(this,"isEvalSupported",pyt())}static get isOffscreenCanvasSupported(){return Rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Rt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Rt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}};const VD=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Ou,eI,vT,XL;let rt=(eI=class{static makeHexColor(t,e,n){return`#${VD[t]}${VD[e]}${VD[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],r=t[n+1];t[n]=i*e[0]+r*e[2]+e[4],t[n+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],r=e[1],o=e[2],a=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[n+h],f=t[n+h+1];t[n+h]=d*i+f*o+c,t[n+h+1]=d*r+f*a+u}}static applyInverseTransform(t,e){const n=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const i=e[0],r=e[1],o=e[2],a=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let m=i*h+c,g=m,w=i*f+c,v=w,b=a*d+u,x=b,E=a*p+u,T=E;if(r!==0||o!==0){const P=r*h,k=r*f,R=o*d,M=o*p;m+=R,v+=R,w+=M,g+=M,b+=P,T+=P,E+=k,x+=k}n[0]=Math.min(n[0],m,w,g,v),n[1]=Math.min(n[1],b,E,x,T),n[2]=Math.max(n[2],m,w,g,v),n[3]=Math.max(n[3],b,E,x,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],a=n**2+i**2,c=n*r+i*o,u=r**2+o**2,h=(a+u)/2,d=Math.sqrt(h**2-(a*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,n,i,r,o,a,c,u){u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,c),S(this,Ou,XL).call(this,t,n,r,a,e,i,o,c,3*(-t+3*(n-r)+a),6*(t-2*n+r),3*(n-t),u),S(this,Ou,XL).call(this,t,n,r,a,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),u)}},Ou=new WeakSet,vT=function(t,e,n,i,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*t+3*u*e)+3*f*n)+p*i,g=d*(d*(d*r+3*u*o)+3*f*a)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],g)},XL=function(t,e,n,i,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,Ou,vT).call(this,t,e,n,i,r,o,a,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),g=2*u;S(this,Ou,vT).call(this,t,e,n,i,r,o,a,c,(-h+m)/g,f),S(this,Ou,vT).call(this,t,e,n,i,r,o,a,c,(-h-m)/g,f)},A(eI,Ou),eI);function gyt(s){return decodeURIComponent(escape(s))}let HD=null,FH=null;function uK(s){return HD||(HD=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,FH=new Map([["","t"]])),s.replaceAll(HD,(t,e,n)=>e?e.normalize("NFKC"):FH.get(n))}function Vj(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),cK(s)}const Hj="pdfjs_internal_id_";function myt(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...r]=e;if(!s(n)&&!Number.isInteger(n)||!t(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function Js(s,t,e){return Math.min(Math.max(s,t),e)}function hK(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(cK(s))}function yyt(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):K1(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});let YL=class dK{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(dK.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},zj=class{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}a&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&YL.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,m,g]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const w=p.children[++h.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const x=document.createTextNode(w.value);u.push(x),g.append(x);continue}const b=(d=w==null?void 0:w.attributes)!=null&&d.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:e,intent:r,linkService:n}),((f=w.children)==null?void 0:f.length)>0)h.push([w,-1,b]);else if(w.value){const x=document.createTextNode(w.value);a&&YL.shouldBuildText(v)&&u.push(x),b.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}};const cc="http://www.w3.org/2000/svg";var Ul;let Wm=(Ul=class{},B(Ul,"CSS",96),B(Ul,"PDF",72),B(Ul,"PDF_TO_CSS_UNITS",Ul.CSS/Ul.PDF),Ul);async function zb(s,t="text"){if(SA(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}let Wj=class fK{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let m,g,w,v;h===0?(m=Math.abs(u-t[1])*n+r,g=Math.abs(c-t[0])*n+o,w=(t[3]-t[1])*n,v=(t[2]-t[0])*n):(m=Math.abs(c-t[0])*n+r,g=Math.abs(u-t[1])*n+o,w=(t[2]-t[0])*n,v=(t[3]-t[1])*n),this.transform=[h*n,d*n,f*n,p*n,m-h*n*c-f*n*u,g-d*n*c-p*n*u],this.width=w,this.height=v}get rawDims(){const t=this.viewBox;return Rt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new fK({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return rt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];rt.applyTransform(e,this.transform);const n=[t[2],t[3]];return rt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return rt.applyInverseTransform(n,this.transform),n}},lM=class extends ry{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function X1(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function cM(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function pK(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function gK(s,t="document.pdf"){if(typeof s!="string")return t;if(X1(s))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const i=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return i(o);if(n.searchParams.size>0){const a=Array.from(n.searchParams.values()).reverse();for(const u of a)if(r.test(u))return i(u);const c=Array.from(n.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return i(u)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return i(c[0])}return t}let jH=class{constructor(){B(this,"started",Object.create(null));B(this,"times",[])}time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}};function SA(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Xr(s){s.preventDefault()}function Qe(s){s.preventDefault(),s.stopPropagation()}function vyt(s){console.log("Deprecated API usage: "+s)}var nI,bS;let wk=(nI=class{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,bS)||y(this,bS,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,bS).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(n,i,r,o,a,c))}},bS=new WeakMap,A(nI,bS),nI);function mK(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new Wj({viewBox:r,userUnit:1,scale:t,rotation:e})}function Wb(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${s}"`),[0,0,0])}function wyt(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Wb(n))}t.remove()}function Ke(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform();return[t,e,n,i,r,o]}function Wa(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[t,e,n,i,r,o]}function bf(s,t,e=!1,n=!0){if(t instanceof Wj){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=s,a=us.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${r}px`,h=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}n&&s.setAttribute("data-main-rotation",t.rotation)}let Af=class QL{constructor(){const{pixelRatio:t}=QL;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,r=-1){let o=1/0,a=1/0,c=1/0;n=QL.capPixels(n,r),n>0&&(o=Math.sqrt(n/(t*e))),i!==-1&&(a=i/t,c=i/e);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}};const bk=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class byt{static get isDarkMode(){var t;return Rt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class yK{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Rt(this,"commentForegroundColor",Wb(n))}}function vK(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[s,t,e]}function $H(s,t){const e=s[0]/255,n=s[1]/255,i=s[2]/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const c=r-o;switch(t[1]=a<.5?c/(r+o):c/(2-r-o),r){case e:t[0]=((n-i)/c+(n<i?6:0))*60;break;case n:t[0]=((i-e)/c+2)*60;break;case i:t[0]=((e-n)/c+4)*60;break}}t[2]=a}function JL(s,t){const e=s[0],n=s[1],i=s[2],r=(1-Math.abs(2*i-1))*n,o=r*(1-Math.abs(e/60%2-1)),a=i-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+a,t[1]=o+a,t[2]=a;break;case 1:t[0]=o+a,t[1]=r+a,t[2]=a;break;case 2:t[0]=a,t[1]=r+a,t[2]=o+a;break;case 3:t[0]=a,t[1]=o+a,t[2]=r+a;break;case 4:t[0]=o+a,t[1]=a,t[2]=r+a;break;case 5:case 6:t[0]=r+a,t[1]=a,t[2]=o+a;break}}function BH(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function UH(s,t,e){JL(s,e),e.map(BH);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];JL(t,e),e.map(BH);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const VH=new Map;function wK(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=VH.get(e);if(n)return n;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);$H(s,o);const a=i.subarray(6,9);$H(t,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),UH(o,a,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const p=o[2]=(h+d)/2;c===UH(o,a,r)<u?h=p:d=p}o[2]=c?d:h}return JL(o,r),n=rt.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),VH.set(e,n),n}function Gj({html:s,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof s=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];r.append(document.createTextNode(u)),a<c-1&&r.append(document.createElement("br"))}i.append(r)}else zj.render({xfaHtml:s,div:i,intent:"richText"});i.firstChild.classList.add("richText",e),n.append(i)}var Rh,Mh,io,ro,AS,Dh,Lv,Nv,Co,xS,Nk,bK,Rs,AK,xK,Py,_A;let Ayt=(Co=class{constructor(t){A(this,Rs);A(this,Rh,null);A(this,Mh,null);A(this,io);A(this,ro,null);A(this,AS,null);A(this,Dh,null);A(this,Lv,null);A(this,Nv,null);y(this,io,t),l(Co,xS)||y(Co,xS,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=y(this,Rh,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,io)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Xr,{signal:e}),t.addEventListener("pointerdown",S(Co,Nk,bK),{signal:e}));const n=y(this,ro,document.createElement("div"));n.className="buttons",t.append(n);const i=l(this,io).toolbarPosition;if(i){const{style:r}=t,o=l(this,io)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,Rh)}hide(){var t;l(this,Rh).classList.add("hidden"),(t=l(this,Mh))==null||t.hideDropdown()}show(){var t,e;l(this,Rh).classList.remove("hidden"),(t=l(this,AS))==null||t.shown(),(e=l(this,Dh))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,io),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(Co,xS)[t]),S(this,Rs,Py).call(this,n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,ro).append(n)}async addAltText(t){const e=await t.render();S(this,Rs,Py).call(this,e),l(this,ro).append(e,l(this,Rs,_A)),y(this,AS,t)}addComment(t,e=null){if(l(this,Dh))return;const n=t.renderForToolbar();if(!n)return;S(this,Rs,Py).call(this,n);const i=y(this,Lv,l(this,Rs,_A));e?(l(this,ro).insertBefore(n,e),l(this,ro).insertBefore(i,e)):l(this,ro).append(n,i),y(this,Dh,t),t.toolbar=this}addColorPicker(t){if(l(this,Mh))return;y(this,Mh,t);const e=t.renderButton();S(this,Rs,Py).call(this,e),l(this,ro).append(e,l(this,Rs,_A))}async addEditSignatureButton(t){const e=y(this,Nv,await t.renderEditButton(l(this,io)));S(this,Rs,Py).call(this,e),l(this,ro).append(e,l(this,Rs,_A))}removeButton(t){var e,n;switch(t){case"comment":(e=l(this,Dh))==null||e.removeToolbarCommentButton(),y(this,Dh,null),(n=l(this,Lv))==null||n.remove(),y(this,Lv,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const i=l(this,ro).querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){l(this,Nv)&&(l(this,Nv).title=t)}remove(){var t;l(this,Rh).remove(),(t=l(this,Mh))==null||t.destroy(),y(this,Mh,null)}},Rh=new WeakMap,Mh=new WeakMap,io=new WeakMap,ro=new WeakMap,AS=new WeakMap,Dh=new WeakMap,Lv=new WeakMap,Nv=new WeakMap,xS=new WeakMap,Nk=new WeakSet,bK=function(t){t.stopPropagation()},Rs=new WeakSet,AK=function(t){l(this,io)._focusEventsAllowed=!1,Qe(t)},xK=function(t){l(this,io)._focusEventsAllowed=!0,Qe(t)},Py=function(t){const e=l(this,io)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",S(this,Rs,AK).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",S(this,Rs,xK).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Xr,{signal:e}),!0)},_A=function(){const t=document.createElement("div");return t.className="divider",t},A(Co,Nk),A(Co,xS,null),Co);var SS,gp,Ac,Ku,SK,_K,ZL;class xyt{constructor(t){A(this,Ku);A(this,SS,null);A(this,gp,null);A(this,Ac);y(this,Ac,t)}show(t,e,n){const[i,r]=S(this,Ku,_K).call(this,e,n),{style:o}=l(this,gp)||y(this,gp,S(this,Ku,SK).call(this));t.append(l(this,gp)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,gp).remove()}}SS=new WeakMap,gp=new WeakMap,Ac=new WeakMap,Ku=new WeakSet,SK=function(){const t=y(this,gp,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Ac)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Xr,{signal:e});const n=y(this,SS,document.createElement("div"));return n.className="buttons",t.append(n),l(this,Ac).hasCommentManager()&&S(this,Ku,ZL).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Ac).commentSelection("floating_button")}),S(this,Ku,ZL).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Ac).highlightSelection("floating_button")}),t},_K=function(t,e){let n=0,i=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const a=r.x+(e?r.width:0);if(o>n){i=a,n=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,n]},ZL=function(t,e,n,i){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const a=l(this,Ac)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",Xr,{signal:a}),r.addEventListener("click",i,{signal:a})),l(this,SS).append(r)};function EK(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var Ok,G3;let Syt=(G3=class{constructor(){A(this,Ok,0)}get id(){return`${hS}${$t(this,Ok)._++}`}},Ok=new WeakMap,G3);var Ov,_S,Us,Fv,wT,jv;let _yt=(jv=class{constructor(){A(this,Fv);A(this,Ov,Vj());A(this,_S,0);A(this,Us,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Rt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return S(this,Fv,wT).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return S(this,Fv,wT).call(this,t,t)}async getFromBlob(t,e){const n=await e;return S(this,Fv,wT).call(this,t,n)}async getFromId(t){l(this,Us)||y(this,Us,new Map);const e=l(this,Us).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Us)||y(this,Us,new Map);let n=l(this,Us).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Ov)}_${$t(this,_S)._++}`,refCounter:1,isSvg:!1},l(this,Us).set(t,n),l(this,Us).set(n.id,n),n}getSvgUrl(t){const e=l(this,Us).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;l(this,Us)||y(this,Us,new Map);const e=l(this,Us).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,Ov)}_`)}},Ov=new WeakMap,_S=new WeakMap,Us=new WeakMap,Fv=new WeakSet,wT=async function(t,e){l(this,Us)||y(this,Us,new Map);let n=l(this,Us).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Ov)}_${$t(this,_S)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await zb(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=jv._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,u()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){St(i),n=null}return l(this,Us).set(t,n),n&&l(this,Us).set(n.id,n),n},jv);var yn,Ih,ES,We,q3;let Eyt=(q3=class{constructor(t=128){A(this,yn,[]);A(this,Ih,!1);A(this,ES);A(this,We,-1);y(this,ES,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),l(this,Ih))return;const c={cmd:t,undo:e,post:n,type:r};if(l(this,We)===-1){l(this,yn).length>0&&(l(this,yn).length=0),y(this,We,0),l(this,yn).push(c);return}if(o&&l(this,yn)[l(this,We)].type===r){a&&(c.undo=l(this,yn)[l(this,We)].undo),l(this,yn)[l(this,We)]=c;return}const u=l(this,We)+1;u===l(this,ES)?l(this,yn).splice(0,1):(y(this,We,u),u<l(this,yn).length&&l(this,yn).splice(u)),l(this,yn).push(c)}undo(){if(l(this,We)===-1)return;y(this,Ih,!0);const{undo:t,post:e}=l(this,yn)[l(this,We)];t(),e==null||e(),y(this,Ih,!1),y(this,We,l(this,We)-1)}redo(){if(l(this,We)<l(this,yn).length-1){y(this,We,l(this,We)+1),y(this,Ih,!0);const{cmd:t,post:e}=l(this,yn)[l(this,We)];t(),e==null||e(),y(this,Ih,!1)}}hasSomethingToUndo(){return l(this,We)!==-1}hasSomethingToRedo(){return l(this,We)<l(this,yn).length-1}cleanType(t){if(l(this,We)!==-1){for(let e=l(this,We);e>=0;e--)if(l(this,yn)[e].type!==t){l(this,yn).splice(e+1,l(this,We)-e),y(this,We,e);return}l(this,yn).length=0,y(this,We,-1)}}destroy(){y(this,yn,null)}},yn=new WeakMap,Ih=new WeakMap,ES=new WeakMap,We=new WeakMap,q3);var Fk,CK,K3;let Y1=(K3=class{constructor(t){A(this,Fk);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=us.platform;for(const[n,i,r={}]of t)for(const o of n){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(S(this,Fk,CK).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...o,e)(),r||Qe(e))}},Fk=new WeakSet,CK=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e},K3);var mp;let Cyt=(mp=class{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return wyt(t),Rt(this,"_colors",t)}convert(t){const e=Wb(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,o)=>r===e[o]))return mp._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?rt.makeHexColor(...e):t}},B(mp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),mp);var $v,nr,Bv,on,jn,Uv,oo,Vv,ao,Vs,Lh,Nh,Hv,Oh,el,lo,yp,CS,TS,zv,PS,nl,Fh,Wv,jh,sl,jk,$h,Gv,kS,Bh,vp,qv,Uh,RS,Tn,ee,xc,Vh,Hh,MS,Kv,DS,zh,il,Sc,IS,LS,co,Pu,Y,bT,tN,TK,PK,EA,kK,RK,MK,eN,DK,nN,sN,IK,ri,uc,LK,NK,iN,OK,CA,rN;let Rb=(Pu=class{constructor(t,e,n,i,r,o,a,c,u,h,d,f,p,m,g,w){A(this,Y);A(this,$v,new AbortController);A(this,nr,null);A(this,Bv,null);A(this,on,new Map);A(this,jn,new Map);A(this,Uv,null);A(this,oo,null);A(this,Vv,null);A(this,ao,new Eyt);A(this,Vs,null);A(this,Lh,null);A(this,Nh,null);A(this,Hv,0);A(this,Oh,new Set);A(this,el,null);A(this,lo,null);A(this,yp,new Set);B(this,"_editorUndoBar",null);A(this,CS,!1);A(this,TS,!1);A(this,zv,!1);A(this,PS,null);A(this,nl,null);A(this,Fh,null);A(this,Wv,null);A(this,jh,!1);A(this,sl,null);A(this,jk,new Syt);A(this,$h,!1);A(this,Gv,!1);A(this,kS,!1);A(this,Bh,null);A(this,vp,null);A(this,qv,null);A(this,Uh,null);A(this,RS,null);A(this,Tn,xt.NONE);A(this,ee,new Set);A(this,xc,null);A(this,Vh,null);A(this,Hh,null);A(this,MS,null);A(this,Kv,null);A(this,DS,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,zh,[0,0]);A(this,il,null);A(this,Sc,null);A(this,IS,null);A(this,LS,null);A(this,co,null);const v=this._signal=l(this,$v).signal;y(this,Sc,t),y(this,IS,e),y(this,LS,n),y(this,Uv,i),y(this,Vs,r),y(this,Vh,o),y(this,Kv,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{y(this,Gv,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{y(this,Gv,!1)},{capture:!0,signal:v}),S(this,Y,kK).call(this),S(this,Y,IK).call(this),S(this,Y,eN).call(this),y(this,oo,c.annotationStorage),y(this,PS,c.filterFactory),y(this,Hh,u),y(this,Wv,h||null),y(this,CS,d),y(this,TS,f),y(this,zv,p),y(this,RS,m||null),this.viewParameters={realScale:Wm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=Pu.prototype,e=o=>l(o,Sc).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Rt(this,"_keyboardManager",new Y1([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Sc).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Sc).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,i,r,o,a,c,u;(t=l(this,co))==null||t.resolve(),y(this,co,null),(e=l(this,$v))==null||e.abort(),y(this,$v,null),this._signal=null;for(const h of l(this,jn).values())h.destroy();l(this,jn).clear(),l(this,on).clear(),l(this,yp).clear(),(n=l(this,Uh))==null||n.clear(),y(this,nr,null),l(this,ee).clear(),l(this,ao).destroy(),(i=l(this,Uv))==null||i.destroy(),(r=l(this,Vs))==null||r.destroy(),(o=l(this,Vh))==null||o.destroy(),(a=l(this,sl))==null||a.hide(),y(this,sl,null),(c=l(this,qv))==null||c.destroy(),y(this,qv,null),y(this,Bv,null),l(this,nl)&&(clearTimeout(l(this,nl)),y(this,nl,null)),l(this,il)&&(clearTimeout(l(this,il)),y(this,il,null)),(u=this._editorUndoBar)==null||u.destroy(),y(this,Kv,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,RS)}get useNewAltTextFlow(){return l(this,TS)}get useNewAltTextWhenAddingImage(){return l(this,zv)}get hcmFilter(){return Rt(this,"hcmFilter",l(this,Hh)?l(this,PS).addHCMFilter(l(this,Hh).foreground,l(this,Hh).background):"none")}get direction(){return Rt(this,"direction",getComputedStyle(l(this,Sc)).direction)}get _highlightColors(){return Rt(this,"_highlightColors",l(this,Wv)?new Map(l(this,Wv).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Rt(this,"highlightColors",null);const e=new Map,n=!!l(this,Hh);for(const[i,r]of t){const o=i.endsWith("_HCM");if(n&&o){e.set(i.replace("_HCM",""),r);continue}!n&&!o&&e.set(i,r)}return Rt(this,"highlightColors",e)}get highlightColorNames(){return Rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),y(this,Nh,t)}setMainHighlightColorPicker(t){y(this,qv,t)}editAltText(t,e=!1){var n;(n=l(this,Uv))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!l(this,Vs)}editComment(t,e,n,i){var r;(r=l(this,Vs))==null||r.showDialog(this,t,e,n,i)}selectComment(t,e){const n=l(this,jn).get(t),i=n==null?void 0:n.getEditorByUID(e);i==null||i.toggleComment(!0,!0)}updateComment(t){var e;(e=l(this,Vs))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=l(this,Vs))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=l(this,Vs))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var i;(i=l(this,Vs))==null||i.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=l(this,Vs))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=l(this,Vs))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(l(this,jn).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){var e;(e=l(this,Vh))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,Vh)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":y(this,zv,e);break}}onPageChanging({pageNumber:t}){y(this,Hv,t-1)}focusMainContainer(){l(this,Sc).focus()}findParent(t,e){for(const n of l(this,jn).values()){const{x:i,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return n}return null}disableUserSelect(t=!1){l(this,IS).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,yp).add(t)}removeShouldRescale(t){l(this,yp).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Wm.PDF_TO_CSS_UNITS;for(const n of l(this,yp))n.onScaleChanging();(e=l(this,Nh))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a}=n,c=n.toString(),h=S(this,Y,bT).call(this,n).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;n.empty();const f=S(this,Y,tN).call(this,h),p=l(this,Tn)===xt.NONE,m=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a,text:c});p&&this.showAllEditors("highlight",!0,!0),e&&(g==null||g.editComment())};if(p){this.switchToMode(xt.HIGHLIGHT,m);return}m()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,oo))return null;const e=`${hS}${t}`,n=l(this,oo).getRawValue(e);return n&&l(this,oo).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&l(this,oo)&&!l(this,oo).has(t.id)&&l(this,oo).setValue(t.id,t)}a11yAlert(t,e=null){const n=l(this,LS);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,jh)&&(y(this,jh,!1),S(this,Y,EA).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,ee))if(e.div.contains(t)){y(this,vp,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,vp))return;const[t,e]=l(this,vp);y(this,vp,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){S(this,Y,eN).call(this),S(this,Y,nN).call(this)}removeEditListeners(){S(this,Y,DK).call(this),S(this,Y,sN).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,lo))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,lo))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=l(this,nr))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of l(this,ee)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,lo))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){St(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of n){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)S(this,Y,iN).call(this,c);S(this,Y,rN).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){St(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Tn)!==xt.NONE&&!this.isEditorHandlingKeyboard&&Pu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,jh)&&(y(this,jh,!1),S(this,Y,EA).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(S(this,Y,RK).call(this),S(this,Y,nN).call(this),S(this,Y,ri).call(this,{isEditing:l(this,Tn)!==xt.NONE,isEmpty:S(this,Y,CA).call(this),hasSomethingToUndo:l(this,ao).hasSomethingToUndo(),hasSomethingToRedo:l(this,ao).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,Y,MK).call(this),S(this,Y,sN).call(this),S(this,Y,ri).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,lo)){y(this,lo,t);for(const e of l(this,lo))S(this,Y,uc).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,jk).id}get currentLayer(){return l(this,jn).get(l(this,Hv))}getLayer(t){return l(this,jn).get(t)}get currentPageIndex(){return l(this,Hv)}addLayer(t){l(this,jn).set(t.pageIndex,t),l(this,$h)?t.enable():t.disable()}removeLayer(t){l(this,jn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,r=!1){var o,a,c,u,h,d;if(l(this,Tn)!==t&&!(l(this,co)&&(await l(this,co).promise,!l(this,co)))){if(y(this,co,Promise.withResolvers()),(o=l(this,Nh))==null||o.commitOrRemove(),l(this,Tn)===xt.POPUP&&((a=l(this,Vs))==null||a.hideSidebar()),(c=l(this,Vs))==null||c.destroyPopup(),y(this,Tn,t),t===xt.NONE){this.setEditingState(!1),S(this,Y,NK).call(this);for(const f of l(this,on).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),l(this,co).resolve();return}for(const f of l(this,on).values())f.addStandaloneCommentButton();t===xt.SIGNATURE&&await((h=l(this,Vh))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await S(this,Y,LK).call(this),this.unselectAll();for(const f of l(this,jn).values())f.updateMode(t);if(t===xt.POPUP){l(this,Bv)||y(this,Bv,await l(this,Kv).getAnnotationsByType(new Set(l(this,lo).map(m=>m._editorType))));const f=new Set,p=[];for(const m of l(this,on).values()){const{annotationElementId:g,hasComment:w,deleted:v}=m;g&&f.add(g),w&&!v&&p.push(m.getData())}for(const m of l(this,Bv)){const{id:g,popupRef:w,contentsObj:v}=m;w&&(v!=null&&v.str)&&!f.has(g)&&!l(this,Oh).has(g)&&p.push(m)}(d=l(this,Vs))==null||d.showSidebar(p)}if(!e){n&&this.addNewEditorFromKeyboard(),l(this,co).resolve();return}for(const f of l(this,on).values())f.uid===e?(this.setSelected(f),r?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();l(this,co).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,Tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,lo)){switch(t){case Bt.CREATE:this.currentLayer.addNewEditor(e);return;case Bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,MS)||y(this,MS,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of l(this,ee))n.updateParams(t,e);else for(const n of l(this,lo))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of l(this,on).values())o.editorType===t&&o.show(e);(((r=l(this,MS))==null?void 0:r.get(Bt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&S(this,Y,uc).call(this,[[Bt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,kS)!==t){y(this,kS,t);for(const e of l(this,jn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,on).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,on).get(t)}addEditor(t){l(this,on).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(l(this,nl)&&clearTimeout(l(this,nl)),y(this,nl,setTimeout(()=>{this.focusMainContainer(),y(this,nl,null)},0))),l(this,on).delete(t.id),t.annotationElementId&&((e=l(this,Uh))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,Oh).has(t.annotationElementId))&&((n=l(this,oo))==null||n.remove(t.id))}addDeletedAnnotationElement(t){l(this,Oh).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Oh).has(t)}removeDeletedAnnotationElement(t){l(this,Oh).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,nr)!==t&&(y(this,nr,t),t&&S(this,Y,uc).call(this,t.propertiesToUpdate))}updateUI(t){l(this,Y,OK)===t&&S(this,Y,uc).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){S(this,Y,uc).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,ee).has(t)){l(this,ee).delete(t),t.unselect(),S(this,Y,ri).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ee).add(t),t.select(),S(this,Y,uc).call(this,t.propertiesToUpdate),S(this,Y,ri).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=l(this,Nh))==null||e.commitOrRemove();for(const n of l(this,ee))n!==t&&n.unselect();l(this,ee).clear(),l(this,ee).add(t),t.select(),S(this,Y,uc).call(this,t.propertiesToUpdate),S(this,Y,ri).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,ee).has(t)}get firstSelectedEditor(){return l(this,ee).values().next().value}unselect(t){t.unselect(),l(this,ee).delete(t),S(this,Y,ri).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ee).size!==0}get isEnterHandled(){return l(this,ee).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,ao).undo(),S(this,Y,ri).call(this,{hasSomethingToUndo:l(this,ao).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,Y,CA).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,ao).redo(),S(this,Y,ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,ao).hasSomethingToRedo(),isEmpty:S(this,Y,CA).call(this)})}addCommands(t){l(this,ao).add(t),S(this,Y,ri).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,Y,CA).call(this)})}cleanUndoStack(t){l(this,ao).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,ee)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const o of e)S(this,Y,iN).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=l(this,nr))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,nr)||this.hasSelection}selectAll(){for(const t of l(this,ee))t.commit();S(this,Y,rN).call(this,l(this,on).values())}unselectAll(){var t;if(!(l(this,nr)&&(l(this,nr).commitOrRemove(),l(this,Tn)!==xt.NONE))&&!((t=l(this,Nh))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,ee))e.unselect();l(this,ee).clear(),S(this,Y,ri).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,zh)[0]+=t,l(this,zh)[1]+=e;const[i,r]=l(this,zh),o=[...l(this,ee)],a=1e3;l(this,il)&&clearTimeout(l(this,il)),y(this,il,setTimeout(()=>{y(this,il,null),l(this,zh)[0]=l(this,zh)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,on).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of o)l(this,on).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,el,new Map);for(const t of l(this,ee))l(this,el).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,el))return!1;this.disableUserSelect(!1);const t=l(this,el);y(this,el,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||(e=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const n=(i,r,o,a)=>{if(l(this,on).has(i.id)){const c=l(this,jn).get(a);c?i._setParentAndPosition(c,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)n(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)n(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,el))for(const n of l(this,el).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,ee).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,nr)===t}getActive(){return l(this,nr)}getMode(){return l(this,Tn)}isEditingMode(){return l(this,Tn)!==xt.NONE}get imageManager(){return Rt(this,"imageManager",new _yt)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-n)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-n)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-n)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:g}of d.getClientRects())m===0||g===0||c.push(a(f,p,m,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Vv)||y(this,Vv,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,Vv))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=l(this,Vv))==null?void 0:i.get(t.data.id);if(!e)return;const n=l(this,oo).getRawValue(e);n&&(l(this,Tn)===xt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const i=(r=l(this,Uh))==null?void 0:r.get(t);i&&(i.setCanvas(e,n),l(this,Uh).delete(t))}addMissingCanvas(t,e){(l(this,Uh)||y(this,Uh,new Map)).set(t,e)}},$v=new WeakMap,nr=new WeakMap,Bv=new WeakMap,on=new WeakMap,jn=new WeakMap,Uv=new WeakMap,oo=new WeakMap,Vv=new WeakMap,ao=new WeakMap,Vs=new WeakMap,Lh=new WeakMap,Nh=new WeakMap,Hv=new WeakMap,Oh=new WeakMap,el=new WeakMap,lo=new WeakMap,yp=new WeakMap,CS=new WeakMap,TS=new WeakMap,zv=new WeakMap,PS=new WeakMap,nl=new WeakMap,Fh=new WeakMap,Wv=new WeakMap,jh=new WeakMap,sl=new WeakMap,jk=new WeakMap,$h=new WeakMap,Gv=new WeakMap,kS=new WeakMap,Bh=new WeakMap,vp=new WeakMap,qv=new WeakMap,Uh=new WeakMap,RS=new WeakMap,Tn=new WeakMap,ee=new WeakMap,xc=new WeakMap,Vh=new WeakMap,Hh=new WeakMap,MS=new WeakMap,Kv=new WeakMap,DS=new WeakMap,zh=new WeakMap,il=new WeakMap,Sc=new WeakMap,IS=new WeakMap,LS=new WeakMap,co=new WeakMap,Y=new WeakSet,bT=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},tN=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,jn).values())if(n.hasTextLayer(t))return n;return null},TK=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=S(this,Y,bT).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,sl)||y(this,sl,new xyt(this)),l(this,sl).show(n,i,this.direction==="ltr"))},PK=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,xc)&&((r=l(this,sl))==null||r.hide(),y(this,xc,null),S(this,Y,ri).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,xc))return;const i=S(this,Y,bT).call(this,t).closest(".textLayer");if(!i){l(this,xc)&&((o=l(this,sl))==null||o.hide(),y(this,xc,null),S(this,Y,ri).call(this,{hasSelectedText:!1}));return}if((a=l(this,sl))==null||a.hide(),y(this,xc,e),S(this,Y,ri).call(this,{hasSelectedText:!0}),!(l(this,Tn)!==xt.HIGHLIGHT&&l(this,Tn)!==xt.NONE)&&(l(this,Tn)===xt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,jh,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Tn)===xt.HIGHLIGHT?S(this,Y,tN).call(this,i):null;if(c==null||c.toggleDrawing(),l(this,Gv)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&S(this,Y,EA).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),S(this,Y,EA).call(this,"main_toolbar")}},EA=function(t=""){l(this,Tn)===xt.HIGHLIGHT?this.highlightSelection(t):l(this,CS)&&S(this,Y,TK).call(this)},kK=function(){document.addEventListener("selectionchange",S(this,Y,PK).bind(this),{signal:this._signal})},RK=function(){if(l(this,Fh))return;y(this,Fh,new AbortController);const t=this.combinedSignal(l(this,Fh));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},MK=function(){var t;(t=l(this,Fh))==null||t.abort(),y(this,Fh,null)},eN=function(){if(l(this,Bh))return;y(this,Bh,new AbortController);const t=this.combinedSignal(l(this,Bh));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},DK=function(){var t;(t=l(this,Bh))==null||t.abort(),y(this,Bh,null)},nN=function(){if(l(this,Lh))return;y(this,Lh,new AbortController);const t=this.combinedSignal(l(this,Lh));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},sN=function(){var t;(t=l(this,Lh))==null||t.abort(),y(this,Lh,null)},IK=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ri=function(t){Object.entries(t).some(([n,i])=>l(this,DS)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,DS),t)}),l(this,Tn)===xt.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,Y,uc).call(this,[[Bt.HIGHLIGHT_FREE,!0]]))},uc=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},LK=async function(){if(!l(this,$h)){y(this,$h,!0);const t=[];for(const e of l(this,jn).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,on).values())e.enable()}},NK=function(){if(this.unselectAll(),l(this,$h)){y(this,$h,!1);for(const t of l(this,jn).values())t.disable();for(const t of l(this,on).values())t.disable()}},iN=function(t){const e=l(this,jn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},OK=function(){let t=null;for(t of l(this,ee));return t},CA=function(){if(l(this,on).size===0)return!0;if(l(this,on).size===1)for(const t of l(this,on).values())return t.isEmpty();return!1},rN=function(t){for(const e of l(this,ee))e.unselect();l(this,ee).clear();for(const e of t)e.isEmpty()||(l(this,ee).add(e),e.select());S(this,Y,ri).call(this,{hasSelectedEditor:this.hasSelection})},B(Pu,"TRANSLATE_SMALL",1),B(Pu,"TRANSLATE_BIG",10),Pu);var Kn,rl,Zo,Xv,ol,sr,Yv,al,Di,_c,wp,ll,as,Wh,Ta,TA,AT;let HH=(as=class{constructor(t){A(this,Ta);A(this,Kn,null);A(this,rl,!1);A(this,Zo,null);A(this,Xv,null);A(this,ol,null);A(this,sr,null);A(this,Yv,!1);A(this,al,null);A(this,Di,null);A(this,_c,null);A(this,wp,null);A(this,ll,!1);y(this,Di,t),y(this,ll,t._uiManager.useNewAltTextFlow),l(as,Wh)||y(as,Wh,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){as._l10n??(as._l10n=t)}async render(){const t=y(this,Zo,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=y(this,Xv,document.createElement("span"));t.append(e),l(this,ll)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(as,Wh).missing),e.setAttribute("data-l10n-id",l(as,Wh)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,Di)._uiManager._signal;t.addEventListener("contextmenu",Xr,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),l(this,Di)._uiManager.editAltText(l(this,Di)),l(this,ll)&&l(this,Di)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Ta,TA)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(y(this,Yv,!0),i(r))},{signal:n}),await S(this,Ta,AT).call(this),t}finish(){l(this,Zo)&&(l(this,Zo).focus({focusVisible:l(this,Yv)}),y(this,Yv,!1))}isEmpty(){return l(this,ll)?l(this,Kn)===null:!l(this,Kn)&&!l(this,rl)}hasData(){return l(this,ll)?l(this,Kn)!==null||!!l(this,_c):this.isEmpty()}get guessedText(){return l(this,_c)}async setGuessedText(t){l(this,Kn)===null&&(y(this,_c,t),y(this,wp,await as._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),S(this,Ta,AT).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,ll)||l(this,Kn)){(e=l(this,al))==null||e.remove(),y(this,al,null);return}if(!l(this,al)){const n=y(this,al,document.createElement("div"));n.className="noAltTextBadge",l(this,Di).div.append(n)}l(this,al).classList.toggle("hidden",!t)}serialize(t){let e=l(this,Kn);return!t&&l(this,_c)===e&&(e=l(this,wp)),{altText:e,decorative:l(this,rl),guessedText:l(this,_c),textWithDisclaimer:l(this,wp)}}get data(){return{altText:l(this,Kn),decorative:l(this,rl)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(y(this,_c,n),y(this,wp,i)),!(l(this,Kn)===t&&l(this,rl)===e)&&(r||(y(this,Kn,t),y(this,rl,e)),S(this,Ta,AT).call(this))}toggle(t=!1){l(this,Zo)&&(!t&&l(this,sr)&&(clearTimeout(l(this,sr)),y(this,sr,null)),l(this,Zo).disabled=!t)}shown(){l(this,Di)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Ta,TA)}})}destroy(){var t,e;(t=l(this,Zo))==null||t.remove(),y(this,Zo,null),y(this,Xv,null),y(this,ol,null),(e=l(this,al))==null||e.remove(),y(this,al,null)}},Kn=new WeakMap,rl=new WeakMap,Zo=new WeakMap,Xv=new WeakMap,ol=new WeakMap,sr=new WeakMap,Yv=new WeakMap,al=new WeakMap,Di=new WeakMap,_c=new WeakMap,wp=new WeakMap,ll=new WeakMap,Wh=new WeakMap,Ta=new WeakSet,TA=function(){return l(this,Kn)&&"added"||l(this,Kn)===null&&this.guessedText&&"review"||"missing"},AT=async function(){var i,r,o;const t=l(this,Zo);if(!t)return;if(l(this,ll)){if(t.classList.toggle("done",!!l(this,Kn)),t.setAttribute("data-l10n-id",l(as,Wh)[l(this,Ta,TA)]),(i=l(this,Xv))==null||i.setAttribute("data-l10n-id",l(as,Wh)[`${l(this,Ta,TA)}-label`]),!l(this,Kn)){(r=l(this,ol))==null||r.remove();return}}else{if(!l(this,Kn)&&!l(this,rl)){t.classList.remove("done"),(o=l(this,ol))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,ol);if(!e){y(this,ol,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Di).id}`;const a=100,c=l(this,Di)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,sr)),y(this,sr,null)},{once:!0}),t.addEventListener("mouseenter",()=>{y(this,sr,setTimeout(()=>{y(this,sr,null),l(this,ol).classList.add("show"),l(this,Di)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;l(this,sr)&&(clearTimeout(l(this,sr)),y(this,sr,null)),(u=l(this,ol))==null||u.classList.remove("show")},{signal:c})}l(this,rl)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,Kn)),e.parentNode||t.append(e);const n=l(this,Di).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},A(as,Wh,null),B(as,"_l10n",null),as);var ps,uo,bp,Te,NS,Ap,ta,xp,Sp,_p,OS,oN;class FC{constructor(t){A(this,OS);A(this,ps,null);A(this,uo,null);A(this,bp,!1);A(this,Te,null);A(this,NS,null);A(this,Ap,null);A(this,ta,null);A(this,xp,null);A(this,Sp,!1);A(this,_p,null);y(this,Te,t)}renderForToolbar(){const t=y(this,uo,document.createElement("button"));return t.className="comment",S(this,OS,oN).call(this,t,!1)}renderForStandalone(){const t=y(this,ps,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,Te).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(l(this,Te)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=l(this,Te).commentButtonColor;i&&(n.backgroundColor=i)}return S(this,OS,oN).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=l(this,ps)??l(this,uo))==null||t.focus()},0)}onUpdatedColor(){if(!l(this,ps))return;const t=l(this,Te).commentButtonColor;t&&(l(this,ps).style.backgroundColor=t),l(this,Te)._uiManager.updatePopupColor(l(this,Te))}get commentButtonWidth(){var t;return(((t=l(this,ps))==null?void 0:t.getBoundingClientRect().width)??0)/l(this,Te).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,_p))return l(this,_p);if(!l(this,ps))return null;const{x:t,y:e,height:n}=l(this,ps).getBoundingClientRect(),{x:i,y:r,width:o,height:a}=l(this,Te).parent.boundingClientRect;return[(t-i)/o,(e+n-r)/a]}set commentPopupPositionInLayer(t){y(this,_p,t)}hasDefaultPopupPosition(){return l(this,_p)===null}removeStandaloneCommentButton(){var t;(t=l(this,ps))==null||t.remove(),y(this,ps,null)}removeToolbarCommentButton(){var t;(t=l(this,uo))==null||t.remove(),y(this,uo,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,ps)&&(l(this,ps).classList.toggle("selected",t),l(this,ps).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=l(this,Te).commentButtonPosition;const{width:h,height:d,x:f,y:p}=l(this,Te);n=f+n*h,i=p+i*d}const r=l(this,Te).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=r;l(this,Te)._uiManager.editComment(l(this,Te),o+n*c,a+i*u,{...t,parentDimensions:r})}finish(){l(this,uo)&&(l(this,uo).focus({focusVisible:l(this,bp)}),y(this,bp,!1))}isDeleted(){return l(this,Sp)||l(this,ta)===""}isEmpty(){return l(this,ta)===null}hasBeenEdited(){return this.isDeleted()||l(this,ta)!==l(this,NS)}serialize(){return this.data}get data(){return{text:l(this,ta),richText:l(this,Ap),date:l(this,xp),deleted:this.isDeleted()}}set data(t){if(t!==l(this,ta)&&y(this,Ap,null),t===null){y(this,ta,""),y(this,Sp,!0);return}y(this,ta,t),y(this,xp,new Date),y(this,Sp,!1)}setInitialText(t,e=null){y(this,NS,t),this.data=t,y(this,xp,null),y(this,Ap,e)}shown(){}destroy(){var t,e;(t=l(this,uo))==null||t.remove(),y(this,uo,null),(e=l(this,ps))==null||e.remove(),y(this,ps,null),y(this,ta,""),y(this,Ap,null),y(this,xp,null),y(this,Te,null),y(this,bp,!1),y(this,Sp,!1)}}ps=new WeakMap,uo=new WeakMap,bp=new WeakMap,Te=new WeakMap,NS=new WeakMap,Ap=new WeakMap,ta=new WeakMap,xp=new WeakMap,Sp=new WeakMap,_p=new WeakMap,OS=new WeakSet,oN=function(t,e){if(!l(this,Te)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,Te)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=l(this,Te)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Xr,{signal:n}),e&&(t.addEventListener("focusin",r=>{l(this,Te)._focusEventsAllowed=!1,Qe(r)},{capture:!0,signal:n}),t.addEventListener("focusout",r=>{l(this,Te)._focusEventsAllowed=!0,Qe(r)},{capture:!0,signal:n})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),t===l(this,uo)?this.edit():l(this,Te).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(y(this,bp,!0),i(r))},{signal:n}),t.addEventListener("pointerenter",()=>{l(this,Te).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{l(this,Te).toggleComment(!1,!1)},{signal:n}),t};var Qv,Ep,FS,jS,$S,BS,US,Ec,Cp,Cc,Tp,Tc,_f,FK,jK,$K,Jv;let qj=(Jv=class{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){A(this,_f);A(this,Qv);A(this,Ep,!1);A(this,FS,null);A(this,jS);A(this,$S);A(this,BS);A(this,US);A(this,Ec,null);A(this,Cp);A(this,Cc,null);A(this,Tp);A(this,Tc,null);y(this,Qv,t),y(this,FS,n),y(this,jS,e),y(this,$S,i),y(this,BS,r),y(this,US,o),y(this,Tp,new AbortController),y(this,Cp,AbortSignal.any([a,l(this,Tp).signal])),t.addEventListener("touchstart",S(this,_f,FK).bind(this),{passive:!1,signal:l(this,Cp)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Af.pixelRatio}destroy(){var t,e;(t=l(this,Tp))==null||t.abort(),y(this,Tp,null),(e=l(this,Ec))==null||e.abort(),y(this,Ec,null)}},Qv=new WeakMap,Ep=new WeakMap,FS=new WeakMap,jS=new WeakMap,$S=new WeakMap,BS=new WeakMap,US=new WeakMap,Ec=new WeakMap,Cp=new WeakMap,Cc=new WeakMap,Tp=new WeakMap,Tc=new WeakMap,_f=new WeakSet,FK=function(t){var i,r,o;if((i=l(this,jS))!=null&&i.call(this))return;if(t.touches.length===1){if(l(this,Ec))return;const a=y(this,Ec,new AbortController),c=AbortSignal.any([l(this,Cp),a.signal]),u=l(this,Qv),h={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=l(this,Ec))==null||p.abort(),y(this,Ec,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Qe(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!l(this,Tc)){y(this,Tc,new AbortController);const a=AbortSignal.any([l(this,Cp),l(this,Tc).signal]),c=l(this,Qv),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",S(this,_f,jK).bind(this),u);const h=S(this,_f,$K).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",Qe,u),c.addEventListener("pointermove",Qe,u),c.addEventListener("pointercancel",Qe,u),c.addEventListener("pointerup",Qe,u),(r=l(this,$S))==null||r.call(this)}if(Qe(t),t.touches.length!==2||(o=l(this,FS))!=null&&o.call(this)){y(this,Cc,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),y(this,Cc,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},jK=function(t){var E;if(!l(this,Cc)||t.touches.length!==2)return;Qe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=n,c=l(this,Cc),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,m=f-h,g=o-i,w=a-r,v=Math.hypot(g,w)||1,b=Math.hypot(p,m)||1;if(!l(this,Ep)&&Math.abs(b-v)<=Jv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=a,!l(this,Ep)){y(this,Ep,!0);return}const x=[(i+o)/2,(r+a)/2];(E=l(this,BS))==null||E.call(this,x,b,v)},$K=function(t){var e;t.touches.length>=2||(l(this,Tc)&&(l(this,Tc).abort(),y(this,Tc,null),(e=l(this,US))==null||e.call(this)),l(this,Cc)&&(Qe(t),y(this,Cc,null),y(this,Ep,!1)))},Jv);var Pp,ea,$e,me,Pc,Zv,Gh,VS,gs,kp,kc,cl,qh,HS,Rp,ir,zS,Mp,Rc,ul,tw,ew,ho,Dp,bt,WS,$k,pt,aN,GS,lN,xT,BK,UK,cN,ST,uN,VK,HK,zK,hN,WK,dN,GK,qK,KK,fN,PA;let ze=(bt=class{constructor(t){A(this,pt);A(this,Pp,null);A(this,ea,null);A(this,$e,null);A(this,me,null);A(this,Pc,null);A(this,Zv,!1);A(this,Gh,null);A(this,VS,"");A(this,gs,null);A(this,kp,null);A(this,kc,null);A(this,cl,null);A(this,qh,null);A(this,HS,"");A(this,Rp,!1);A(this,ir,null);A(this,zS,!1);A(this,Mp,!1);A(this,Rc,!1);A(this,ul,null);A(this,tw,0);A(this,ew,0);A(this,ho,null);A(this,Dp,null);B(this,"isSelected",!1);B(this,"_isCopy",!1);B(this,"_editToolbar",null);B(this,"_initialOptions",Object.create(null));B(this,"_initialData",null);B(this,"_isVisible",!0);B(this,"_uiManager",null);B(this,"_focusEventsAllowed",!0);A(this,WS,!1);A(this,$k,bt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=bt.prototype._resizeWithKeyboard,e=Rb.TRANSLATE_SMALL,n=Rb.TRANSLATE_BIG;return Rt(this,"_resizerKeyboardManager",new Y1([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Tyt({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(bt._l10n??(bt._l10n=t),bt._l10nResizer||(bt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),bt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ae("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,WS)}set _isDraggable(t){var e;y(this,WS,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,$k)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(S(this,pt,PA).call(this),(e=l(this,cl))==null||e.remove(),y(this,cl,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Rp)?y(this,Rp,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){S(this,pt,aN).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,ir)||y(this,ir,[this.x,this.y,this.width,this.height]),S(this,pt,aN).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,ir)||y(this,ir,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,ir)&&(l(this,ir)[0]!==this.x||l(this,ir)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ir)&&(l(this,ir)[2]!==this.width||l(this,ir)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=bt,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:o,width:a,height:c}=this;if(a*=n,c*=i,r*=n,o*=i,this._mustFixPosition)switch(t){case 0:r=Js(r,0,n-a),o=Js(o,0,i-c);break;case 90:r=Js(r,0,n-c),o=Js(o,a,i);break;case 180:r=Js(r,a,n),o=Js(o,c,i);break;case 270:r=Js(r,c,n),o=Js(o,0,i-a);break}this.x=r/=n,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return S(n=bt,GS,lN).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return S(n=bt,GS,lN).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,$e))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Mp))return this._editToolbar;this._editToolbar=new Ayt(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=l(this,$e))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,$e)||(HH.initialize(bt._l10n),y(this,$e,new HH(this)),l(this,Pp)&&(l(this,$e).data=l(this,Pp),y(this,Pp,null))),l(this,$e)}get altTextData(){var t;return(t=l(this,$e))==null?void 0:t.data}set altTextData(t){l(this,$e)&&(l(this,$e).data=t)}get guessedAltText(){var t;return(t=l(this,$e))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,$e))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,$e))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,$e)&&!l(this,$e).isEmpty()}hasAltTextData(){var t;return((t=l(this,$e))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=l(this,me))==null||t.focusButton()}addCommentButton(){return l(this,me)||y(this,me,new FC(this))}addStandaloneCommentButton(){if(l(this,Pc)){this._uiManager.isEditingMode()&&l(this,Pc).classList.remove("hidden");return}this.hasComment&&(y(this,Pc,l(this,me).renderForStandalone()),this.div.append(l(this,Pc)))}removeStandaloneCommentButton(){l(this,me).removeStandaloneCommentButton(),y(this,Pc,null)}hideStandaloneCommentButton(){var t;(t=l(this,Pc))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=l(this,me);return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,me)||y(this,me,new FC(this)),l(this,me).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(l(this,me)||y(this,me,new FC(this)),l(this,me).setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var t;return(t=l(this,me))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=l(this,me))==null?void 0:t.isDeleted()}get hasComment(){return!!l(this,me)&&!l(this,me).isEmpty()&&!l(this,me).isDeleted()}async editComment(t){l(this,me)||y(this,me,new FC(this)),l(this,me).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,me).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,a=o+r+1,c=i-100,u=a+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,me).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Zv)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),S(this,pt,dN).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),EK(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Dp)||y(this,Dp,new qj({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,pt,VK).bind(this),onPinching:S(this,pt,HK).bind(this),onPinchEnd:S(this,pt,zK).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=us.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(y(this,Rp,!0),this._isDraggable){S(this,pt,WK).call(this,t);return}S(this,pt,hN).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,ul)&&clearTimeout(l(this,ul)),y(this,ul,setTimeout(()=>{var t;y(this,ul,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=t/i,h=e/i,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(n){case 0:return[d+u+a,o-f-h-m+c,d+u+p+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+p+c];case 180:return[d-u-p+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-p+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,a=r-n,c=o-i;switch(this.rotation){case 0:return[n,e-o,a,c];case 90:return[n,e-i,c,a];case 180:return[r,e-i,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&bt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=l(this,me))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:r,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:n||h,popupRef:!r,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),y(this,Mp,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),y(this,Mp,!1),!0):!1}isInEditMode(){return l(this,Mp)}shouldGetKeyboardEvents(){return l(this,Rc)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&n>0}rebuild(){S(this,pt,dN).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,y(i,Pp,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[a,c,u,h]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,qh))==null||t.abort(),y(this,qh,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,ul)&&(clearTimeout(l(this,ul)),y(this,ul,null)),S(this,pt,PA).call(this),this.removeEditToolbar(),l(this,ho)){for(const n of l(this,ho).values())clearTimeout(n);y(this,ho,null)}this.parent=null,(e=l(this,Dp))==null||e.destroy(),y(this,Dp,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,pt,BK).call(this),l(this,gs).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,r,o]=this.getPDFRect();return[bt._round(n+(r-n)*t),bt._round(i+(o-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,me).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,me).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,me).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,me).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){l(this,me).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),y(this,kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,gs).children;if(!l(this,ea)){y(this,ea,Array.from(e));const o=S(this,pt,GK).bind(this),a=S(this,pt,qK).bind(this),c=this._uiManager._signal;for(const u of l(this,ea)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",S(this,pt,KK).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",bt._l10nResizer[h])}}const n=l(this,ea)[0];let i=0;for(const o of e){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,ea).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)l(this,gs).append(l(this,gs).firstChild);else if(r>i)for(let a=0;a<r-i;a++)l(this,gs).firstChild.before(l(this,gs).lastChild);let o=0;for(const a of e){const u=l(this,ea)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",bt._l10nResizer[u])}}S(this,pt,fN).call(this,0),y(this,Rc,!0),l(this,gs).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Rc)&&S(this,pt,uN).call(this,l(this,HS),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,pt,PA).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=l(this,$e))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,i,r;this.isSelected&&(this.isSelected=!1,(t=l(this,gs))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,$e))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,zS)}set isEditing(t){y(this,zS,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,ho)||y(this,ho,new Map);const{action:n}=t;let i=l(this,ho).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,ho).delete(n),l(this,ho).size===0&&y(this,ho,null)},bt._telemetryTimeout),l(this,ho).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),y(this,Zv,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,Zv,!0)}updateFakeAnnotationElement(t){if(!l(this,cl)&&!this.deleted){y(this,cl,t.addFakeAnnotation(this));return}if(this.deleted){l(this,cl).remove(),y(this,cl,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,cl).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},Pp=new WeakMap,ea=new WeakMap,$e=new WeakMap,me=new WeakMap,Pc=new WeakMap,Zv=new WeakMap,Gh=new WeakMap,VS=new WeakMap,gs=new WeakMap,kp=new WeakMap,kc=new WeakMap,cl=new WeakMap,qh=new WeakMap,HS=new WeakMap,Rp=new WeakMap,ir=new WeakMap,zS=new WeakMap,Mp=new WeakMap,Rc=new WeakMap,ul=new WeakMap,tw=new WeakMap,ew=new WeakMap,ho=new WeakMap,Dp=new WeakMap,WS=new WeakMap,$k=new WeakMap,pt=new WeakSet,aN=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},GS=new WeakSet,lN=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},xT=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},BK=function(){if(l(this,gs))return;y(this,gs,document.createElement("div")),l(this,gs).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");l(this,gs).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",S(this,pt,UK).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Xr,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,gs))},UK=function(t,e){var h;e.preventDefault();const{isMac:n}=us.platform;if(e.button!==0||e.ctrlKey&&n)return;(h=l(this,$e))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,y(this,kp,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,pt,uN).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Qe,{passive:!1,signal:o}),window.addEventListener("contextmenu",Xr,{signal:o}),y(this,kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=l(this,$e))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=c,S(this,pt,ST).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},cN=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},ST=function(){if(!l(this,kc))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=l(this,kc);y(this,kc,null);const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===n&&c===i||this.addCommands({cmd:S(this,pt,cN).bind(this,r,o,a,c),undo:S(this,pt,cN).bind(this,t,e,n,i),mustExec:!0})},uN=function(t,e){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=bt.MIN_SIZE/n,h=bt.MIN_SIZE/i,d=S(this,pt,xT).call(this,this.rotation),f=(N,j)=>[d[0]*N+d[2]*j,d[1]*N+d[3]*j],p=S(this,pt,xT).call(this,360-this.rotation),m=(N,j)=>[p[0]*N+p[2]*j,p[1]*N+p[3]*j];let g,w,v=!1,b=!1;switch(t){case"topLeft":v=!0,g=(N,j)=>[0,0],w=(N,j)=>[N,j];break;case"topMiddle":g=(N,j)=>[N/2,0],w=(N,j)=>[N/2,j];break;case"topRight":v=!0,g=(N,j)=>[N,0],w=(N,j)=>[0,j];break;case"middleRight":b=!0,g=(N,j)=>[N,j/2],w=(N,j)=>[0,j/2];break;case"bottomRight":v=!0,g=(N,j)=>[N,j],w=(N,j)=>[0,0];break;case"bottomMiddle":g=(N,j)=>[N/2,j],w=(N,j)=>[N/2,0];break;case"bottomLeft":v=!0,g=(N,j)=>[0,j],w=(N,j)=>[N,0];break;case"middleLeft":b=!0,g=(N,j)=>[0,j/2],w=(N,j)=>[N,j/2];break}const x=g(a,c),E=w(a,c);let T=f(...E);const P=bt._round(r+T[0]),k=bt._round(o+T[1]);let R=1,M=1,D,L;if(e.fromKeyboard)({deltaX:D,deltaY:L}=e);else{const{screenX:N,screenY:j}=e,[F,O]=l(this,kp);[D,L]=this.screenToPageTranslation(N-F,j-O),l(this,kp)[0]=N,l(this,kp)[1]=j}if([D,L]=m(D/n,L/i),v){const N=Math.hypot(a,c);R=M=Math.max(Math.min(Math.hypot(E[0]-x[0]-D,E[1]-x[1]-L)/N,1/a,1/c),u/a,h/c)}else b?R=Js(Math.abs(E[0]-x[0]-D),u,1)/a:M=Js(Math.abs(E[1]-x[1]-L),h,1)/c;const $=bt._round(a*R),U=bt._round(c*M);T=f(...w($,U));const I=P-T[0],H=k-T[1];l(this,ir)||y(this,ir,[this.x,this.y,this.width,this.height]),this.width=$,this.height=U,this.x=I,this.y=H,this.setDims(),this.fixAndSetPosition(),this._onResizing()},VK=function(){var t;y(this,kc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,$e))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},HK=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=S(this,pt,xT).call(this,this.rotation),a=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,m=bt.MIN_SIZE/c,g=bt.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,g/p);const w=bt._round(f*r),v=bt._round(p*r);if(w===f&&v===p)return;l(this,ir)||y(this,ir,[h,d,f,p]);const b=a(f/2,p/2),x=bt._round(h+b[0]),E=bt._round(d+b[1]),T=a(w/2,v/2);this.x=x-T[0],this.y=E-T[1],this.width=w,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},zK=function(){var t;(t=l(this,$e))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),S(this,pt,ST).call(this)},hN=function(t){const{isMac:e}=us.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},WK=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=u=>{i.abort(),y(this,Gh,null),y(this,Rp,!1),this._uiManager.endDragSession()||S(this,pt,hN).call(this,u),n&&this._onStopDragging()};e&&(y(this,tw,t.clientX),y(this,ew,t.clientY),y(this,Gh,t.pointerId),y(this,VS,t.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==l(this,Gh)){Qe(u);return}const[p,m]=this.screenToPageTranslation(h-l(this,tw),d-l(this,ew));y(this,tw,h),y(this,ew,d),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",Qe,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,VS)&&(l(this,Dp)||u.isPrimary)&&a(u),Qe(u)},o));const c=u=>{if(!l(this,Gh)||l(this,Gh)===u.pointerId){a(u);return}Qe(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},dN=function(){if(l(this,qh)||!this.div)return;y(this,qh,new AbortController);const t=this._uiManager.combinedSignal(l(this,qh));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},GK=function(t){bt._resizerKeyboardManager.exec(this,t)},qK=function(t){var e;l(this,Rc)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,gs)&&S(this,pt,PA).call(this)},KK=function(t){y(this,HS,l(this,Rc)?t:"")},fN=function(t){if(l(this,ea))for(const e of l(this,ea))e.tabIndex=t},PA=function(){y(this,Rc,!1),S(this,pt,fN).call(this,-1),S(this,pt,ST).call(this)},A(bt,GS),B(bt,"_l10n",null),B(bt,"_l10nResizer",null),B(bt,"_borderLineWidth",-1),B(bt,"_colorManager",new Cyt),B(bt,"_zIndex",1),B(bt,"_telemetryTimeout",1e3),bt),Tyt=class extends ze{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}};const zH=3285377520,Zr=4294901760,Ga=65535;let XK=class{constructor(t){this.h1=t?t&4294967295:zH,this.h2=t?t&4294967295:zH}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let g=0,w=t.length;g<w;g++){const v=t.charCodeAt(g);v<=255?e[n++]=v:(e[n++]=v>>>8,e[n++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ga,m=f&Ga;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&Zr|a*p&Ga,a=a<<15|a>>>17,a=a*f&Zr|a*m&Ga,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*d&Zr|c*p&Ga,c=c<<15|c>>>17,c=c*f&Zr|c*m&Ga,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&Zr|a*p&Ga,a=a<<15|a>>>17,a=a*f&Zr|a*m&Ga,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Zr|t*36045&Ga,e=e*4283543511&Zr|((e<<16|t>>>16)*2950163797&Zr)>>>16,t^=e>>>1,t=t*444984403&Zr|t*60499&Ga,e=e*3301882366&Zr|((e<<16|t>>>16)*3120437893&Zr)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}};const pN=Object.freeze({map:null,hash:"",transfer:void 0});var Ip,Lp,Mc,ms,Bk,YK,X3;let Kj=(X3=class{constructor(){A(this,Bk);A(this,Ip,!1);A(this,Lp,null);A(this,Mc,null);A(this,ms,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,ms).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,ms).get(t)}remove(t){const e=l(this,ms).get(t);if(e!==void 0&&(e instanceof ze&&l(this,Mc).delete(e.annotationElementId),l(this,ms).delete(t),l(this,ms).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of l(this,ms).values())if(n instanceof ze)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,ms).get(t);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(i=!0,n[r]=o);else i=!0,l(this,ms).set(t,e);i&&S(this,Bk,YK).call(this),e instanceof ze&&((l(this,Mc)||y(this,Mc,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,ms).has(t)}get size(){return l(this,ms).size}resetModified(){l(this,Ip)&&(y(this,Ip,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new QK(this)}get serializable(){if(l(this,ms).size===0)return pN;const t=new Map,e=new XK,n=[],i=Object.create(null);let r=!1;for(const[o,a]of l(this,ms)){const c=a instanceof ze?a.serialize(!1,i):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:pN}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const r of l(this,ms).values()){if(!(r instanceof ze)){r.popup&&(r.popup.deleted?i+=1:n+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(n+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:a}=o;e.has(a)||e.set(a,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const c=t[a]||(t[a]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){y(this,Lp,null)}updateEditor(t,e){var i;const n=(i=l(this,Mc))==null?void 0:i.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=l(this,Mc))==null?void 0:e.get(t))||null}get modifiedIds(){if(l(this,Lp))return l(this,Lp);const t=[];if(l(this,Mc))for(const e of l(this,Mc).values())e.serialize()&&t.push(e.annotationElementId);return y(this,Lp,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,ms).entries()}},Ip=new WeakMap,Lp=new WeakMap,Mc=new WeakMap,ms=new WeakMap,Bk=new WeakSet,YK=function(){l(this,Ip)||(y(this,Ip,!0),typeof this.onSetModified=="function"&&this.onSetModified())},X3);var qS,Y3;let QK=(Y3=class extends Kj{constructor(e){super();A(this,qS);const{map:n,hash:i,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);y(this,qS,{map:o,hash:i,transfer:r})}get print(){Ae("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,qS)}get modifiedIds(){return Rt(this,"modifiedIds",{ids:new Set,hash:""})}},qS=new WeakMap,Y3);var nw,Q3;let Pyt=(Q3=class{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,nw,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,nw).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||l(this,nw).has(t.loadedName))){if(Vt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),l(this,nw).add(i),n==null||n(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Ae("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw St(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Rt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Rt(this,"isSyncFontLoadingSupported",gi||us.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Vt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Rt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function i(E,T,P,k){const R=E.substring(0,T),M=E.substring(T+P);return R+k+M}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(E,T){if(++u>30){St("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,E,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,g=1482184792;let w=n(f,m);for(r=0,o=d.length-3;r<o;r+=4)w=w-g+n(d,r)|0;r<d.length&&(w=w-g+n(d+"XXX",r)|0),f=i(f,m,4,dyt(w));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(b);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[t.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,x.append(T)}this._document.body.append(x),h(d,()=>{x.remove(),e.complete()})}},nw=new WeakMap,Q3);var le,J3;let kyt=(J3=class{constructor(t,e=null,n,i){A(this,le);this.compiledGlyphs=Object.create(null),y(this,le,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${hK(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(o){St(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}get black(){return l(this,le).black}get bold(){return l(this,le).bold}get disableFontFace(){return l(this,le).disableFontFace??!1}get fontExtraProperties(){return l(this,le).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,le).isInvalidPDFjsFont}get isType3Font(){return l(this,le).isType3Font}get italic(){return l(this,le).italic}get missingFile(){return l(this,le).missingFile}get remeasure(){return l(this,le).remeasure}get vertical(){return l(this,le).vertical}get ascent(){return l(this,le).ascent}get defaultWidth(){return l(this,le).defaultWidth}get descent(){return l(this,le).descent}get bbox(){return l(this,le).bbox}get fontMatrix(){return l(this,le).fontMatrix}get fallbackName(){return l(this,le).fallbackName}get loadedName(){return l(this,le).loadedName}get mimetype(){return l(this,le).mimetype}get name(){return l(this,le).name}get data(){return l(this,le).data}clearData(){l(this,le).clearData()}get cssFontInfo(){return l(this,le).cssFontInfo}get systemFontInfo(){return l(this,le).systemFontInfo}get defaultVMetrics(){return l(this,le).defaultVMetrics}},le=new WeakMap,J3);function Ryt(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(gi)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Myt(s){if(gi&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return K1(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function jC(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const gN=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,Dyt=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",JK=myt.bind(null,gN,Dyt);var Dc,Uk,Z3;let Iyt=(Z3=class{constructor(){A(this,Dc,new Map);A(this,Uk,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,Uk).then(()=>{for(const[i]of l(this,Dc))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,Dc).set(e,i)}removeEventListener(t,e){const n=l(this,Dc).get(e);n==null||n(),l(this,Dc).delete(e)}terminate(){for(const[,t]of l(this,Dc))t==null||t();l(this,Dc).clear()}},Dc=new WeakMap,Uk=new WeakMap,Z3);const $C={DATA:1,ERROR:2},En={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function WH(){}function ki(s){if(s instanceof qu||s instanceof vk||s instanceof OH||s instanceof dS||s instanceof UD)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Ae('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new qu(s.message);case"InvalidPDFException":return new vk(s.message);case"PasswordException":return new OH(s.message,s.code);case"ResponseException":return new dS(s.message,s.status,s.missing);case"UnknownErrorException":return new UD(s.message,s.details)}return new UD(s.message,s.toString())}var sw,Io,ZK,tX,eX,_T,tz;let kA=(tz=class{constructor(t,e,n){A(this,Io);A(this,sw,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",S(this,Io,ZK).bind(this),{signal:l(this,sw).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:En.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Vt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:En.CANCEL,streamId:r,reason:ki(u)}),h.promise}},n)}destroy(){var t;(t=l(this,sw))==null||t.abort(),y(this,sw,null)}},sw=new WeakMap,Io=new WeakSet,ZK=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){S(this,Io,eX).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===$C.DATA)i.resolve(t.data);else if(t.callback===$C.ERROR)i.reject(ki(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:$C.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:$C.ERROR,callbackId:t.callbackId,reason:ki(o)})});return}if(t.streamId){S(this,Io,tX).call(this,t);return}e(t.data)},tX=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:En.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:En.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){Vt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:En.ERROR,streamId:e,reason:ki(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:En.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:En.START_COMPLETE,streamId:e,reason:ki(u)})})},eX=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case En.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ki(t.reason));break;case En.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ki(t.reason));break;case En.PULL:if(!a){r.postMessage({sourceName:n,targetName:i,stream:En.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||WH).then(function(){r.postMessage({sourceName:n,targetName:i,stream:En.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:En.PULL_COMPLETE,streamId:e,reason:ki(u)})});break;case En.ENQUEUE:if(Vt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case En.CLOSE:if(Vt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,Io,_T).call(this,o,e);break;case En.ERROR:Vt(o,"error should have stream controller"),o.controller.error(ki(t.reason)),S(this,Io,_T).call(this,o,e);break;case En.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ki(t.reason)),S(this,Io,_T).call(this,o,e);break;case En.CANCEL:if(!a)break;const c=ki(t.reason);Promise.try(a.onCancel||WH,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:En.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:En.CANCEL_COMPLETE,streamId:e,reason:ki(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},_T=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]},tz);var KS,ez;let nX=(ez=class{constructor({enableHWA:t=!1}){A(this,KS,!1);y(this,KS,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,KS)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ae("Abstract method `_createCanvas` called.")}},KS=new WeakMap,ez),Lyt=class extends nX{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}},sX=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}},GH=class extends sX{async _fetch(t){const e=await zb(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):K1(e)}},iX=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}};var Np,iw,Ic,Lc,Hs,Op,Fp,Z,Os,RA,ky,ET,Ry,rX,mN,My,MA,DA,yN,IA,nz;let Nyt=(nz=class extends iX{constructor({docId:e,ownerDocument:n=globalThis.document}){super();A(this,Z);A(this,Np);A(this,iw);A(this,Ic);A(this,Lc);A(this,Hs);A(this,Op);A(this,Fp,0);y(this,Lc,e),y(this,Hs,n)}addFilter(e){if(!e)return"none";let n=l(this,Z,Os).get(e);if(n)return n;const[i,r,o]=S(this,Z,ET).call(this,e),a=e.length===1?i:`${i}${r}${o}`;if(n=l(this,Z,Os).get(a),n)return l(this,Z,Os).set(e,n),n;const c=`g_${l(this,Lc)}_transfer_map_${$t(this,Fp)._++}`,u=S(this,Z,Ry).call(this,c);l(this,Z,Os).set(e,u),l(this,Z,Os).set(a,u);const h=S(this,Z,My).call(this,c);return S(this,Z,DA).call(this,i,r,o,h),u}addHCMFilter(e,n){var m;const i=`${e}-${n}`,r="base";let o=l(this,Z,RA).get(r);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},l(this,Z,RA).set(r,o)),!e||!n))return o.url;const a=S(this,Z,IA).call(this,e);e=rt.makeHexColor(...a);const c=S(this,Z,IA).call(this,n);if(n=rt.makeHexColor(...c),l(this,Z,ky).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const w=g/255;u[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,Lc)}_hcm_filter`,f=o.filter=S(this,Z,My).call(this,d);S(this,Z,DA).call(this,h,h,h,f),S(this,Z,mN).call(this,f);const p=(g,w)=>{const v=a[g]/255,b=c[g]/255,x=new Array(w+1);for(let E=0;E<=w;E++)x[E]=v+E/w*(b-v);return x.join(",")};return S(this,Z,DA).call(this,p(0,5),p(1,5),p(2,5),f),o.url=S(this,Z,Ry).call(this,d),o.url}addAlphaFilter(e){let n=l(this,Z,Os).get(e);if(n)return n;const[i]=S(this,Z,ET).call(this,[e]),r=`alpha_${i}`;if(n=l(this,Z,Os).get(r),n)return l(this,Z,Os).set(e,n),n;const o=`g_${l(this,Lc)}_alpha_map_${$t(this,Fp)._++}`,a=S(this,Z,Ry).call(this,o);l(this,Z,Os).set(e,a),l(this,Z,Os).set(r,a);const c=S(this,Z,My).call(this,o);return S(this,Z,yN).call(this,i,c),a}addLuminosityFilter(e){let n=l(this,Z,Os).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=S(this,Z,ET).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=l(this,Z,Os).get(r),n)return l(this,Z,Os).set(e,n),n;const o=`g_${l(this,Lc)}_luminosity_map_${$t(this,Fp)._++}`,a=S(this,Z,Ry).call(this,o);l(this,Z,Os).set(e,a),l(this,Z,Os).set(r,a);const c=S(this,Z,My).call(this,o);return S(this,Z,rX).call(this,c),e&&S(this,Z,yN).call(this,i,c),a}addHighlightHCMFilter(e,n,i,r,o){var b;const a=`${n}-${i}-${r}-${o}`;let c=l(this,Z,RA).get(e);if((c==null?void 0:c.key)===a||(c?((b=c.filter)==null||b.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,Z,RA).set(e,c)),!n||!i))return c.url;const[u,h]=[n,i].map(S(this,Z,IA).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(S(this,Z,IA).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,Z,ky).style.color="";const g=(x,E,T)=>{const P=new Array(256),k=(f-d)/T,R=x/255,M=(E-x)/(255*T);let D=0;for(let L=0;L<=T;L++){const $=Math.round(d+L*k),U=R+L*M;for(let I=D;I<=$;I++)P[I]=U;D=$+1}for(let L=D;L<256;L++)P[L]=P[D-1];return P.join(",")},w=`g_${l(this,Lc)}_hcm_${e}_filter`,v=c.filter=S(this,Z,My).call(this,w);return S(this,Z,mN).call(this,v),S(this,Z,DA).call(this,g(p[0],m[0],5),g(p[1],m[1],5),g(p[2],m[2],5),v),c.url=S(this,Z,Ry).call(this,w),c.url}destroy(e=!1){var n,i,r,o;e&&((n=l(this,Op))!=null&&n.size)||((i=l(this,Ic))==null||i.parentNode.parentNode.remove(),y(this,Ic,null),(r=l(this,iw))==null||r.clear(),y(this,iw,null),(o=l(this,Op))==null||o.clear(),y(this,Op,null),y(this,Fp,0))}},Np=new WeakMap,iw=new WeakMap,Ic=new WeakMap,Lc=new WeakMap,Hs=new WeakMap,Op=new WeakMap,Fp=new WeakMap,Z=new WeakSet,Os=function(){return l(this,iw)||y(this,iw,new Map)},RA=function(){return l(this,Op)||y(this,Op,new Map)},ky=function(){if(!l(this,Ic)){const e=l(this,Hs).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=l(this,Hs).createElementNS(cc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),y(this,Ic,l(this,Hs).createElementNS(cc,"defs")),e.append(i),i.append(l(this,Ic)),l(this,Hs).body.append(e)}return l(this,Ic)},ET=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,i,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,a[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},Ry=function(e){if(l(this,Np)===void 0){y(this,Np,"");const n=l(this,Hs).URL;n!==l(this,Hs).baseURI&&(X1(n)?St('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,Np,Uj(n,"")))}return`url(${l(this,Np)}#${e})`},rX=function(e){const n=l(this,Hs).createElementNS(cc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},mN=function(e){const n=l(this,Hs).createElementNS(cc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},My=function(e){const n=l(this,Hs).createElementNS(cc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,Z,ky).append(n),n},MA=function(e,n,i){const r=l(this,Hs).createElementNS(cc,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},DA=function(e,n,i,r){const o=l(this,Hs).createElementNS(cc,"feComponentTransfer");r.append(o),S(this,Z,MA).call(this,o,"feFuncR",e),S(this,Z,MA).call(this,o,"feFuncG",n),S(this,Z,MA).call(this,o,"feFuncB",i)},yN=function(e,n){const i=l(this,Hs).createElementNS(cc,"feComponentTransfer");n.append(i),S(this,Z,MA).call(this,i,"feFuncA",e)},IA=function(e){return l(this,Z,ky).style.color=e,Wb(getComputedStyle(l(this,Z,ky)).getPropertyValue("color"))},nz),oX=class{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}},qH=class extends oX{async _fetch(t){const e=await zb(t,"arraybuffer");return new Uint8Array(e)}};class aX{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}}class KH extends aX{async _fetch(t){const e=await zb(t,"arraybuffer");return new Uint8Array(e)}}gi&&St("Please use the `legacy` build in Node.js environments.");async function Xj(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}let Oyt=class extends iX{},Fyt=class extends nX{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},jyt=class extends sX{async _fetch(t){return Xj(t)}},$yt=class extends oX{async _fetch(t){return Xj(t)}};class Byt extends aX{async _fetch(t){return Xj(t)}}const xy="__forcedDependency",{floor:XH,ceil:YH}=Math;function BC(s,t,e,n,i,r){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],i),s[t*4+3]=Math.max(s[t*4+3],r)}const vN=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var rw,Kh;class Uyt{constructor(t,e){A(this,rw);A(this,Kh);y(this,rw,t),y(this,Kh,e)}get length(){return l(this,rw).length}isEmpty(t){return l(this,rw)[t]===vN}minX(t){return l(this,Kh)[t*4+0]/256}minY(t){return l(this,Kh)[t*4+1]/256}maxX(t){return(l(this,Kh)[t*4+2]+1)/256}maxY(t){return(l(this,Kh)[t*4+3]+1)/256}}rw=new WeakMap,Kh=new WeakMap;const UC=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};var Ii,Li,jp,na,$p,Nc,ne,ce,Oc,Ni,XS,ow,Bp,Up,Fc,zs,hl,YS,wN;class Vyt{constructor(t,e,n=!1){A(this,YS);A(this,Ii,{__proto__:null});A(this,Li,{__proto__:null,transform:[],moveText:[],sameLineText:[],[xy]:[]});A(this,jp,new Map);A(this,na,[]);A(this,$p,[]);A(this,Nc,[[1,0,0,1,0,0]]);A(this,ne,[-1/0,-1/0,1/0,1/0]);A(this,ce,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Oc,-1);A(this,Ni,new Set);A(this,XS,new Map);A(this,ow,new Map);A(this,Bp);A(this,Up);A(this,Fc);A(this,zs);A(this,hl);y(this,Bp,t.width),y(this,Up,t.height),S(this,YS,wN).call(this,e),n&&y(this,hl,new Map)}growOperationsCount(t){t>=l(this,zs).length&&S(this,YS,wN).call(this,t,l(this,zs))}save(t){return y(this,Ii,{__proto__:l(this,Ii)}),y(this,Li,{__proto__:l(this,Li),transform:{__proto__:l(this,Li).transform},moveText:{__proto__:l(this,Li).moveText},sameLineText:{__proto__:l(this,Li).sameLineText},[xy]:{__proto__:l(this,Li)[xy]}}),y(this,ne,{__proto__:l(this,ne)}),l(this,na).push(t),this}restore(t){var i;const e=Object.getPrototypeOf(l(this,Ii));if(e===null)return this;y(this,Ii,e),y(this,Li,Object.getPrototypeOf(l(this,Li))),y(this,ne,Object.getPrototypeOf(l(this,ne)));const n=l(this,na).pop();return n!==void 0&&((i=UC(l(this,hl),t))==null||i.dependencies.add(n),l(this,zs)[t]=l(this,zs)[n]),this}recordOpenMarker(t){return l(this,na).push(t),this}getOpenMarker(){return l(this,na).length===0?null:l(this,na).at(-1)}recordCloseMarker(t){var n;const e=l(this,na).pop();return e!==void 0&&((n=UC(l(this,hl),t))==null||n.dependencies.add(e),l(this,zs)[t]=l(this,zs)[e]),this}beginMarkedContent(t){return l(this,$p).push(t),this}endMarkedContent(t){var n;const e=l(this,$p).pop();return e!==void 0&&((n=UC(l(this,hl),t))==null||n.dependencies.add(e),l(this,zs)[t]=l(this,zs)[e]),this}pushBaseTransform(t){return l(this,Nc).push(rt.multiplyByDOMMatrix(l(this,Nc).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,Nc).length>1&&l(this,Nc).pop(),this}recordSimpleData(t,e){return l(this,Ii)[t]=e,this}recordIncrementalData(t,e){return l(this,Li)[t].push(e),this}resetIncrementalData(t,e){return l(this,Li)[t].length=0,this}recordNamedData(t,e){return l(this,jp).set(t,e),this}recordSimpleDataFromNamed(t,e,n){l(this,Ii)[t]=l(this,jp).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(xy,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,Ii)&&this.recordFutureForcedDependency(e,l(this,Ii)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,Ni))this.recordFutureForcedDependency(xy,t);return this}resetBBox(t){return l(this,Oc)!==t&&(y(this,Oc,t),l(this,ce)[0]=1/0,l(this,ce)[1]=1/0,l(this,ce)[2]=-1/0,l(this,ce)[3]=-1/0),this}recordClipBox(t,e,n,i,r,o){const a=rt.multiplyByDOMMatrix(l(this,Nc).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];rt.axialAlignedBoundingBox([n,r,i,o],a,c);const u=rt.intersect(l(this,ne),c);return u?(l(this,ne)[0]=u[0],l(this,ne)[1]=u[1],l(this,ne)[2]=u[2],l(this,ne)[3]=u[3]):(l(this,ne)[0]=l(this,ne)[1]=1/0,l(this,ne)[2]=l(this,ne)[3]=-1/0),this}recordBBox(t,e,n,i,r,o){const a=l(this,ne);if(a[0]===1/0)return this;const c=rt.multiplyByDOMMatrix(l(this,Nc).at(-1),e.getTransform());if(a[0]===-1/0)return rt.axialAlignedBoundingBox([n,r,i,o],c,l(this,ce)),this;const u=[1/0,1/0,-1/0,-1/0];return rt.axialAlignedBoundingBox([n,r,i,o],c,u),l(this,ce)[0]=Math.min(l(this,ce)[0],Math.max(u[0],a[0])),l(this,ce)[1]=Math.min(l(this,ce)[1],Math.max(u[1],a[1])),l(this,ce)[2]=Math.max(l(this,ce)[2],Math.min(u[2],a[2])),l(this,ce)[3]=Math.max(l(this,ce)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(t,e,n,i=1,r=0,o=0,a){const c=n.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,ow).get(n),u!==!1&&(h=[0,0,0,0],rt.axialAlignedBoundingBox(c,n.fontMatrix,h),(i!==1||r!==0||o!==0)&&rt.scaleMinMax([i,0,0,-i,r,o],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!a)return this.recordFullPageBBox(t);const d=a();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,l(this,ow).set(n,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,ce)[0]=Math.max(0,l(this,ne)[0]),l(this,ce)[1]=Math.max(0,l(this,ne)[1]),l(this,ce)[2]=Math.min(l(this,Bp),l(this,ne)[2]),l(this,ce)[3]=Math.min(l(this,Up),l(this,ne)[3]),this}getSimpleIndex(t){return l(this,Ii)[t]}recordDependencies(t,e){const n=l(this,Ni),i=l(this,Ii),r=l(this,Li);for(const o of e)o in l(this,Ii)?n.add(i[o]):o in r&&r[o].forEach(n.add,n);return this}recordNamedDependency(t,e){return l(this,jp).has(e)&&l(this,Ni).add(l(this,jp).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[xy]),l(this,hl)){const n=UC(l(this,hl),t),{dependencies:i}=n;l(this,Ni).forEach(i.add,i),l(this,na).forEach(i.add,i),l(this,$p).forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(l(this,Oc)===t){const n=XH(l(this,ce)[0]*256/l(this,Bp)),i=XH(l(this,ce)[1]*256/l(this,Up)),r=YH(l(this,ce)[2]*256/l(this,Bp)),o=YH(l(this,ce)[3]*256/l(this,Up));BC(l(this,Fc),t,n,i,r,o);for(const a of l(this,Ni))a!==t&&BC(l(this,Fc),a,n,i,r,o);for(const a of l(this,na))a!==t&&BC(l(this,Fc),a,n,i,r,o);for(const a of l(this,$p))a!==t&&BC(l(this,Fc),a,n,i,r,o);e||(l(this,Ni).clear(),y(this,Oc,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(l(this,Ni));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,Oc)===t&&(y(this,Oc,-1),l(this,ne)[0]=Math.max(l(this,ne)[0],l(this,ce)[0]),l(this,ne)[1]=Math.max(l(this,ne)[1],l(this,ce)[1]),l(this,ne)[2]=Math.min(l(this,ne)[2],l(this,ce)[2]),l(this,ne)[3]=Math.min(l(this,ne)[3],l(this,ce)[3]),e||l(this,Ni).clear()),this}_takePendingDependencies(){const t=l(this,Ni);return y(this,Ni,new Set),t}_extractOperation(t){const e=l(this,XS).get(t);return l(this,XS).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,Ni).add(e)}take(){return l(this,ow).clear(),new Uyt(l(this,zs),l(this,Fc))}takeDebugMetadata(){return l(this,hl)}}Ii=new WeakMap,Li=new WeakMap,jp=new WeakMap,na=new WeakMap,$p=new WeakMap,Nc=new WeakMap,ne=new WeakMap,ce=new WeakMap,Oc=new WeakMap,Ni=new WeakMap,XS=new WeakMap,ow=new WeakMap,Bp=new WeakMap,Up=new WeakMap,Fc=new WeakMap,zs=new WeakMap,hl=new WeakMap,YS=new WeakSet,wN=function(t,e){const n=new ArrayBuffer(t*4);y(this,Fc,new Uint8ClampedArray(n)),y(this,zs,new Uint32Array(n)),e&&e.length>0?(l(this,zs).set(e),l(this,zs).fill(vN,e.length)):l(this,zs).fill(vN)};var ye,an,sa,aw,lw;const _$=class _${constructor(t,e,n){A(this,ye);A(this,an);A(this,sa);A(this,aw,0);A(this,lw,0);if(t instanceof _$&&l(t,sa)===!!n)return t;y(this,ye,t),y(this,an,e),y(this,sa,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return $t(this,lw)._++,l(this,ye).save(l(this,an)),this}restore(t){return l(this,lw)>0&&(l(this,ye).restore(l(this,an)),$t(this,lw)._--),this}recordOpenMarker(t){return $t(this,aw)._++,this}getOpenMarker(){return l(this,aw)>0?l(this,an):l(this,ye).getOpenMarker()}recordCloseMarker(t){return $t(this,aw)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,ye).pushBaseTransform(t),this}popBaseTransform(){return l(this,ye).popBaseTransform(),this}recordSimpleData(t,e){return l(this,ye).recordSimpleData(t,l(this,an)),this}recordIncrementalData(t,e){return l(this,ye).recordIncrementalData(t,l(this,an)),this}resetIncrementalData(t,e){return l(this,ye).resetIncrementalData(t,l(this,an)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return l(this,ye).recordSimpleDataFromNamed(t,e,l(this,an)),this}recordFutureForcedDependency(t,e){return l(this,ye).recordFutureForcedDependency(t,l(this,an)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,ye).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,ye).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,sa)||l(this,ye).resetBBox(l(this,an)),this}recordClipBox(t,e,n,i,r,o){return l(this,sa)||l(this,ye).recordClipBox(l(this,an),e,n,i,r,o),this}recordBBox(t,e,n,i,r,o){return l(this,sa)||l(this,ye).recordBBox(l(this,an),e,n,i,r,o),this}recordCharacterBBox(t,e,n,i,r,o,a){return l(this,sa)||l(this,ye).recordCharacterBBox(l(this,an),e,n,i,r,o,a),this}recordFullPageBBox(t){return l(this,sa)||l(this,ye).recordFullPageBBox(l(this,an)),this}getSimpleIndex(t){return l(this,ye).getSimpleIndex(t)}recordDependencies(t,e){return l(this,ye).recordDependencies(l(this,an),e),this}recordNamedDependency(t,e){return l(this,ye).recordNamedDependency(l(this,an),e),this}recordOperation(t){return l(this,ye).recordOperation(l(this,an),!0),this}recordShowTextOperation(t){return l(this,ye).recordShowTextOperation(l(this,an),!0),this}bboxToClipBoxDropOperation(t){return l(this,sa)||l(this,ye).bboxToClipBoxDropOperation(l(this,an),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ye=new WeakMap,an=new WeakMap,sa=new WeakMap,aw=new WeakMap,lw=new WeakMap;let Ak=_$;const to={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ts={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bN(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}let Yj=class{isModifyingCurrentTransform(){return!1}getPattern(){Ae("Abstract method `getPattern` called.")}},Hyt=class extends Yj{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===Ts.STROKE||i===Ts.FILL){const o=e.current.getClippedPathBoundingBox(i,Ke(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=rt.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),bN(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else bN(t,this._bbox),r=this._createGradient(t);return r}};function zD(s,t,e,n,i,r,o,a){const c=t.coords,u=t.colors,h=s.data,d=s.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),c[n+1]>c[i+1]&&(f=n,n=i,i=f,f=o,o=a,a=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,g=(c[n]+t.offsetX)*t.scaleX,w=(c[n+1]+t.offsetY)*t.scaleY,v=(c[i]+t.offsetX)*t.scaleX,b=(c[i+1]+t.offsetY)*t.scaleY;if(m>=b)return;const x=u[r],E=u[r+1],T=u[r+2],P=u[o],k=u[o+1],R=u[o+2],M=u[a],D=u[a+1],L=u[a+2],$=Math.round(m),U=Math.round(b);let I,H,N,j,F,O,V,X;for(let z=$;z<=U;z++){if(z<w){const q=z<m?0:(m-z)/(m-w);I=p-(p-g)*q,H=x-(x-P)*q,N=E-(E-k)*q,j=T-(T-R)*q}else{let q;z>b?q=1:w===b?q=0:q=(w-z)/(w-b),I=g-(g-v)*q,H=P-(P-M)*q,N=k-(k-D)*q,j=R-(R-L)*q}let W;z<m?W=0:z>b?W=1:W=(m-z)/(m-b),F=p-(p-v)*W,O=x-(x-M)*W,V=E-(E-D)*W,X=T-(T-L)*W;const et=Math.round(Math.min(I,F)),wt=Math.round(Math.max(I,F));let ft=d*z+et*4;for(let q=et;q<=wt;q++)W=(I-q)/(I-F),W<0?W=0:W>1&&(W=1),h[ft++]=H-(H-O)*W|0,h[ft++]=N-(N-V)*W|0,h[ft++]=j-(j-X)*W|0,h[ft++]=255}}function zyt(s,t,e){const n=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(n.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)zD(s,e,n[h],n[h+1],n[h+a],i[h],i[h+1],i[h+a]),zD(s,e,n[h+a+1],n[h+1],n[h+a],i[h+a+1],i[h+1],i[h+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)zD(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}let Wyt=class extends Yj{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,m=h/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},w=d+2*2,v=f+2*2,b=n.getCanvas("mesh",w,v),x=b.context,E=x.createImageData(d,f);if(e){const P=E.data;for(let k=0,R=P.length;k<R;k+=4)P[k]=e[0],P[k+1]=e[1],P[k+2]=e[2],P[k+3]=255}for(const P of this._figures)zyt(E,P,g);return x.putImageData(E,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){bN(t,this._bbox);const r=new Float32Array(2);if(i===Ts.SHADING)rt.singularValueDecompose2dScale(Ke(t),r);else if(this.matrix){rt.singularValueDecompose2dScale(this.matrix,r);const[a,c]=r;rt.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=c}else rt.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===Ts.SHADING?null:this._background,e.cachedCanvases);return i!==Ts.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}},Gyt=class extends Yj{getPattern(){return"hotpink"}};function qyt(s){switch(s[0]){case"RadialAxial":return new Hyt(s);case"Mesh":return new Wyt(s);case"Dummy":return new Gyt}throw new Error(`Unknown IR type: ${s[0]}`)}const QH={COLORED:1,UNCOLORED:2};var Vp;let Kyt=(Vp=class{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){var O,V;const{bbox:n,operatorList:i,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),aM("TilingType: "+o);const d=n[0],f=n[1],p=n[2],m=n[3],g=p-d,w=m-f,v=new Float32Array(2);rt.singularValueDecompose2dScale(this.matrix,v);const[b,x]=v;rt.singularValueDecompose2dScale(this.baseTransform,v);const E=b*v[0],T=x*v[1];let P=g,k=w,R=!1,M=!1;const D=Math.ceil(u*E),L=Math.ceil(h*T),$=Math.ceil(g*E),U=Math.ceil(w*T);D>=$?P=u:R=!0,L>=U?k=h:M=!0;const I=this.getSizeAndScale(P,this.ctx.canvas.width,E),H=this.getSizeAndScale(k,this.ctx.canvas.height,T),N=t.cachedCanvases.getCanvas("pattern",I.size,H.size),j=N.context,F=c.createCanvasGraphics(j,e);if(F.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(F,r,a),j.translate(-I.scale*d,-H.scale*f),F.transform(0,I.scale,0,0,H.scale,0,0),j.save(),(O=F.dependencyTracker)==null||O.save(),this.clipBbox(F,d,f,p,m),F.baseTransform=Ke(F.ctx),F.executeOperatorList(i),F.endDrawing(),(V=F.dependencyTracker)==null||V.restore(),j.restore(),R||M){const X=N.canvas;R&&(P=u),M&&(k=h);const z=this.getSizeAndScale(P,this.ctx.canvas.width,E),W=this.getSizeAndScale(k,this.ctx.canvas.height,T),et=z.size,wt=W.size,ft=t.cachedCanvases.getCanvas("pattern-workaround",et,wt),q=ft.context,Se=R?Math.floor(g/u):0,Qt=M?Math.floor(w/h):0;for(let _e=0;_e<=Se;_e++)for(let Lt=0;Lt<=Qt;Lt++)q.drawImage(X,et*_e,wt*Lt,et,wt,0,0,et,wt);return{canvas:ft.canvas,scaleX:z.scale,scaleY:W.scale,offsetX:d,offsetY:f}}return{canvas:N.canvas,scaleX:I.scale,scaleY:H.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,n){const i=Math.max(Vp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const o=i-e,a=r-n;t.ctx.rect(e,n,o,a),rt.axialAlignedBoundingBox([e,n,i,r],Ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case QH.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=a;break;case QH.UNCOLORED:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new hyt(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,r){let o=n;i!==Ts.SHADING&&(o=rt.transform(o,e.baseTransform),this.matrix&&(o=rt.transform(o,this.matrix)));const a=this.createPatternCanvas(e,r);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(c),u}},B(Vp,"MAX_PATTERN_SIZE",3e3),Vp);function Xyt({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=us.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=n>>3,d=n&7,f=s.length;e=new Uint32Array(e.buffer);let p=0;for(let m=0;m<i;m++){for(const w=t+h;t<w;t++){const v=t<f?s[t]:255;e[p++]=v&128?u:c,e[p++]=v&64?u:c,e[p++]=v&32?u:c,e[p++]=v&16?u:c,e[p++]=v&8?u:c,e[p++]=v&4?u:c,e[p++]=v&2?u:c,e[p++]=v&1?u:c}if(d===0)continue;const g=t<f?s[t++]:255;for(let w=0;w<d;w++)e[p++]=g&1<<7-w?u:c}return{srcPos:t,destPos:p}}const JH=16,ZH=100,Yyt=15,t3=10,Hi=16,WD=new DOMMatrix,Lr=new Float32Array(2),ov=new Float32Array([1/0,1/0,-1/0,-1/0]);function Qyt(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,i,r,o,a){t.transform(e,n,i,r,o,a),this.__originalTransform(e,n,i,r,o,a)},s.setTransform=function(e,n,i,r,o,a){t.setTransform(e,n,i,r,o,a),this.__originalSetTransform(e,n,i,r,o,a)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,o,a){t.bezierCurveTo(e,n,i,r,o,a),this.__originalBezierCurveTo(e,n,i,r,o,a)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}let Jyt=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function VC(s,t,e,n,i,r,o,a,c,u){const[h,d,f,p,m,g]=Ke(s);if(d===0&&f===0){const b=o*h+m,x=Math.round(b),E=a*p+g,T=Math.round(E),P=(o+c)*h+m,k=Math.abs(Math.round(P)-x)||1,R=(a+u)*p+g,M=Math.abs(Math.round(R)-T)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),x,T),s.drawImage(t,e,n,i,r,0,0,k,M),s.setTransform(h,d,f,p,m,g),[k,M]}if(h===0&&p===0){const b=a*f+m,x=Math.round(b),E=o*d+g,T=Math.round(E),P=(a+u)*f+m,k=Math.abs(Math.round(P)-x)||1,R=(o+c)*d+g,M=Math.abs(Math.round(R)-T)||1;return s.setTransform(0,Math.sign(d),Math.sign(f),0,x,T),s.drawImage(t,e,n,i,r,0,0,M,k),s.setTransform(h,d,f,p,m,g),[M,k]}s.drawImage(t,e,n,i,r,o,a,c,u);const w=Math.hypot(h,d),v=Math.hypot(f,p);return[w*c,v*u]}let e3=class{constructor(t,e,n){B(this,"alphaIsShape",!1);B(this,"fontSize",0);B(this,"fontSizeScale",1);B(this,"textMatrix",null);B(this,"textMatrixScale",1);B(this,"fontMatrix",KL);B(this,"leading",0);B(this,"x",0);B(this,"y",0);B(this,"lineX",0);B(this,"lineY",0);B(this,"charSpacing",0);B(this,"wordSpacing",0);B(this,"textHScale",1);B(this,"textRenderingMode",ds.FILL);B(this,"textRise",0);B(this,"fillColor","#000000");B(this,"strokeColor","#000000");B(this,"patternFill",!1);B(this,"patternStroke",!1);B(this,"fillAlpha",1);B(this,"strokeAlpha",1);B(this,"lineWidth",1);B(this,"activeSMask",null);B(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ov.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ts.FILL,e=null){const n=this.minMax.slice();if(t===Ts.STROKE){e||Ae("Stroke bounding box must include transform."),rt.singularValueDecompose2dScale(e,Lr);const i=Lr[0]*this.lineWidth/2,r=Lr[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const t=rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ov,0)}getClippedPathBoundingBox(t=Ts.FILL,e=null){return rt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function n3(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Hi,r=(e-i)/Hi,o=i===0?r:r+1,a=s.createImageData(n,Hi);let c=0,u;const h=t.data,d=a.data;let f,p,m,g;if(t.kind===Ex.GRAYSCALE_1BPP){const w=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),b=v.length,x=n+7>>3,E=4294967295,T=us.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?Hi:i,u=0,p=0;p<m;p++){const P=w-c;let k=0;const R=P>x?n:P*8-7,M=R&-8;let D=0,L=0;for(;k<M;k+=8)L=h[c++],v[u++]=L&128?E:T,v[u++]=L&64?E:T,v[u++]=L&32?E:T,v[u++]=L&16?E:T,v[u++]=L&8?E:T,v[u++]=L&4?E:T,v[u++]=L&2?E:T,v[u++]=L&1?E:T;for(;k<R;k++)D===0&&(L=h[c++],D=128),v[u++]=L&D?E:T,D>>=1}for(;u<b;)v[u++]=0;s.putImageData(a,0,f*Hi)}}else if(t.kind===Ex.RGBA_32BPP){for(p=0,g=n*Hi*4,f=0;f<r;f++)d.set(h.subarray(c,c+g)),c+=g,s.putImageData(a,0,p),p+=Hi;f<o&&(g=n*i*4,d.set(h.subarray(c,c+g)),s.putImageData(a,0,p))}else if(t.kind===Ex.RGB_24BPP)for(m=Hi,g=n*m,f=0;f<o;f++){for(f>=r&&(m=i,g=n*m),u=0,p=g;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;s.putImageData(a,0,f*Hi)}else throw new Error(`bad image kind: ${t.kind}`)}function s3(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Hi,r=(e-i)/Hi,o=i===0?r:r+1,a=s.createImageData(n,Hi);let c=0;const u=t.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?Hi:i;({srcPos:c}=Xyt({src:u,srcPos:c,dest:h,width:n,height:f,nonBlackColor:0})),s.putImageData(a,0,d*Hi)}}function oA(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function HC(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function i3(s,t){if(t)return!0;rt.singularValueDecompose2dScale(s,Lr);const e=Math.fround(Af.pixelRatio*Wm.PDF_TO_CSS_UNITS);return Lr[0]<=e&&Lr[1]<=e}const Zyt=["butt","round","square"],tvt=["miter","round","bevel"],evt={},r3={};var Fa,AN,xN,SN,cw;let CT=(cw=class{constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:a=null},c,u,h){A(this,Fa);this.ctx=t,this.current=new e3(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new Jyt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,n=null){var i;return typeof e=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ke(this.compositeCtx))}this.ctx.save(),HC(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ke(this.ctx)}executeOperatorList(t,e,n,i,r){var v;const o=t.argsArray,a=t.fnArray;let c=e||0;const u=o.length;if(u===c)return c;const h=u-c>t3&&typeof n=="function",d=h?Date.now()+Yyt:0;let f=0;const p=this.commonObjs,m=this.objs;let g,w;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,n),c;if(!r||r(c))if(g=a[c],w=o[c]??null,g!==kb.dependency)w===null?this[g](c):this[g](c,...w);else for(const b of w){(v=this.dependencyTracker)==null||v.recordNamedData(b,c);const x=b.startsWith("g_")?p:m;if(!x.has(b))return x.get(b,n),c}if(c++,c===u)return c;if(h&&++f>t3){if(Date.now()>d)return n(),c;f=0}}}endDrawing(){S(this,Fa,AN).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,Fa,xN).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=n,c=i,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,a,c,0,0,f,p),t=h.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t,e){var D,L;const n=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,a=this.current.patternFill,c=Ke(n);let u,h,d,f;if((e.bitmap||e.data)&&e.count>1){const $=e.bitmap||e.data.buffer;h=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get($),u||(u=new Map,this._cachedBitmapsMap.set($,u));const U=u.get(h);if(U&&!a){const I=Math.round(Math.min(c[0],c[2])+c[4]),H=Math.round(Math.min(c[1],c[3])+c[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(t,to.transformAndFill),{canvas:U,offsetX:I,offsetY:H}}d=U}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,r),s3(f.context,e));let p=rt.transform(c,[1/i,0,0,-1/r,0,0]);p=rt.transform(p,[1,0,0,1,0,-r]);const m=ov.slice();rt.axialAlignedBoundingBox([0,0,i,r],p,m);const[g,w,v,b]=m,x=Math.round(v-g)||1,E=Math.round(b-w)||1,T=this.cachedCanvases.getCanvas("fillCanvas",x,E),P=T.context,k=g,R=w;P.translate(-k,-R),P.transform(...p),d||(d=this._scaleImage(f.canvas,Wa(P)),d=d.img,u&&a&&u.set(h,d)),P.imageSmoothingEnabled=i3(Ke(P),e.interpolate),VC(P,d,0,0,d.width,d.height,0,0,i,r),P.globalCompositeOperation="source-in";const M=rt.transform(Wa(P),[1,0,0,1,-k,-R]);return P.fillStyle=a?o.getPattern(n,this,M,Ts.FILL,t):o,P.fillRect(0,0,i,r),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,T.canvas)),(L=this.dependencyTracker)==null||L.recordDependencies(t,to.transformAndFill),{canvas:T.canvas,offsetX:Math.round(k),offsetY:Math.round(R)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=Zyt[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=tvt[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,i,r,o,a;for(const[c,u]of e)switch(c){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),oA(this.suspendedCtx,o),Qyt(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),oA(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],o=i[1],a=i[2]-r,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,n,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,o,a,c,u,h,d){let f=t.canvas,p=c-h,m=u-d;if(o)if(p<0||m<0||p+n>f.width||m+i>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,i),v=w.context;v.drawImage(f,-p,-m),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",f=w.canvas,p=m=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(p,m,n,i),t.clip(w),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,m,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,u,n,i),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(f,p,m,n,i,c,u,n,i),e.restore()}save(t){var n;this.inSMaskMode&&oA(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&oA(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,r,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,r,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[r]=n;if(!i){r||(r=n[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===kb.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let a=0,c=r.length;a<c;)switch(r[a++]){case OC.moveTo:o.moveTo(r[a++],r[a++]);break;case OC.lineTo:o.lineTo(r[a++],r[a++]);break;case OC.curveTo:o.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);break;case OC.closePath:o.closePath();break;default:St(`Unrecognized drawing path operator: ${r[a-1]}`);break}r=o}rt.axialAlignedBoundingBox(i,Ke(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var o;const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const a=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Wa(i),Ts.STROKE,t),a){const c=new Path2D;c.addPath(e,i.getTransform().invertSelf().multiplySelf(a)),e=c}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,to.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ts.STROKE,Ke(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var u,h,d;const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=r.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),i.save(),i.fillStyle=r.getPattern(i,this,Wa(i),Ts.FILL,t),f){const p=new Path2D;p.addPath(e,i.getTransform().invertSelf().multiplySelf(f)),e=p}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),(h=this.dependencyTracker)==null||h.recordDependencies(t,to.fill),a&&(i.restore(),(d=this.dependencyTracker)==null||d.restore(t)),n&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,to.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=evt}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=r3}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:h}of e)h&&i.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(a,c).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||KL,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&St("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let h=n;n<JH?h=JH:n>ZH&&(h=ZH),this.current.fontSizeScale=n/h,this.ctx.font=`${u} ${c} ${h}px ${a}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,i,r,o){var v,b,x,E;const a=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&ds.FILL_STROKE_MASK,p=!!(h&ds.ADD_TO_PATH_FLAG),m=c.patternFill&&!u.missingFile,g=c.patternStroke&&!u.missingFile;let w;if((u.disableFontFace||p||m||g)&&!u.missingFile&&(w=u.getPathGenerator(this.commonObjs,e)),w&&(u.disableFontFace||m||g)){a.save(),a.translate(n,i),a.scale(d,-d),(v=this.dependencyTracker)==null||v.recordCharacterBBox(t,a,u);let T;if(f===ds.FILL||f===ds.FILL_STROKE)if(r){T=a.getTransform(),a.setTransform(...r);const P=S(this,Fa,SN).call(this,w,T,r);a.fill(P)}else a.fill(w);if(f===ds.STROKE||f===ds.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:P,b:k,c:R,d:M}=T,D=rt.inverseTransform(o),L=rt.transform([P,k,R,M,0,0],D);rt.singularValueDecompose2dScale(L,Lr),a.lineWidth*=Math.max(Lr[0],Lr[1])/d,a.stroke(S(this,Fa,SN).call(this,w,T,o))}else a.lineWidth/=d,a.stroke(w);a.restore()}else(f===ds.FILL||f===ds.FILL_STROKE)&&(a.fillText(e,n,i),(b=this.dependencyTracker)==null||b.recordCharacterBBox(t,a,u,d,n,i,()=>a.measureText(e))),(f===ds.STROKE||f===ds.FILL_STROKE)&&(this.dependencyTracker&&((x=this.dependencyTracker)==null||x.recordCharacterBBox(t,a,u,d,n,i,()=>a.measureText(e)).recordDependencies(t,to.stroke)),a.strokeText(e,n,i));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ke(a),x:n,y:i,fontSize:d,path:w}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(t,a,u,d,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Rt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var R,M,D,L;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,to.showText).resetBBox(t),this.current.textRenderingMode&ds.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),(R=this.dependencyTracker)==null||R.recordShowTextOperation(t);return}const r=n.fontSize;if(r===0){(M=this.dependencyTracker)==null||M.recordOperation(t);return}const o=this.ctx,a=n.fontSizeScale,c=n.charSpacing,u=n.wordSpacing,h=n.fontDirection,d=n.textHScale*h,f=e.length,p=i.vertical,m=p?1:-1,g=i.defaultVMetrics,w=r*n.fontMatrix[0],v=n.textRenderingMode===ds.FILL&&!i.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),h>0?o.scale(d,-1):o.scale(d,1);let b,x;if(n.patternFill){o.save();const $=n.fillColor.getPattern(o,this,Wa(o),Ts.FILL,t);b=Ke(o),o.restore(),o.fillStyle=$}if(n.patternStroke){o.save();const $=n.strokeColor.getPattern(o,this,Wa(o),Ts.STROKE,t);x=Ke(o),o.restore(),o.strokeStyle=$}let E=n.lineWidth;const T=n.textMatrixScale;if(T===0||E===0){const $=n.textRenderingMode&ds.FILL_STROKE_MASK;($===ds.STROKE||$===ds.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=T;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,i.isInvalidPDFjsFont){const $=[];let U=0;for(const H of e)$.push(H.unicode),U+=H.width;const I=$.join("");if(o.fillText(I,0,0),this.dependencyTracker!==null){const H=o.measureText(I);this.dependencyTracker.recordBBox(t,this.ctx,-H.actualBoundingBoxLeft,H.actualBoundingBoxRight,-H.actualBoundingBoxAscent,H.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=U*w*d,o.restore(),this.compose();return}let P=0,k;for(k=0;k<f;++k){const $=e[k];if(typeof $=="number"){P+=m*$*r/1e3;continue}let U=!1;const I=($.isSpace?u:0)+c,H=$.fontChar,N=$.accent;let j,F,O=$.width;if(p){const z=$.vmetric||g,W=-($.vmetric?z[1]:O*.5)*w,et=z[2]*w;O=z?-z[0]:O,j=W/a,F=(P+et)/a}else j=P/a,F=0;let V;if(i.remeasure&&O>0){V=o.measureText(H);const z=V.width*1e3/r*a;if(O<z&&this.isFontSubpixelAAEnabled){const W=O/z;U=!0,o.save(),o.scale(W,1),j/=W}else O!==z&&(j+=(O-z)/2e3*r/a)}if(this.contentVisible&&($.isInFont||i.missingFile)){if(v&&!N)o.fillText(H,j,F),(D=this.dependencyTracker)==null||D.recordCharacterBBox(t,o,V?{bbox:null}:i,r/a,j,F,()=>V??o.measureText(H));else if(this.paintChar(t,H,j,F,b,x),N){const z=j+r*N.offset.x/a,W=F-r*N.offset.y/a;this.paintChar(t,N.fontChar,z,W,b,x)}}const X=p?O*w-I*h:O*w+I*h;P+=X,U&&o.restore()}p?n.y-=P:n.x+=P*d,o.restore(),this.compose(),(L=this.dependencyTracker)==null||L.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,r=i.font,o=i.fontSize,a=i.fontDirection,c=r.vertical?1:-1,u=i.charSpacing,h=i.wordSpacing,d=i.textHScale*a,f=i.fontMatrix||KL,p=e.length,m=i.textRenderingMode===ds.INVISIBLE;let g,w,v,b;if(m||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(d,a);const x=this.dependencyTracker;for(this.dependencyTracker=x?new Ak(x,t):null,g=0;g<p;++g){if(w=e[g],typeof w=="number"){b=c*w*o/1e3,this.ctx.translate(b,0),i.x+=b*d;continue}const E=(w.isSpace?h:0)+u,T=r.charProcOperatorList[w.operatorListId];T?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...f),this.executeOperatorList(T),this.restore()):St(`Type3 character "${w.operatorListId}" is not available.`);const P=[w.width,0];rt.applyTransform(P,f),v=P[0]*o+E,n.translate(v,0),i.x+=v*d}n.restore(),x&&(this.dependencyTracker=x)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,r,o,a){var u;const c=new Path2D;c.rect(i,r,o-i,a-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,i,o,r,a).recordClipBox(t,this.ctx,i,o,r,a),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||Ke(this.ctx),r={createCanvasGraphics:(o,a)=>new cw(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ak(this.dependencyTracker,a,!0):null)};n=new Kyt(e,this.ctx,r,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=qyt(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,Wa(n),Ts.SHADING,t);const r=Wa(n);if(r){const{width:a,height:c}=n.canvas,u=ov.slice();rt.axialAlignedBoundingBox([0,0,a,c],r,u);const[h,d,f,p]=u;this.ctx.fillRect(h,d,f-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,to.transform).recordDependencies(t,to.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ae("Should not call beginInlineImage")}beginImageData(){Ae("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var i;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ke(this.ctx),n)){rt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,a,c]=n,u=new Path2D;u.rect(r,o,a-r,c-o),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(t,this.ctx,r,a,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var x;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||aM("TODO: Support non-isolated groups."),e.knockout&&St("Knockout groups not supported.");const i=Ke(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ov.slice();rt.axialAlignedBoundingBox(e.bbox,Ke(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=rt.intersect(r,o)||[0,0,0,0];const a=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-a,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),p=f.context;p.translate(-a,-c),p.transform(...i);let m=new Path2D;const[g,w,v,b]=e.bbox;if(m.rect(g,w,v-g,b-w),e.matrix){const E=new Path2D;E.addPath(m,new DOMMatrix(e.matrix)),m=E}p.clip(m),e.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,c),n.save()),oA(n,p),this.ctx=p,(x=this.dependencyTracker)==null||x.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Ke(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const a=ov.slice();rt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,a),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,n,i,r,o){if(S(this,Fa,AN).call(this),HC(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const a=n[2]-n[0],c=n[3]-n[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=c,rt.singularValueDecompose2dScale(Ke(this.ctx),Lr);const{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Lr[0],0,0,-Lr[1],0,c*Lr[1]),HC(this.ctx)}else{HC(this.ctx),this.endPath(t);const u=new Path2D;u.rect(n[0],n[1],a,c),this.ctx.clip(u)}}this.current=new e3(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),S(this,Fa,xN).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var a;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,r=0,o,a){var d,f,p;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=Ke(c);c.transform(n,i,r,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let m=0,g=a.length;m<g;m+=2){const w=rt.transform(u,[n,i,r,o,a[m],a[m+1]]);c.drawImage(h.canvas,w[4],w[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,w[4],w[4]+h.canvas.width,w[5],w[5]+h.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,a,c;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,to.transformAndFill);for(const u of e){const{data:h,width:d,height:f,transform:p}=u,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),g=m.context;g.save();const w=this.getObject(t,h,u);s3(g,w),g.globalCompositeOperation="source-in",g.fillStyle=r?i.getPattern(g,this,Wa(n),Ts.FILL,t):i,g.fillRect(0,0,d,f),g.restore(),n.save(),n.transform(...p),n.scale(1,-1),VC(n,m.canvas,0,0,d,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){St("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[n,0,0,i,r[h],r[h+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const n=e.width,i=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,i).context;n3(d,e),a=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(a,Wa(r));r.imageSmoothingEnabled=i3(Ke(r),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,r,0,n,-i,0).recordDependencies(t,to.imageXObject).recordOperation(t),VC(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var o,a,c;if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const u=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;n3(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),VC(i,r,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(t,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,to.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var o,a;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===r3?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(a=this.dependencyTracker)==null||a.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,a;if(n===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=a=1/c;else{const h=c*t;o=a=h<1?1/h:1}else if(t===0)o=1/c,a=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(e*r-n*i),u=Math.hypot(e,n),h=Math.hypot(i,r);if(t===0)o=h/c,a=u/c;else{const d=t*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(i||1)*r,n.stroke(t);return}const a=n.getLineDash();e&&n.save(),n.scale(r,o),WD.a=1/r,WD.d=1/o;const c=new Path2D;if(c.addPath(t,WD),a.length>0){const u=Math.max(r,o);n.setLineDash(a.map(h=>h/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}},Fa=new WeakSet,AN=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},xN=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},SN=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i},cw);for(const s in kb)CT.prototype[s]!==void 0&&(CT.prototype[kb[s]]=CT.prototype[s]);var uw,hw,QS,dw,TT;const av=class av{constructor(t){A(this,dw);A(this,uw);A(this,hw);A(this,QS);y(this,uw,t),y(this,hw,new DataView(l(this,uw))),y(this,QS,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const u of av.strings){const h=e.encode(t[u]);n[u]=h,i+=4+h.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),a=new DataView(r);let c=0;for(const u of av.strings){const h=n[u],d=h.length;a.setUint32(c,d),o.set(h,c+4),c+=4+d}return Vt(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return S(this,dw,TT).call(this,0)}get fontWeight(){return S(this,dw,TT).call(this,1)}get italicAngle(){return S(this,dw,TT).call(this,2)}};uw=new WeakMap,hw=new WeakMap,QS=new WeakMap,dw=new WeakSet,TT=function(t){Vt(t<av.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=l(this,hw).getUint32(e)+4;const n=l(this,hw).getUint32(e);return l(this,QS).decode(new Uint8Array(l(this,uw),e+4,n))},B(av,"strings",["fontFamily","fontWeight","italicAngle"]);let xk=av;var Xh,dl,Hp,zp,LA;const lv=class lv{constructor(t){A(this,zp);A(this,Xh);A(this,dl);A(this,Hp);y(this,Xh,t),y(this,dl,new DataView(l(this,Xh))),y(this,Hp,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const f of lv.strings){const p=e.encode(t[f]);n[f]=p,i+=4+p.length}i+=4;let r,o,a=1+i;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),a+=4+r.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,t.guessFallback?1:0),h.setUint32(d,0),d+=4,i=0;for(const f of lv.strings){const p=n[f],m=p.length;i+=4+m,h.setUint32(d,m),u.set(p,d+4),d+=4+m}return h.setUint32(d-i-4,i),t.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),Vt(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return l(this,dl).getUint8(0)!==0}get css(){return S(this,zp,LA).call(this,0)}get loadedName(){return S(this,zp,LA).call(this,1)}get baseFontName(){return S(this,zp,LA).call(this,2)}get src(){return S(this,zp,LA).call(this,3)}get style(){let t=1;t+=4+l(this,dl).getUint32(t);const e=l(this,dl).getUint32(t),n=l(this,Hp).decode(new Uint8Array(l(this,Xh),t+4,e));t+=4+e;const i=l(this,dl).getUint32(t),r=l(this,Hp).decode(new Uint8Array(l(this,Xh),t+4,i));return{style:n,weight:r}}};Xh=new WeakMap,dl=new WeakMap,Hp=new WeakMap,zp=new WeakSet,LA=function(t){Vt(t<lv.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=l(this,dl).getUint32(e)+4;const n=l(this,dl).getUint32(e);return l(this,Hp).decode(new Uint8Array(l(this,Xh),e+4,n))},B(lv,"strings",["css","loadedName","baseFontName","src"]);let Sk=lv;var fw,pw,gw,mw,rr,fl,JS,ue,pn,zo,PT,NA;const Et=class Et{constructor({data:t,extra:e}){A(this,pn);A(this,fl);A(this,JS);A(this,ue);y(this,fl,t),y(this,JS,new TextDecoder),y(this,ue,new DataView(l(this,fl))),e&&Object.assign(this,e)}get black(){return S(this,pn,zo).call(this,0)}get bold(){return S(this,pn,zo).call(this,1)}get disableFontFace(){return S(this,pn,zo).call(this,2)}get fontExtraProperties(){return S(this,pn,zo).call(this,3)}get isInvalidPDFjsFont(){return S(this,pn,zo).call(this,4)}get isType3Font(){return S(this,pn,zo).call(this,5)}get italic(){return S(this,pn,zo).call(this,6)}get missingFile(){return S(this,pn,zo).call(this,7)}get remeasure(){return S(this,pn,zo).call(this,8)}get vertical(){return S(this,pn,zo).call(this,9)}get ascent(){return S(this,pn,PT).call(this,0)}get defaultWidth(){return S(this,pn,PT).call(this,1)}get descent(){return S(this,pn,PT).call(this,2)}get bbox(){let t=l(Et,pw);if(l(this,ue).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(l(this,ue).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=l(Et,gw);if(l(this,ue).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(l(this,ue).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=l(Et,mw);if(l(this,ue).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(l(this,ue).getInt16(t,!0)),t+=2;return n}get fallbackName(){return S(this,pn,NA).call(this,0)}get loadedName(){return S(this,pn,NA).call(this,1)}get mimetype(){return S(this,pn,NA).call(this,2)}get name(){return S(this,pn,NA).call(this,3)}get data(){let t=l(Et,rr);const e=l(this,ue).getUint32(t);t+=4+e;const n=l(this,ue).getUint32(t);t+=4+n;const i=l(this,ue).getUint32(t);t+=4+i;const r=l(this,ue).getUint32(t);if(r!==0)return new Uint8Array(l(this,fl),t+4,r)}clearData(){let t=l(Et,rr);const e=l(this,ue).getUint32(t);t+=4+e;const n=l(this,ue).getUint32(t);t+=4+n;const i=l(this,ue).getUint32(t);t+=4+i;const r=l(this,ue).getUint32(t);new Uint8Array(l(this,fl),t+4,r).fill(0),l(this,ue).setUint32(t,0)}get cssFontInfo(){let t=l(Et,rr);const e=l(this,ue).getUint32(t);t+=4+e;const n=l(this,ue).getUint32(t);t+=4+n;const i=l(this,ue).getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(l(this,fl),t+4,i)),new xk(r.buffer)}get systemFontInfo(){let t=l(Et,rr);const e=l(this,ue).getUint32(t);t+=4+e;const n=l(this,ue).getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(l(this,fl),t+4,n)),new Sk(i.buffer)}static write(t){const e=t.systemFontInfo?Sk.write(t.systemFontInfo):null,n=t.cssFontInfo?xk.write(t.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const g of Et.strings)r[g]=i.encode(t[g]),o+=4+r[g].length;const a=l(Et,rr)+4+o+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=Et.bools.length;let p=0,m=0;for(let g=0;g<f;g++){const w=t[Et.bools[g]];p|=(w===void 0?0:w?2:1)<<m,m+=2,(m===8||g===f-1)&&(h.setUint8(d++,p),p=0,m=0)}Vt(d===l(Et,fw),"FontInfo.write: Boolean properties offset mismatch");for(const g of Et.numbers)h.setFloat64(d,t[g]),d+=8;if(Vt(d===l(Et,pw),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(d++,4);for(const g of t.bbox)h.setInt16(d,g,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(Vt(d===l(Et,gw),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(d++,6);for(const g of t.fontMatrix)h.setFloat64(d,g,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(Vt(d===l(Et,mw),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(d++,1);for(const g of t.defaultVMetrics)h.setInt16(d,g,!0),d+=2}else h.setUint8(d++,0),d+=3*2;Vt(d===l(Et,rr),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(l(Et,rr),0),d+=4;for(const g of Et.strings){const w=r[g],v=w.length;h.setUint32(d,v),u.set(w,d+4),d+=4+v}if(h.setUint32(l(Et,rr),d-l(Et,rr)-4),!e)h.setUint32(d,0),d+=4;else{const g=e.byteLength;h.setUint32(d,g),Vt(d+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),d+4),d+=4+g}if(!n)h.setUint32(d,0),d+=4;else{const g=n.byteLength;h.setUint32(d,g),Vt(d+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),d+4),d+=4+g}return t.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,t.data.length),u.set(t.data,d+4),d+=4+t.data.length),Vt(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};fw=new WeakMap,pw=new WeakMap,gw=new WeakMap,mw=new WeakMap,rr=new WeakMap,fl=new WeakMap,JS=new WeakMap,ue=new WeakMap,pn=new WeakSet,zo=function(t){Vt(t<Et.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=l(this,ue).getUint8(e)>>n&3;return i===0?void 0:i===2},PT=function(t){return Vt(t<Et.numbers.length,"Invalid number index"),l(this,ue).getFloat64(l(Et,fw)+t*8)},NA=function(t){Vt(t<Et.strings.length,"Invalid string index");let e=l(Et,rr)+4;for(let r=0;r<t;r++)e+=l(this,ue).getUint32(e)+4;const n=l(this,ue).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,fl),e+4,n)),l(this,JS).decode(i)},B(Et,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),B(Et,"numbers",["ascent","defaultWidth","descent"]),B(Et,"strings",["fallbackName","loadedName","mimetype","name"]),A(Et,fw,Math.ceil(Et.bools.length*2/8)),A(Et,pw,l(Et,fw)+Et.numbers.length*8),A(Et,gw,l(Et,pw)+1+2*4),A(Et,mw,l(Et,gw)+1+8*6),A(Et,rr,l(Et,mw)+1+2*3);let _N=Et;var YC,ZS,t_;let ql=(YC=class{static get workerPort(){return l(this,ZS)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");y(this,ZS,t)}static get workerSrc(){return l(this,t_)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");y(this,t_,t)}},ZS=new WeakMap,t_=new WeakMap,A(YC,ZS,null),A(YC,t_,""),YC);var yw,e_,sz;let nvt=(sz=class{constructor({parsedData:t,rawData:e}){A(this,yw);A(this,e_);y(this,yw,t),y(this,e_,e)}getRaw(){return l(this,e_)}get(t){return l(this,yw).get(t)??null}[Symbol.iterator](){return l(this,yw).entries()}},yw=new WeakMap,e_=new WeakMap,sz);const Dy=Symbol("INTERNAL");var n_,s_,i_,vw,iz;let svt=(iz=class{constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){A(this,n_,!1);A(this,s_,!1);A(this,i_,!1);A(this,vw,!0);y(this,n_,!!(t&Mr.DISPLAY)),y(this,s_,!!(t&Mr.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(l(this,i_))return l(this,vw);if(!l(this,vw))return!1;const{print:t,view:e}=this.usage;return l(this,n_)?(e==null?void 0:e.viewState)!=="OFF":l(this,s_)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Dy&&Ae("Internal method `_setVisible` called."),y(this,i_,n),y(this,vw,e)}},n_=new WeakMap,s_=new WeakMap,i_=new WeakMap,vw=new WeakMap,iz);var Yh,he,ww,bw,r_,EN,rz;let ivt=(rz=class{constructor(t,e=Mr.DISPLAY){A(this,r_);A(this,Yh,null);A(this,he,new Map);A(this,ww,null);A(this,bw,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,y(this,bw,t.order);for(const n of t.groups)l(this,he).set(n.id,new svt(e,n));if(t.baseState==="OFF")for(const n of l(this,he).values())n._setVisible(Dy,!1);for(const n of t.on)l(this,he).get(n)._setVisible(Dy,!0);for(const n of t.off)l(this,he).get(n)._setVisible(Dy,!1);y(this,ww,this.getHash())}}isVisible(t){if(l(this,he).size===0)return!0;if(!t)return aM("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,he).has(t.id)?l(this,he).get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return S(this,r_,EN).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,he).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,he).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,he).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,he).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,he).has(e))return St(`Optional content group not found: ${e}`),!0;if(!l(this,he).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,he).has(e))return St(`Optional content group not found: ${e}`),!0;if(l(this,he).get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const i=l(this,he).get(t);if(!i){St(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==t&&((r=l(this,he).get(a))==null||r._setVisible(Dy,!1,!0));i._setVisible(Dy,!!e,!0),y(this,Yh,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=l(this,he).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}y(this,Yh,null)}get hasInitialVisibility(){return l(this,ww)===null||this.getHash()===l(this,ww)}getOrder(){return l(this,he).size?l(this,bw)?l(this,bw).slice():[...l(this,he).keys()]:null}getGroup(t){return l(this,he).get(t)||null}getHash(){if(l(this,Yh)!==null)return l(this,Yh);const t=new XK;for(const[e,n]of l(this,he))t.update(`${e}:${n.visible}`);return y(this,Yh,t.hexdigest())}[Symbol.iterator](){return l(this,he).entries()}},Yh=new WeakMap,he=new WeakMap,ww=new WeakMap,bw=new WeakMap,r_=new WeakSet,EN=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=S(this,r_,EN).call(this,r);else if(l(this,he).has(r))o=l(this,he).get(r).visible;else return St(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"},rz),rvt=class{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Vt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Vt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ovt(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new avt(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}},ovt=class{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=cM(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},avt=class{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function lvt(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let h=a(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(s),e){const h=u(e);return r(h)}if(e=n("filename","i").exec(s),e){e=e[1];let h=a(e);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=K1(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,g,w,v]=f;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[w,v]}const m=[];for(let g=0;g<d.length&&g in d;++g){let[w,v]=d[g];v=a(v),w&&(v=unescape(v),g===0&&(v=c(v))),m.push(v)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function lX(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function uM(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function cX({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function uX(s){const t=s.get("Content-Disposition");if(t){let e=lvt(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(cM(e))return e}return null}function Q1(s,t){return new dS(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function hX(s){return s===200||s===206}function dX(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function fX(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(St(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}let cvt=class{constructor(t){B(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=lX(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new uvt(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new hvt(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}},uvt=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,dX(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=uM(r.url),!hX(r.status))throw Q1(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=cX({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=uX(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fX(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}},hvt=class{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=i.url;fetch(o,dX(r,this._withCredentials,this._abortController)).then(a=>{const c=uM(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!hX(a.status))throw Q1(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:fX(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}};const GD=200,qD=206;function dvt(s){const t=s.response;return typeof t!="string"?t:K1(t).buffer}let fvt=class{constructor({url:t,httpHeaders:e,withCredentials:n}){B(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=lX(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=qD):i.expectedStatus=GD,e.responseType="arraybuffer",Vt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||GD;if(!(r===GD&&n.expectedStatus===qD)&&r!==n.expectedStatus){n.onError(i.status);return}const a=dvt(i);if(r===qD){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:a}):(St('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},pvt=class{constructor(t){this._source=t,this._manager=new fvt(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gvt(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new mvt(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}},gvt=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=uM(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=cX({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=uX(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Q1(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},mvt=class{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=uM((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Q1(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}};const yvt=/^[a-z][a-z0-9\-+.]+:/i;function vvt(s){if(yvt.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}let wvt=class{constructor(t){this.source=t,this.url=vvt(t.url),Vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new bvt(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Avt(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}},bvt=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Q1(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new qu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Avt=class{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}};const aA=Symbol("INITIAL_DATA");var or,o_,CN,oz;let pX=(oz=class{constructor(){A(this,o_);A(this,or,Object.create(null))}get(t,e=null){if(e){const i=S(this,o_,CN).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=l(this,or)[t];if(!n||n.data===aA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,or)[t];return!!e&&e.data!==aA}delete(t){const e=l(this,or)[t];return!e||e.data===aA?!1:(delete l(this,or)[t],!0)}resolve(t,e=null){const n=S(this,o_,CN).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in l(this,or)){const{data:n}=l(this,or)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}y(this,or,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,or)){const{data:e}=l(this,or)[t];e!==aA&&(yield[t,e])}}},or=new WeakMap,o_=new WeakSet,CN=function(t){var e;return(e=l(this,or))[t]||(e[t]={...Promise.withResolvers(),data:aA})},oz);const xvt=1e5,o3=30;var az,Qh,Oi,a_,l_,Wp,jc,c_,u_,Gp,Aw,xw,Jh,Sw,h_,_w,qp,d_,f_,dn,Ew,Kp,p_,Zh,Cw,Xu,gX,mX,TN,Wr,kT,PN,yX,vX;let fS=(dn=class{constructor({textContentSource:t,container:e,viewport:n}){A(this,Xu);A(this,Qh,Promise.withResolvers());A(this,Oi,null);A(this,a_,!1);A(this,l_,!!((az=globalThis.FontInspector)!=null&&az.enabled));A(this,Wp,null);A(this,jc,null);A(this,c_,0);A(this,u_,0);A(this,Gp,null);A(this,Aw,null);A(this,xw,0);A(this,Jh,0);A(this,Sw,Object.create(null));A(this,h_,[]);A(this,_w,null);A(this,qp,[]);A(this,d_,new WeakMap);A(this,f_,null);var c;if(t instanceof ReadableStream)y(this,_w,t);else if(typeof t=="object")y(this,_w,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,Oi,y(this,Aw,e)),y(this,Jh,n.scale*Af.pixelRatio),y(this,xw,n.rotation),y(this,jc,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=n.rawDims;y(this,f_,[1,0,0,-1,-o,a+r]),y(this,u_,i),y(this,c_,r),S(c=dn,Wr,yX).call(c),bf(e,n),l(this,Qh).promise.finally(()=>{l(dn,Cw).delete(this),y(this,jc,null),y(this,Sw,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=us.platform;return Rt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,Gp).read().then(({value:e,done:n})=>{if(n){l(this,Qh).resolve();return}l(this,Wp)??y(this,Wp,e.lang),Object.assign(l(this,Sw),e.styles),S(this,Xu,gX).call(this,e.items),t()},l(this,Qh).reject)};return y(this,Gp,l(this,_w).getReader()),l(dn,Cw).add(this),t(),l(this,Qh).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*Af.pixelRatio,i=t.rotation;if(i!==l(this,xw)&&(e==null||e(),y(this,xw,i),bf(l(this,Aw),{rotation:i})),n!==l(this,Jh)){e==null||e(),y(this,Jh,n);const o={div:null,properties:null,ctx:S(r=dn,Wr,kT).call(r,l(this,Wp))};for(const a of l(this,qp))o.properties=l(this,d_).get(a),o.div=a,S(this,Xu,TN).call(this,o)}}cancel(){var e;const t=new qu("TextLayer task cancelled.");(e=l(this,Gp))==null||e.cancel(t).catch(()=>{}),y(this,Gp,null),l(this,Qh).reject(t)}get textDivs(){return l(this,qp)}get textContentItemsStr(){return l(this,h_)}static cleanup(){if(!(l(this,Cw).size>0)){l(this,Ew).clear();for(const{canvas:t}of l(this,Kp).values())t.remove();l(this,Kp).clear()}}},Qh=new WeakMap,Oi=new WeakMap,a_=new WeakMap,l_=new WeakMap,Wp=new WeakMap,jc=new WeakMap,c_=new WeakMap,u_=new WeakMap,Gp=new WeakMap,Aw=new WeakMap,xw=new WeakMap,Jh=new WeakMap,Sw=new WeakMap,h_=new WeakMap,_w=new WeakMap,qp=new WeakMap,d_=new WeakMap,f_=new WeakMap,Ew=new WeakMap,Kp=new WeakMap,p_=new WeakMap,Zh=new WeakMap,Cw=new WeakMap,Xu=new WeakSet,gX=function(t){var i,r;if(l(this,a_))return;(r=l(this,jc)).ctx??(r.ctx=S(i=dn,Wr,kT).call(i,l(this,Wp)));const e=l(this,qp),n=l(this,h_);for(const o of t){if(e.length>xvt){St("Ignoring additional textDivs for performance reasons."),y(this,a_,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Oi);y(this,Oi,document.createElement("span")),l(this,Oi).classList.add("markedContent"),o.id&&l(this,Oi).setAttribute("id",`${o.id}`),a.append(l(this,Oi))}else o.type==="endMarkedContent"&&y(this,Oi,l(this,Oi).parentNode);continue}n.push(o.str),S(this,Xu,mX).call(this,o)}},mX=function(t){var g;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,qp).push(e);const i=rt.transform(l(this,f_),t.transform);let r=Math.atan2(i[1],i[0]);const o=l(this,Sw)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,l_)&&o.fontSubstitution||o.fontFamily;a=dn.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),u=c*S(g=dn,Wr,vX).call(g,a,o,l(this,Wp));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;l(this,Oi)===l(this,Aw)?(p.left=`${(100*h/l(this,u_)).toFixed(2)}%`,p.top=`${(100*d/l(this,c_)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(dn,Zh)*c).toFixed(2)}px)`,p.fontFamily=a,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,l_)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(m=!0)}if(m&&(n.canvasWidth=o.vertical?t.height:t.width),l(this,d_).set(e,n),l(this,jc).div=e,l(this,jc).properties=n,S(this,Xu,TN).call(this,l(this,jc)),n.hasText&&l(this,Oi).append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,Oi).append(w)}},TN=function(t){var a;const{div:e,properties:n,ctx:i}=t,{style:r}=e;let o="";if(l(dn,Zh)>1&&(o=`scale(${1/l(dn,Zh)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=n;S(a=dn,Wr,PN).call(a,i,h*l(this,Jh),c);const{width:d}=i.measureText(e.textContent);d>0&&(o=`scaleX(${u*l(this,Jh)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Wr=new WeakSet,kT=function(t=null){let e=l(this,Kp).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Kp).set(t,e),l(this,p_).set(e,{size:0,family:""})}return e},PN=function(t,e,n){const i=l(this,p_).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},yX=function(){if(l(this,Zh)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),y(this,Zh,t.getBoundingClientRect().height),t.remove()},vX=function(t,e,n){const i=l(this,Ew).get(t);if(i)return i;const r=S(this,Wr,kT).call(this,n);r.canvas.width=r.canvas.height=o3,S(this,Wr,PN).call(this,r,o3,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return a?u=a/(a+c):(us.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),l(this,Ew).set(t,u),u},A(dn,Wr),A(dn,Ew,new Map),A(dn,Kp,new Map),A(dn,p_,new WeakMap),A(dn,Zh,null),A(dn,Cw,new Set),dn);const Svt=100;function Qj(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new _vt,{docId:e}=t,n=s.url?Ryt(s.url):null,i=s.data?Myt(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,a=s.password??null,c=s.range instanceof Jj?s.range:null,u=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let h=s.worker instanceof _k?s.worker:null;const d=s.verbosity,f=typeof s.docBaseUrl=="string"&&!X1(s.docBaseUrl)?s.docBaseUrl:null,p=jC(s.cMapUrl),m=s.cMapPacked!==!1,g=s.CMapReaderFactory||(gi?jyt:GH),w=jC(s.iccUrl),v=jC(s.standardFontDataUrl),b=s.StandardFontDataFactory||(gi?$yt:qH),x=jC(s.wasmUrl),E=s.WasmFactory||(gi?Byt:KH),T=s.stopAtErrors!==!0,P=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,R=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!gi,M=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!gi&&(us.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,L=typeof s.disableFontFace=="boolean"?s.disableFontFace:gi,$=s.fontExtraProperties===!0,U=s.enableXfa===!0,I=s.ownerDocument||globalThis.document,H=s.disableRange===!0,N=s.disableStream===!0,j=s.disableAutoFetch===!0,F=s.pdfBug===!0,O=s.CanvasFactory||(gi?Fyt:Lyt),V=s.FilterFactory||(gi?Oyt:Nyt),X=s.enableHWA===!0,z=s.useWasm!==!1,W=c?c.length:s.length??NaN,et=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!gi&&!L,wt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(g===GH&&b===qH&&E===KH&&p&&v&&x&&SA(p,document.baseURI)&&SA(v,document.baseURI)&&SA(x,document.baseURI)),ft=null;lyt(d);const q={canvasFactory:new O({ownerDocument:I,enableHWA:X}),filterFactory:new V({docId:e,ownerDocument:I}),cMapReaderFactory:wt?null:new g({baseUrl:p,isCompressed:m}),standardFontDataFactory:wt?null:new b({baseUrl:v}),wasmFactory:wt?null:new E({baseUrl:x})};h||(h=_k.create({verbosity:d,port:ql.workerPort}),t._worker=h);const Se={docId:e,apiVersion:"5.4.296",data:i,password:a,disableAutoFetch:j,rangeChunkSize:u,length:W,docBaseUrl:f,enableXfa:U,evaluatorOptions:{maxImageSize:P,disableFontFace:L,ignoreErrors:T,isEvalSupported:k,isOffscreenCanvasSupported:R,isImageDecoderSupported:M,canvasMaxAreaInBytes:D,fontExtraProperties:$,useSystemFonts:et,useWasm:z,useWorkerFetch:wt,cMapUrl:p,iccUrl:w,standardFontDataUrl:v,wasmUrl:x}},Qt={ownerDocument:I,pdfBug:F,styleElement:ft,loadingParams:{disableAutoFetch:j,enableXfa:U}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const _e=h.messageHandler.sendWithPromise("GetDocRequest",Se,i?[i.buffer]:null);let Lt;if(c)Lt=new rvt(c,{disableRange:H,disableStream:N});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Is=SA(n)?cvt:gi?wvt:pvt;Lt=new Is({url:n,length:W,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:H,disableStream:N})}return _e.then(Is=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Wt=new kA(e,Is,h.port),Jt=new Tvt(Wt,t,Lt,Qt,q,X);t._transport=Jt,Wt.send("Ready",null)})}).catch(t._capability.reject),t}var Xp,Vk;let _vt=(Xp=class{constructor(){B(this,"_capability",Promise.withResolvers());B(this,"_transport",null);B(this,"_worker",null);B(this,"docId",`d${$t(Xp,Vk)._++}`);B(this,"destroyed",!1);B(this,"onPassword",null);B(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}},Vk=new WeakMap,A(Xp,Vk,0),Xp);var Yp,g_,m_,y_,v_,lz;let Jj=(lz=class{constructor(t,e,n=!1,i=null){A(this,Yp,Promise.withResolvers());A(this,g_,[]);A(this,m_,[]);A(this,y_,[]);A(this,v_,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){l(this,v_).push(t)}addProgressListener(t){l(this,y_).push(t)}addProgressiveReadListener(t){l(this,m_).push(t)}addProgressiveDoneListener(t){l(this,g_).push(t)}onDataRange(t,e){for(const n of l(this,v_))n(t,e)}onDataProgress(t,e){l(this,Yp).promise.then(()=>{for(const n of l(this,y_))n(t,e)})}onDataProgressiveRead(t){l(this,Yp).promise.then(()=>{for(const e of l(this,m_))e(t)})}onDataProgressiveDone(){l(this,Yp).promise.then(()=>{for(const t of l(this,g_))t()})}transportReady(){l(this,Yp).resolve()}requestDataRange(t,e){Ae("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Yp=new WeakMap,g_=new WeakMap,m_=new WeakMap,y_=new WeakMap,v_=new WeakMap,lz),Evt=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}};var $c,Qp,OA,cz;let Cvt=(cz=class{constructor(t,e,n,i=!1){A(this,Qp);A(this,$c,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new jH:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new pX,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new Wj({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:r=Gl.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:m=null}){var M,D,L;(M=this._stats)==null||M.time("Overall");const g=this._transport.getRenderingIntent(i,r,d,f),{renderingIntent:w,cacheKey:v}=g;y(this,$c,!1),c||(c=this._transport.getOptionalContentConfig(w));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const x=!!(w&Mr.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(g));const E=!!(this._pdfBug&&((L=globalThis.StepperManager)!=null&&L.enabled)),T=!this.recordedBBoxes&&(p||E),P=$=>{var U,I;if(b.renderTasks.delete(k),T){const H=(U=k.gfx)==null?void 0:U.dependencyTracker.take();H&&(k.stepper&&k.stepper.setOperatorBBoxes(H,k.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=H))}x&&y(this,$c,!0),S(this,Qp,OA).call(this),$?(k.capability.reject($),this._abortOperatorList({intentState:b,reason:$ instanceof Error?$:new Error($)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new kvt({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:T?new Vyt(e,b.operatorList.length,E):null,viewport:n,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:m});(b.renderTasks||(b.renderTasks=new Set)).add(k);const R=k.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([$,U])=>{var I;if(this.destroyed){P();return}if((I=this._stats)==null||I.time("Rendering"),!(U.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:$,optionalContentConfig:U}),k.operatorListChanged()}).catch(P),R}getOperatorList({intent:t="display",annotationMode:e=Gl.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,n,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>YL.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){o.read().then(function({value:c,done:u}){if(u){n(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),y(this,$c,!1),Promise.all(t)}cleanup(t=!1){y(this,$c,!0);const e=S(this,Qp,OA).call(this);return t&&e&&this._stats&&(this._stats=new jH),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&S(this,Qp,OA).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,Qp,OA).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof lM){let i=Svt;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new qu(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}},$c=new WeakMap,Qp=new WeakSet,OA=function(){if(!l(this,$c)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,$c,!1),!0},cz);var td,ia,Bc,Jp,ve,Hk,Zp,tg,vi,RT,wX,bX,FA,Tw,MT;let _k=(ve=class{constructor({name:t=null,port:e=null,verbosity:n=cyt()}={}){A(this,vi);A(this,td,Promise.withResolvers());A(this,ia,null);A(this,Bc,null);A(this,Jp,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(l(ve,tg).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(ve,tg).set(e,this),S(this,vi,wX).call(this,e)}else S(this,vi,bX).call(this)}get promise(){return l(this,td).promise}get port(){return l(this,Bc)}get messageHandler(){return l(this,ia)}destroy(){var t,e;this.destroyed=!0,(t=l(this,Jp))==null||t.terminate(),y(this,Jp,null),l(ve,tg).delete(l(this,Bc)),y(this,Bc,null),(e=l(this,ia))==null||e.destroy(),y(this,ia,null)}static create(t){const e=l(this,tg).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ve(t)}static get workerSrc(){if(ql.workerSrc)return ql.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Rt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Tw,MT)?l(this,Tw,MT):(await import(this.workerSrc)).WorkerMessageHandler)())}},td=new WeakMap,ia=new WeakMap,Bc=new WeakMap,Jp=new WeakMap,Hk=new WeakMap,Zp=new WeakMap,tg=new WeakMap,vi=new WeakSet,RT=function(){l(this,td).resolve(),l(this,ia).send("configure",{verbosity:this.verbosity})},wX=function(t){y(this,Bc,t),y(this,ia,new kA("main","worker",t)),l(this,ia).on("ready",()=>{}),S(this,vi,RT).call(this)},bX=function(){if(l(ve,Zp)||l(ve,Tw,MT)){S(this,vi,FA).call(this);return}let{workerSrc:t}=ve;try{ve._isSameOrigin(window.location,t)||(t=ve._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new kA("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?l(this,td).reject(new Error("Worker was destroyed")):S(this,vi,FA).call(this)},r=new AbortController;e.addEventListener("error",()=>{l(this,Jp)||i()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}y(this,ia,n),y(this,Bc,e),y(this,Jp,e),S(this,vi,RT).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{S(this,vi,FA).call(this)}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{aM("The worker has been disabled.")}S(this,vi,FA).call(this)},FA=function(){l(ve,Zp)||(St("Setting up fake worker."),y(ve,Zp,!0)),ve._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,td).reject(new Error("Worker was destroyed"));return}const e=new Iyt;y(this,Bc,e);const n=`fake${$t(ve,Hk)._++}`,i=new kA(n+"_worker",n,e);t.setup(i,e),y(this,ia,new kA(n,n+"_worker",e)),S(this,vi,RT).call(this)}).catch(t=>{l(this,td).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Tw=new WeakSet,MT=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(ve,Tw),A(ve,Hk,0),A(ve,Zp,!1),A(ve,tg,new WeakMap),gi&&(y(ve,Zp,!0),ql.workerSrc||(ql.workerSrc="./pdf.worker.mjs")),ve._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},ve._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ve.fromPort=t=>{if(vyt("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ve.create(t)},ve);var Uc,pl,Pw,kw,Vc,eg,jA,uz;let Tvt=(uz=class{constructor(t,e,n,i,r,o){A(this,eg);A(this,Uc,new Map);A(this,pl,new Map);A(this,Pw,new Map);A(this,kw,new Map);A(this,Vc,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new pX,this.fontLoader=new Pyt({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Rt(this,"annotationStorage",new Kj)}getRenderingIntent(t,e=Gl.ENABLE,n=null,i=!1,r=!1){let o=Mr.DISPLAY,a=pN;switch(t){case"any":o=Mr.ANY;break;case"display":break;case"print":o=Mr.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Mr.PRINT&&n instanceof QK?n:this.annotationStorage;switch(e){case Gl.DISABLE:o+=Mr.ANNOTATIONS_DISABLE;break;case Gl.ENABLE:break;case Gl.ENABLE_FORMS:o+=Mr.ANNOTATIONS_FORMS;break;case Gl.ENABLE_STORAGE:o+=Mr.ANNOTATIONS_STORAGE,a=c.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=Mr.IS_EDITING),r&&(o+=Mr.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,Vc))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of l(this,pl).values())t.push(i._destroy());l(this,pl).clear(),l(this,Pw).clear(),l(this,kw).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Uc).clear(),this.filterFactory.destroy(),fS.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new qu("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Vt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,i)=>{Vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Vt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new Evt(n,this))}),t.on("DocException",n=>{e._capability.reject(ki(n))}),t.on("PasswordRequest",n=>{y(this,Vc,Promise.withResolvers());try{if(!e.onPassword)throw ki(n);const i=r=>{r instanceof Error?l(this,Vc).reject(r):l(this,Vc).resolve({password:r})};e.onPassword(i,n.code)}catch(i){l(this,Vc).reject(i)}return l(this,Vc).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,pl).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in r){const d=r.error;St(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const a=new _N(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new kyt(a,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:h}=r;Vt(h,"The imageRef must be defined.");for(const d of l(this,pl).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,o])=>{var c;if(this.destroyed)return;const a=l(this,pl).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,Pw).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,kw).set(r.refStr,t);const o=new Cvt(e,r,this,this._params.pdfBug);return l(this,pl).set(e,o),o});return l(this,Pw).set(e,i),i}getPageIndex(t){return gN(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,eg,jA).call(this,"GetFieldObjects")}hasJSActions(){return S(this,eg,jA).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return S(this,eg,jA).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,eg,jA).call(this,"GetOptionalContentConfig").then(e=>new ivt(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,Uc).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new nvt(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Uc).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,pl).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,Uc).clear(),this.filterFactory.destroy(!0),fS.cleanup()}}cachedPageNumber(t){if(!gN(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,kw).get(e)??null}},Uc=new WeakMap,pl=new WeakMap,Pw=new WeakMap,kw=new WeakMap,Vc=new WeakMap,eg=new WeakSet,jA=function(t,e=null){const n=l(this,Uc).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return l(this,Uc).set(t,i),i},uz);var ed,hz;let Pvt=(hz=class{constructor(t){A(this,ed,null);B(this,"onContinue",null);B(this,"onError",null);y(this,ed,t)}get promise(){return l(this,ed).capability.promise}cancel(t=0){l(this,ed).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,ed).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,ed);return t.form||t.canvas&&(e==null?void 0:e.size)>0}},ed=new WeakMap,hz);var nd,Yl,ng;let kvt=(Yl=class{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:m=null}){A(this,nd,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Pvt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,u;if(this.cancelled)return;if(this._canvas){if(l(Yl,ng).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Yl,ng).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:r,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new CT(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var n,i,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,nd)&&(window.cancelAnimationFrame(l(this,nd)),y(this,nd,null)),l(Yl,ng).delete(this._canvas),t||(t=new lM(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(i=this.task).onError)==null||r.call(i,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,nd,window.requestAnimationFrame(()=>{y(this,nd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Yl,ng).delete(this._canvas),this.callback())))}},nd=new WeakMap,ng=new WeakMap,A(Yl,ng,new WeakSet),Yl);const AX="5.4.296",xX="f56dc8601";var ar,sg,Rw,$n,w_,Mw,Hc,b_,sd,ra,Cs,A_,fe,kN,RN,MN,qf,SX,ph;let Zj=(Cs=class{constructor({editor:t=null,uiManager:e=null}){A(this,fe);A(this,ar,null);A(this,sg,null);A(this,Rw);A(this,$n,null);A(this,w_,!1);A(this,Mw,!1);A(this,Hc,null);A(this,b_);A(this,sd,null);A(this,ra,null);var n,i;t?(y(this,Mw,!1),y(this,Hc,t)):y(this,Mw,!0),y(this,ra,(t==null?void 0:t._uiManager)||e),y(this,b_,l(this,ra)._eventBus),y(this,Rw,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((i=l(this,ra))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(Cs,A_)||y(Cs,A_,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Rt(this,"_keyboardManager",new Y1([[["Escape","mac+Escape"],Cs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cs.prototype._moveToPrevious],[["Home","mac+Home"],Cs.prototype._moveToBeginning],[["End","mac+End"],Cs.prototype._moveToEnd]]))}renderButton(){const t=y(this,ar,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,Hc)&&(t.ariaControls=`${l(this,Hc).id}_colorpicker_dropdown`);const e=l(this,ra)._signal;t.addEventListener("click",S(this,fe,qf).bind(this),{signal:e}),t.addEventListener("keydown",S(this,fe,MN).bind(this),{signal:e});const n=y(this,sg,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,Rw),t.append(n),t}renderMainDropdown(){const t=y(this,$n,S(this,fe,kN).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,ar)){S(this,fe,qf).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,fe,RN).call(this,e,t)}_moveToNext(t){var e,n;if(!l(this,fe,ph)){S(this,fe,qf).call(this,t);return}if(t.target===l(this,ar)){(e=l(this,$n).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=l(this,$n))==null?void 0:e.firstChild)||t.target===l(this,ar)){l(this,fe,ph)&&this._hideDropdownFromKeyboard();return}l(this,fe,ph)||S(this,fe,qf).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!l(this,fe,ph)){S(this,fe,qf).call(this,t);return}(e=l(this,$n).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,fe,ph)){S(this,fe,qf).call(this,t);return}(e=l(this,$n).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,$n))==null||t.classList.add("hidden"),l(this,ar).ariaExpanded="false",(e=l(this,sd))==null||e.abort(),y(this,sd,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,Mw)){if(!l(this,fe,ph)){(t=l(this,Hc))==null||t.unselect();return}this.hideDropdown(),l(this,ar).focus({preventScroll:!0,focusVisible:l(this,w_)})}}updateColor(t){if(l(this,sg)&&(l(this,sg).style.backgroundColor=t),!l(this,$n))return;const e=l(this,ra).highlightColors.values();for(const n of l(this,$n).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=l(this,ar))==null||t.remove(),y(this,ar,null),y(this,sg,null),(e=l(this,$n))==null||e.remove(),y(this,$n,null)}},ar=new WeakMap,sg=new WeakMap,Rw=new WeakMap,$n=new WeakMap,w_=new WeakMap,Mw=new WeakMap,Hc=new WeakMap,b_=new WeakMap,sd=new WeakMap,ra=new WeakMap,A_=new WeakMap,fe=new WeakSet,kN=function(){const t=document.createElement("div"),e=l(this,ra)._signal;t.addEventListener("contextmenu",Xr,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Hc)&&(t.id=`${l(this,Hc).id}_colorpicker_dropdown`);for(const[n,i]of l(this,ra).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",l(Cs,A_)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===l(this,Rw),r.addEventListener("click",S(this,fe,RN).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",S(this,fe,MN).bind(this),{signal:e}),t},RN=function(t,e){e.stopPropagation(),l(this,b_).dispatch("switchannotationeditorparams",{source:this,type:Bt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},MN=function(t){Cs._keyboardManager.exec(this,t)},qf=function(t){if(l(this,fe,ph)){this.hideDropdown();return}if(y(this,w_,t.detail===0),l(this,sd)||(y(this,sd,new AbortController),window.addEventListener("pointerdown",S(this,fe,SX).bind(this),{signal:l(this,ra).combinedSignal(l(this,sd))})),l(this,ar).ariaExpanded="true",l(this,$n)){l(this,$n).classList.remove("hidden");return}const e=y(this,$n,S(this,fe,kN).call(this));l(this,ar).append(e)},SX=function(t){var e;(e=l(this,$n))!=null&&e.contains(t.target)||this.hideDropdown()},ph=function(){return l(this,$n)&&!l(this,$n).classList.contains("hidden")},A(Cs,A_,null),Cs);var gl,x_,Dw,S_;const ep=class ep{constructor(t){A(this,gl,null);A(this,x_,null);A(this,Dw,null);y(this,x_,t),y(this,Dw,t._uiManager),l(ep,S_)||y(ep,S_,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,gl))return l(this,gl);const{editorType:t,colorType:e,colorValue:n}=l(this,x_),i=y(this,gl,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(ep,S_)[t]),i.addEventListener("input",()=>{l(this,Dw).updateParams(e,i.value)},{signal:l(this,Dw)._signal}),i}update(t){l(this,gl)&&(l(this,gl).value=t)}destroy(){var t;(t=l(this,gl))==null||t.remove(),y(this,gl,null)}hideDropdown(){}};gl=new WeakMap,x_=new WeakMap,Dw=new WeakMap,S_=new WeakMap,A(ep,S_,null);let Ek=ep;function a3(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function lA(s){return Math.max(0,Math.min(255,255*s))}let l3=class{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=lA(t),[t,t,t]}static G_HTML([t]){const e=a3(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(lA)}static RGB_HTML(t){return`#${t.map(a3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[lA(1-Math.min(1,t+i)),lA(1-Math.min(1,n+i)),lA(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}},Rvt=class{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ae("Abstract method `_createSVG` called.")}},pS=class extends Rvt{_createSVG(t){return document.createElementNS(cc,t)}};const Mvt=9,Gm=new WeakSet,Dvt=new Date().getTimezoneOffset()*60*1e3;let c3=class{static create(t){switch(t.data.annotationType){case mn.LINK:return new t$(t);case mn.TEXT:return new Lvt(t);case mn.WIDGET:switch(t.data.fieldType){case"Tx":return new Nvt(t);case"Btn":return t.data.radioButton?new CX(t):t.data.checkBox?new Fvt(t):new jvt(t);case"Ch":return new $vt(t);case"Sig":return new Ovt(t)}return new oy(t);case mn.POPUP:return new IN(t);case mn.FREETEXT:return new MX(t);case mn.LINE:return new Uvt(t);case mn.SQUARE:return new Vvt(t);case mn.CIRCLE:return new Hvt(t);case mn.POLYLINE:return new DX(t);case mn.CARET:return new Wvt(t);case mn.INK:return new e$(t);case mn.POLYGON:return new zvt(t);case mn.HIGHLIGHT:return new IX(t);case mn.UNDERLINE:return new Gvt(t);case mn.SQUIGGLY:return new qvt(t);case mn.STRIKEOUT:return new Kvt(t);case mn.STAMP:return new LX(t);case mn.FILEATTACHMENT:return new Xvt(t);default:return new Sn(t)}}};var ig,Iw,fo,__,DN,Lw;let Sn=(Lw=class{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){A(this,__);A(this,ig,null);A(this,Iw,!1);A(this,fo,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Lw._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const t=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let r=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],r=e[c+2]):e[c+1]===o&&(r=Math.max(r,e[c+2]));return[r,o]}if((n==null?void 0:n.length)>=1){for(const c of n)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-o)/i,t}get commentText(){var e,n,i;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${hS}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((i=t.contentsObj)==null?void 0:i.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${hS}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=l(this,fo))==null?void 0:t.popup)||this.popup)==null||e.remove(),y(this,fo,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(l(this,ig)||y(this,ig,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&S(this,__,DN).call(this,e);let i=((r=l(this,fo))==null?void 0:r.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=l(this,fo).popup),i&&(i.updateEdited(t),n!=null&&n.deleted&&(i.remove(),y(this,fo,null),this.popup=null))}resetEdited(){var t;l(this,ig)&&(S(this,__,DN).call(this,l(this,ig).rect),(t=l(this,fo))==null||t.popup.resetEdited(),y(this,ig,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof oy)&&!(this instanceof t$)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof IN){const{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:a,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const g=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(g>0||w>0){const b=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof CX){const b=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(e.borderStyle.style){case Ty.SOLID:o.borderStyle="solid";break;case Ty.DASHED:o.borderStyle="dashed";break;case Ty.BEVELED:St("Unimplemented border style: beveled");break;case Ty.INSET:St("Unimplemented border style: inset");break;case Ty.UNDERLINE:o.borderBottomStyle="solid";break}const v=e.borderColor||null;v?(y(this,Iw,!0),o.borderColor=rt.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=rt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[n]=l3[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:l3[`${o}_rgb`](a)})};return Rt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){const[g,w,v,b]=t.subarray(2,6);if(i===g&&r===w&&e===v&&n===b)return}const{style:o}=this.container;let a;if(l(this,Iw)){const{borderColor:g,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,w=t.length;g<w;g+=8){const v=t[g],b=t[g+1],x=t[g+2],E=t[g+3],T=h.createElement("rect"),P=(x-e)/c,k=(r-b)/u,R=(v-x)/c,M=(b-E)/u;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",R),T.setAttribute("height",M),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${R}" height="${M}"/>`)}l(this,Iw)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate);const r=y(this,fo,new IN({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(l(this,fo)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,fo)}render(){Ae("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Gm.has(u)){St(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&Gm.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},ig=new WeakMap,Iw=new WeakMap,fo=new WeakMap,__=new WeakSet,DN=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)},Lw);class Ivt extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Or,Kf,_X,EX,dz;let t$=(dz=class extends Sn{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});A(this,Or);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),r=!0):e.attachment?(S(this,Or,_X).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(S(this,Or,EX).call(this,i,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&S(this,Or,Kf).call(this),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),S(this,Or,Kf).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=i.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),S(this,Or,Kf).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),S(this,Or,Kf).call(this),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:g}of m)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Gm.has(m)){St(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}},Or=new WeakSet,Kf=function(){this.container.setAttribute("data-internal-link","")},_X=function(e,n,i="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},S(this,Or,Kf).call(this)},EX=function(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),S(this,Or,Kf).call(this)},dz),Lvt=class extends Sn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},oy=class extends Sn{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return us.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var a;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,n,i){var r,o,a;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":rt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Mvt,r=t.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(BD*i))||1,d=u/h;o=Math.min(i,c(d/BD))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(u/BD))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=rt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},Nvt=class extends oy{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Gm.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,m=!!f&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";n.value=h.userValue=v,h.formattedValue=null});let g=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var x;if(h.focused)return;const{target:b}=v;if(m&&(b.type=f,p&&(b.step=p)),h.userValue){const E=h.userValue;if(m)if(f==="time"){const T=new Date(E),P=[T.getHours(),T.getMinutes(),T.getSeconds()];b.value=P.map(k=>k.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-Dvt).toISOString().split(f==="date"?"T":".",1)[0];else b.value=E}h.lastCommittedValue=b.value,h.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(x){h.userValue=x.detail.value??"",m||t.setValue(e,{value:h.userValue.toString()}),x.target.value=h.userValue},formattedValue(x){const{formattedValue:E}=x.detail;h.formattedValue=E,E!=null&&x.target!==document.activeElement&&(x.target.value=E);const T={formattedValue:E};m&&(T.value=E),t.setValue(e,T)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var k;const{charLimit:E}=x.detail,{target:T}=x;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let P=h.userValue;!P||P.length<=E||(P=P.slice(0,E),T.value=h.userValue=P,t.setValue(e,{value:P}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),n.addEventListener("keydown",v=>{var E;h.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:x}=v.target;h.lastCommittedValue!==x&&(h.lastCommittedValue=x,h.userValue=x,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=g;g=null,n.addEventListener("blur",v=>{var E,T;if(!h.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:b}=v;let{value:x}=b;if(m){if(x&&f==="time"){const P=x.split(":").map(k=>parseInt(k,10));x=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),b.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();b.type="text"}h.userValue=x,h.lastCommittedValue!==x&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",v=>{var M;h.lastCommittedValue=null;const{data:b,target:x}=v,{value:E,selectionStart:T,selectionEnd:P}=x;let k=T,R=P;switch(v.inputType){case"deleteWordBackward":{const D=E.substring(0,T).match(/\w*[^\w]*$/);D&&(k-=D[0].length);break}case"deleteWordForward":{const D=E.substring(T).match(/^[^\w]*\w*/);D&&(R+=D[0].length);break}case"deleteContentBackward":T===P&&(k-=1);break;case"deleteContentForward":T===P&&(R+=1);break}v.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:k,selEnd:R}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Ovt=class extends oy{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},Fvt=class extends oy{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Gm.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},CX=class extends oy{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Gm.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},jvt=class extends t${constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}},$vt=class extends oy{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Gm.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=m.has(g.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:g}=f.detail.insert,w=i.children[p],v=document.createElement("option");v.textContent=m,v.value=g,w?w.before(v):i.append(v),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:g,exportValue:w}=m,v=document.createElement("option");v.textContent=g,v.value=w,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}};var E_,LN,fz;let IN=(fz=class extends Sn{constructor(e){const{data:n,elements:i,parent:r}=e,o=!!r._commentManager;super(e,{isRenderable:!o&&Sn._hasPopupData(n)});A(this,E_);if(this.elements=i,o&&Sn._hasPopupData(n)){const a=this.popup=S(this,E_,LN).call(this);for(const c of i)c.popup=a}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=S(this,E_,LN).call(this),i=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Hj}${r}`).join(",")),this.container}},E_=new WeakSet,LN=function(){return new Bvt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})},fz);var lr,id,zk,Wk,Nw,Ow,ln,ml,rd,rg,Fw,jw,yl,cr,zc,Wc,Xn,Gc,od,C_,qc,$w,og,ad,Ws,ld,Dt,DT,NN,ON,FN,IT,jN,TX,PX,kX,RX,LT,NT,$N,pz;let Bvt=(pz=class{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){A(this,Dt);A(this,lr,null);A(this,id,S(this,Dt,kX).bind(this));A(this,zk,S(this,Dt,$N).bind(this));A(this,Wk,S(this,Dt,NT).bind(this));A(this,Nw,S(this,Dt,LT).bind(this));A(this,Ow,null);A(this,ln,null);A(this,ml,null);A(this,rd,null);A(this,rg,null);A(this,Fw,null);A(this,jw,null);A(this,yl,!1);A(this,cr,null);A(this,zc,null);A(this,Wc,null);A(this,Xn,null);A(this,Gc,null);A(this,od,null);A(this,C_,null);A(this,qc,null);A(this,$w,null);A(this,og,null);A(this,ad,!1);A(this,Ws,null);A(this,ld,null);y(this,ln,t),y(this,$w,i),y(this,ml,o),y(this,qc,a),y(this,Fw,c),y(this,Ow,e),y(this,C_,u),y(this,jw,h),y(this,rg,n),y(this,lr,f),y(this,Ws,n[0]),y(this,rd,wk.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(S(this,Dt,DT).call(this),l(this,ln).hidden=!0,d&&S(this,Dt,LT).call(this))}renderCommentButton(){if(l(this,Xn)||(l(this,Gc)||S(this,Dt,NN).call(this),!l(this,Gc)))return;const{signal:t}=y(this,zc,new AbortController),e=!!l(this,Ws).extraPopupElement,n=()=>{l(this,lr).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{l(this,lr).toggleCommentPopup(this,!1,!0,!e)},r=()=>{l(this,lr).toggleCommentPopup(this,!1,!1)};if(e){y(this,Xn,l(this,Ws).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,id),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=y(this,Xn,document.createElement("button"));o.className="annotationCommentButton";const a=l(this,Ws).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),S(this,Dt,FN).call(this),S(this,Dt,ON).call(this),o.addEventListener("keydown",l(this,id),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",i,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),a.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,Ws).commentData;return t?l(this,Fw)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=l(this,Xn))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}=l(this,Ws).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return l(this,Xn)}get comment(){return l(this,ld)||y(this,ld,l(this,Ws).commentText),l(this,ld)}set comment(t){t!==this.comment&&(l(this,Ws).commentText=y(this,ld,t))}get parentBoundingClientRect(){return l(this,Ws).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Xn)&&(l(this,Xn).classList.toggle("selected",t),l(this,Xn).ariaExpanded=e)}setSelectedCommentButton(t){l(this,Xn).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,od))return l(this,od);const{x:t,y:e,height:n}=l(this,Xn).getBoundingClientRect(),{x:i,y:r,width:o,height:a}=l(this,Ws).layer.getBoundingClientRect();return[(t-i)/o,(e+n-r)/a]}set commentPopupPosition(t){y(this,od,t)}hasDefaultPopupPosition(){return l(this,od)===null}get commentButtonPosition(){return l(this,Gc)}get commentButtonWidth(){return l(this,Xn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=l(this,od)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:r,y:o,width:a,height:c}=i;l(this,lr).showDialog(null,this,r+e*a,o+n*c,{...t,parentDimensions:i})}render(){var n,i;if(l(this,cr))return;const t=y(this,cr,document.createElement("div"));if(t.className="popup",l(this,Ow)){const r=t.style.outlineColor=rt.makeHexColor(...l(this,Ow));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=l(this,$w))!=null&&n.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=l(this,$w)}if(t.append(e),l(this,rd)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,rd).valueOf()})),r.dateTime=l(this,rd).toISOString(),e.append(r)}Gj({html:l(this,Dt,IT)||l(this,ml).str,dir:(i=l(this,ml))==null?void 0:i.dir,className:"popupContent"},t),l(this,ln).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var i;if(l(this,lr)){n?(this.remove(),y(this,ld,null)):e&&(e.deleted?this.remove():(S(this,Dt,FN).call(this),y(this,ld,e.text))),t&&(y(this,Gc,null),S(this,Dt,NN).call(this),S(this,Dt,ON).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}S(this,Dt,DT).call(this),l(this,og)||y(this,og,{contentsObj:l(this,ml),richText:l(this,qc)}),t&&y(this,Wc,null),e&&e.text&&(y(this,qc,S(this,Dt,PX).call(this,e.text)),y(this,rd,wk.toDateObject(e.date)),y(this,ml,null)),(i=l(this,cr))==null||i.remove(),y(this,cr,null)}resetEdited(){var t;l(this,og)&&({contentsObj:$t(this,ml)._,richText:$t(this,qc)._}=l(this,og),y(this,og,null),(t=l(this,cr))==null||t.remove(),y(this,cr,null),y(this,Wc,null))}remove(){var t,e,n;if((t=l(this,zc))==null||t.abort(),y(this,zc,null),(e=l(this,cr))==null||e.remove(),y(this,cr,null),y(this,ad,!1),y(this,yl,!1),(n=l(this,Xn))==null||n.remove(),y(this,Xn,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){y(this,ad,this.isVisible),l(this,ad)&&(l(this,ln).hidden=!0)}maybeShow(){l(this,lr)||(S(this,Dt,DT).call(this),l(this,ad)&&(l(this,cr)||S(this,Dt,NT).call(this),y(this,ad,!1),l(this,ln).hidden=!1))}get isVisible(){return l(this,lr)?!1:l(this,ln).hidden===!1}},lr=new WeakMap,id=new WeakMap,zk=new WeakMap,Wk=new WeakMap,Nw=new WeakMap,Ow=new WeakMap,ln=new WeakMap,ml=new WeakMap,rd=new WeakMap,rg=new WeakMap,Fw=new WeakMap,jw=new WeakMap,yl=new WeakMap,cr=new WeakMap,zc=new WeakMap,Wc=new WeakMap,Xn=new WeakMap,Gc=new WeakMap,od=new WeakMap,C_=new WeakMap,qc=new WeakMap,$w=new WeakMap,og=new WeakMap,ad=new WeakMap,Ws=new WeakMap,ld=new WeakMap,Dt=new WeakSet,DT=function(){var e;if(l(this,zc))return;y(this,zc,new AbortController);const{signal:t}=l(this,zc);for(const n of this.trigger)n.addEventListener("click",l(this,Nw),{signal:t}),n.addEventListener("pointerenter",l(this,Wk),{signal:t}),n.addEventListener("pointerleave",l(this,zk),{signal:t}),n.classList.add("popupTriggerArea");for(const n of l(this,rg))(e=n.container)==null||e.addEventListener("keydown",l(this,id),{signal:t})},NN=function(){const t=l(this,rg).find(e=>e.hasCommentButton);t&&y(this,Gc,t._normalizePoint(t.commentButtonPosition))},ON=function(){if(l(this,Ws).extraPopupElement&&!l(this,Ws).editor)return;this.renderCommentButton();const[t,e]=l(this,Gc),{style:n}=l(this,Xn);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},FN=function(){l(this,Ws).extraPopupElement||(this.renderCommentButton(),l(this,Xn).style.backgroundColor=this.commentButtonColor||"")},IT=function(){const t=l(this,qc),e=l(this,ml);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,qc).html||null},jN=function(){var t,e,n;return((n=(e=(t=l(this,Dt,IT))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},TX=function(){var t,e,n;return((n=(e=(t=l(this,Dt,IT))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},PX=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,Dt,TX),fontSize:l(this,Dt,jN)?`calc(${l(this,Dt,jN)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},kX=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,yl))&&S(this,Dt,LT).call(this)},RX=function(){if(l(this,Wc)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=l(this,Fw);let o=!!l(this,jw),a=o?l(this,jw):l(this,C_);for(const m of l(this,rg))if(!a||rt.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=rt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=o?a[2]-a[0]+5:0,d=c[0]+h,f=c[1];y(this,Wc,[100*(d-i)/e,100*(f-r)/n]);const{style:p}=l(this,ln);p.left=`${l(this,Wc)[0]}%`,p.top=`${l(this,Wc)[1]}%`},LT=function(){if(l(this,lr)){l(this,lr).toggleCommentPopup(this,!1);return}y(this,yl,!l(this,yl)),l(this,yl)?(S(this,Dt,NT).call(this),l(this,ln).addEventListener("click",l(this,Nw)),l(this,ln).addEventListener("keydown",l(this,id))):(S(this,Dt,$N).call(this),l(this,ln).removeEventListener("click",l(this,Nw)),l(this,ln).removeEventListener("keydown",l(this,id)))},NT=function(){l(this,cr)||this.render(),this.isVisible?l(this,yl)&&l(this,ln).classList.add("focused"):(S(this,Dt,RX).call(this),l(this,ln).hidden=!1,l(this,ln).style.zIndex=parseInt(l(this,ln).style.zIndex)+1e3)},$N=function(){l(this,ln).classList.remove("focused"),!(l(this,yl)||!this.isVisible)&&(l(this,ln).hidden=!0,l(this,ln).style.zIndex=parseInt(l(this,ln).style.zIndex)-1e3)},pz),MX=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=xt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}};var T_,gz;let Uvt=(gz=class extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,T_,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),o=y(this,T_,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,T_)}addHighlightArea(){this.container.classList.add("highlightArea")}},T_=new WeakMap,gz);var P_,mz;let Vvt=(mz=class extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,P_,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=y(this,P_,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,P_)}addHighlightArea(){this.container.classList.add("highlightArea")}},P_=new WeakMap,mz);var k_,yz;let Hvt=(yz=class extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,k_,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=y(this,k_,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,k_)}addHighlightArea(){this.container.classList.add("highlightArea")}},k_=new WeakMap,yz);var R_,vz;let DX=(vz=class extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,R_,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r},width:o,height:a}=this;if(!n)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],m=e[3]-n[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=y(this,R_,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,R_)}addHighlightArea(){this.container.classList.add("highlightArea")}},R_=new WeakMap,vz),zvt=class extends DX{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Wvt=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}};var M_,ag,D_,BN,wz;let e$=(wz=class extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,D_);A(this,M_,null);A(this,ag,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xt.HIGHLIGHT:xt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:c,height:u}=S(this,D_,BN).call(this,n,e),h=this.svgFactory.create(c,u,!0),d=y(this,M_,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);l(this,ag).push(m),m.setAttribute("points",i[f].join(",")),d.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,o=l(this,M_);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let a=0,c=l(this,ag).length;a<c;a++)l(this,ag)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:c,height:u}=S(this,D_,BN).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,ag)}addHighlightArea(){this.container.classList.add("highlightArea")}},M_=new WeakMap,ag=new WeakMap,D_=new WeakSet,BN=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}},wz),IX=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}},Gvt=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}},qvt=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}},Kvt=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}},LX=class extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}};var I_,L_,UN,bz;let Xvt=(bz=class extends Sn{constructor(e){var i;super(e,{isRenderable:!0});A(this,L_);A(this,I_,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",S(this,L_,UN).bind(this)),y(this,I_,i);const{isMac:r}=us.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,L_,UN).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,I_)}addHighlightArea(){this.container.classList.add("highlightArea")}},I_=new WeakMap,L_=new WeakSet,UN=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)},bz);var Bw,lg,Uw,cd,N_,cg,Ef,VN,HN,Vw;let n$=(Vw=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:h}){A(this,Ef);A(this,Bw,null);A(this,lg,null);A(this,Uw,null);A(this,cd,new Map);A(this,N_,null);A(this,cg,null);this.div=t,y(this,Bw,e),y(this,lg,n),y(this,N_,a||null),y(this,cg,u||null),y(this,Uw,h||new Kj),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return l(this,cd).size>0}async render(t){var o,a,c;const{annotations:e}=t,n=this.div;bf(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:l(this,cg),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new pS,annotationStorage:l(this,Uw),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===mn.POPUP;if(h){const p=i.get(u.id);if(!p)continue;r.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=c3.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const p=i.get(u.popupRef);p?p.push(d):i.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await S(this,Ef,VN).call(this,f,u.id,r.elements),(a=(o=d.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),d._isEditable&&(l(this,cd).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}S(this,Ef,HN).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,cg),svgFactory:new pS,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Vw._defaultBorderStyle),e.data=n;const i=c3.create(e);if(!i.isRenderable)continue;const r=i.render();await S(this,Ef,VN).call(this,r,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,bf(e,{rotation:t.rotation}),S(this,Ef,HN).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,cd).values())}getEditableAnnotation(t){return l(this,cd).get(t)}addFakeAnnotation(t){var a;const{div:e}=this,{id:n,rotation:i}=t,r=new Ivt({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,cg),annotationStorage:l(this,Uw)}),o=r.render();return e.append(o),(a=l(this,Bw))==null||a.moveElementInDOM(e,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return Rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ty.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Bw=new WeakMap,lg=new WeakMap,Uw=new WeakMap,cd=new WeakMap,N_=new WeakMap,cg=new WeakMap,Ef=new WeakSet,VN=async function(t,e,n){var a,c;const i=t.firstChild||t,r=i.id=`${Hj}${e}`,o=await((a=l(this,N_))==null?void 0:a.getAriaAttributes(r));if(o)for(const[u,h]of o)i.setAttribute(u,h);n?n.at(-1).container.after(t):(this.div.append(t),(c=l(this,Bw))==null||c.moveElementInDOM(this.div,t,i,!1))},HN=function(){var e;if(!l(this,lg))return;const t=this.div;for(const[n,i]of l(this,lg)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const a=l(this,cd).get(n);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}l(this,lg).clear()},Vw);const zC=/\r\n?|\n/g;var ur,O_,ug,hr,de,Dn,NX,OX,FX,OT,Fu,FT,jT,jX,zN,$X;let Yvt=(de=class extends ze{constructor(e){super({...e,name:"freeTextEditor"});A(this,Dn);A(this,ur,"");A(this,O_,`${this.id}-editor`);A(this,ug,null);A(this,hr);B(this,"_colorPicker",null);this.color=e.color||de._defaultColor||ze._defaultLineColor,y(this,hr,e.fontSize||de._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=de.prototype,n=o=>o.isEmpty(),i=Rb.TRANSLATE_SMALL,r=Rb.TRANSLATE_BIG;return Rt(this,"_keyboardManager",new Y1([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){ze.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Bt.FREETEXT_SIZE:de._defaultFontSize=n;break;case Bt.FREETEXT_COLOR:de._defaultColor=n;break}}updateParams(e,n){switch(e){case Bt.FREETEXT_SIZE:S(this,Dn,NX).call(this,n);break;case Bt.FREETEXT_COLOR:S(this,Dn,OX).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.FREETEXT_SIZE,de._defaultFontSize],[Bt.FREETEXT_COLOR,de._defaultColor||ze._defaultLineColor]]}get propertiesToUpdate(){return[[Bt.FREETEXT_SIZE,l(this,hr)],[Bt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ek(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-de._internalPadding*e,-(de._internalPadding+l(this,hr))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,ug,new AbortController);const e=this._uiManager.combinedSignal(l(this,ug));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,O_)),this._isDraggable=!0,(e=l(this,ug))==null||e.abort(),y(this,ug,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,ur),n=y(this,ur,S(this,Dn,FX).call(this).trimEnd());if(e===n)return;const i=r=>{if(y(this,ur,r),!r){this.remove();return}S(this,Dn,jT).call(this),this._uiManager.rebuild(this),S(this,Dn,OT).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),S(this,Dn,OT).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){de._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,O_)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,hr)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,g;switch(this.rotation){case 0:m=e+(a[0]-f)/h,g=n+this.height-(a[1]-p)/d;break;case 90:m=e+(a[0]-f)/h,g=n-(a[1]-p)/d,[c,u]=[u,-c];break;case 180:m=e-this.width+(a[0]-f)/h,g=n-(a[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=e+(a[0]-f-this.height*d)/h,g=n+(a[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,g*o,c,u)}else this._moveAfterPaste(e,n);S(this,Dn,jT).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,g,w;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=S(m=de,Fu,zN).call(m,n.getData("text")||"").replaceAll(zC,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(zC,"")),v!==this.editorDiv){let b=h;for(const x of this.editorDiv.childNodes){if(x===v){b=d;continue}b.push(S(g=de,Fu,FT).call(g,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(zC,""))}else if(c===this.editorDiv){let v=h,b=0;for(const x of this.editorDiv.childNodes)b++===u&&(v=d),v.push(S(w=de,Fu,FT).call(w,x))}y(this,ur,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,Dn,jT).call(this);const f=new Range;let p=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(p<=b){f.setStart(v,p),f.setEnd(v,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=de._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){var a;let r=null;if(e instanceof MX){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p,richText:m,contentsObj:g,creationDate:w,modificationDate:v},textContent:b,textPosition:x,parent:{page:{pageNumber:E}}}=e;if(!b||b.length===0)return null;r=e={annotationType:xt.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:x,pageIndex:E-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(g==null?void 0:g.str)||null,richText:m,creationDate:w,modificationDate:v}}const o=await super.deserialize(e,n,i);return y(o,hr,e.fontSize),o.color=rt.makeHexColor(...e.color),y(o,ur,S(a=de,Fu,zN).call(a,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:l(this,hr),value:S(this,Dn,jX).call(this)});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!S(this,Dn,$X).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${l(this,hr)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const r of l(this,ur).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),n.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,ur)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}},ur=new WeakMap,O_=new WeakMap,ug=new WeakMap,hr=new WeakMap,Dn=new WeakSet,NX=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-l(this,hr))*this.parentScale),y(this,hr,r),S(this,Dn,OT).call(this)},i=l(this,hr);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},OX=function(e){const n=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},FX=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(S(i=de,Fu,FT).call(i,r)),n=r);return e.join(`
`)},OT=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},Fu=new WeakSet,FT=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(zC,"")},jT=function(){if(this.editorDiv.replaceChildren(),!!l(this,ur))for(const e of l(this,ur).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},jX=function(){return l(this,ur).replaceAll(""," ")},zN=function(e){return e.replaceAll(" ","")},$X=function(e){const{value:n,fontSize:i,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},A(de,Fu),B(de,"_freeTextDefaultContent",""),B(de,"_internalPadding",0),B(de,"_defaultColor",null),B(de,"_defaultFontSize",10),B(de,"_type","freetext"),B(de,"_editorType",xt.FREETEXT),de);var sI;let nt=(sI=class{toSVGPath(){Ae("Abstract method `toSVGPath` must be implemented.")}get box(){Ae("Abstract getter `box` must be implemented.")}serialize(t,e){Ae("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a]*i,o[a+1]=n+t[a+1]*r;return o}static _rescaleAndSwap(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a+1]*i,o[a+1]=n+t[a]*r;return o}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,o){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}},B(sI,"PRECISION",1e-4),sI);var dr,oa,Hw,zw,vl,Nt,hg,dg,F_,j_,Ww,Gw,ud,Eo,$_,Gk,qk,Gn,$A,UX,VX,HX,zX,WX,GX;let BX=(Eo=class{constructor({x:t,y:e},n,i,r,o,a=0){A(this,Gn);A(this,dr);A(this,oa,[]);A(this,Hw);A(this,zw);A(this,vl,[]);A(this,Nt,new Float32Array(18));A(this,hg);A(this,dg);A(this,F_);A(this,j_);A(this,Ww);A(this,Gw);A(this,ud,[]);y(this,dr,n),y(this,Gw,r*i),y(this,zw,o),l(this,Nt).set([NaN,NaN,NaN,NaN,t,e],6),y(this,Hw,a),y(this,j_,l(Eo,$_)*i),y(this,F_,l(Eo,qk)*i),y(this,Ww,i),l(this,ud).push(t,e)}isEmpty(){return isNaN(l(this,Nt)[8])}add({x:t,y:e}){var M;y(this,hg,t),y(this,dg,e);const[n,i,r,o]=l(this,dr);let[a,c,u,h]=l(this,Nt).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<l(this,F_))return!1;const m=p-l(this,j_),g=m/p,w=g*d,v=g*f;let b=a,x=c;a=u,c=h,u+=w,h+=v,(M=l(this,ud))==null||M.push(t,e);const E=-v/m,T=w/m,P=E*l(this,Gw),k=T*l(this,Gw);return l(this,Nt).set(l(this,Nt).subarray(2,8),0),l(this,Nt).set([u+P,h+k],4),l(this,Nt).set(l(this,Nt).subarray(14,18),12),l(this,Nt).set([u-P,h-k],16),isNaN(l(this,Nt)[6])?(l(this,vl).length===0&&(l(this,Nt).set([a+P,c+k],2),l(this,vl).push(NaN,NaN,NaN,NaN,(a+P-n)/r,(c+k-i)/o),l(this,Nt).set([a-P,c-k],14),l(this,oa).push(NaN,NaN,NaN,NaN,(a-P-n)/r,(c-k-i)/o)),l(this,Nt).set([b,x,a,c,u,h],6),!this.isEmpty()):(l(this,Nt).set([b,x,a,c,u,h],6),Math.abs(Math.atan2(x-c,b-a)-Math.atan2(v,w))<Math.PI/2?([a,c,u,h]=l(this,Nt).subarray(2,6),l(this,vl).push(NaN,NaN,NaN,NaN,((a+u)/2-n)/r,((c+h)/2-i)/o),[a,c,b,x]=l(this,Nt).subarray(14,18),l(this,oa).push(NaN,NaN,NaN,NaN,((b+a)/2-n)/r,((x+c)/2-i)/o),!0):([b,x,a,c,u,h]=l(this,Nt).subarray(0,6),l(this,vl).push(((b+5*a)/6-n)/r,((x+5*c)/6-i)/o,((5*a+u)/6-n)/r,((5*c+h)/6-i)/o,((a+u)/2-n)/r,((c+h)/2-i)/o),[u,h,a,c,b,x]=l(this,Nt).subarray(12,18),l(this,oa).push(((b+5*a)/6-n)/r,((x+5*c)/6-i)/o,((5*a+u)/6-n)/r,((5*c+h)/6-i)/o,((a+u)/2-n)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,vl),e=l(this,oa);if(isNaN(l(this,Nt)[6])&&!this.isEmpty())return S(this,Gn,UX).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);S(this,Gn,HX).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return S(this,Gn,VX).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,o){return new qX(t,e,n,i,r,o)}getOutlines(){var d;const t=l(this,vl),e=l(this,oa),n=l(this,Nt),[i,r,o,a]=l(this,dr),c=new Float32Array((((d=l(this,ud))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,ud)[f]-i)/o,c[f+1]=(l(this,ud)[f+1]-r)/a;if(c[c.length-2]=(l(this,hg)-i)/o,c[c.length-1]=(l(this,dg)-r)/a,isNaN(n[6])&&!this.isEmpty())return S(this,Gn,zX).call(this,c);const u=new Float32Array(l(this,vl).length+24+l(this,oa).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=S(this,Gn,GX).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return S(this,Gn,WX).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,dr),l(this,Ww),l(this,Hw),l(this,zw))}},dr=new WeakMap,oa=new WeakMap,Hw=new WeakMap,zw=new WeakMap,vl=new WeakMap,Nt=new WeakMap,hg=new WeakMap,dg=new WeakMap,F_=new WeakMap,j_=new WeakMap,Ww=new WeakMap,Gw=new WeakMap,ud=new WeakMap,$_=new WeakMap,Gk=new WeakMap,qk=new WeakMap,Gn=new WeakSet,$A=function(){const t=l(this,Nt).subarray(4,6),e=l(this,Nt).subarray(16,18),[n,i,r,o]=l(this,dr);return[(l(this,hg)+(t[0]-e[0])/2-n)/r,(l(this,dg)+(t[1]-e[1])/2-i)/o,(l(this,hg)+(e[0]-t[0])/2-n)/r,(l(this,dg)+(e[1]-t[1])/2-i)/o]},UX=function(){const[t,e,n,i]=l(this,dr),[r,o,a,c]=S(this,Gn,$A).call(this);return`M${(l(this,Nt)[2]-t)/n} ${(l(this,Nt)[3]-e)/i} L${(l(this,Nt)[4]-t)/n} ${(l(this,Nt)[5]-e)/i} L${r} ${o} L${a} ${c} L${(l(this,Nt)[16]-t)/n} ${(l(this,Nt)[17]-e)/i} L${(l(this,Nt)[14]-t)/n} ${(l(this,Nt)[15]-e)/i} Z`},VX=function(t){const e=l(this,oa);t.push(`L${e[4]} ${e[5]} Z`)},HX=function(t){const[e,n,i,r]=l(this,dr),o=l(this,Nt).subarray(4,6),a=l(this,Nt).subarray(16,18),[c,u,h,d]=S(this,Gn,$A).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-n)/r} L${c} ${u} L${h} ${d} L${(a[0]-e)/i} ${(a[1]-n)/r}`)},zX=function(t){const e=l(this,Nt),[n,i,r,o]=l(this,dr),[a,c,u,h]=S(this,Gn,$A).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,l(this,dr),l(this,Ww),l(this,Hw),l(this,zw))},WX=function(t,e){const n=l(this,oa);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},GX=function(t,e){const n=l(this,Nt).subarray(4,6),i=l(this,Nt).subarray(16,18),[r,o,a,c]=l(this,dr),[u,h,d,f]=S(this,Gn,$A).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/c],e),e+=24},A(Eo,$_,8),A(Eo,Gk,2),A(Eo,qk,l(Eo,$_)+l(Eo,Gk)),Eo);var qw,fg,Kc,B_,fr,U_,vn,Kk,KX,Az;let qX=(Az=class extends nt{constructor(e,n,i,r,o,a){super();A(this,Kk);A(this,qw);A(this,fg,new Float32Array(4));A(this,Kc);A(this,B_);A(this,fr);A(this,U_);A(this,vn);y(this,vn,e),y(this,fr,n),y(this,qw,i),y(this,U_,r),y(this,Kc,o),y(this,B_,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],S(this,Kk,KX).call(this,a);const[c,u,h,d]=l(this,fg);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const e=[`M${l(this,vn)[4]} ${l(this,vn)[5]}`];for(let n=6,i=l(this,vn).length;n<i;n+=6){if(isNaN(l(this,vn)[n])){e.push(`L${l(this,vn)[n+4]} ${l(this,vn)[n+5]}`);continue}e.push(`C${l(this,vn)[n]} ${l(this,vn)[n+1]} ${l(this,vn)[n+2]} ${l(this,vn)[n+3]} ${l(this,vn)[n+4]} ${l(this,vn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],o){const a=i-e,c=r-n;let u,h;switch(o){case 0:u=nt._rescale(l(this,vn),e,r,a,-c),h=nt._rescale(l(this,fr),e,r,a,-c);break;case 90:u=nt._rescaleAndSwap(l(this,vn),e,n,a,c),h=nt._rescaleAndSwap(l(this,fr),e,n,a,c);break;case 180:u=nt._rescale(l(this,vn),i,n,-a,c),h=nt._rescale(l(this,fr),i,n,-a,c);break;case 270:u=nt._rescaleAndSwap(l(this,vn),i,r,-a,-c),h=nt._rescaleAndSwap(l(this,fr),i,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,fg)}newOutliner(e,n,i,r,o,a=0){return new BX(e,n,i,r,o,a)}getNewOutline(e,n){const[i,r,o,a]=l(this,fg),[c,u,h,d]=l(this,qw),f=o*h,p=a*d,m=i*h+c,g=r*d+u,w=this.newOutliner({x:l(this,fr)[0]*f+m,y:l(this,fr)[1]*p+g},l(this,qw),l(this,U_),e,l(this,B_),n??l(this,Kc));for(let v=2;v<l(this,fr).length;v+=2)w.add({x:l(this,fr)[v]*f+m,y:l(this,fr)[v+1]*p+g});return w.getOutlines()}},qw=new WeakMap,fg=new WeakMap,Kc=new WeakMap,B_=new WeakMap,fr=new WeakMap,U_=new WeakMap,vn=new WeakMap,Kk=new WeakSet,KX=function(e){const n=l(this,vn);let i=n[4],r=n[5];const o=[i,r,i,r];let a=i,c=r,u=i,h=r;const d=e?Math.max:Math.min,f=new Float32Array(4);for(let m=6,g=n.length;m<g;m+=6){const w=n[m+4],v=n[m+5];isNaN(n[m])?(rt.pointBoundingBox(w,v,o),c>v?(a=w,c=v):c===v&&(a=d(a,w)),h<v?(u=w,h=v):h===v&&(u=d(u,w))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,rt.bezierBoundingBox(i,r,...n.slice(m,m+6),f),rt.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=d(a,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),i=w,r=v}const p=l(this,fg);p[0]=o[0]-l(this,Kc),p[1]=o[1]-l(this,Kc),p[2]=o[2]-o[0]+2*l(this,Kc),p[3]=o[3]-o[1]+2*l(this,Kc),this.firstPoint=[a,c],this.lastPoint=[u,h]},Az);var V_,H_,z_,hd,aa,Ai,XX,$T,YX,QX,GN,xz;let WN=(xz=class{constructor(t,e=0,n=0,i=!0){A(this,Ai);A(this,V_);A(this,H_);A(this,z_);A(this,hd,[]);A(this,aa,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:v,width:b,height:x}of t){const E=Math.floor((w-e)/a)*a,T=Math.ceil((w+b+e)/a)*a,P=Math.floor((v-e)/a)*a,k=Math.ceil((v+x+e)/a)*a,R=[E,P,k,!0],M=[T,P,k,!1];l(this,hd).push(R,M),rt.rectBoundingBox(E,P,T,k,r)}const c=r[2]-r[0]+2*n,u=r[3]-r[1]+2*n,h=r[0]-n,d=r[1]-n;let f=i?-1/0:1/0,p=1/0;const m=l(this,hd).at(i?-1:-2),g=[m[0],m[2]];for(const w of l(this,hd)){const[v,b,x,E]=w;!E&&i?b<p?(p=b,f=v):b===p&&(f=Math.max(f,v)):E&&!i&&(b<p?(p=b,f=v):b===p&&(f=Math.min(f,v))),w[0]=(v-h)/c,w[1]=(b-d)/u,w[2]=(x-d)/u}y(this,V_,new Float32Array([h,d,c,u])),y(this,H_,[f,p]),y(this,z_,g)}getOutlines(){l(this,hd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,hd))e[3]?(t.push(...S(this,Ai,GN).call(this,e)),S(this,Ai,YX).call(this,e)):(S(this,Ai,QX).call(this,e),t.push(...S(this,Ai,GN).call(this,e)));return S(this,Ai,XX).call(this,t)}},V_=new WeakMap,H_=new WeakMap,z_=new WeakMap,hd=new WeakMap,aa=new WeakMap,Ai=new WeakSet,XX=function(t){const e=[],n=new Set;for(const o of t){const[a,c,u]=o;e.push([a,c,o],[a,u,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,c,u,h,d]=o;n.delete(o);let f=a,p=c;for(r=[a,u],i.push(r);;){let m;if(n.has(h))m=h;else if(n.has(d))m=d;else break;n.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}r.push(f,p)}return new Qvt(i,l(this,V_),l(this,H_),l(this,z_))},$T=function(t){const e=l(this,aa);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:i=r-1}return i+1},YX=function([,t,e]){const n=S(this,Ai,$T).call(this,t);l(this,aa).splice(n,0,[t,e])},QX=function([,t,e]){const n=S(this,Ai,$T).call(this,t);for(let i=n;i<l(this,aa).length;i++){const[r,o]=l(this,aa)[i];if(r!==t)break;if(r===t&&o===e){l(this,aa).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=l(this,aa)[i];if(r!==t)break;if(r===t&&o===e){l(this,aa).splice(i,1);return}}},GN=function(t){const[e,n,i]=t,r=[[e,n,i]],o=S(this,Ai,$T).call(this,i);for(let a=0;a<o;a++){const[c,u]=l(this,aa)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r},xz);var W_,Kw,Sz;let Qvt=(Sz=class extends nt{constructor(e,n,i,r){super();A(this,W_);A(this,Kw);y(this,Kw,e),y(this,W_,n),this.firstPoint=i,this.lastPoint=r}toSVGPath(){const e=[];for(const n of l(this,Kw)){let[i,r]=n;e.push(`M${i} ${r}`);for(let o=2;o<n.length;o+=2){const a=n[o],c=n[o+1];a===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],o){const a=[],c=i-e,u=r-n;for(const h of l(this,Kw)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,W_)}get classNamesForOutlining(){return["highlightOutline"]}},W_=new WeakMap,Kw=new WeakMap,Sz),qN=class extends BX{newFreeDrawOutline(t,e,n,i,r,o){return new Jvt(t,e,n,i,r,o)}},Jvt=class extends qX{newOutliner(t,e,n,i,r,o=0){return new qN(t,e,n,i,r,o)}};var Xw,G_,Xc,pg,q_,Fi,K_,X_,gg,pr,gr,ys,Yw,Qw,Gs,Jw,po,Y_,zt,Mt,KN,BT,JX,ZX,tY,XN,Xf,To,Iy,eY,UT,VT,nY,sY,iY,rY,oY;let u3=(zt=class extends ze{constructor(e){super({...e,name:"highlightEditor"});A(this,Mt);A(this,Xw,null);A(this,G_,0);A(this,Xc);A(this,pg,null);A(this,q_,null);A(this,Fi,null);A(this,K_,null);A(this,X_,0);A(this,gg,null);A(this,pr,null);A(this,gr,null);A(this,ys,!1);A(this,Yw,null);A(this,Qw,null);A(this,Gs,null);A(this,Jw,"");A(this,po);A(this,Y_,"");this.color=e.color||zt._defaultColor,y(this,po,e.thickness||zt._defaultThickness),this.opacity=e.opacity||zt._defaultOpacity,y(this,Xc,e.boxes||null),y(this,Y_,e.methodOfCreation||""),y(this,Jw,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(y(this,ys,!0),S(this,Mt,BT).call(this,e),S(this,Mt,Xf).call(this)):l(this,Xc)&&(y(this,Xw,e.anchorNode),y(this,G_,e.anchorOffset),y(this,K_,e.focusNode),y(this,X_,e.focusOffset),S(this,Mt,KN).call(this),S(this,Mt,Xf).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=zt.prototype;return Rt(this,"_keyboardManager",new Y1([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,ys)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,po),methodOfCreation:l(this,Y_)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;ze.initialize(e,n),zt._defaultColor||(zt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Bt.HIGHLIGHT_COLOR:zt._defaultColor=n;break;case Bt.HIGHLIGHT_THICKNESS:zt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,Qw)}get commentButtonPosition(){return l(this,Yw)}updateParams(e,n){switch(e){case Bt.HIGHLIGHT_COLOR:S(this,Mt,JX).call(this,n);break;case Bt.HIGHLIGHT_THICKNESS:S(this,Mt,ZX).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,zt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,zt._defaultThickness]]}get propertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,this.color||zt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,l(this,po)||zt._defaultThickness],[Bt.HIGHLIGHT_FREE,l(this,ys)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(l(this,gr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=l(this,q_))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",y(this,q_,new Zj({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,Mt,VT).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,S(this,Mt,VT).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){S(this,Mt,XN).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Mt,Xf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?S(this,Mt,XN).call(this):e&&(S(this,Mt,Xf).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,a;const{drawLayer:n}=this.parent;let i;l(this,ys)?(e=(e-this.rotation+360)%360,i=S(r=zt,To,Iy).call(r,l(this,pr).box,e)):i=S(o=zt,To,Iy).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,gr),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(l(this,Gs),{bbox:S(a=zt,To,Iy).call(a,l(this,Fi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,Jw)&&(e.setAttribute("aria-label",l(this,Jw)),e.setAttribute("role","mark")),l(this,ys)?e.classList.add("free"):this.div.addEventListener("keydown",S(this,Mt,eY).bind(this),{signal:this._uiManager._signal});const n=y(this,gg,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,pg),this.setDims(this.width,this.height),EK(this,l(this,gg),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Gs),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Gs),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,Mt,UT).call(this,!0);break;case 1:case 3:S(this,Mt,UT).call(this,!1);break}}select(){var e;super.select(),l(this,Gs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Gs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Gs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Gs),{rootClass:{selected:!1}}),l(this,ys)||S(this,Mt,UT).call(this,!1))}get _mustFixPosition(){return!l(this,ys)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,gr),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Gs),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:r,y:o}){const{x:a,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=m=>{d.abort(),S(this,To,rY).call(this,e,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Qe,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Xr,{signal:f}),i.addEventListener("pointermove",S(this,To,iY).bind(this,e),{signal:f}),this._freeHighlight=new qN({x:r,y:o},[a,c,u,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var g,w,v,b;let r=null;if(e instanceof IX){const{data:{quadPoints:x,rect:E,rotation:T,id:P,color:k,opacity:R,popupRef:M,richText:D,contentsObj:L,creationDate:$,modificationDate:U},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:xt.HIGHLIGHT,color:Array.from(k),opacity:R,quadPoints:x,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:M,richText:D,comment:(L==null?void 0:L.str)||null,creationDate:$,modificationDate:U}}else if(e instanceof e$){const{data:{inkLists:x,rect:E,rotation:T,id:P,color:k,borderStyle:{rawWidth:R},popupRef:M,richText:D,contentsObj:L,creationDate:$,modificationDate:U},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:xt.HIGHLIGHT,color:Array.from(k),thickness:R,inkLists:x,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:M,richText:D,comment:(L==null?void 0:L.str)||null,creationDate:$,modificationDate:U}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=e,h=await super.deserialize(e,n,i);h.color=rt.makeHexColor(...o),h.opacity=u||1,c&&y(h,po,e.thickness),h._initialData=r,e.comment&&h.setCommentData(e);const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const x=y(h,Xc,[]);for(let E=0;E<a.length;E+=8)x.push({x:(a[E]-p)/d,y:1-(a[E+1]-m)/f,width:(a[E+2]-a[E])/d,height:(a[E+1]-a[E+5])/f});S(g=h,Mt,KN).call(g),S(w=h,Mt,Xf).call(w),h.rotate(h.rotation)}else if(c){y(h,ys,!0);const x=c[0],E={x:x[0]-p,y:f-(x[1]-m)},T=new qN(E,[0,0,d,f],1,l(h,po)/2,!0,.001);for(let R=0,M=x.length;R<M;R+=2)E.x=x[R]-p,E.y=f-(x[R+1]-m),T.add(E);const{id:P,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);S(v=h,Mt,BT).call(v,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),S(b=h,Mt,Xf).call(b),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,po),quadPoints:S(this,Mt,nY).call(this),outlines:S(this,Mt,sY).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!S(this,Mt,oY).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}},Xw=new WeakMap,G_=new WeakMap,Xc=new WeakMap,pg=new WeakMap,q_=new WeakMap,Fi=new WeakMap,K_=new WeakMap,X_=new WeakMap,gg=new WeakMap,pr=new WeakMap,gr=new WeakMap,ys=new WeakMap,Yw=new WeakMap,Qw=new WeakMap,Gs=new WeakMap,Jw=new WeakMap,po=new WeakMap,Y_=new WeakMap,Mt=new WeakSet,KN=function(){const e=new WN(l(this,Xc),.001);y(this,pr,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,pr).box;const n=new WN(l(this,Xc),.0025,.001,this._uiManager.direction==="ltr");y(this,Fi,n.getOutlines());const{firstPoint:i}=l(this,pr);y(this,Yw,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:r}=l(this,Fi);y(this,Qw,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},BT=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var f,p;if(y(this,pr,e),y(this,Fi,e.getNewOutline(l(this,po)/2+1.5,.0025)),n>=0)y(this,gr,n),y(this,pg,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),y(this,Gs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Fi).box,path:{d:l(this,Fi).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,gr),{bbox:S(f=zt,To,Iy).call(f,l(this,pr).box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Gs),{bbox:S(p=zt,To,Iy).call(p,l(this,Fi).box,m),path:{d:l(this,Fi).toSVGPath()}})}const[o,a,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[m,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*g/m,this.height=u*m/g;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[m,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*g/m,this.height=u*m/g;break}}const{firstPoint:h}=e;y(this,Yw,[(h[0]-o)/c,(h[1]-a)/u]);const{lastPoint:d}=l(this,Fi);y(this,Qw,[(d[0]-o)/c,(d[1]-a)/u])},JX=function(e){const n=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,zt._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},ZX=function(e){const n=l(this,po),i=r=>{y(this,po,r),S(this,Mt,tY).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},tY=function(e){l(this,ys)&&(S(this,Mt,BT).call(this,{highlightOutlines:l(this,pr).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},XN=function(){l(this,gr)===null||!this.parent||(this.parent.drawLayer.remove(l(this,gr)),y(this,gr,null),this.parent.drawLayer.remove(l(this,Gs)),y(this,Gs,null))},Xf=function(e=this.parent){l(this,gr)===null&&({id:$t(this,gr)._,clipPathId:$t(this,pg)._}=e.drawLayer.draw({bbox:l(this,pr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,ys)},path:{d:l(this,pr).toSVGPath()}},!1,!0),y(this,Gs,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,ys)},bbox:l(this,Fi).box,path:{d:l(this,Fi).toSVGPath()}},l(this,ys))),l(this,gg)&&(l(this,gg).style.clipPath=l(this,pg)))},To=new WeakSet,Iy=function([e,n,i,r],o){switch(o){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]},eY=function(e){zt._keyboardManager.exec(this,e)},UT=function(e){if(!l(this,Xw))return;const n=window.getSelection();e?n.setPosition(l(this,Xw),l(this,G_)):n.setPosition(l(this,K_),l(this,X_))},VT=function(){return l(this,ys)?this.rotation:0},nY=function(){if(l(this,ys))return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,o=l(this,Xc),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+i,m=(1-h)*n+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*e,a[c+5]=a[c+7]=m-f*n,c+=8}return a},sY=function(e){return l(this,pr).serialize(e,S(this,Mt,VT).call(this))},iY=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},rY=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},oY=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,r)=>i!==n[r])},A(zt,To),B(zt,"_defaultColor",null),B(zt,"_defaultOpacity",1),B(zt,"_defaultThickness",12),B(zt,"_type","highlight"),B(zt,"_editorType",xt.HIGHLIGHT),B(zt,"_freeHighlightId",-1),B(zt,"_freeHighlight",null),B(zt,"_freeHighlightClipId",""),zt);var mg,_z;let aY=(_z=class{constructor(){A(this,mg,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,mg)[t]=e}toSVGProperties(){const t=l(this,mg);return y(this,mg,Object.create(null)),{root:t}}reset(){y(this,mg,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Ae("Not implemented")}},mg=new WeakMap,_z);var mr,Zw,J,Yn,yg,vg,dd,fd,pd,wg,qt,YN,QN,JN,BA,cY,HT,UA,Ly;let lY=(J=class extends ze{constructor(e){super(e);A(this,qt);A(this,mr,null);A(this,Zw);B(this,"_colorPicker",null);B(this,"_drawId",null);y(this,Zw,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(S(this,qt,YN).call(this,e),S(this,qt,BA).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Ae("Not implemented")}static get typesMap(){Ae("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(J,Yn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,o=r[n],a=c=>{var h;r.updateProperty(n,c);const u=l(this,mr).updateProperty(n,c);u&&S(this,qt,UA).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(l(this,mr).getPathResizingSVGProperties(S(this,qt,HT).call(this)),{bbox:S(this,qt,Ly).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(l(this,mr).getPathResizedSVGProperties(S(this,qt,HT).call(this)),{bbox:S(this,qt,Ly).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:S(this,qt,Ly).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties(l(this,mr).getPathTranslatedSVGProperties(S(this,qt,HT).call(this),this.parentDimensions),{bbox:S(this,qt,Ly).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Zw)&&(y(this,Zw,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){S(this,qt,JN).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,qt,BA).call(this),S(this,qt,UA).call(this,l(this,mr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),S(this,qt,JN).call(this)):e&&(this._uiManager.addShouldRescale(this),S(this,qt,BA).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,J._mergeSVGProperties({bbox:S(this,qt,Ly).call(this)},l(this,mr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,qt,UA).call(this,l(this,mr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,r,o){Ae("Not implemented")}static startDrawing(e,n,i,r){var w;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:h}=r;if(l(J,fd)&&l(J,fd)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),m=y(J,yg,new AbortController),g=e.combinedSignal(m);if(l(J,dd)||y(J,dd,u),l(J,fd)??y(J,fd,h),window.addEventListener("pointerup",v=>{var b;l(J,dd)===v.pointerId?this._endDraw(v):(b=l(J,pd))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var b;l(J,dd)===v.pointerId?this._currentParent.endDrawingSession():(b=l(J,pd))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{l(J,fd)===v.pointerType&&((l(J,pd)||y(J,pd,new Set)).add(v.pointerId),l(J,Yn).isCancellable()&&(l(J,Yn).removeLastElement(),l(J,Yn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Xr,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===l(J,wg)&&Qe(v)},{signal:g}),e.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),l(J,Yn)){e.drawLayer.updateProperties(this._currentDrawId,l(J,Yn).startNew(a,c,f,p,d));return}n.updateUIForDefaultProperties(this),y(J,Yn,this.createDrawerInstance(a,c,f,p,d)),y(J,vg,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(J,vg).toSVGProperties(),l(J,Yn).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(y(J,wg,-1),!l(J,Yn))return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(l(J,dd)===r){if(((o=l(J,pd))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(J,Yn).add(n,i)),y(J,wg,e.timeStamp),Qe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,y(J,Yn,null),y(J,vg,null),y(J,fd,null),y(J,wg,NaN)),l(J,yg)&&(l(J,yg).abort(),y(J,yg,null),y(J,dd,NaN),y(J,pd,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(J,Yn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(J,Yn),r=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Bt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Bt.DRAW_STEP),!l(J,Yn).isEmpty()){const{pageDimensions:[i,r],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(J,Yn).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:l(J,vg),mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,o,a){Ae("Not implemented")}static async deserialize(e,n,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}=n.viewport,u=this.deserializeDraw(a,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,n,i);return h.createDrawingOptions(e),S(d=h,qt,YN).call(d,{drawOutlines:u}),S(f=h,qt,BA).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[n,i]=this.pageTranslation,[r,o]=this.pageDimensions;return l(this,mr).serialize([n,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}},mr=new WeakMap,Zw=new WeakMap,Yn=new WeakMap,yg=new WeakMap,vg=new WeakMap,dd=new WeakMap,fd=new WeakMap,pd=new WeakMap,wg=new WeakMap,qt=new WeakSet,YN=function({drawOutlines:e,drawId:n,drawingOptions:i}){y(this,mr,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=S(this,qt,QN).call(this,e,this.parent),S(this,qt,UA).call(this,e.box)},QN=function(e,n){const{id:i}=n.drawLayer.draw(J._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},JN=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},BA=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,qt,QN).call(this,l(this,mr),e)}},cY=function([e,n,i,r]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[n,1-e,i*(a/o),r*(o/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/o),r*(o/a)];default:return[e,n,i,r]}},HT=function(){const{x:e,y:n,width:i,height:r,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-n,e,i*(o/a),r*(a/o)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(o/a),r*(a/o)];default:return[e,n,i,r]}},UA=function(e){[this.x,this.y,this.width,this.height]=S(this,qt,cY).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ly=function(){const{x:e,y:n,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-n,e,i*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-n,r*(u/c),i*(c/u)];case 7:return[n-i*(c/u),1-e-r*(u/c),i*(c/u),r*(u/c)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(u/c),n,r*(u/c),i*(c/u)];case 13:return[1-n-i*(c/u),e-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-e,1-n-i*(c/u),r*(u/c),i*(c/u)];case 15:return[n,1-e,i*(c/u),r*(u/c)];default:return[e,n,i,r]}},B(J,"_currentDrawId",-1),B(J,"_currentParent",null),A(J,Yn,null),A(J,yg,null),A(J,vg,null),A(J,dd,NaN),A(J,fd,null),A(J,pd,null),A(J,wg,NaN),B(J,"_INNER_MARGIN",3),J);var wl,Qn,Jn,bg,t0,ci,vs,go,Ag,xg,Sg,e0,zT,Ez;let Zvt=(Ez=class{constructor(t,e,n,i,r,o){A(this,e0);A(this,wl,new Float64Array(6));A(this,Qn);A(this,Jn);A(this,bg);A(this,t0);A(this,ci);A(this,vs,"");A(this,go,0);A(this,Ag,new J1);A(this,xg);A(this,Sg);y(this,xg,n),y(this,Sg,i),y(this,bg,r),y(this,t0,o),[t,e]=S(this,e0,zT).call(this,t,e);const a=y(this,Qn,[NaN,NaN,NaN,NaN,t,e]);y(this,ci,[t,e]),y(this,Jn,[{line:a,points:l(this,ci)}]),l(this,wl).set(a,0)}updateProperty(t,e){t==="stroke-width"&&y(this,t0,e)}isEmpty(){return!l(this,Jn)||l(this,Jn).length===0}isCancellable(){return l(this,ci).length<=10}add(t,e){[t,e]=S(this,e0,zT).call(this,t,e);const[n,i,r,o]=l(this,wl).subarray(2,6),a=t-r,c=e-o;return Math.hypot(l(this,xg)*a,l(this,Sg)*c)<=2?null:(l(this,ci).push(t,e),isNaN(n)?(l(this,wl).set([r,o,t,e],2),l(this,Qn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,wl)[0])&&l(this,Qn).splice(6,6),l(this,wl).set([n,i,r,o,t,e],0),l(this,Qn).push(...nt.createBezierPoints(n,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,ci).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){y(this,xg,n),y(this,Sg,i),y(this,bg,r),[t,e]=S(this,e0,zT).call(this,t,e);const o=y(this,Qn,[NaN,NaN,NaN,NaN,t,e]);y(this,ci,[t,e]);const a=l(this,Jn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Jn).push({line:o,points:l(this,ci)}),l(this,wl).set(o,0),y(this,go,0),this.toSVGPath(),null}getLastElement(){return l(this,Jn).at(-1)}setLastElement(t){return l(this,Jn)?(l(this,Jn).push(t),y(this,Qn,t.line),y(this,ci,t.points),y(this,go,0),{path:{d:this.toSVGPath()}}):l(this,Ag).setLastElement(t)}removeLastElement(){if(!l(this,Jn))return l(this,Ag).removeLastElement();l(this,Jn).pop(),y(this,vs,"");for(let t=0,e=l(this,Jn).length;t<e;t++){const{line:n,points:i}=l(this,Jn)[t];y(this,Qn,n),y(this,ci,i),y(this,go,0),this.toSVGPath()}return{path:{d:l(this,vs)}}}toSVGPath(){const t=nt.svgRound(l(this,Qn)[4]),e=nt.svgRound(l(this,Qn)[5]);if(l(this,ci).length===2)return y(this,vs,`${l(this,vs)} M ${t} ${e} Z`),l(this,vs);if(l(this,ci).length<=6){const i=l(this,vs).lastIndexOf("M");y(this,vs,`${l(this,vs).slice(0,i)} M ${t} ${e}`),y(this,go,6)}if(l(this,ci).length===4){const i=nt.svgRound(l(this,Qn)[10]),r=nt.svgRound(l(this,Qn)[11]);return y(this,vs,`${l(this,vs)} L ${i} ${r}`),y(this,go,12),l(this,vs)}const n=[];l(this,go)===0&&(n.push(`M ${t} ${e}`),y(this,go,6));for(let i=l(this,go),r=l(this,Qn).length;i<r;i+=6){const[o,a,c,u,h,d]=l(this,Qn).slice(i,i+6).map(nt.svgRound);n.push(`C${o} ${a} ${c} ${u} ${h} ${d}`)}return y(this,vs,l(this,vs)+n.join(" ")),y(this,go,l(this,Qn).length),l(this,vs)}getOutlines(t,e,n,i){const r=l(this,Jn).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,Ag).build(l(this,Jn),t,e,n,l(this,bg),l(this,t0),i),y(this,wl,null),y(this,Qn,null),y(this,Jn,null),y(this,vs,null),l(this,Ag)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},wl=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,bg=new WeakMap,t0=new WeakMap,ci=new WeakMap,vs=new WeakMap,go=new WeakMap,Ag=new WeakMap,xg=new WeakMap,Sg=new WeakMap,e0=new WeakSet,zT=function(t,e){return nt._normalizePoint(t,e,l(this,xg),l(this,Sg),l(this,bg))},Ez);var ui,Q_,J_,yr,bl,Al,n0,s0,_g,Ps,hc,uY,hY,dY,Cz;let J1=(Cz=class extends nt{constructor(){super(...arguments);A(this,Ps);A(this,ui);A(this,Q_,0);A(this,J_);A(this,yr);A(this,bl);A(this,Al);A(this,n0);A(this,s0);A(this,_g)}build(e,n,i,r,o,a,c){y(this,bl,n),y(this,Al,i),y(this,n0,r),y(this,s0,o),y(this,_g,a),y(this,J_,c??0),y(this,yr,e),S(this,Ps,hY).call(this)}get thickness(){return l(this,_g)}setLastElement(e){return l(this,yr).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,yr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,yr)){if(e.push(`M${nt.svgRound(n[4])} ${nt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${nt.svgRound(n[10])} ${nt.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[o,a,c,u,h,d]=n.subarray(i,i+6).map(nt.svgRound);e.push(`C${o} ${a} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,n,i,r],o){const a=[],c=[],[u,h,d,f]=S(this,Ps,uY).call(this);let p,m,g,w,v,b,x,E,T;switch(l(this,s0)){case 0:T=nt._rescale,p=e,m=n+r,g=i,w=-r,v=e+u*i,b=n+(1-h-f)*r,x=e+(u+d)*i,E=n+(1-h)*r;break;case 90:T=nt._rescaleAndSwap,p=e,m=n,g=i,w=r,v=e+h*i,b=n+u*r,x=e+(h+f)*i,E=n+(u+d)*r;break;case 180:T=nt._rescale,p=e+i,m=n,g=-i,w=r,v=e+(1-u-d)*i,b=n+h*r,x=e+(1-u)*i,E=n+(h+f)*r;break;case 270:T=nt._rescaleAndSwap,p=e+i,m=n+r,g=-i,w=-r,v=e+(1-h-f)*i,b=n+(1-u-d)*r,x=e+(1-h)*i,E=n+(1-u)*r;break}for(const{line:P,points:k}of l(this,yr))a.push(T(P,p,m,g,w,o?new Array(P.length):null)),c.push(T(k,p,m,g,w,o?new Array(k.length):null));return{lines:a,points:c,rect:[v,b,x,E]}}static deserialize(e,n,i,r,o,{paths:{lines:a,points:c},rotation:u,thickness:h}){const d=[];let f,p,m,g,w;switch(u){case 0:w=nt._rescale,f=-e/i,p=n/r+1,m=1/i,g=-1/r;break;case 90:w=nt._rescaleAndSwap,f=-n/r,p=-e/i,m=1/r,g=1/i;break;case 180:w=nt._rescale,f=e/i+1,p=-n/r,m=-1/i,g=1/r;break;case 270:w=nt._rescaleAndSwap,f=n/r+1,p=e/i+1,m=-1/r,g=-1/i;break}if(!a){a=[];for(const b of c){const x=b.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(x-2));a.push(E);let[T,P,k,R]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,P],0);for(let M=4;M<x;M+=2){const D=b[M],L=b[M+1];E.set(nt.createBezierPoints(T,P,k,R,D,L),(M-2)*3),[T,P,k,R]=[k,R,D,L]}}}for(let b=0,x=a.length;b<x;b++)d.push({line:w(a[b].map(E=>E??NaN),f,p,m,g),points:w(c[b].map(E=>E??NaN),f,p,m,g)});const v=new this.prototype.constructor;return v.build(d,i,r,1,u,h,o),v}get box(){return l(this,ui)}updateProperty(e,n){return e==="stroke-width"?S(this,Ps,dY).call(this,n):null}updateParentDimensions([e,n],i){const[r,o]=S(this,Ps,hc).call(this);y(this,bl,e),y(this,Al,n),y(this,n0,i);const[a,c]=S(this,Ps,hc).call(this),u=a-r,h=c-o,d=l(this,ui);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return y(this,Q_,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,ui).map(nt.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,ui);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(e)} ${nt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,ui);let i=0,r=0,o=0,a=0,c=0,u=0;switch(l(this,Q_)){case 90:r=n/e,o=-e/n,c=e;break;case 180:i=-1,a=-1,c=e,u=n;break;case 270:r=-n/e,o=e/n,u=n;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${nt.svgRound(c)} ${nt.svgRound(u)})`}getPathResizingSVGProperties([e,n,i,r]){const[o,a]=S(this,Ps,hc).call(this),[c,u,h,d]=l(this,ui);if(Math.abs(h-o)<=nt.PRECISION||Math.abs(d-a)<=nt.PRECISION){const w=e+i/2-(c+h/2),v=n+r/2-(u+d/2);return{path:{"transform-origin":`${nt.svgRound(e)} ${nt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const f=(i-2*o)/(h-2*o),p=(r-2*a)/(d-2*a),m=h/i,g=d/r;return{path:{"transform-origin":`${nt.svgRound(c)} ${nt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${g}) translate(${nt.svgRound(o)} ${nt.svgRound(a)}) scale(${f} ${p}) translate(${nt.svgRound(-o)} ${nt.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[o,a]=S(this,Ps,hc).call(this),c=l(this,ui),[u,h,d,f]=c;if(c[0]=e,c[1]=n,c[2]=i,c[3]=r,Math.abs(d-o)<=nt.PRECISION||Math.abs(f-a)<=nt.PRECISION){const v=e+i/2-(u+d/2),b=n+r/2-(h+f/2);for(const{line:x,points:E}of l(this,yr))nt._translate(x,v,b,x),nt._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(e)} ${nt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),m=(r-2*a)/(f-2*a),g=-p*(u+o)+e+o,w=-m*(h+a)+n+a;if(p!==1||m!==1||g!==0||w!==0)for(const{line:v,points:b}of l(this,yr))nt._rescale(v,g,w,p,m,v),nt._rescale(b,g,w,p,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(e)} ${nt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,o]=i,a=l(this,ui),c=e-a[0],u=n-a[1];if(l(this,bl)===r&&l(this,Al)===o)for(const{line:h,points:d}of l(this,yr))nt._translate(h,c,u,h),nt._translate(d,c,u,d);else{const h=l(this,bl)/r,d=l(this,Al)/o;y(this,bl,r),y(this,Al,o);for(const{line:f,points:p}of l(this,yr))nt._rescale(f,c,u,h,d,f),nt._rescale(p,c,u,h,d,p);a[2]*=h,a[3]*=d}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(e)} ${nt.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,ui);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(e[0])} ${nt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}},ui=new WeakMap,Q_=new WeakMap,J_=new WeakMap,yr=new WeakMap,bl=new WeakMap,Al=new WeakMap,n0=new WeakMap,s0=new WeakMap,_g=new WeakMap,Ps=new WeakSet,hc=function(e=l(this,_g)){const n=l(this,J_)+e/2*l(this,n0);return l(this,s0)%180===0?[n/l(this,bl),n/l(this,Al)]:[n/l(this,Al),n/l(this,bl)]},uY=function(){const[e,n,i,r]=l(this,ui),[o,a]=S(this,Ps,hc).call(this,0);return[e+o,n+a,i-2*o,r-2*a]},hY=function(){const e=y(this,ui,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,yr)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)rt.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],a=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,m,g]=r.subarray(c,c+6);rt.bezierBoundingBox(o,a,h,d,f,p,m,g,e),o=m,a=g}}const[n,i]=S(this,Ps,hc).call(this);e[0]=Js(e[0]-n,0,1),e[1]=Js(e[1]-i,0,1),e[2]=Js(e[2]+n,0,1),e[3]=Js(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},dY=function(e){const[n,i]=S(this,Ps,hc).call(this);y(this,_g,e);const[r,o]=S(this,Ps,hc).call(this),[a,c]=[r-n,o-i],u=l(this,ui);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u},Cz),fY=class pY extends aY{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new pY(this._viewParameters);return t.updateAll(this),t}};var Yc,Xk,gY;let twt=(Yc=class extends lY{constructor(e){super({...e,name:"inkEditor"});A(this,Xk);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){ze.initialize(e,n),this._defaultDrawingOptions=new fY(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Rt(this,"typesMap",new Map([[Bt.INK_THICKNESS,"stroke-width"],[Bt.INK_COLOR,"stroke"],[Bt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,o){return new Zvt(e,n,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,o,a){return J1.deserialize(e,n,i,r,o,a)}static async deserialize(e,n,i){let r=null;if(e instanceof e$){const{data:{inkLists:a,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:m,richText:g,contentsObj:w,creationDate:v,modificationDate:b},parent:{page:{pageNumber:x}}}=e;r=e={annotationType:xt.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:x-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:m,richText:g,comment:(w==null?void 0:w.str)||null,creationDate:v,modificationDate:b}}const o=await super.deserialize(e,n,i);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Ek(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Bt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Yc.getDefaultDrawingOptions({stroke:rt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(e),{color:ze._colorManager.convert(r),opacity:o,thickness:a,paths:{lines:n,points:i}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!S(this,Xk,gY).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}},Xk=new WeakSet,gY=function(e){const{color:n,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==n[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},B(Yc,"_type","ink"),B(Yc,"_editorType",xt.INK),B(Yc,"_defaultDrawingOptions",null),Yc);class ZN extends J1{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const WC=8,cA=3;var Eg,te,tO,la,mY,yY,eO,WT,vY,wY,bY,nO,sO,AY;class Kl{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},r,o,a,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${n} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:m,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:x}=h.measureText(t),E=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(m)||0,x)*E),P=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||d,Math.abs(v)+Math.abs(b)||d)*E);u=new OffscreenCanvas(T,P),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,T,P),h.fillStyle="black",h.fillText(t,T*(E-1)/2,P*(3-E)/2);const k=S(this,te,nO).call(this,h.getImageData(0,0,T,P).data),R=S(this,te,bY).call(this,k),M=S(this,te,sO).call(this,R),D=S(this,te,eO).call(this,k,T,P,M);return this.processDrawnLines({lines:{curves:D,width:T,height:P},pageWidth:r,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,r){const[o,a,c]=S(this,te,AY).call(this,t),[u,h]=S(this,te,wY).call(this,o,a,c,Math.hypot(a,c)*l(this,Eg).sigmaSFactor,l(this,Eg).sigmaR,l(this,Eg).kernelSize),d=S(this,te,sO).call(this,h),f=S(this,te,eO).call(this,u,a,c,d);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([e,n]=[n,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,n/h),m=p/e,g=p/n,w=[];for(const{points:b}of c){const x=o?S(this,te,vY).call(this,b):b;if(!x)continue;w.push(x);const E=x.length,T=new Float32Array(E),P=new Float32Array(3*(E===2?2:E-2));if(f.push({line:P,points:T}),E===2){T[0]=x[0]*m,T[1]=x[1]*g,P.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[k,R,M,D]=x;k*=m,R*=g,M*=m,D*=g,T.set([k,R,M,D],0),P.set([NaN,NaN,NaN,NaN,k,R],0);for(let L=4;L<E;L+=2){const $=T[L]=x[L]*m,U=T[L+1]=x[L+1]*g;P.set(nt.createBezierPoints(k,R,M,D,$,U),(L-2)*3),[k,R,M,D]=[M,D,$,U]}}if(f.length===0)return null;const v=a?new ZN:new J1;return v.build(f,e,n,1,i,a?0:d,r),{outline:v,newCurves:w,areContours:a,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:r}){let o=1/0,a=-1/0,c=0;for(const x of t){c+=x.length;for(let E=2,T=x.length;E<T;E++){const P=x[E]-x[E-2];o=Math.min(o,P),a=Math.max(a,P)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=WC+cA*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(n??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const x of t)f[p++]=x.length-2,f[p++]=x[0],f[p++]=x[1];const m=new CompressionStream("deflate-raw"),g=m.writable.getWriter();await g.ready,g.write(f);const w=u.prototype.constructor;for(const x of t){const E=new w(x.length-2);for(let T=2,P=x.length;T<P;T++)E[T-2]=x[T]-x[T-2];g.write(E)}g.close();const v=await new Response(m.readable).arrayBuffer(),b=new Uint8Array(v);return hK(b)}static async decompressSignature(t){try{const e=yyt(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const x of n)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,a),a+=x.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,p=c[5],m=c[6],g=c[7],w=[],v=(WC+cA*m)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(g){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,v);break}a=0;for(let x=0;x<m;x++){const E=c[cA*x+WC],T=new Float32Array(E+2);w.push(T);for(let P=0;P<cA-1;P++)T[P]=c[cA*x+WC+P+1];for(let P=0;P<E;P++)T[P+2]=T[P]+b[a++]}return{areContours:f,thickness:p,outlines:w,width:h,height:d}}catch(e){return St(`decompressSignature: ${e}`),null}}}Eg=new WeakMap,te=new WeakSet,tO=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},la=new WeakMap,mY=function(t,e,n,i,r,o,a){const c=S(this,te,tO).call(this,n,i,r,o);for(let u=0;u<8;u++){const h=(-u+c-a+16)%8,d=l(this,la)[2*h],f=l(this,la)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},yY=function(t,e,n,i,r,o,a){const c=S(this,te,tO).call(this,n,i,r,o);for(let u=0;u<8;u++){const h=(u+c+a+16)%8,d=l(this,la)[2*h],f=l(this,la)[2*h+1];if(t[(n+d)*e+(i+f)]!==0)return h}return-1},eO=function(t,e,n,i){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=i?1:0;for(let h=1;h<n-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*n-1-h]=0;let a=1,c;const u=[];for(let h=1;h<n-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let m=h,g=d;if(p===1&&o[f-1]===0)a+=1,g-=1;else if(p>=1&&o[f+1]===0)a+=1,g+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const w=[d,h],v=g===d+1,b={isHole:v,points:w,id:a,parent:0};u.push(b);let x;for(const L of u)if(L.id===c){x=L;break}x?x.isHole?b.parent=v?x.parent:c:b.parent=v?c:x.parent:b.parent=v?c:0;const E=S(this,te,mY).call(this,o,e,h,d,m,g,0);if(E===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=l(this,la)[2*E],P=l(this,la)[2*E+1];const k=h+T,R=d+P;m=k,g=R;let M=h,D=d;for(;;){const L=S(this,te,yY).call(this,o,e,M,D,m,g,1);T=l(this,la)[2*L],P=l(this,la)[2*L+1];const $=M+T,U=D+P;w.push(U,$);const I=M*e+D;if(o[I+1]===0?o[I]=-a:o[I]===1&&(o[I]=a),$===h&&U===d&&M===k&&D===R){o[f]!==1&&(c=Math.abs(o[f]));break}else m=M,g=D,M=$,D=U}}}return u},WT=function(t,e,n,i){if(n-e<=4){for(let k=e;k<n-2;k+=2)i.push(t[k],t[k+1]);return}const r=t[e],o=t[e+1],a=t[n-4]-r,c=t[n-3]-o,u=Math.hypot(a,c),h=a/u,d=c/u,f=h*o-d*r,p=c/a,m=1/u,g=Math.atan(p),w=Math.cos(g),v=Math.sin(g),b=m*(Math.abs(w)+Math.abs(v)),x=m*(1-b+b**2),E=Math.max(Math.atan(Math.abs(v+w)*x),Math.atan(Math.abs(v-w)*x));let T=0,P=e;for(let k=e+2;k<n-2;k+=2){const R=Math.abs(f-h*t[k+1]+d*t[k]);R>T&&(P=k,T=R)}T>(u*E)**2?(S(this,te,WT).call(this,t,e,P+2,i),S(this,te,WT).call(this,t,P,n,i)):i.push(r,o)},vY=function(t){const e=[],n=t.length;return S(this,te,WT).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},wY=function(t,e,n,i,r,o){const a=new Float32Array(o**2),c=-2*i**2,u=o>>1;for(let g=0;g<o;g++){const w=(g-u)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((w+(v-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/d);const f=t.length,p=new Uint8Array(f),m=new Uint32Array(256);for(let g=0;g<n;g++)for(let w=0;w<e;w++){const v=g*e+w,b=t[v];let x=0,E=0;for(let P=0;P<o;P++){const k=g+P-u;if(!(k<0||k>=n))for(let R=0;R<o;R++){const M=w+R-u;if(M<0||M>=e)continue;const D=t[k*e+M],L=a[P*o+R]*h[Math.abs(D-b)];x+=D*L,E+=L}}const T=p[v]=Math.round(x/E);m[T]++}return[p,m]},bY=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},nO=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,c=n.length;a<c;a++){const u=n[a]=t[a<<2];i=Math.max(i,u),r=Math.min(r,u)}const o=255/(i-r);for(let a=0,c=n.length;a<c;a++)n[a]=(n[a]-r)*o;return n},sO=function(t){let e,n=-1/0,i=-1/0;const r=t.findIndex(c=>c!==0);let o=r,a=r;for(e=r;e<256;e++){const c=t[e];c>n&&(e-o>i&&(i=e-o,a=e-1),n=c,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},AY=function(t){const e=t,{width:n,height:i}=t,{maxDim:r}=l(this,Eg);let o=n,a=i;if(n>r||i>r){let f=n,p=i,m=Math.log2(Math.max(n,i)/r);const g=Math.floor(m);m=m===g?g-1:g;for(let v=0;v<m;v++){o=Math.ceil(f/2),a=Math.ceil(p/2);const b=new OffscreenCanvas(o,a);b.getContext("2d").drawImage(t,0,0,f,p,0,0,o,a),f=o,p=a,t!==e&&t.close(),t=b.transferToImageBitmap()}const w=Math.min(r/o,r/a);o=Math.round(o*w),a=Math.round(a*w)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,a);const h=u.getImageData(0,0,o,a).data;return[S(this,te,nO).call(this,h),o,a]},A(Kl,te),A(Kl,Eg,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(Kl,la,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class s$ extends aY{constructor(){super(),super.updateProperties({fill:ze._defaultLineColor,"stroke-width":0})}clone(){const t=new s$;return t.updateAll(this),t}}class i$ extends fY{constructor(t){super(t),super.updateProperties({stroke:ze._defaultLineColor,"stroke-width":1})}clone(){const t=new i$(this._viewParameters);return t.updateAll(this),t}}var gd,xl,md,Cg;const er=class er extends lY{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});A(this,gd,!1);A(this,xl,null);A(this,md,null);A(this,Cg,null);this._willKeepAspectRatio=!0,y(this,md,e.signatureData||null),y(this,xl,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){ze.initialize(e,n),this._defaultDrawingOptions=new s$,this._defaultDrawnSignatureOptions=new i$(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,xl)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,md)){const{lines:r,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:h}=l(this,md),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,m=Kl.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:er._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(m,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,xl)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){y(this,Cg,e),this.addEditToolbar()}getUuid(){return l(this,Cg)}get description(){return l(this,xl)}set description(e){y(this,xl,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:r,height:o}=l(this,md),a=Math.max(r,o),c=Kl.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:i,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,r){const{x:o,y:a}=this,{outline:c}=y(this,md,e);y(this,gd,c instanceof ZN),this.description=i;let u;l(this,gd)?u=er.getDefaultDrawingOptions():(u=er._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=n/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return Kl.process(e,n,i,r,er._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return Kl.extractContoursFromText(e,n,i,r,o,er._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return Kl.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:er._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=er.getDefaultDrawingOptions():(this._drawingOptions=er._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,gd),color:[0,0,0],thickness:l(this,gd)?0:r});return this.addComment(o),e?(o.paths={lines:n,points:i},o.uuid=l(this,Cg),o.isCopy=!0):o.lines=n,l(this,xl)&&(o.accessibilityData={type:"Figure",alt:l(this,xl)}),o}static deserializeDraw(e,n,i,r,o,a){return a.areContours?ZN.deserialize(e,n,i,r,o,a):J1.deserialize(e,n,i,r,o,a)}static async deserialize(e,n,i){var o;const r=await super.deserialize(e,n,i);return y(r,gd,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",y(r,Cg,e.uuid),r}};gd=new WeakMap,xl=new WeakMap,md=new WeakMap,Cg=new WeakMap,B(er,"_type","signature"),B(er,"_editorType",xt.SIGNATURE),B(er,"_defaultDrawingOptions",null);let iO=er;var Be,Zn,yd,Qc,vd,i0,Jc,Tg,Sl,vr,r0,QC,Xt,VA,HA,GT,qT,KT,rO,XT,xY;let ewt=(QC=class extends ze{constructor(e){super({...e,name:"stampEditor"});A(this,Xt);A(this,Be,null);A(this,Zn,null);A(this,yd,null);A(this,Qc,null);A(this,vd,null);A(this,i0,"");A(this,Jc,null);A(this,Tg,!1);A(this,Sl,null);A(this,vr,!1);A(this,r0,!1);y(this,Qc,e.bitmapUrl),y(this,vd,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){ze.initialize(e,n)}static isHandlingMimeForPasting(e){return bk.includes(e)}static paste(e,n){n.pasteEditor({mode:xt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;l(this,Zn)&&(y(this,Be,null),this._uiManager.imageManager.deleteId(l(this,Zn)),(e=l(this,Jc))==null||e.remove(),y(this,Jc,null),l(this,Sl)&&(clearTimeout(l(this,Sl)),y(this,Sl,null))),super.remove()}rebuild(){if(!this.parent){l(this,Zn)&&S(this,Xt,GT).call(this);return}super.rebuild(),this.div!==null&&(l(this,Zn)&&l(this,Jc)===null&&S(this,Xt,GT).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,yd)||l(this,Be)||l(this,Qc)||l(this,vd)||l(this,Zn)||l(this,Tg))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Tg)||(l(this,Be)?S(this,Xt,qT).call(this):S(this,Xt,GT).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(y(this,Zn,i),r&&y(this,Be,r),y(this,Tg,!1),S(this,Xt,qT).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Sl)!==null&&clearTimeout(l(this,Sl)),y(this,Sl,setTimeout(()=>{y(this,Sl,null),S(this,Xt,rO).call(this)},200))}copyCanvas(e,n,i=!1){e||(e=224);const{width:r,height:o}=l(this,Be),a=new Af;let c=l(this,Be),u=r,h=o,d=null;if(n){if(r>n||o>n){const k=Math.min(n/r,n/o);u=Math.floor(r*k),h=Math.floor(o*k)}d=document.createElement("canvas");const p=d.width=Math.ceil(u*a.sx),m=d.height=Math.ceil(h*a.sy);l(this,vr)||(c=S(this,Xt,KT).call(this,p,m));const g=d.getContext("2d");g.filter=this._uiManager.hcmFilter;let w="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":byt.isDarkMode&&(w="#8f8f9d",v="#42414d");const b=15,x=b*a.sx,E=b*a.sy,T=new OffscreenCanvas(x*2,E*2),P=T.getContext("2d");P.fillStyle=w,P.fillRect(0,0,x*2,E*2),P.fillStyle=v,P.fillRect(0,0,x,E),P.fillRect(x,E,x,E),g.fillStyle=g.createPattern(T,"repeat"),g.fillRect(0,0,p,m),g.drawImage(c,0,0,c.width,c.height,0,0,p,m)}let f=null;if(i){let p,m;if(a.symmetric&&c.width<e&&c.height<e)p=c.width,m=c.height;else if(c=l(this,Be),r>e||o>e){const v=Math.min(e/r,e/o);p=Math.floor(r*v),m=Math.floor(o*v),l(this,vr)||(c=S(this,Xt,KT).call(this,p,m))}const w=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,p,m),f={width:p,height:m,data:w.getImageData(0,0,p,m).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,n,i){var w;let r=null,o=!1;if(e instanceof LX){const{data:{rect:v,rotation:b,id:x,structParent:E,popupRef:T,richText:P,contentsObj:k,creationDate:R,modificationDate:M},container:D,parent:{page:{pageNumber:L}},canvas:$}=e;let U,I;$?(delete e.canvas,{id:U,bitmap:I}=i.imageManager.getFromCanvas(D.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const H=((w=await n._structTree.getAriaAttributes(`${Hj}${x}`))==null?void 0:w.get("aria-label"))||"";r=e={annotationType:xt.STAMP,bitmapId:U,bitmap:I,pageIndex:L-1,rect:v.slice(0),rotation:b,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:H},isSvg:!1,structParent:E,popupRef:T,richText:P,comment:(k==null?void 0:k.str)||null,creationDate:R,modificationDate:M}}const a=await super.deserialize(e,n,i),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(i.addMissingCanvas(e.id,a),y(a,Tg,!0)):d&&i.imageManager.isValidId(d)?(y(a,Zn,d),u&&y(a,Be,u)):y(a,Qc,h),y(a,vr,f);const[m,g]=a.pageDimensions;return a.width=(c[2]-c[0])/m,a.height=(c[3]-c[1])/g,p&&(a.altTextData=p),a._initialData=r,e.comment&&a.setCommentData(e),y(a,r0,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:l(this,Zn),isSvg:l(this,vr)});if(this.addComment(i),e)return i.bitmapUrl=S(this,Xt,XT).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=S(this,Xt,xY).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const a=l(this,vr)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,Zn)))n.stamps.set(l(this,Zn),{area:a,serialized:i}),i.bitmap=S(this,Xt,XT).call(this,!1);else if(l(this,vr)){const c=n.stamps.get(l(this,Zn));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,Xt,XT).call(this,!1))}return i}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}},Be=new WeakMap,Zn=new WeakMap,yd=new WeakMap,Qc=new WeakMap,vd=new WeakMap,i0=new WeakMap,Jc=new WeakMap,Tg=new WeakMap,Sl=new WeakMap,vr=new WeakMap,r0=new WeakMap,Xt=new WeakSet,VA=function(e,n=!1){if(!e){this.remove();return}y(this,Be,e.bitmap),n||(y(this,Zn,e.id),y(this,vr,e.isSvg)),e.file&&y(this,i0,e.file.name),S(this,Xt,qT).call(this)},HA=function(){if(y(this,yd,null),this._uiManager.enableWaiting(!1),!!l(this,Jc)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Be)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Be)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},GT=function(){if(l(this,Zn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Zn)).then(i=>S(this,Xt,VA).call(this,i,!0)).finally(()=>S(this,Xt,HA).call(this));return}if(l(this,Qc)){const i=l(this,Qc);y(this,Qc,null),this._uiManager.enableWaiting(!0),y(this,yd,this._uiManager.imageManager.getFromUrl(i).then(r=>S(this,Xt,VA).call(this,r)).finally(()=>S(this,Xt,HA).call(this)));return}if(l(this,vd)){const i=l(this,vd);y(this,vd,null),this._uiManager.enableWaiting(!0),y(this,yd,this._uiManager.imageManager.getFromFile(i).then(r=>S(this,Xt,VA).call(this,r)).finally(()=>S(this,Xt,HA).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=bk.join(",");const n=this._uiManager._signal;y(this,yd,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,Xt,VA).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>S(this,Xt,HA).call(this))),e.click()},qT=function(){var u;const{div:e}=this;let{width:n,height:i}=l(this,Be);const[r,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*o;else if(n>a*r||i>a*o){const h=Math.min(a*r/n,a*o/i);n*=h,i*=h}this._uiManager.enableWaiting(!1);const c=y(this,Jc,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/r,this.height=i/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),S(this,Xt,rO).call(this),l(this,r0)||(this.parent.addUndoableEditor(this),y(this,r0,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,i0)&&this.div.setAttribute("aria-description",l(this,i0)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},KT=function(e,n){const{width:i,height:r}=l(this,Be);let o=i,a=r,c=l(this,Be);for(;o>2*e||a>2*n;){const u=o,h=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},rO=function(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,o=new Af,a=Math.ceil(i*e*o.sx),c=Math.ceil(r*n*o.sy),u=l(this,Jc);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const h=l(this,vr)?l(this,Be):S(this,Xt,KT).call(this,a,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,c)},XT=function(e){if(e){if(l(this,vr)){const r=this._uiManager.imageManager.getSvgUrl(l(this,Zn));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Be),n.getContext("2d").drawImage(l(this,Be),0,0),n.toDataURL()}if(l(this,vr)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Wm.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Wm.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Be),0,0,l(this,Be).width,l(this,Be).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Be))},xY=function(e){var a;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},B(QC,"_type","stamp"),B(QC,"_editorType",xt.STAMP),QC);var Pg,o0,wd,bd,Zc,ji,Ad,a0,l0,ca,tu,ts,eu,xd,c0,at,Wi,Sd,be,oO,_Y,Xa,aO,lO,YT;let SY=(Wi=class{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){A(this,be);A(this,Pg);A(this,o0,!1);A(this,wd,null);A(this,bd,null);A(this,Zc,null);A(this,ji,new Map);A(this,Ad,!1);A(this,a0,!1);A(this,l0,!1);A(this,ca,null);A(this,tu,null);A(this,ts,null);A(this,eu,null);A(this,xd,null);A(this,c0,-1);A(this,at);const d=[...l(Wi,Sd).values()];if(!Wi._initialized){Wi._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),y(this,at,t),this.pageIndex=e,this.div=n,y(this,Pg,r),y(this,wd,o),this.viewport=u,y(this,ts,c),this.drawLayer=a,this._structTree=i,l(this,at).addLayer(this)}get isEmpty(){return l(this,ji).size===0}get isInvisible(){return this.isEmpty&&l(this,at).getMode()===xt.NONE}updateToolbar(t){l(this,at).updateToolbar(t)}updateMode(t=l(this,at).getMode()){switch(S(this,be,YT).call(this),t){case xt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===xt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of l(Wi,Sd).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,ts))==null?void 0:e.div)}setEditingState(t){l(this,at).setEditingState(t)}addCommands(t){l(this,at).addCommands(t)}cleanUndoStack(t){l(this,at).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,wd))==null||e.div.classList.toggle("disabled",!t)}async enable(){var n;y(this,l0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=l(this,xd))==null||n.abort(),y(this,xd,null);const t=new Set;for(const i of l(this,be,oO))i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,at).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=l(this,wd);if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),l(this,at).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}y(this,l0,!1),l(this,at)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(y(this,a0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,ts)&&!l(this,xd)){y(this,xd,new AbortController);const i=l(this,at).combinedSignal(l(this,xd));l(this,ts).div.addEventListener("pointerdown",r=>{const{clientX:a,clientY:c,timeStamp:u}=r,h=l(this,c0);if(u-h>500){y(this,c0,u);return}y(this,c0,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(a,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const m=new RegExp(`^${hS}[0-9]+$`);for(const w of f)if(m.test(w.id)){p=w.id;break}if(!p)return;const g=l(this,ji).get(p);(g==null?void 0:g.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),g.dblclick(r))},{signal:i,capture:!0})}const t=l(this,wd);if(t){const i=new Map,r=new Map;for(const a of l(this,be,oO)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(t);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else r.set(a.annotationElementId,a);(n=this.getEditableAnnotation(a.annotationElementId))==null||n.show(),a.remove()}const o=t.getEditableAnnotations();for(const a of o){const{id:c}=a.data;if(l(this,at).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=i.get(c),u&&(l(this,at).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}S(this,be,YT).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of l(Wi,Sd).values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,a0,!1)}getEditableAnnotation(t){var e;return((e=l(this,wd))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,at).getActive()!==t&&l(this,at).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,ts))!=null&&t.div&&!l(this,eu)){y(this,eu,new AbortController);const e=l(this,at).combinedSignal(l(this,eu));l(this,ts).div.addEventListener("pointerdown",S(this,be,_Y).bind(this),{signal:e}),l(this,ts).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,ts))!=null&&t.div&&l(this,eu)&&(l(this,eu).abort(),y(this,eu,null),l(this,ts).div.classList.remove("highlighting"))}enableClick(){if(l(this,bd))return;y(this,bd,new AbortController);const t=l(this,at).combinedSignal(l(this,bd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,bd))==null||t.abort(),y(this,bd,null)}attach(t){l(this,ji).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,at).isDeletedAnnotationElement(e)&&l(this,at).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,ji).delete(t.id),(e=l(this,Pg))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,a0)&&t.annotationElementId&&l(this,at).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,at).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,at).addDeletedAnnotationElement(t.annotationElementId),ze.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,at).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,l0)),l(this,at).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Zc)&&(t._focusEventsAllowed=!1,y(this,Zc,setTimeout(()=>{y(this,Zc,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,at)._signal}),e.focus())},0))),t._structTreeParentId=(n=l(this,Pg))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of l(this,ji).values())if(e.uid===t)return e;return null}getNextId(){return l(this,at).getId()}combinedSignal(t){return l(this,at).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,be,Xa))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,at).updateMode(t.mode);const{offsetX:n,offsetY:i}=S(this,be,lO).call(this),r=this.getNextId(),o=S(this,be,aO).call(this,{parent:this,id:r,x:n,y:i,uiManager:l(this,at),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(Wi,Sd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,at)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=S(this,be,aO).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,at),isCentered:e,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(S(this,be,lO).call(this),!0,t)}setSelected(t){l(this,at).setSelected(t)}toggleSelected(t){l(this,at).toggleSelected(t)}unselect(t){l(this,at).unselect(t)}pointerup(t){var i;const{isMac:e}=us.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Ad)||(y(this,Ad,!1),(i=l(this,be,Xa))!=null&&i.isDrawer&&l(this,be,Xa).supportMultipleDrawings))return;if(!l(this,o0)){y(this,o0,!0);return}const n=l(this,at).getMode();if(n===xt.STAMP||n===xt.SIGNATURE){l(this,at).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(l(this,at).getMode()===xt.HIGHLIGHT&&this.enableTextSelection(),l(this,Ad)){y(this,Ad,!1);return}const{isMac:e}=us.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(y(this,Ad,!0),(i=l(this,be,Xa))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=l(this,at).getActive();y(this,o0,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,ca)){l(this,be,Xa).startDrawing(this,l(this,at),!1,t);return}l(this,at).setCurrentDrawingSession(this),y(this,ca,new AbortController);const e=l(this,at).combinedSignal(l(this,ca));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(y(this,tu,null),this.commitOrRemove())},{signal:e}),l(this,be,Xa).startDrawing(this,l(this,at),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&y(this,tu,e);return}l(this,tu)&&setTimeout(()=>{var e;(e=l(this,tu))==null||e.focus(),y(this,tu,null)},0)}endDrawingSession(t=!1){return l(this,ca)?(l(this,at).setCurrentDrawingSession(null),l(this,ca).abort(),y(this,ca,null),y(this,tu,null),l(this,be,Xa).endDrawing(t)):null}findNewParent(t,e,n){const i=l(this,at).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,ca)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,ca)&&l(this,be,Xa).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,at).getActive())==null?void 0:t.parent)===this&&(l(this,at).commitOrRemove(),l(this,at).setActiveEditor(null)),l(this,Zc)&&(clearTimeout(l(this,Zc)),y(this,Zc,null));for(const n of l(this,ji).values())(e=l(this,Pg))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,ji).clear(),l(this,at).removeLayer(this)}render({viewport:t}){this.viewport=t,bf(this.div,t);for(const e of l(this,at).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,at).commitOrRemove(),S(this,be,YT).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,bf(this.div,{rotation:n}),e!==n)for(const i of l(this,ji).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,at).viewParameters.realScale}},Pg=new WeakMap,o0=new WeakMap,wd=new WeakMap,bd=new WeakMap,Zc=new WeakMap,ji=new WeakMap,Ad=new WeakMap,a0=new WeakMap,l0=new WeakMap,ca=new WeakMap,tu=new WeakMap,ts=new WeakMap,eu=new WeakMap,xd=new WeakMap,c0=new WeakMap,at=new WeakMap,Sd=new WeakMap,be=new WeakSet,oO=function(){return l(this,ji).size!==0?l(this,ji).values():l(this,at).getEditors(this.pageIndex)},_Y=function(t){l(this,at).unselectAll();const{target:e}=t;if(e===l(this,ts).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,ts).div.contains(e)){const{isMac:n}=us.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,at).showAllEditors("highlight",!0,!0),l(this,ts).div.classList.add("free"),this.toggleDrawing(),u3.startHighlighting(this,l(this,at).direction==="ltr",{target:l(this,ts).div,x:t.x,y:t.y}),l(this,ts).div.addEventListener("pointerup",()=>{l(this,ts).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,at)._signal}),t.preventDefault()}},Xa=function(){return l(Wi,Sd).get(l(this,at).getMode())},aO=function(t){const e=l(this,be,Xa);return e?new e.prototype.constructor(t):null},lO=function(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+i),u=(r+a)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},YT=function(){for(const t of l(this,ji).values())t.isEmpty()&&t.remove()},B(Wi,"_initialized",!1),A(Wi,Sd,new Map([Yvt,twt,ewt,u3,iO].map(t=>[t._editorType,t]))),Wi);var ua,hi,kg,un,Z_,Yk,CY,sc,cO,TY,uO;let EY=(un=class{constructor({pageIndex:t}){A(this,sc);A(this,ua,null);A(this,hi,new Map);A(this,kg,new Map);this.pageIndex=t}setParent(t){if(!l(this,ua)){y(this,ua,t);return}if(l(this,ua)!==t){if(l(this,hi).size>0)for(const e of l(this,hi).values())e.remove(),t.append(e);y(this,ua,t)}}static get _svgFactory(){return Rt(this,"_svgFactory",new pS)}draw(t,e=!1,n=!1){const i=$t(un,Z_)._++,r=S(this,sc,cO).call(this),o=un._svgFactory.createElement("defs");r.append(o);const a=un._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,kg).set(i,a);const u=n?S(this,sc,TY).call(this,o,c):null,h=un._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,hi).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const n=$t(un,Z_)._++,i=S(this,sc,cO).call(this),r=un._svgFactory.createElement("defs");i.append(r);const o=un._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=un._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=un._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=un._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=un._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,hi).set(n,i),n}finalizeDraw(t,e){l(this,kg).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?l(this,hi).get(t):t;if(a){if(n&&S(this,sc,uO).call(this,a,n),i&&S(c=un,Yk,CY).call(c,a,i),r){const{classList:u}=a;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;S(this,sc,uO).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const n=l(this,hi).get(t);n&&(l(e,ua).append(n),l(this,hi).delete(t),l(e,hi).set(t,n))}remove(t){l(this,kg).delete(t),l(this,ua)!==null&&(l(this,hi).get(t).remove(),l(this,hi).delete(t))}destroy(){y(this,ua,null);for(const t of l(this,hi).values())t.remove();l(this,hi).clear(),l(this,kg).clear()}},ua=new WeakMap,hi=new WeakMap,kg=new WeakMap,Z_=new WeakMap,Yk=new WeakSet,CY=function(t,[e,n,i,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},sc=new WeakSet,cO=function(){const t=un._svgFactory.create(1,1,!0);return l(this,ua).append(t),t.setAttribute("aria-hidden",!0),t},TY=function(t,e){const n=un._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=un._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},uO=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},A(un,Yk),A(un,Z_,0),un);globalThis._pdfjsTestingUtils={HighlightOutliner:WN};globalThis.pdfjsLib={AbortException:qu,AnnotationEditorLayer:SY,AnnotationEditorParamsType:Bt,AnnotationEditorType:xt,AnnotationEditorUIManager:Rb,AnnotationLayer:n$,AnnotationMode:Gl,AnnotationType:mn,applyOpacity:vK,build:xX,ColorPicker:Zj,createValidAbsoluteUrl:Bj,CSSConstants:yK,DOMSVGFactory:pS,DrawLayer:EY,FeatureTest:us,fetchData:zb,findContrastColor:wK,getDocument:Qj,getFilenameFromUrl:pK,getPdfFilenameFromUrl:gK,getRGB:Wb,getUuid:Vj,getXfaPageViewport:mK,GlobalWorkerOptions:ql,ImageKind:Ex,InvalidPDFException:vk,isDataScheme:X1,isPdfFile:cM,isValidExplicitDest:JK,MathClamp:Js,noContextMenu:Xr,normalizeUnicode:uK,OPS:kb,OutputScale:Af,PasswordResponses:lK,PDFDataRangeTransport:Jj,PDFDateString:wk,PDFWorker:_k,PermissionFlag:aK,PixelsPerInch:Wm,RenderingCancelledException:lM,renderRichText:Gj,ResponseException:dS,setLayerDimensions:bf,shadow:Rt,SignatureExtractor:Kl,stopEvent:Qe,SupportedImageMimeTypes:bk,TextLayer:fS,TouchManager:qj,updateUrlHash:Uj,Util:rt,VerbosityLevel:q1,version:AX,XfaLayer:zj};const nwt=Object.freeze(Object.defineProperty({__proto__:null,AbortException:qu,AnnotationEditorLayer:SY,AnnotationEditorParamsType:Bt,AnnotationEditorType:xt,AnnotationEditorUIManager:Rb,AnnotationLayer:n$,AnnotationMode:Gl,AnnotationType:mn,CSSConstants:yK,ColorPicker:Zj,DOMSVGFactory:pS,DrawLayer:EY,FeatureTest:us,GlobalWorkerOptions:ql,ImageKind:Ex,InvalidPDFException:vk,MathClamp:Js,OPS:kb,OutputScale:Af,PDFDataRangeTransport:Jj,PDFDateString:wk,PDFWorker:_k,PasswordResponses:lK,PermissionFlag:aK,PixelsPerInch:Wm,RenderingCancelledException:lM,ResponseException:dS,SignatureExtractor:Kl,SupportedImageMimeTypes:bk,TextLayer:fS,TouchManager:qj,Util:rt,VerbosityLevel:q1,XfaLayer:zj,applyOpacity:vK,build:xX,createValidAbsoluteUrl:Bj,fetchData:zb,findContrastColor:wK,getDocument:Qj,getFilenameFromUrl:pK,getPdfFilenameFromUrl:gK,getRGB:Wb,getUuid:Vj,getXfaPageViewport:mK,isDataScheme:X1,isPdfFile:cM,isValidExplicitDest:JK,noContextMenu:Xr,normalizeUnicode:uK,renderRichText:Gj,setLayerDimensions:bf,shadow:Rt,stopEvent:Qe,updateUrlHash:Uj,version:AX},Symbol.toStringTag,{value:"Module"}));var h3=Object.prototype.hasOwnProperty;function d3(s,t,e){for(e of s.keys())if(Av(e,t))return e}function Av(s,t){var e,n,i;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Av(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=d3(t,i),!i)||!t.has(i))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=d3(t,i),!i)||!Av(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(h3.call(s,e)&&++n&&!h3.call(t,e)||!(e in t)||!Av(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}function Z1(s){let t=!1;return{promise:new Promise((n,i)=>{s.then(r=>!t&&n(r)).catch(r=>!t&&i(r))}),cancel(){t=!0}}}const swt=["onCopy","onCut","onPaste"],iwt=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],rwt=["onFocus","onBlur"],owt=["onInput","onInvalid","onReset","onSubmit"],awt=["onLoad","onError"],lwt=["onKeyDown","onKeyPress","onKeyUp"],cwt=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],uwt=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],hwt=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],dwt=["onSelect"],fwt=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pwt=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],gwt=["onScroll"],mwt=["onWheel"],ywt=["onAnimationStart","onAnimationEnd","onAnimationIteration"],vwt=["onTransitionEnd"],wwt=["onToggle"],bwt=["onChange"],Awt=[...swt,...iwt,...rwt,...owt,...awt,...lwt,...cwt,...uwt,...hwt,...dwt,...fwt,...pwt,...gwt,...mwt,...ywt,...vwt,...bwt,...wwt];function PY(s,t){const e={};for(const n of Awt){const i=s[n];i&&(t?e[n]=r=>i(r,t(n)):e[n]=i)}return e}var xwt="Invariant failed";function we(s,t){if(!s)throw new Error(xwt)}var Swt=function(){},_wt=Swt;const ei=PF(_wt),kY=C.createContext(null),Ewt="noopener noreferrer nofollow";class Cwt{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return we(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){we(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||Ewt,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{we(this.pdfDocument),we(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{we(Array.isArray(e));const n=e[0];new Promise(i=>{we(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{i(r)}).catch(()=>{we(!1)}):typeof n=="number"?i(n):we(!1)}).then(i=>{const r=i+1;we(this.pdfViewer),we(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:i,pageNumber:r})})})}goToPage(t){const e=t-1;we(this.pdfViewer),we(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function xv({children:s,type:t}){return _.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const f3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function Twt(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Mb(){return C.useReducer(Twt,{value:void 0,error:void 0})}const hM=typeof window<"u",RY=hM&&window.location.protocol==="file:";function Pwt(s){return typeof s<"u"}function Bf(s){return Pwt(s)&&s!==null}function kwt(s){return typeof s=="string"}function Rwt(s){return s instanceof ArrayBuffer}function Mwt(s){return we(hM),s instanceof Blob}function hO(s){return kwt(s)&&/^data:/.test(s)}function p3(s){we(hO(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function Dwt(){return hM&&window.devicePixelRatio||1}const MY="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function g3(){ei(!RY,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${MY}`)}function Iwt(){ei(!RY,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${MY}`)}function qm(s){s!=null&&s.cancel&&s.cancel()}function dO(s,t){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function DY(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function Lwt(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=i=>{if(!i.target)return e(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:Nwt}=nwt,Owt=(s,t)=>{switch(t){case f3.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case f3.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function m3(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const Fwt=C.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:a,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:p,onLoadSuccess:m,onPassword:g=Owt,onSourceError:w,onSourceSuccess:v,options:b,renderMode:x,rotate:E,scale:T,...P},k){const[R,M]=Mb(),{value:D,error:L}=R,[$,U]=Mb(),{value:I,error:H}=$,N=C.useRef(new Cwt),j=C.useRef([]),F=C.useRef(void 0),O=C.useRef(void 0);o&&o!==F.current&&m3(o)&&(ei(!Av(o,F.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),F.current=o),b&&b!==O.current&&(ei(!Av(b,O.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),O.current=b);const V=C.useRef({scrollPageIntoView:Wt=>{const{dest:Jt,pageNumber:ke,pageIndex:Ln=ke-1}=Wt;if(d){d({dest:Jt,pageIndex:Ln,pageNumber:ke});return}const sn=j.current[Ln];if(sn){sn.scrollIntoView();return}ei(!1,`An internal link leading to page ${ke} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});C.useImperativeHandle(k,()=>({linkService:N,pages:j,viewer:V}),[]);function X(){v&&v()}function z(){L&&(ei(!1,L.toString()),w&&w(L))}function W(){M({type:"RESET"})}C.useEffect(W,[o,M]);const et=C.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return hO(o)?{data:p3(o)}:(g3(),{url:o});if(o instanceof Nwt)return{range:o};if(Rwt(o))return{data:o};if(hM&&Mwt(o))return{data:await Lwt(o)};if(we(typeof o=="object"),we(m3(o)),"url"in o&&typeof o.url=="string"){if(hO(o.url)){const{url:Wt,...Jt}=o;return{data:p3(Wt),...Jt}}g3()}return o},[o]);C.useEffect(()=>{const Wt=Z1(et());return Wt.promise.then(Jt=>{M({type:"RESOLVE",value:Jt})}).catch(Jt=>{M({type:"REJECT",error:Jt})}),()=>{qm(Wt)}},[et,M]),C.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){z();return}X()}},[D]);function wt(){I&&(m&&m(I),j.current=new Array(I.numPages),N.current.setDocument(I))}function ft(){H&&(ei(!1,H.toString()),f&&f(H))}C.useEffect(function(){U({type:"RESET"})},[U,D]),C.useEffect(function(){if(!D)return;const Jt=b?{...D,...b}:D,ke=Qj(Jt);p&&(ke.onProgress=p),g&&(ke.onPassword=g);const Ln=ke;return Ln.promise.then(sn=>{Ln.destroyed||U({type:"RESOLVE",value:sn})}).catch(sn=>{Ln.destroyed||U({type:"REJECT",error:sn})}),()=>{Ln.destroy()}},[b,U,D]),C.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){ft();return}wt()}},[I]),C.useEffect(function(){N.current.setViewer(V.current),N.current.setExternalLinkRel(i),N.current.setExternalLinkTarget(r)},[i,r]);const q=C.useCallback((Wt,Jt)=>{j.current[Wt]=Jt},[]),Se=C.useCallback(Wt=>{delete j.current[Wt]},[]),Qt=C.useMemo(()=>({imageResourcesPath:c,linkService:N.current,onItemClick:d,pdf:I,registerPage:q,renderMode:x,rotate:E,scale:T,unregisterPage:Se}),[c,d,I,q,x,E,T,Se]),_e=C.useMemo(()=>PY(P,()=>I),[P,I]);function Lt(){function Wt(ke){return!!(ke!=null&&ke.pdf)}if(!Wt(Qt))throw new Error("pdf is undefined");const Jt=typeof t=="function"?t(Qt):t;return _.jsx(kY.Provider,{value:Qt,children:Jt})}function Is(){return o?I==null?_.jsx(xv,{type:"loading",children:typeof u=="function"?u():u}):I===!1?_.jsx(xv,{type:"error",children:typeof n=="function"?n():n}):Lt():_.jsx(xv,{type:"no-data",children:typeof h=="function"?h():h})}return _.jsx("div",{className:Nb("react-pdf__Document",e),ref:a,..._e,children:Is()})});function IY(){return C.useContext(kY)}function LY(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){for(var o=0,a=e;o<a.length;o++){var c=a[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const NY=C.createContext(null);function dM(){return C.useContext(NY)}function jwt(){const s=IY(),t=dM();we(t);const e={...s,...t},{filterAnnotations:n,imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:d,renderForms:f,rotate:p,scale:m=1}=e;we(d),we(h),we(r);const[g,w]=Mb(),{value:v,error:b}=g,x=C.useRef(null);ei(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){v&&a&&a(v)}function T(){b&&(ei(!1,b.toString()),o&&o(b))}C.useEffect(function(){w({type:"RESET"})},[w,h]),C.useEffect(function(){if(!h)return;const D=Z1(h.getAnnotations()),L=D;return D.promise.then($=>{w({type:"RESOLVE",value:$})}).catch($=>{w({type:"REJECT",error:$})}),()=>{qm(L)}},[w,h]),C.useEffect(()=>{if(v!==void 0){if(v===!1){T();return}E()}},[v]);function P(){u&&u()}function k(M){ei(!1,`${M}`),c&&c(M)}const R=C.useMemo(()=>h.getViewport({scale:m,rotation:p}),[h,p,m]);return C.useEffect(function(){if(!d||!h||!r||!v)return;const{current:D}=x;if(!D)return;const L=R.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:D,l10n:null,linkService:r,page:h,structTreeLayer:null,viewport:L},U={annotations:n?n({annotations:v}):v,annotationStorage:d.annotationStorage,div:D,imageResourcesPath:i,linkService:r,page:h,renderForms:f,viewport:L};D.innerHTML="";try{new n$($).render(U),P()}catch(I){k(I)}return()=>{}},[v,n,i,r,h,d,f,R]),_.jsx("div",{className:Nb("react-pdf__Page__annotations","annotationLayer"),ref:x})}const OY={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},$wt=/^H(\d+)$/;function Bwt(s){return s in OY}function fM(s){return"children"in s}function FY(s){return fM(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function Uwt(s){const t={};if(fM(s)){const{role:e}=s,n=e.match($wt);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(Bwt(e)){const i=OY[e];i&&(t.role=i)}}return t}function jY(s){const t={};if(fM(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),FY(s)){const[e]=s.children;if(e){const n=jY(e);return{...t,...n}}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function Vwt(s){return s?{...Uwt(s),...jY(s)}:null}function $Y({className:s,node:t}){const e=C.useMemo(()=>Vwt(t),[t]),n=C.useMemo(()=>!fM(t)||FY(t)?null:t.children.map((i,r)=>_.jsx($Y,{node:i},r)),[t]);return _.jsx("span",{className:s,...e,children:n})}function Hwt(){const s=dM();we(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,i]=Mb(),{value:r,error:o}=n,{customTextRenderer:a,page:c}=s;function u(){r&&e&&e(r)}function h(){o&&(ei(!1,o.toString()),t&&t(o))}return C.useEffect(function(){i({type:"RESET"})},[i,c]),C.useEffect(function(){if(a||!c)return;const f=Z1(c.getStructTree()),p=f;return f.promise.then(m=>{i({type:"RESOLVE",value:m})}).catch(m=>{i({type:"REJECT",error:m})}),()=>qm(p)},[a,c,i]),C.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?_.jsx($Y,{className:"react-pdf__Page__structTree structTree",node:r}):null}const y3=Gl;function zwt(s){const t=dM();we(t);const e={...t,...s},{_className:n,canvasBackground:i,devicePixelRatio:r=Dwt(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=e,{canvasRef:p}=s;we(c);const m=C.useRef(null);function g(){c&&a&&a(dO(c,f))}function w(E){DY(E)||(ei(!1,E.toString()),o&&o(E))}const v=C.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),b=C.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);C.useEffect(function(){if(!c)return;c.cleanup();const{current:T}=m;if(!T)return;T.width=v.width,T.height=v.height,T.style.width=`${Math.floor(b.width)}px`,T.style.height=`${Math.floor(b.height)}px`,T.style.visibility="hidden";const P={annotationMode:u?y3.ENABLE_FORMS:y3.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:v};i&&(P.background=i);const k=c.render(P),R=k;return k.promise.then(()=>{T.style.visibility="",g()}).catch(w),()=>qm(R)},[i,c,u,v,b]);const x=C.useCallback(()=>{const{current:E}=m;E&&(E.width=0,E.height=0)},[]);return C.useEffect(()=>x,[x]),_.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:LY(p,m),style:{display:"block",userSelect:"none"},children:h?_.jsx(Hwt,{}):null})}function Wwt(s){return"str"in s}function Gwt(){const s=dM();we(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:h}=s;we(o);const[d,f]=Mb(),{value:p,error:m}=d,g=C.useRef(null);ei(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){p&&n&&n(p)}function v(){m&&(ei(!1,m.toString()),e&&e(m))}C.useEffect(function(){f({type:"RESET"})},[o,f]),C.useEffect(function(){if(!o)return;const R=Z1(o.getTextContent()),M=R;return R.promise.then(D=>{f({type:"RESOLVE",value:D})}).catch(D=>{f({type:"REJECT",error:D})}),()=>qm(M)},[o,f]),C.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}w()}},[p]);const b=C.useCallback(()=>{r&&r()},[r]),x=C.useCallback(k=>{DY(k)||(ei(!1,k.toString()),i&&i(k))},[i]);function E(){const k=g.current;k&&k.classList.add("selecting")}function T(){const k=g.current;k&&k.classList.remove("selecting")}const P=C.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return C.useLayoutEffect(function(){if(!o||!p)return;const{current:R}=g;if(!R)return;R.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),D={container:R,textContentSource:M,viewport:P},L=new fS(D),$=L;return L.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",R.append(U);const I=R.querySelectorAll('[role="presentation"]');if(t){let H=0;p.items.forEach((N,j)=>{if(!Wwt(N))return;const F=I[H];if(!F)return;const O=t({pageIndex:a,pageNumber:c,itemIndex:j,...N});F.innerHTML=O,H+=N.str&&N.hasEOL?2:1})}b()}).catch(x),()=>qm($)},[t,x,b,o,a,c,p,P]),_.jsx("div",{className:Nb("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:E,ref:g})}const v3=1;function qwt(s){const e={...IY(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",filterAnnotations:p,height:m,inputRef:g,loading:w="Loading page",noData:v="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:x,onGetStructTreeError:E,onGetStructTreeSuccess:T,onGetTextError:P,onGetTextSuccess:k,onLoadError:R,onLoadSuccess:M,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:L,onRenderError:$,onRenderSuccess:U,onRenderTextLayerError:I,onRenderTextLayerSuccess:H,pageIndex:N,pageNumber:j,pdf:F,registerPage:O,renderAnnotationLayer:V=!0,renderForms:X=!1,renderMode:z="canvas",renderTextLayer:W=!0,rotate:et,scale:wt=v3,unregisterPage:ft,width:q,...Se}=e,[Qt,_e]=Mb(),{value:Lt,error:Is}=Qt,Wt=C.useRef(null);we(F);const Jt=Bf(j)?j-1:N??null,ke=j??(Bf(N)?N+1:null),Ln=et??(Lt?Lt.rotate:null),sn=C.useMemo(()=>{if(!Lt)return null;let Ha=1;const sh=wt??v3;if(q||m){const Zi=Lt.getViewport({scale:1,rotation:Ln});q?Ha=q/Zi.width:m&&(Ha=m/Zi.height)}return sh*Ha},[m,Lt,Ln,wt,q]);C.useEffect(function(){return()=>{Bf(Jt)&&i&&ft&&ft(Jt)}},[i,F,Jt,ft]);function If(){if(M){if(!Lt||!sn)return;M(dO(Lt,sn))}if(i&&O){if(!Bf(Jt)||!Wt.current)return;O(Jt,Wt.current)}}function eh(){Is&&(ei(!1,Is.toString()),R&&R(Is))}C.useEffect(function(){_e({type:"RESET"})},[_e,F,Jt]),C.useEffect(function(){if(!F||!ke)return;const sh=Z1(F.getPage(ke)),Zi=sh;return sh.promise.then(Gb=>{_e({type:"RESOLVE",value:Gb})}).catch(Gb=>{_e({type:"REJECT",error:Gb})}),()=>qm(Zi)},[_e,F,ke]),C.useEffect(()=>{if(Lt!==void 0){if(Lt===!1){eh();return}If()}},[Lt,sn]);const ly=C.useMemo(()=>Bf(Jt)&&ke&&Bf(Ln)&&Bf(sn)?{_className:n,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,filterAnnotations:p,onGetAnnotationsError:b,onGetAnnotationsSuccess:x,onGetStructTreeError:E,onGetStructTreeSuccess:T,onGetTextError:P,onGetTextSuccess:k,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:L,onRenderError:$,onRenderSuccess:U,onRenderTextLayerError:I,onRenderTextLayerSuccess:H,page:Lt,pageIndex:Jt,pageNumber:ke,renderForms:X,renderTextLayer:W,rotate:Ln,scale:sn}:null,[n,r,h,d,p,b,x,E,T,P,k,D,L,$,U,I,H,Lt,Jt,ke,X,W,Ln,sn]),Lf=C.useMemo(()=>PY(Se,()=>Lt&&(sn?dO(Lt,sn):void 0)),[Se,Lt,sn]),Nf=`${Jt}@${sn}/${Ln}`;function oc(){switch(z){case"custom":return we(u),_.jsx(u,{},`${Nf}_custom`);case"none":return null;case"canvas":default:return _.jsx(zwt,{canvasRef:o},`${Nf}_canvas`)}}function SM(){return W?_.jsx(Gwt,{},`${Nf}_text`):null}function _M(){return V?_.jsx(jwt,{},`${Nf}_annotations`):null}function Ti(){function Ha(Zi){return!!(Zi!=null&&Zi.page)}if(!Ha(ly))throw new Error("page is undefined");const sh=typeof a=="function"?a(ly):a;return _.jsxs(NY.Provider,{value:ly,children:[oc(),SM(),_M(),sh]})}function nh(){return ke?F===null||Lt===void 0||Lt===null?_.jsx(xv,{type:"loading",children:typeof w=="function"?w():w}):F===!1||Lt===!1?_.jsx(xv,{type:"error",children:typeof f=="function"?f():f}):Ti():_.jsx(xv,{type:"no-data",children:typeof v=="function"?v():v})}return _.jsx("div",{className:Nb(n,c),"data-page-number":ke,ref:LY(g,Wt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${sn}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Lf,children:nh()})}Iwt();ql.workerSrc="pdf.worker.mjs";var Cx={};Cx.d=(s,t)=>{for(var e in t)Cx.o(t,e)&&!Cx.o(s,e)&&Object.defineProperty(s,e,{enumerable:!0,get:t[e]})};Cx.o=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var At=globalThis.pdfjsLib={};Cx.d(At,{AbortException:()=>xf,AnnotationEditorLayer:()=>AF,AnnotationEditorParamsType:()=>Ht,AnnotationEditorType:()=>Pt,AnnotationEditorUIManager:()=>Xm,AnnotationLayer:()=>Vbt,AnnotationMode:()=>_h,ColorPicker:()=>Mk,DOMSVGFactory:()=>f$,DrawLayer:()=>_F,FeatureTest:()=>bi,GlobalWorkerOptions:()=>Tu,ImageKind:()=>QT,InvalidPDFException:()=>pO,MissingPDFException:()=>gS,OPS:()=>Yo,OutputScale:()=>mO,PDFDataRangeTransport:()=>U7,PDFDateString:()=>c$,PDFWorker:()=>_v,PasswordResponses:()=>Qwt,PermissionFlag:()=>Ywt,PixelsPerInch:()=>Sf,RenderingCancelledException:()=>a$,TextLayer:()=>mS,TouchManager:()=>kk,UnexpectedResponseException:()=>Ck,Util:()=>ht,VerbosityLevel:()=>pM,XfaLayer:()=>H7,build:()=>xbt,createValidAbsoluteUrl:()=>e0t,fetchData:()=>vM,getDocument:()=>fbt,getFilenameFromUrl:()=>u0t,getPdfFilenameFromUrl:()=>h0t,getXfaPageViewport:()=>d0t,isDataScheme:()=>wM,isPdfFile:()=>l$,noContextMenu:()=>Oa,normalizeUnicode:()=>a0t,setLayerDimensions:()=>Km,shadow:()=>Ft,stopEvent:()=>Br,version:()=>Abt});const ni=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),BY=[1,0,0,1,0,0],fO=[.001,0,0,.001,0,0],Kwt=1e7,KD=1.35,Dr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xwt="pdfjs_internal_editor_",Pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Ywt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Fs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},QT={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Nn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},uA={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pM={ERRORS:0,WARNINGS:1,INFOS:5},Yo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Qwt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gM=pM.WARNINGS;function Jwt(s){Number.isInteger(s)&&(gM=s)}function Zwt(){return gM}function mM(s){gM>=pM.INFOS&&console.log(`Info: ${s}`)}function kt(s){gM>=pM.WARNINGS&&console.log(`Warning: ${s}`)}function xe(s){throw new Error(s)}function Rn(s,t){s||xe(t)}function t0t(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function e0t(s,t=null,e=null){if(!s)return null;try{if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const i=s.match(/\./g);(i==null?void 0:i.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=o0t(s)}catch{}}const n=t?new URL(s,t):new URL(s);if(t0t(n))return n}catch{}return null}function Ft(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Df=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class w3 extends Df{constructor(t,e){super(t,"PasswordException"),this.code=e}}class XD extends Df{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class pO extends Df{constructor(t){super(t,"InvalidPDFException")}}class gS extends Df{constructor(t){super(t,"MissingPDFException")}}class Ck extends Df{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class n0t extends Df{constructor(t){super(t,"FormatError")}}class xf extends Df{constructor(t){super(t,"AbortException")}}function UY(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&xe("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function yM(s){typeof s!="string"&&xe("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function s0t(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function r$(s){const t=Object.create(null);for(const[e,n]of s)t[e]=n;return t}function i0t(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function r0t(){try{return new Function(""),!0}catch{return!1}}class bi{static get isLittleEndian(){return Ft(this,"isLittleEndian",i0t())}static get isEvalSupported(){return Ft(this,"isEvalSupported",r0t())}static get isOffscreenCanvasSupported(){return Ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ft(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ft(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ft(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Ft(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const YD=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var ju,JT,gO;class ht{static makeHexColor(t,e,n){return`#${YD[t]}${YD[e]}${YD[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[n,i]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[i,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(n+o)/2,c=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(t,e,n,i,r,o,a,c,u){return u?(u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,c)):u=[Math.min(t,a),Math.min(e,c),Math.max(t,a),Math.max(e,c)],S(this,ju,gO).call(this,t,n,r,a,e,i,o,c,3*(-t+3*(n-r)+a),6*(t-2*n+r),3*(n-t),u),S(this,ju,gO).call(this,t,n,r,a,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),u),u}}ju=new WeakSet,JT=function(t,e,n,i,r,o,a,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,m=d*(d*(d*t+3*u*e)+3*f*n)+p*i,g=d*(d*(d*r+3*u*o)+3*f*a)+p*c;h[0]=Math.min(h[0],m),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],m),h[3]=Math.max(h[3],g)},gO=function(t,e,n,i,r,o,a,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,ju,JT).call(this,t,e,n,i,r,o,a,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const m=Math.sqrt(p),g=2*u;S(this,ju,JT).call(this,t,e,n,i,r,o,a,c,(-h+m)/g,f),S(this,ju,JT).call(this,t,e,n,i,r,o,a,c,(-h-m)/g,f)},A(ht,ju);function o0t(s){return decodeURIComponent(escape(s))}let QD=null,b3=null;function a0t(s){return QD||(QD=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,b3=new Map([["","t"]])),s.replaceAll(QD,(t,e,n)=>e?e.normalize("NFKC"):b3.get(n))}function l0t(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),UY(s)}const o$="pdfjs_internal_id_";function c0t(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(UY(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});const dc="http://www.w3.org/2000/svg",np=class np{};B(np,"CSS",96),B(np,"PDF",72),B(np,"PDF_TO_CSS_UNITS",np.CSS/np.PDF);let Sf=np;async function vM(s,t="text"){if(zA(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class tC{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let m,g,w,v;h===0?(m=Math.abs(u-t[1])*n+r,g=Math.abs(c-t[0])*n+o,w=(t[3]-t[1])*n,v=(t[2]-t[0])*n):(m=Math.abs(c-t[0])*n+r,g=Math.abs(u-t[1])*n+o,w=(t[2]-t[0])*n,v=(t[3]-t[1])*n),this.transform=[h*n,d*n,f*n,p*n,m-h*n*c-f*n*u,g-d*n*c-p*n*u],this.width=w,this.height=v}get rawDims(){const{userUnit:t,viewBox:e}=this,n=e.map(i=>i*t);return Ft(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new tC({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return ht.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=ht.applyTransform([t[0],t[1]],this.transform),n=ht.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return ht.applyInverseTransform([t,e],this.transform)}}class a$ extends Df{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function wM(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function l$(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function u0t(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function h0t(s,t="document.pdf"){if(typeof s!="string")return t;if(wM(s))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(s);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class A3{constructor(){B(this,"started",Object.create(null));B(this,"times",[])}time(t){t in this.started&&kt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||kt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms
`);return t.join("")}}function zA(s,t){try{const{protocol:e}=t?new URL(s,t):new URL(s);return e==="http:"||e==="https:"}catch{return!1}}function Oa(s){s.preventDefault()}function Br(s){s.preventDefault(),s.stopPropagation()}var tE;class c${static toDateObject(t){if(!t||typeof t!="string")return null;l(this,tE)||y(this,tE,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,tE).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(n,i,r,o,a,c))}}tE=new WeakMap,A(c$,tE);function d0t(s,{scale:t=1,rotation:e=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new tC({viewBox:r,userUnit:1,scale:t,rotation:e})}function u$(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(kt(`Not a valid color format: "${s}"`),[0,0,0])}function f0t(s){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,u$(n))}t.remove()}function Ue(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform();return[t,e,n,i,r,o]}function qa(s){const{a:t,b:e,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[t,e,n,i,r,o]}function Km(s,t,e=!1,n=!0){if(t instanceof tC){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=s,a=bi.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}n&&s.setAttribute("data-main-rotation",t.rotation)}class mO{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var _d,Rg,ha,Mg,eE,nE,Qk,VY,xi,HY,zY,ZT,WY,vO;const yc=class yc{constructor(t){A(this,xi);A(this,_d,null);A(this,Rg,null);A(this,ha);A(this,Mg,null);A(this,eE,null);y(this,ha,t),l(yc,nE)||y(yc,nE,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=y(this,_d,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,ha)._uiManager._signal;t.addEventListener("contextmenu",Oa,{signal:e}),t.addEventListener("pointerdown",S(yc,Qk,VY),{signal:e});const n=y(this,Mg,document.createElement("div"));n.className="buttons",t.append(n);const i=l(this,ha).toolbarPosition;if(i){const{style:r}=t,o=l(this,ha)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,xi,WY).call(this),t}get div(){return l(this,_d)}hide(){var t;l(this,_d).classList.add("hidden"),(t=l(this,Rg))==null||t.hideDropdown()}show(){var t;l(this,_d).classList.remove("hidden"),(t=l(this,eE))==null||t.shown()}async addAltText(t){const e=await t.render();S(this,xi,ZT).call(this,e),l(this,Mg).prepend(e,l(this,xi,vO)),y(this,eE,t)}addColorPicker(t){y(this,Rg,t);const e=t.renderButton();S(this,xi,ZT).call(this,e),l(this,Mg).prepend(e,l(this,xi,vO))}remove(){var t;l(this,_d).remove(),(t=l(this,Rg))==null||t.destroy(),y(this,Rg,null)}};_d=new WeakMap,Rg=new WeakMap,ha=new WeakMap,Mg=new WeakMap,eE=new WeakMap,nE=new WeakMap,Qk=new WeakSet,VY=function(t){t.stopPropagation()},xi=new WeakSet,HY=function(t){l(this,ha)._focusEventsAllowed=!1,Br(t)},zY=function(t){l(this,ha)._focusEventsAllowed=!0,Br(t)},ZT=function(t){const e=l(this,ha)._uiManager._signal;t.addEventListener("focusin",S(this,xi,HY).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",S(this,xi,zY).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Oa,{signal:e})},WY=function(){const{editorType:t,_uiManager:e}=l(this,ha),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",l(yc,nE)[t]),S(this,xi,ZT).call(this,n),n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,Mg).append(n)},vO=function(){const t=document.createElement("div");return t.className="divider",t},A(yc,Qk),A(yc,nE,null);let yO=yc;var sE,Dg,Ig,Cf,GY,qY,KY;class p0t{constructor(t){A(this,Cf);A(this,sE,null);A(this,Dg,null);A(this,Ig);y(this,Ig,t)}show(t,e,n){const[i,r]=S(this,Cf,qY).call(this,e,n),{style:o}=l(this,Dg)||y(this,Dg,S(this,Cf,GY).call(this));t.append(l(this,Dg)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Dg).remove()}}sE=new WeakMap,Dg=new WeakMap,Ig=new WeakMap,Cf=new WeakSet,GY=function(){const t=y(this,Dg,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Oa,{signal:l(this,Ig)._signal});const e=y(this,sE,document.createElement("div"));return e.className="buttons",t.append(e),S(this,Cf,KY).call(this),t},qY=function(t,e){let n=0,i=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const a=r.x+(e?r.width:0);if(o>n){i=a,n=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,n]},KY=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=l(this,Ig)._signal;t.addEventListener("contextmenu",Oa,{signal:n}),t.addEventListener("click",()=>{l(this,Ig).highlightSelection("floating_button")},{signal:n}),l(this,sE).append(t)};function Tk(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var Jk;class g0t{constructor(){A(this,Jk,0)}get id(){return`${Xwt}${$t(this,Jk)._++}`}}Jk=new WeakMap;var u0,iE,qs,h0,tP;const E$=class E${constructor(){A(this,h0);A(this,u0,l0t());A(this,iE,0);A(this,qs,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ft(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return S(this,h0,tP).call(this,`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return S(this,h0,tP).call(this,t,t)}async getFromBlob(t,e){const n=await e;return S(this,h0,tP).call(this,t,n)}async getFromId(t){l(this,qs)||y(this,qs,new Map);const e=l(this,qs).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,qs)||y(this,qs,new Map);let n=l(this,qs).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,u0)}_${$t(this,iE)._++}`,refCounter:1,isSvg:!1},l(this,qs).set(t,n),l(this,qs).set(n.id,n),n}getSvgUrl(t){const e=l(this,qs).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;l(this,qs)||y(this,qs,new Map);const e=l(this,qs).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(i=n.close)==null||i.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,u0)}_`)}};u0=new WeakMap,iE=new WeakMap,qs=new WeakMap,h0=new WeakSet,tP=async function(t,e){l(this,qs)||y(this,qs,new Map);let n=l(this,qs).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,u0)}_${$t(this,iE)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await vM(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=E$._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,u()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(i),await c}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){kt(i),n=null}return l(this,qs).set(t,n),n&&l(this,qs).set(n.id,n),n};let wO=E$;var wn,Ed,rE,Ge;class m0t{constructor(t=128){A(this,wn,[]);A(this,Ed,!1);A(this,rE);A(this,Ge,-1);y(this,rE,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),l(this,Ed))return;const c={cmd:t,undo:e,post:n,type:r};if(l(this,Ge)===-1){l(this,wn).length>0&&(l(this,wn).length=0),y(this,Ge,0),l(this,wn).push(c);return}if(o&&l(this,wn)[l(this,Ge)].type===r){a&&(c.undo=l(this,wn)[l(this,Ge)].undo),l(this,wn)[l(this,Ge)]=c;return}const u=l(this,Ge)+1;u===l(this,rE)?l(this,wn).splice(0,1):(y(this,Ge,u),u<l(this,wn).length&&l(this,wn).splice(u)),l(this,wn).push(c)}undo(){if(l(this,Ge)===-1)return;y(this,Ed,!0);const{undo:t,post:e}=l(this,wn)[l(this,Ge)];t(),e==null||e(),y(this,Ed,!1),y(this,Ge,l(this,Ge)-1)}redo(){if(l(this,Ge)<l(this,wn).length-1){y(this,Ge,l(this,Ge)+1),y(this,Ed,!0);const{cmd:t,post:e}=l(this,wn)[l(this,Ge)];t(),e==null||e(),y(this,Ed,!1)}}hasSomethingToUndo(){return l(this,Ge)!==-1}hasSomethingToRedo(){return l(this,Ge)<l(this,wn).length-1}cleanType(t){if(l(this,Ge)!==-1){for(let e=l(this,Ge);e>=0;e--)if(l(this,wn)[e].type!==t){l(this,wn).splice(e+1,l(this,Ge)-e),y(this,Ge,e);return}l(this,wn).length=0,y(this,Ge,-1)}}destroy(){y(this,wn,null)}}wn=new WeakMap,Ed=new WeakMap,rE=new WeakMap,Ge=new WeakMap;var Zk,XY;class eC{constructor(t){A(this,Zk);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=bi.platform;for(const[n,i,r={}]of t)for(const o of n){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(S(this,Zk,XY).call(this,e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(t,e)||(i.bind(t,...o,e)(),r||Br(e))}}Zk=new WeakSet,XY=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const tR=class tR{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return f0t(t),Ft(this,"_colors",t)}convert(t){const e=u$(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((r,o)=>r===e[o]))return tR._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ht.makeHexColor(...e):t}};B(tR,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let bO=tR;var d0,wr,Bn,ws,f0,nu,p0,mo,Cd,Lg,g0,Ng,_l,da,Og,oE,aE,m0,lE,El,Td,y0,Pd,Cl,eR,kd,cE,Rd,Fg,uE,hE,es,se,su,jg,dE,fE,Md,Tl,iu,pE,yo,Q,eP,AO,YY,QY,nP,JY,ZY,t7,xO,e7,SO,_O,n7,oi,fc,s7,i7,EO,r7,WA,CO;const cv=class cv{constructor(t,e,n,i,r,o,a,c,u,h,d,f,p){A(this,Q);A(this,d0,new AbortController);A(this,wr,null);A(this,Bn,new Map);A(this,ws,new Map);A(this,f0,null);A(this,nu,null);A(this,p0,null);A(this,mo,new m0t);A(this,Cd,null);A(this,Lg,null);A(this,g0,0);A(this,Ng,new Set);A(this,_l,null);A(this,da,null);A(this,Og,new Set);B(this,"_editorUndoBar",null);A(this,oE,!1);A(this,aE,!1);A(this,m0,!1);A(this,lE,null);A(this,El,null);A(this,Td,null);A(this,y0,null);A(this,Pd,!1);A(this,Cl,null);A(this,eR,new g0t);A(this,kd,!1);A(this,cE,!1);A(this,Rd,null);A(this,Fg,null);A(this,uE,null);A(this,hE,null);A(this,es,Pt.NONE);A(this,se,new Set);A(this,su,null);A(this,jg,null);A(this,dE,null);A(this,fE,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Md,[0,0]);A(this,Tl,null);A(this,iu,null);A(this,pE,null);A(this,yo,null);const m=this._signal=l(this,d0).signal;y(this,iu,t),y(this,pE,e),y(this,f0,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:m}),S(this,Q,JY).call(this),S(this,Q,n7).call(this),S(this,Q,xO).call(this),y(this,nu,r.annotationStorage),y(this,lE,r.filterFactory),y(this,jg,o),y(this,y0,a||null),y(this,oE,c),y(this,aE,u),y(this,m0,h),y(this,hE,d||null),this.viewParameters={realScale:Sf.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const t=cv.prototype,e=o=>l(o,iu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new eC([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,iu).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,iu).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,i,r;(t=l(this,yo))==null||t.resolve(),y(this,yo,null),(e=l(this,d0))==null||e.abort(),y(this,d0,null),this._signal=null;for(const o of l(this,ws).values())o.destroy();l(this,ws).clear(),l(this,Bn).clear(),l(this,Og).clear(),y(this,wr,null),l(this,se).clear(),l(this,mo).destroy(),(n=l(this,f0))==null||n.destroy(),(i=l(this,Cl))==null||i.hide(),y(this,Cl,null),l(this,El)&&(clearTimeout(l(this,El)),y(this,El,null)),l(this,Tl)&&(clearTimeout(l(this,Tl)),y(this,Tl,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,hE)}get useNewAltTextFlow(){return l(this,aE)}get useNewAltTextWhenAddingImage(){return l(this,m0)}get hcmFilter(){return Ft(this,"hcmFilter",l(this,jg)?l(this,lE).addHCMFilter(l(this,jg).foreground,l(this,jg).background):"none")}get direction(){return Ft(this,"direction",getComputedStyle(l(this,iu)).direction)}get highlightColors(){return Ft(this,"highlightColors",l(this,y0)?new Map(l(this,y0).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ft(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),y(this,Lg,t)}setMainHighlightColorPicker(t){y(this,uE,t)}editAltText(t,e=!1){var n;(n=l(this,f0))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":y(this,m0,e);break}}onPageChanging({pageNumber:t}){y(this,g0,t-1)}focusMainContainer(){l(this,iu).focus()}findParent(t,e){for(const n of l(this,ws).values()){const{x:i,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return n}return null}disableUserSelect(t=!1){l(this,pE).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Og).add(t)}removeShouldRescale(t){l(this,Og).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Sf.PDF_TO_CSS_UNITS;for(const n of l(this,Og))n.onScaleChanging();(e=l(this,Lg))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=e,a=e.toString(),u=S(this,Q,eP).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=S(this,Q,AO).call(this,u),f=l(this,es)===Pt.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Pt.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,nu)&&!l(this,nu).has(t.id)&&l(this,nu).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,Pd)&&(y(this,Pd,!1),S(this,Q,nP).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,se))if(e.div.contains(t)){y(this,Fg,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Fg))return;const[t,e]=l(this,Fg);y(this,Fg,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){S(this,Q,xO).call(this),S(this,Q,SO).call(this)}removeEditListeners(){S(this,Q,e7).call(this),S(this,Q,_O).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,da))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,da))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=l(this,wr))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of l(this,se)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,da))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){kt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of n){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)S(this,Q,EO).call(this,c);S(this,Q,CO).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){kt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,es)!==Pt.NONE&&!this.isEditorHandlingKeyboard&&cv._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Pd)&&(y(this,Pd,!1),S(this,Q,nP).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(S(this,Q,ZY).call(this),S(this,Q,SO).call(this),S(this,Q,oi).call(this,{isEditing:l(this,es)!==Pt.NONE,isEmpty:S(this,Q,WA).call(this),hasSomethingToUndo:l(this,mo).hasSomethingToUndo(),hasSomethingToRedo:l(this,mo).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,Q,t7).call(this),S(this,Q,_O).call(this),S(this,Q,oi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,da)){y(this,da,t);for(const e of l(this,da))S(this,Q,fc).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,eR).id}get currentLayer(){return l(this,ws).get(l(this,g0))}getLayer(t){return l(this,ws).get(t)}get currentPageIndex(){return l(this,g0)}addLayer(t){l(this,ws).set(t.pageIndex,t),l(this,kd)?t.enable():t.disable()}removeLayer(t){l(this,ws).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var i;if(l(this,es)!==t&&!(l(this,yo)&&(await l(this,yo).promise,!l(this,yo)))){if(y(this,yo,Promise.withResolvers()),y(this,es,t),t===Pt.NONE){this.setEditingState(!1),S(this,Q,i7).call(this),(i=this._editorUndoBar)==null||i.hide(),l(this,yo).resolve();return}this.setEditingState(!0),await S(this,Q,s7).call(this),this.unselectAll();for(const r of l(this,ws).values())r.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),l(this,yo).resolve();return}for(const r of l(this,Bn).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,yo).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,es)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(l(this,da)){switch(t){case Ht.CREATE:this.currentLayer.addNewEditor();return;case Ht.HIGHLIGHT_DEFAULT_COLOR:(n=l(this,uE))==null||n.updateColor(e);break;case Ht.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,dE)||y(this,dE,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of l(this,se))i.updateParams(t,e);for(const i of l(this,da))i.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of l(this,Bn).values())o.editorType===t&&o.show(e);(((r=l(this,dE))==null?void 0:r.get(Ht.HIGHLIGHT_SHOW_ALL))??!0)!==e&&S(this,Q,fc).call(this,[[Ht.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,cE)!==t){y(this,cE,t);for(const e of l(this,ws).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of l(this,Bn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return l(this,Bn).get(t)}addEditor(t){l(this,Bn).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(l(this,El)&&clearTimeout(l(this,El)),y(this,El,setTimeout(()=>{this.focusMainContainer(),y(this,El,null)},0))),l(this,Bn).delete(t.id),this.unselect(t),(!t.annotationElementId||!l(this,Ng).has(t.annotationElementId))&&((e=l(this,nu))==null||e.remove(t.id))}addDeletedAnnotationElement(t){l(this,Ng).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Ng).has(t)}removeDeletedAnnotationElement(t){l(this,Ng).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,wr)!==t&&(y(this,wr,t),t&&S(this,Q,fc).call(this,t.propertiesToUpdate))}updateUI(t){l(this,Q,r7)===t&&S(this,Q,fc).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){S(this,Q,fc).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,se).has(t)){l(this,se).delete(t),t.unselect(),S(this,Q,oi).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,se).add(t),t.select(),S(this,Q,fc).call(this,t.propertiesToUpdate),S(this,Q,oi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=l(this,Lg))==null||e.commitOrRemove();for(const n of l(this,se))n!==t&&n.unselect();l(this,se).clear(),l(this,se).add(t),t.select(),S(this,Q,fc).call(this,t.propertiesToUpdate),S(this,Q,oi).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,se).has(t)}get firstSelectedEditor(){return l(this,se).values().next().value}unselect(t){t.unselect(),l(this,se).delete(t),S(this,Q,oi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,se).size!==0}get isEnterHandled(){return l(this,se).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,mo).undo(),S(this,Q,oi).call(this,{hasSomethingToUndo:l(this,mo).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,Q,WA).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,mo).redo(),S(this,Q,oi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,mo).hasSomethingToRedo(),isEmpty:S(this,Q,WA).call(this)})}addCommands(t){l(this,mo).add(t),S(this,Q,oi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,Q,WA).call(this)})}cleanUndoStack(t){l(this,mo).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,se)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const o of e)S(this,Q,EO).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=l(this,wr))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,wr)||this.hasSelection}selectAll(){for(const t of l(this,se))t.commit();S(this,Q,CO).call(this,l(this,Bn).values())}unselectAll(){var t;if(!(l(this,wr)&&(l(this,wr).commitOrRemove(),l(this,es)!==Pt.NONE))&&!((t=l(this,Lg))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,se))e.unselect();l(this,se).clear(),S(this,Q,oi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,Md)[0]+=t,l(this,Md)[1]+=e;const[i,r]=l(this,Md),o=[...l(this,se)],a=1e3;l(this,Tl)&&clearTimeout(l(this,Tl)),y(this,Tl,setTimeout(()=>{y(this,Tl,null),l(this,Md)[0]=l(this,Md)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,Bn).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of o)l(this,Bn).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,_l,new Map);for(const t of l(this,se))l(this,_l).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,_l))return!1;this.disableUserSelect(!1);const t=l(this,_l);y(this,_l,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||(e=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const n=(i,r,o,a)=>{if(l(this,Bn).has(i.id)){const c=l(this,ws).get(a);c?i._setParentAndPosition(c,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)n(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)n(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,_l))for(const n of l(this,_l).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,se).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,wr)===t}getActive(){return l(this,wr)}getMode(){return l(this,es)}get imageManager(){return Ft(this,"imageManager",new wO)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-n)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-n)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-n)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-n)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:m,height:g}of d.getClientRects())m===0||g===0||c.push(a(f,p,m,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,p0)||y(this,p0,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,p0))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=l(this,p0))==null?void 0:i.get(t.data.id);if(!e)return;const n=l(this,nu).getRawValue(e);n&&(l(this,es)===Pt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};d0=new WeakMap,wr=new WeakMap,Bn=new WeakMap,ws=new WeakMap,f0=new WeakMap,nu=new WeakMap,p0=new WeakMap,mo=new WeakMap,Cd=new WeakMap,Lg=new WeakMap,g0=new WeakMap,Ng=new WeakMap,_l=new WeakMap,da=new WeakMap,Og=new WeakMap,oE=new WeakMap,aE=new WeakMap,m0=new WeakMap,lE=new WeakMap,El=new WeakMap,Td=new WeakMap,y0=new WeakMap,Pd=new WeakMap,Cl=new WeakMap,eR=new WeakMap,kd=new WeakMap,cE=new WeakMap,Rd=new WeakMap,Fg=new WeakMap,uE=new WeakMap,hE=new WeakMap,es=new WeakMap,se=new WeakMap,su=new WeakMap,jg=new WeakMap,dE=new WeakMap,fE=new WeakMap,Md=new WeakMap,Tl=new WeakMap,iu=new WeakMap,pE=new WeakMap,yo=new WeakMap,Q=new WeakSet,eP=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},AO=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,ws).values())if(n.hasTextLayer(t))return n;return null},YY=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=S(this,Q,eP).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,Cl)||y(this,Cl,new p0t(this)),l(this,Cl).show(n,i,this.direction==="ltr"))},QY=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,su)&&((r=l(this,Cl))==null||r.hide(),y(this,su,null),S(this,Q,oi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,su))return;const i=S(this,Q,eP).call(this,t).closest(".textLayer");if(!i){l(this,su)&&((o=l(this,Cl))==null||o.hide(),y(this,su,null),S(this,Q,oi).call(this,{hasSelectedText:!1}));return}if((a=l(this,Cl))==null||a.hide(),y(this,su,e),S(this,Q,oi).call(this,{hasSelectedText:!0}),!(l(this,es)!==Pt.HIGHLIGHT&&l(this,es)!==Pt.NONE)&&(l(this,es)===Pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,Pd,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,es)===Pt.HIGHLIGHT?S(this,Q,AO).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&S(this,Q,nP).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},nP=function(t=""){l(this,es)===Pt.HIGHLIGHT?this.highlightSelection(t):l(this,oE)&&S(this,Q,YY).call(this)},JY=function(){document.addEventListener("selectionchange",S(this,Q,QY).bind(this),{signal:this._signal})},ZY=function(){if(l(this,Td))return;y(this,Td,new AbortController);const t=this.combinedSignal(l(this,Td));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},t7=function(){var t;(t=l(this,Td))==null||t.abort(),y(this,Td,null)},xO=function(){if(l(this,Rd))return;y(this,Rd,new AbortController);const t=this.combinedSignal(l(this,Rd));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},e7=function(){var t;(t=l(this,Rd))==null||t.abort(),y(this,Rd,null)},SO=function(){if(l(this,Cd))return;y(this,Cd,new AbortController);const t=this.combinedSignal(l(this,Cd));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},_O=function(){var t;(t=l(this,Cd))==null||t.abort(),y(this,Cd,null)},n7=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},oi=function(t){Object.entries(t).some(([n,i])=>l(this,fE)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,fE),t)}),l(this,es)===Pt.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,Q,fc).call(this,[[Ht.HIGHLIGHT_FREE,!0]]))},fc=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},s7=async function(){if(!l(this,kd)){y(this,kd,!0);const t=[];for(const e of l(this,ws).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Bn).values())e.enable()}},i7=function(){if(this.unselectAll(),l(this,kd)){y(this,kd,!1);for(const t of l(this,ws).values())t.disable();for(const t of l(this,Bn).values())t.disable()}},EO=function(t){const e=l(this,ws).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},r7=function(){let t=null;for(t of l(this,se));return t},WA=function(){if(l(this,Bn).size===0)return!0;if(l(this,Bn).size===1)for(const t of l(this,Bn).values())return t.isEmpty();return!1},CO=function(t){for(const e of l(this,se))e.unselect();l(this,se).clear();for(const e of t)e.isEmpty()||(l(this,se).add(e),e.select());S(this,Q,oi).call(this,{hasSelectedEditor:this.hasSelection})},B(cv,"TRANSLATE_SMALL",1),B(cv,"TRANSLATE_BIG",10);let Xm=cv;var ns,Pl,fa,v0,kl,br,w0,Rl,$i,ru,$g,Ml,Dd,Pa,GA,sP;const ai=class ai{constructor(t){A(this,Pa);A(this,ns,null);A(this,Pl,!1);A(this,fa,null);A(this,v0,null);A(this,kl,null);A(this,br,null);A(this,w0,!1);A(this,Rl,null);A(this,$i,null);A(this,ru,null);A(this,$g,null);A(this,Ml,!1);y(this,$i,t),y(this,Ml,t._uiManager.useNewAltTextFlow),l(ai,Dd)||y(ai,Dd,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ai._l10n??(ai._l10n=t)}async render(){const t=y(this,fa,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=y(this,v0,document.createElement("span"));t.append(e),l(this,Ml)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(ai,Dd).missing),e.setAttribute("data-l10n-id",l(ai,Dd)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,$i)._uiManager._signal;t.addEventListener("contextmenu",Oa,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),l(this,$i)._uiManager.editAltText(l(this,$i)),l(this,Ml)&&l(this,$i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Pa,GA)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(y(this,w0,!0),i(r))},{signal:n}),await S(this,Pa,sP).call(this),t}finish(){l(this,fa)&&(l(this,fa).focus({focusVisible:l(this,w0)}),y(this,w0,!1))}isEmpty(){return l(this,Ml)?l(this,ns)===null:!l(this,ns)&&!l(this,Pl)}hasData(){return l(this,Ml)?l(this,ns)!==null||!!l(this,ru):this.isEmpty()}get guessedText(){return l(this,ru)}async setGuessedText(t){l(this,ns)===null&&(y(this,ru,t),y(this,$g,await ai._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),S(this,Pa,sP).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,Ml)||l(this,ns)){(e=l(this,Rl))==null||e.remove(),y(this,Rl,null);return}if(!l(this,Rl)){const n=y(this,Rl,document.createElement("div"));n.className="noAltTextBadge",l(this,$i).div.append(n)}l(this,Rl).classList.toggle("hidden",!t)}serialize(t){let e=l(this,ns);return!t&&l(this,ru)===e&&(e=l(this,$g)),{altText:e,decorative:l(this,Pl),guessedText:l(this,ru),textWithDisclaimer:l(this,$g)}}get data(){return{altText:l(this,ns),decorative:l(this,Pl)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(y(this,ru,n),y(this,$g,i)),!(l(this,ns)===t&&l(this,Pl)===e)&&(r||(y(this,ns,t),y(this,Pl,e)),S(this,Pa,sP).call(this))}toggle(t=!1){l(this,fa)&&(!t&&l(this,br)&&(clearTimeout(l(this,br)),y(this,br,null)),l(this,fa).disabled=!t)}shown(){l(this,$i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Pa,GA)}})}destroy(){var t,e;(t=l(this,fa))==null||t.remove(),y(this,fa,null),y(this,v0,null),y(this,kl,null),(e=l(this,Rl))==null||e.remove(),y(this,Rl,null)}};ns=new WeakMap,Pl=new WeakMap,fa=new WeakMap,v0=new WeakMap,kl=new WeakMap,br=new WeakMap,w0=new WeakMap,Rl=new WeakMap,$i=new WeakMap,ru=new WeakMap,$g=new WeakMap,Ml=new WeakMap,Dd=new WeakMap,Pa=new WeakSet,GA=function(){return l(this,ns)&&"added"||l(this,ns)===null&&this.guessedText&&"review"||"missing"},sP=async function(){var i,r,o;const t=l(this,fa);if(!t)return;if(l(this,Ml)){if(t.classList.toggle("done",!!l(this,ns)),t.setAttribute("data-l10n-id",l(ai,Dd)[l(this,Pa,GA)]),(i=l(this,v0))==null||i.setAttribute("data-l10n-id",l(ai,Dd)[`${l(this,Pa,GA)}-label`]),!l(this,ns)){(r=l(this,kl))==null||r.remove();return}}else{if(!l(this,ns)&&!l(this,Pl)){t.classList.remove("done"),(o=l(this,kl))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,kl);if(!e){y(this,kl,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,$i).id}`;const a=100,c=l(this,$i)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,br)),y(this,br,null)},{once:!0}),t.addEventListener("mouseenter",()=>{y(this,br,setTimeout(()=>{y(this,br,null),l(this,kl).classList.add("show"),l(this,$i)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;l(this,br)&&(clearTimeout(l(this,br)),y(this,br,null)),(u=l(this,kl))==null||u.classList.remove("show")},{signal:c})}l(this,Pl)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,ns)),e.parentNode||t.append(e);const n=l(this,$i).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},A(ai,Dd,null),B(ai,"_l10n",null);let Pk=ai;var gE,Bg,mE,yE,vE,wE,bE,b0,ou,Ug,Id,Yu,o7,a7,TO;const C$=class C${constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){A(this,Yu);A(this,gE);A(this,Bg,!1);A(this,mE,null);A(this,yE);A(this,vE);A(this,wE);A(this,bE);A(this,b0);A(this,ou,null);A(this,Ug);A(this,Id,null);y(this,gE,t),y(this,mE,n),y(this,yE,e),y(this,vE,i),y(this,wE,r),y(this,bE,o),y(this,Ug,new AbortController),y(this,b0,AbortSignal.any([a,l(this,Ug).signal])),t.addEventListener("touchstart",S(this,Yu,o7).bind(this),{passive:!1,signal:l(this,b0)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ft(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=l(this,Ug))==null||t.abort(),y(this,Ug,null)}};gE=new WeakMap,Bg=new WeakMap,mE=new WeakMap,yE=new WeakMap,vE=new WeakMap,wE=new WeakMap,bE=new WeakMap,b0=new WeakMap,ou=new WeakMap,Ug=new WeakMap,Id=new WeakMap,Yu=new WeakSet,o7=function(t){var i,r,o;if((i=l(this,yE))!=null&&i.call(this)||t.touches.length<2)return;if(!l(this,Id)){y(this,Id,new AbortController);const a=AbortSignal.any([l(this,b0),l(this,Id).signal]),c=l(this,gE),u={signal:a,passive:!1};c.addEventListener("touchmove",S(this,Yu,a7).bind(this),u),c.addEventListener("touchend",S(this,Yu,TO).bind(this),u),c.addEventListener("touchcancel",S(this,Yu,TO).bind(this),u),(r=l(this,vE))==null||r.call(this)}if(Br(t),t.touches.length!==2||(o=l(this,mE))!=null&&o.call(this)){y(this,ou,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),y(this,ou,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},a7=function(t){var E;if(!l(this,ou)||t.touches.length!==2)return;let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=n,c=l(this,ou),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,m=f-h,g=o-i,w=a-r,v=Math.hypot(g,w)||1,b=Math.hypot(p,m)||1;if(!l(this,Bg)&&Math.abs(b-v)<=C$.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=a,t.preventDefault(),!l(this,Bg)){y(this,Bg,!0);return}const x=[(i+o)/2,(r+a)/2];(E=l(this,wE))==null||E.call(this,x,b,v)},TO=function(t){var e;l(this,Id).abort(),y(this,Id,null),(e=l(this,bE))==null||e.call(this),l(this,ou)&&(t.preventDefault(),y(this,ou,null),y(this,Bg,!1))};let kk=C$;var Vg,pa,De,A0,Ld,AE,Hg,bs,zg,au,Nd,xE,Wg,Ar,SE,Gg,lu,Dl,x0,S0,vo,qg,_E,nR,gt,PO,EE,kO,iP,l7,c7,RO,rP,MO,u7,h7,d7,DO,f7,IO,p7,g7,m7,LO,qA;const It=class It{constructor(t){A(this,gt);A(this,Vg,null);A(this,pa,null);A(this,De,null);A(this,A0,!1);A(this,Ld,null);A(this,AE,"");A(this,Hg,!1);A(this,bs,null);A(this,zg,null);A(this,au,null);A(this,Nd,null);A(this,xE,"");A(this,Wg,!1);A(this,Ar,null);A(this,SE,!1);A(this,Gg,!1);A(this,lu,!1);A(this,Dl,null);A(this,x0,0);A(this,S0,0);A(this,vo,null);A(this,qg,null);B(this,"_editToolbar",null);B(this,"_initialOptions",Object.create(null));B(this,"_initialData",null);B(this,"_isVisible",!0);B(this,"_uiManager",null);B(this,"_focusEventsAllowed",!0);A(this,_E,!1);A(this,nR,It._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=It.prototype._resizeWithKeyboard,e=Xm.TRANSLATE_SMALL,n=Xm.TRANSLATE_BIG;return Ft(this,"_resizerKeyboardManager",new eC([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],It.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ft(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new y0t({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(It._l10n??(It._l10n=t),It._l10nResizer||(It._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),It._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){xe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,_E)}set _isDraggable(t){var e;y(this,_E,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,nR)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):S(this,gt,qA).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Wg)?y(this,Wg,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}translate(t,e){S(this,gt,PO).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Ar)||y(this,Ar,[this.x,this.y,this.width,this.height]),S(this,gt,PO).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){l(this,Ar)||y(this,Ar,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,Ar)&&(l(this,Ar)[0]!==this.x||l(this,Ar)[1]!==this.y)}get _hasBeenResized(){return!!l(this,Ar)&&(l(this,Ar)[2]!==this.width||l(this,Ar)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=It,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:r,y:o,width:a,height:c}=this;if(a*=n,c*=i,r*=n,o*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(n-a,r)),o=Math.max(0,Math.min(i-c,o));break;case 90:r=Math.max(0,Math.min(n-c,r)),o=Math.min(i,Math.max(a,o));break;case 180:r=Math.min(n,Math.max(a,r)),o=Math.min(i,Math.max(c,o));break;case 270:r=Math.min(n,Math.max(c,r)),o=Math.max(0,Math.min(i-a,o));break}this.x=r/=n,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return S(n=It,EE,kO).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return S(n=It,EE,kO).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,l(this,Hg)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!l(this,Hg)&&e.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!l(this,Hg)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,De))==null||t.finish()}async addEditToolbar(){return this._editToolbar||l(this,Gg)?this._editToolbar:(this._editToolbar=new yO(this),this.div.append(this._editToolbar.render()),l(this,De)&&await this._editToolbar.addAltText(l(this,De)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=l(this,De))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,De)||(Pk.initialize(It._l10n),y(this,De,new Pk(this)),l(this,Vg)&&(l(this,De).data=l(this,Vg),y(this,Vg,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,De))==null?void 0:t.data}set altTextData(t){l(this,De)&&(l(this,De).data=t)}get guessedAltText(){var t;return(t=l(this,De))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,De))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,De))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,De)&&!l(this,De).isEmpty()}hasAltTextData(){var t;return((t=l(this,De))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,A0)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),S(this,gt,IO).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),Tk(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,qg)||y(this,qg,new kk({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,gt,u7).bind(this),onPinching:S(this,gt,h7).bind(this),onPinchEnd:S(this,gt,d7).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=bi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(y(this,Wg,!0),this._isDraggable){S(this,gt,f7).call(this,t);return}S(this,gt,DO).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Dl)&&clearTimeout(l(this,Dl)),y(this,Dl,setTimeout(()=>{var t;y(this,Dl,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=t/i,h=e/i,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(n){case 0:return[d+u+a,o-f-h-m+c,d+u+p+a,o-f-h+c];case 90:return[d+h+a,o-f+u+c,d+h+m+a,o-f+u+p+c];case 180:return[d-u-p+a,o-f+h+c,d-u+a,o-f+h+m+c];case 270:return[d-h-m+a,o-f-u-p+c,d-h+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,a=r-n,c=o-i;switch(this.rotation){case 0:return[n,e-o,a,c];case 90:return[n,e-i,c,a];case 180:return[r,e-i,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){y(this,Gg,!0)}disableEditMode(){y(this,Gg,!1)}isInEditMode(){return l(this,Gg)}shouldGetKeyboardEvents(){return l(this,lu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&n>0}rebuild(){S(this,gt,IO).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){xe("An editor must be serializable")}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation,y(i,Vg,t.accessibilityData);const[r,o]=i.pageDimensions,[a,c,u,h]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,Nd))==null||t.abort(),y(this,Nd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Dl)&&(clearTimeout(l(this,Dl)),y(this,Dl,null)),S(this,gt,qA).call(this),this.removeEditToolbar(),l(this,vo)){for(const n of l(this,vo).values())clearTimeout(n);y(this,vo,null)}this.parent=null,(e=l(this,qg))==null||e.destroy(),y(this,qg,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,gt,l7).call(this),l(this,bs).classList.remove("hidden"),Tk(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),y(this,au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,bs).children;if(!l(this,pa)){y(this,pa,Array.from(e));const o=S(this,gt,p7).bind(this),a=S(this,gt,g7).bind(this),c=this._uiManager._signal;for(const u of l(this,pa)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",S(this,gt,m7).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",It._l10nResizer[h])}}const n=l(this,pa)[0];let i=0;for(const o of e){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,pa).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)l(this,bs).append(l(this,bs).firstChild);else if(r>i)for(let a=0;a<r-i;a++)l(this,bs).firstChild.before(l(this,bs).lastChild);let o=0;for(const a of e){const u=l(this,pa)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",It._l10nResizer[u])}}S(this,gt,LO).call(this,0),y(this,lu,!0),l(this,bs).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,lu)&&S(this,gt,MO).call(this,l(this,xE),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,gt,qA).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=l(this,De))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,i,r;(t=l(this,bs))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,De))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,SE)}set isEditing(t){y(this,SE,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){y(this,Hg,!0);const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,vo)||y(this,vo,new Map);const{action:n}=t;let i=l(this,vo).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,vo).delete(n),l(this,vo).size===0&&y(this,vo,null)},It._telemetryTimeout),l(this,vo).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),y(this,A0,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,A0,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Vg=new WeakMap,pa=new WeakMap,De=new WeakMap,A0=new WeakMap,Ld=new WeakMap,AE=new WeakMap,Hg=new WeakMap,bs=new WeakMap,zg=new WeakMap,au=new WeakMap,Nd=new WeakMap,xE=new WeakMap,Wg=new WeakMap,Ar=new WeakMap,SE=new WeakMap,Gg=new WeakMap,lu=new WeakMap,Dl=new WeakMap,x0=new WeakMap,S0=new WeakMap,vo=new WeakMap,qg=new WeakMap,_E=new WeakMap,nR=new WeakMap,gt=new WeakSet,PO=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},EE=new WeakSet,kO=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},iP=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},l7=function(){if(l(this,bs))return;y(this,bs,document.createElement("div")),l(this,bs).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");l(this,bs).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",S(this,gt,c7).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Oa,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,bs))},c7=function(t,e){var h;e.preventDefault();const{isMac:n}=bi.platform;if(e.button!==0||e.ctrlKey&&n)return;(h=l(this,De))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,y(this,zg,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,gt,MO).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Br,{passive:!1,signal:o}),window.addEventListener("contextmenu",Oa,{signal:o}),y(this,au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=l(this,De))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=c,S(this,gt,rP).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},RO=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*n,o*i),this.fixAndSetPosition(),this._onResized()},rP=function(){if(!l(this,au))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=l(this,au);y(this,au,null);const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===n&&c===i||this.addCommands({cmd:S(this,gt,RO).bind(this,r,o,a,c),undo:S(this,gt,RO).bind(this,t,e,n,i),mustExec:!0})},MO=function(t,e){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,u=It.MIN_SIZE/n,h=It.MIN_SIZE/i,d=S(this,gt,iP).call(this,this.rotation),f=(N,j)=>[d[0]*N+d[2]*j,d[1]*N+d[3]*j],p=S(this,gt,iP).call(this,360-this.rotation),m=(N,j)=>[p[0]*N+p[2]*j,p[1]*N+p[3]*j];let g,w,v=!1,b=!1;switch(t){case"topLeft":v=!0,g=(N,j)=>[0,0],w=(N,j)=>[N,j];break;case"topMiddle":g=(N,j)=>[N/2,0],w=(N,j)=>[N/2,j];break;case"topRight":v=!0,g=(N,j)=>[N,0],w=(N,j)=>[0,j];break;case"middleRight":b=!0,g=(N,j)=>[N,j/2],w=(N,j)=>[0,j/2];break;case"bottomRight":v=!0,g=(N,j)=>[N,j],w=(N,j)=>[0,0];break;case"bottomMiddle":g=(N,j)=>[N/2,j],w=(N,j)=>[N/2,0];break;case"bottomLeft":v=!0,g=(N,j)=>[0,j],w=(N,j)=>[N,0];break;case"middleLeft":b=!0,g=(N,j)=>[0,j/2],w=(N,j)=>[N,j/2];break}const x=g(a,c),E=w(a,c);let T=f(...E);const P=It._round(r+T[0]),k=It._round(o+T[1]);let R=1,M=1,D,L;if(e.fromKeyboard)({deltaX:D,deltaY:L}=e);else{const{screenX:N,screenY:j}=e,[F,O]=l(this,zg);[D,L]=this.screenToPageTranslation(N-F,j-O),l(this,zg)[0]=N,l(this,zg)[1]=j}if([D,L]=m(D/n,L/i),v){const N=Math.hypot(a,c);R=M=Math.max(Math.min(Math.hypot(E[0]-x[0]-D,E[1]-x[1]-L)/N,1/a,1/c),u/a,h/c)}else b?R=Math.max(u,Math.min(1,Math.abs(E[0]-x[0]-D)))/a:M=Math.max(h,Math.min(1,Math.abs(E[1]-x[1]-L)))/c;const $=It._round(a*R),U=It._round(c*M);T=f(...w($,U));const I=P-T[0],H=k-T[1];l(this,Ar)||y(this,Ar,[this.x,this.y,this.width,this.height]),this.width=$,this.height=U,this.x=I,this.y=H,this.setDims(n*$,i*U),this.fixAndSetPosition(),this._onResizing()},u7=function(){var t;y(this,au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,De))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},h7=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=S(this,gt,iP).call(this,this.rotation),a=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,m=It.MIN_SIZE/c,g=It.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),m/f,g/p);const w=It._round(f*r),v=It._round(p*r);if(w===f&&v===p)return;l(this,Ar)||y(this,Ar,[h,d,f,p]);const b=a(f/2,p/2),x=It._round(h+b[0]),E=It._round(d+b[1]),T=a(w/2,v/2);this.x=x-T[0],this.y=E-T[1],this.width=w,this.height=v,this.setDims(c*w,u*v),this.fixAndSetPosition(),this._onResizing()},d7=function(){var t;(t=l(this,De))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),S(this,gt,rP).call(this)},DO=function(t){const{isMac:e}=bi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},f7=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=u=>{i.abort(),y(this,Ld,null),y(this,Wg,!1),this._uiManager.endDragSession()||S(this,gt,DO).call(this,u),n&&this._onStopDragging()};e&&(y(this,x0,t.clientX),y(this,S0,t.clientY),y(this,Ld,t.pointerId),y(this,AE,t.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==l(this,Ld)){Br(u);return}const[p,m]=this.screenToPageTranslation(h-l(this,x0),d-l(this,S0));y(this,x0,h),y(this,S0,d),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",Br,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,AE)&&(l(this,qg)||u.isPrimary)&&a(u),Br(u)},o));const c=u=>{if(!l(this,Ld)||l(this,Ld)===u.pointerId){a(u);return}Br(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},IO=function(){if(l(this,Nd)||!this.div)return;y(this,Nd,new AbortController);const t=this._uiManager.combinedSignal(l(this,Nd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},p7=function(t){It._resizerKeyboardManager.exec(this,t)},g7=function(t){var e;l(this,lu)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,bs)&&S(this,gt,qA).call(this)},m7=function(t){y(this,xE,l(this,lu)?t:"")},LO=function(t){if(l(this,pa))for(const e of l(this,pa))e.tabIndex=t},qA=function(){y(this,lu,!1),S(this,gt,LO).call(this,-1),S(this,gt,rP).call(this)},A(It,EE),B(It,"_l10n",null),B(It,"_l10nResizer",null),B(It,"_borderLineWidth",-1),B(It,"_colorManager",new bO),B(It,"_zIndex",1),B(It,"_telemetryTimeout",1e3);let Ze=It;class y0t extends Ze{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const x3=3285377520,eo=4294901760,Ka=65535;class y7{constructor(t){this.h1=t?t&4294967295:x3,this.h2=t?t&4294967295:x3}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let g=0,w=t.length;g<w;g++){const v=t.charCodeAt(g);v<=255?e[n++]=v:(e[n++]=v>>>8,e[n++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ka,m=f&Ka;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&eo|a*p&Ka,a=a<<15|a>>>17,a=a*f&eo|a*m&Ka,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*d&eo|c*p&Ka,c=c<<15|c>>>17,c=c*f&eo|c*m&Ka,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&eo|a*p&Ka,a=a<<15|a>>>17,a=a*f&eo|a*m&Ka,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&eo|t*36045&Ka,e=e*4283543511&eo|((e<<16|t>>>16)*2950163797&eo)>>>16,t^=e>>>1,t=t*444984403&eo|t*60499&Ka,e=e*3301882366&eo|((e<<16|t>>>16)*3120437893&eo)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const NO=Object.freeze({map:null,hash:"",transfer:void 0});var Kg,Xg,ss,sR,v7;class h${constructor(){A(this,sR);A(this,Kg,!1);A(this,Xg,null);A(this,ss,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,ss).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,ss).get(t)}remove(t){if(l(this,ss).delete(t),l(this,ss).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,ss).values())if(e instanceof Ze)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,ss).get(t);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(i=!0,n[r]=o);else i=!0,l(this,ss).set(t,e);i&&S(this,sR,v7).call(this),e instanceof Ze&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,ss).has(t)}getAll(){return l(this,ss).size>0?r$(l(this,ss)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return l(this,ss).size}resetModified(){l(this,Kg)&&(y(this,Kg,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w7(this)}get serializable(){if(l(this,ss).size===0)return NO;const t=new Map,e=new y7,n=[],i=Object.create(null);let r=!1;for(const[o,a]of l(this,ss)){const c=a instanceof Ze?a.serialize(!1,i):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:NO}get editorStats(){let t=null;const e=new Map;for(const n of l(this,ss).values()){if(!(n instanceof Ze))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(i)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[n,i]of e)t[n]=i.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){y(this,Xg,null)}get modifiedIds(){if(l(this,Xg))return l(this,Xg);const t=[];for(const e of l(this,ss).values())!(e instanceof Ze)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return y(this,Xg,{ids:new Set(t),hash:t.join(",")})}}Kg=new WeakMap,Xg=new WeakMap,ss=new WeakMap,sR=new WeakSet,v7=function(){l(this,Kg)||(y(this,Kg,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var CE;class w7 extends h${constructor(e){super();A(this,CE);const{map:n,hash:i,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);y(this,CE,{map:o,hash:i,transfer:r})}get print(){xe("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,CE)}get modifiedIds(){return Ft(this,"modifiedIds",{ids:new Set,hash:""})}}CE=new WeakMap;var _0;class v0t{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,_0,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,_0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||l(this,_0).has(t.loadedName))){if(Rn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:i,style:r}=t,o=new FontFace(n,i,r);this.addNativeFontFace(o);try{await o.load(),l(this,_0).add(n),e==null||e(t)}catch{kt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}xe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw kt(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ft(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ni||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ft(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Rn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ft(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function i(E,T,P,k){const R=E.substring(0,T),M=E.substring(T+P);return R+k+M}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(E,T){if(++u>30){kt("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,E,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const m=16,g=1482184792;let w=n(f,m);for(r=0,o=d.length-3;r<o;r+=4)w=w-g+n(d,r)|0;r<d.length&&(w=w-g+n(d+"XXX",r)|0),f=i(f,m,4,s0t(w));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(b);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[t.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,x.append(T)}this._document.body.append(x),h(d,()=>{x.remove(),e.complete()})}}_0=new WeakMap;class w0t{constructor(t,{disableFontFace:e=!1,fontExtraProperties:n=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=n===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${c0t(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(o){kt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}const GC={DATA:1,ERROR:2},Cn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S3(){}function Ri(s){if(s instanceof xf||s instanceof pO||s instanceof gS||s instanceof w3||s instanceof Ck||s instanceof XD)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||xe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new xf(s.message);case"InvalidPDFException":return new pO(s.message);case"MissingPDFException":return new gS(s.message);case"PasswordException":return new w3(s.message,s.code);case"UnexpectedResponseException":return new Ck(s.message,s.status);case"UnknownErrorException":return new XD(s.message,s.details)}return new XD(s.message,s.toString())}var E0,Lo,b7,A7,x7,oP;class KA{constructor(t,e,n){A(this,Lo);A(this,E0,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",S(this,Lo,b7).bind(this),{signal:l(this,E0).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:Cn.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Rn(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Cn.CANCEL,streamId:r,reason:Ri(u)}),h.promise}},n)}destroy(){var t;(t=l(this,E0))==null||t.abort(),y(this,E0,null)}}E0=new WeakMap,Lo=new WeakSet,b7=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){S(this,Lo,x7).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===GC.DATA)i.resolve(t.data);else if(t.callback===GC.ERROR)i.reject(Ri(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:GC.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:GC.ERROR,callbackId:t.callbackId,reason:Ri(o)})});return}if(t.streamId){S(this,Lo,A7).call(this,t);return}e(t.data)},A7=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:Cn.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Cn.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){Rn(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:Cn.ERROR,streamId:e,reason:Ri(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:e,reason:Ri(u)})})},x7=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Cn.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ri(t.reason));break;case Cn.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ri(t.reason));break;case Cn.PULL:if(!a){r.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||S3).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:e,reason:Ri(u)})});break;case Cn.ENQUEUE:if(Rn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Cn.CLOSE:if(Rn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,Lo,oP).call(this,o,e);break;case Cn.ERROR:Rn(o,"error should have stream controller"),o.controller.error(Ri(t.reason)),S(this,Lo,oP).call(this,o,e);break;case Cn.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ri(t.reason)),S(this,Lo,oP).call(this,o,e);break;case Cn.CANCEL:if(!a)break;const c=Ri(t.reason);Promise.try(a.onCancel||S3,c).then(function(){r.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:e,reason:Ri(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},oP=async function(t,e){var n,i,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var TE;class S7{constructor({enableHWA:t=!1}){A(this,TE,!1);y(this,TE,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,TE)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){xe("Abstract method `_createCanvas` called.")}}TE=new WeakMap;class b0t extends S7{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class _7{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){xe("Abstract method `_fetch` called.")}}class E7 extends _7{async _fetch(t){const e=await vM(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):yM(e)}}class C7{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,r){return"none"}destroy(t=!1){}}var Yg,C0,cu,uu,Ks,Qg,Jg,tt,js,XA,Ny,aP,Oy,T7,OO,Fy,YA,QA,FO,JA;class A0t extends C7{constructor({docId:e,ownerDocument:n=globalThis.document}){super();A(this,tt);A(this,Yg);A(this,C0);A(this,cu);A(this,uu);A(this,Ks);A(this,Qg);A(this,Jg,0);y(this,uu,e),y(this,Ks,n)}addFilter(e){if(!e)return"none";let n=l(this,tt,js).get(e);if(n)return n;const[i,r,o]=S(this,tt,aP).call(this,e),a=e.length===1?i:`${i}${r}${o}`;if(n=l(this,tt,js).get(a),n)return l(this,tt,js).set(e,n),n;const c=`g_${l(this,uu)}_transfer_map_${$t(this,Jg)._++}`,u=S(this,tt,Oy).call(this,c);l(this,tt,js).set(e,u),l(this,tt,js).set(a,u);const h=S(this,tt,Fy).call(this,c);return S(this,tt,QA).call(this,i,r,o,h),u}addHCMFilter(e,n){var m;const i=`${e}-${n}`,r="base";let o=l(this,tt,XA).get(r);if((o==null?void 0:o.key)===i||(o?((m=o.filter)==null||m.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},l(this,tt,XA).set(r,o)),!e||!n))return o.url;const a=S(this,tt,JA).call(this,e);e=ht.makeHexColor(...a);const c=S(this,tt,JA).call(this,n);if(n=ht.makeHexColor(...c),l(this,tt,Ny).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const w=g/255;u[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=u.join(","),d=`g_${l(this,uu)}_hcm_filter`,f=o.filter=S(this,tt,Fy).call(this,d);S(this,tt,QA).call(this,h,h,h,f),S(this,tt,OO).call(this,f);const p=(g,w)=>{const v=a[g]/255,b=c[g]/255,x=new Array(w+1);for(let E=0;E<=w;E++)x[E]=v+E/w*(b-v);return x.join(",")};return S(this,tt,QA).call(this,p(0,5),p(1,5),p(2,5),f),o.url=S(this,tt,Oy).call(this,d),o.url}addAlphaFilter(e){let n=l(this,tt,js).get(e);if(n)return n;const[i]=S(this,tt,aP).call(this,[e]),r=`alpha_${i}`;if(n=l(this,tt,js).get(r),n)return l(this,tt,js).set(e,n),n;const o=`g_${l(this,uu)}_alpha_map_${$t(this,Jg)._++}`,a=S(this,tt,Oy).call(this,o);l(this,tt,js).set(e,a),l(this,tt,js).set(r,a);const c=S(this,tt,Fy).call(this,o);return S(this,tt,FO).call(this,i,c),a}addLuminosityFilter(e){let n=l(this,tt,js).get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=S(this,tt,aP).call(this,[e]),r=`luminosity_${i}`):r="luminosity",n=l(this,tt,js).get(r),n)return l(this,tt,js).set(e,n),n;const o=`g_${l(this,uu)}_luminosity_map_${$t(this,Jg)._++}`,a=S(this,tt,Oy).call(this,o);l(this,tt,js).set(e,a),l(this,tt,js).set(r,a);const c=S(this,tt,Fy).call(this,o);return S(this,tt,T7).call(this,c),e&&S(this,tt,FO).call(this,i,c),a}addHighlightHCMFilter(e,n,i,r,o){var b;const a=`${n}-${i}-${r}-${o}`;let c=l(this,tt,XA).get(e);if((c==null?void 0:c.key)===a||(c?((b=c.filter)==null||b.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,tt,XA).set(e,c)),!n||!i))return c.url;const[u,h]=[n,i].map(S(this,tt,JA).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,m]=[r,o].map(S(this,tt,JA).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,tt,Ny).style.color="";const g=(x,E,T)=>{const P=new Array(256),k=(f-d)/T,R=x/255,M=(E-x)/(255*T);let D=0;for(let L=0;L<=T;L++){const $=Math.round(d+L*k),U=R+L*M;for(let I=D;I<=$;I++)P[I]=U;D=$+1}for(let L=D;L<256;L++)P[L]=P[D-1];return P.join(",")},w=`g_${l(this,uu)}_hcm_${e}_filter`,v=c.filter=S(this,tt,Fy).call(this,w);return S(this,tt,OO).call(this,v),S(this,tt,QA).call(this,g(p[0],m[0],5),g(p[1],m[1],5),g(p[2],m[2],5),v),c.url=S(this,tt,Oy).call(this,w),c.url}destroy(e=!1){var n,i,r,o;e&&((n=l(this,Qg))!=null&&n.size)||((i=l(this,cu))==null||i.parentNode.parentNode.remove(),y(this,cu,null),(r=l(this,C0))==null||r.clear(),y(this,C0,null),(o=l(this,Qg))==null||o.clear(),y(this,Qg,null),y(this,Jg,0))}}Yg=new WeakMap,C0=new WeakMap,cu=new WeakMap,uu=new WeakMap,Ks=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,tt=new WeakSet,js=function(){return l(this,C0)||y(this,C0,new Map)},XA=function(){return l(this,Qg)||y(this,Qg,new Map)},Ny=function(){if(!l(this,cu)){const e=l(this,Ks).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=l(this,Ks).createElementNS(dc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),y(this,cu,l(this,Ks).createElementNS(dc,"defs")),e.append(i),i.append(l(this,cu)),l(this,Ks).body.append(e)}return l(this,cu)},aP=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[n,i,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=n[u]/255,a[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),a.join(","),c.join(",")]},Oy=function(e){if(l(this,Yg)===void 0){y(this,Yg,"");const n=l(this,Ks).URL;n!==l(this,Ks).baseURI&&(wM(n)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,Yg,n.split("#",1)[0]))}return`url(${l(this,Yg)}#${e})`},T7=function(e){const n=l(this,Ks).createElementNS(dc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},OO=function(e){const n=l(this,Ks).createElementNS(dc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Fy=function(e){const n=l(this,Ks).createElementNS(dc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,tt,Ny).append(n),n},YA=function(e,n,i){const r=l(this,Ks).createElementNS(dc,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},QA=function(e,n,i,r){const o=l(this,Ks).createElementNS(dc,"feComponentTransfer");r.append(o),S(this,tt,YA).call(this,o,"feFuncR",e),S(this,tt,YA).call(this,o,"feFuncG",n),S(this,tt,YA).call(this,o,"feFuncB",i)},FO=function(e,n){const i=l(this,Ks).createElementNS(dc,"feComponentTransfer");n.append(i),S(this,tt,YA).call(this,i,"feFuncA",e)},JA=function(e){return l(this,tt,Ny).style.color=e,u$(getComputedStyle(l(this,tt,Ny)).getPropertyValue("color"))};class P7{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){xe("Abstract method `_fetch` called.")}}class k7 extends P7{async _fetch(t){const e=await vM(t,"arraybuffer");return new Uint8Array(e)}}ni&&kt("Please use the `legacy` build in Node.js environments.");async function R7(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class x0t extends C7{}class S0t extends S7{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class _0t extends _7{async _fetch(t){return R7(t)}}class E0t extends P7{async _fetch(t){return R7(t)}}const Zs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jO(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),s.clip(i)}class d${getPattern(){xe("Abstract method `getPattern` called.")}}class C0t extends d${constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,i){let r;if(i===Zs.STROKE||i===Zs.FILL){const o=e.current.getClippedPathBoundingBox(i,Ue(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=ht.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),jO(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else jO(t,this._bbox),r=this._createGradient(t);return r}}function JD(s,t,e,n,i,r,o,a){const c=t.coords,u=t.colors,h=s.data,d=s.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),c[n+1]>c[i+1]&&(f=n,n=i,i=f,f=o,o=a,a=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,g=(c[n]+t.offsetX)*t.scaleX,w=(c[n+1]+t.offsetY)*t.scaleY,v=(c[i]+t.offsetX)*t.scaleX,b=(c[i+1]+t.offsetY)*t.scaleY;if(m>=b)return;const x=u[r],E=u[r+1],T=u[r+2],P=u[o],k=u[o+1],R=u[o+2],M=u[a],D=u[a+1],L=u[a+2],$=Math.round(m),U=Math.round(b);let I,H,N,j,F,O,V,X;for(let z=$;z<=U;z++){if(z<w){const q=z<m?0:(m-z)/(m-w);I=p-(p-g)*q,H=x-(x-P)*q,N=E-(E-k)*q,j=T-(T-R)*q}else{let q;z>b?q=1:w===b?q=0:q=(w-z)/(w-b),I=g-(g-v)*q,H=P-(P-M)*q,N=k-(k-D)*q,j=R-(R-L)*q}let W;z<m?W=0:z>b?W=1:W=(m-z)/(m-b),F=p-(p-v)*W,O=x-(x-M)*W,V=E-(E-D)*W,X=T-(T-L)*W;const et=Math.round(Math.min(I,F)),wt=Math.round(Math.max(I,F));let ft=d*z+et*4;for(let q=et;q<=wt;q++)W=(I-q)/(I-F),W<0?W=0:W>1&&(W=1),h[ft++]=H-(H-O)*W|0,h[ft++]=N-(N-V)*W|0,h[ft++]=j-(j-X)*W|0,h[ft++]=255}}function T0t(s,t,e){const n=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(n.length/a)-1,u=a-1;for(r=0;r<c;r++){let h=r*a;for(let d=0;d<u;d++,h++)JD(s,e,n[h],n[h+1],n[h+a],i[h],i[h+1],i[h+a]),JD(s,e,n[h+a+1],n[h+1],n[h+a],i[h+a+1],i[h+1],i[h+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)JD(s,e,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class P0t extends d${constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,m=h/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},w=d+2*2,v=f+2*2,b=n.getCanvas("mesh",w,v),x=b.context,E=x.createImageData(d,f);if(e){const P=E.data;for(let k=0,R=P.length;k<R;k+=4)P[k]=e[0],P[k+1]=e[1],P[k+2]=e[2],P[k+3]=255}for(const P of this._figures)T0t(E,P,g);return x.putImageData(E,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(t,e,n,i){jO(t,this._bbox);let r;if(i===Zs.SHADING)r=ht.singularValueDecompose2dScale(Ue(t));else if(r=ht.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=ht.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,i===Zs.SHADING?null:this._background,e.cachedCanvases);return i!==Zs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class k0t extends d${getPattern(){return"hotpink"}}function R0t(s){switch(s[0]){case"RadialAxial":return new C0t(s);case"Mesh":return new P0t(s);case"Dummy":return new k0t}throw new Error(`Unknown IR type: ${s[0]}`)}const _3={COLORED:1,UNCOLORED:2},iR=class iR{constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),mM("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],m=f-h,g=p-d,w=ht.singularValueDecompose2dScale(this.matrix),v=ht.singularValueDecompose2dScale(this.baseTransform),b=w[0]*v[0],x=w[1]*v[1];let E=m,T=g,P=!1,k=!1;const R=Math.ceil(c*b),M=Math.ceil(u*x),D=Math.ceil(m*b),L=Math.ceil(g*x);R>=D?E=c:P=!0,M>=L?T=u:k=!0;const $=this.getSizeAndScale(E,this.ctx.canvas.width,b),U=this.getSizeAndScale(T,this.ctx.canvas.height,x),I=t.cachedCanvases.getCanvas("pattern",$.size,U.size),H=I.context,N=a.createCanvasGraphics(H);if(N.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(N,i,o),H.translate(-$.scale*h,-U.scale*d),N.transform($.scale,0,0,U.scale,0,0),H.save(),this.clipBbox(N,h,d,f,p),N.baseTransform=Ue(N.ctx),N.executeOperatorList(n),N.endDrawing(),H.restore(),P||k){const j=I.canvas;P&&(E=c),k&&(T=u);const F=this.getSizeAndScale(E,this.ctx.canvas.width,b),O=this.getSizeAndScale(T,this.ctx.canvas.height,x),V=F.size,X=O.size,z=t.cachedCanvases.getCanvas("pattern-workaround",V,X),W=z.context,et=P?Math.floor(m/c):0,wt=k?Math.floor(g/u):0;for(let ft=0;ft<=et;ft++)for(let q=0;q<=wt;q++)W.drawImage(j,V*ft,X*q,V,X,0,0,V,X);return{canvas:z.canvas,scaleX:F.scale,scaleY:O.scale,offsetX:h,offsetY:d}}return{canvas:I.canvas,scaleX:$.scale,scaleY:U.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,n){const i=Math.max(iR.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,r){const o=i-e,a=r-n;t.ctx.rect(e,n,o,a),t.current.updateRectMinMax(Ue(t.ctx),[e,n,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,r=t.current;switch(e){case _3.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case _3.UNCOLORED:const a=ht.makeHexColor(n[0],n[1],n[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new n0t(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,i){let r=n;i!==Zs.SHADING&&(r=ht.transform(r,e.baseTransform),this.matrix&&(r=ht.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};B(iR,"MAX_PATTERN_SIZE",3e3);let $O=iR;function M0t({src:s,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=bi.isLittleEndian?4278190080:255,[c,u]=o?[r,a]:[a,r],h=n>>3,d=n&7,f=s.length;e=new Uint32Array(e.buffer);let p=0;for(let m=0;m<i;m++){for(const w=t+h;t<w;t++){const v=t<f?s[t]:255;e[p++]=v&128?u:c,e[p++]=v&64?u:c,e[p++]=v&32?u:c,e[p++]=v&16?u:c,e[p++]=v&8?u:c,e[p++]=v&4?u:c,e[p++]=v&2?u:c,e[p++]=v&1?u:c}if(d===0)continue;const g=t<f?s[t++]:255;for(let w=0;w<d;w++)e[p++]=g&1<<7-w?u:c}return{srcPos:t,destPos:p}}const E3=16,C3=100,D0t=15,T3=10,P3=1e3,zi=16;function I0t(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(n,i){t.translate(n,i),this.__originalTranslate(n,i)},s.scale=function(n,i){t.scale(n,i),this.__originalScale(n,i)},s.transform=function(n,i,r,o,a,c){t.transform(n,i,r,o,a,c),this.__originalTransform(n,i,r,o,a,c)},s.setTransform=function(n,i,r,o,a,c){t.setTransform(n,i,r,o,a,c),this.__originalSetTransform(n,i,r,o,a,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(n){t.rotate(n),this.__originalRotate(n)},s.clip=function(n){t.clip(n),this.__originalClip(n)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,i,r,o,a){t.bezierCurveTo(e,n,i,r,o,a),this.__originalBezierCurveTo(e,n,i,r,o,a)},s.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class L0t{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function qC(s,t,e,n,i,r,o,a,c,u){const[h,d,f,p,m,g]=Ue(s);if(d===0&&f===0){const b=o*h+m,x=Math.round(b),E=a*p+g,T=Math.round(E),P=(o+c)*h+m,k=Math.abs(Math.round(P)-x)||1,R=(a+u)*p+g,M=Math.abs(Math.round(R)-T)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),x,T),s.drawImage(t,e,n,i,r,0,0,k,M),s.setTransform(h,d,f,p,m,g),[k,M]}if(h===0&&p===0){const b=a*f+m,x=Math.round(b),E=o*d+g,T=Math.round(E),P=(a+u)*f+m,k=Math.abs(Math.round(P)-x)||1,R=(o+c)*d+g,M=Math.abs(Math.round(R)-T)||1;return s.setTransform(0,Math.sign(d),Math.sign(f),0,x,T),s.drawImage(t,e,n,i,r,0,0,M,k),s.setTransform(h,d,f,p,m,g),[M,k]}s.drawImage(t,e,n,i,r,o,a,c,u);const w=Math.hypot(h,d),v=Math.hypot(f,p);return[w*c,v*u]}function N0t(s){const{width:t,height:e}=s;if(t>P3||e>P3)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,c,u;const h=t+7&-8;let d=new Uint8Array(h*e),f=0;for(const v of s.data){let b=128;for(;b>0;)d[f++]=v&b?0:255,b>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),a=1;a<e;a++){f=a*h,u=a*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let v=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<t;c++)v=(v>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[v]&&(o[u+c]=i[v],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>n)return null}for(f=h*(e-1),u=a*r,d[f]!==0&&(o[u]=8,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>n)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),g=new Path2D;for(a=0;p&&a<=e;a++){let v=a*r;const b=v+t;for(;v<b&&!o[v];)v++;if(v===b)continue;g.moveTo(v%r,a);const x=v;let E=o[v];do{const T=m[E];do v+=T;while(!o[v]);const P=o[v];P!==5&&P!==10?(E=P,o[v]=0):(E=P&51*E>>4,o[v]&=E>>2|E<<2),g.lineTo(v%r,v/r|0),o[v]||--p}while(x!==v);--a}return d=null,o=null,function(v){v.save(),v.scale(1/t,-1/e),v.translate(0,-e),v.fill(g),v.beginPath(),v.restore()}}class k3{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=BY,this.textMatrixScale=1,this.fontMatrix=fO,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Fs.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=ht.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=ht.applyTransform(e,t),i=ht.applyTransform(e.slice(2),t),r=ht.applyTransform([e[0],e[3]],t),o=ht.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],o[1])}updateScalingPathMinMax(t,e){ht.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,i,r,o,a,c,u,h){const d=ht.bezierBoundingBox(e,n,i,r,o,a,c,u,h);h||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Zs.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Zs.STROKE){e||xe("Stroke bounding box must include transform.");const i=ht.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Zs.FILL,e=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function R3(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%zi,r=(e-i)/zi,o=i===0?r:r+1,a=s.createImageData(n,zi);let c=0,u;const h=t.data,d=a.data;let f,p,m,g;if(t.kind===QT.GRAYSCALE_1BPP){const w=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),b=v.length,x=n+7>>3,E=4294967295,T=bi.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?zi:i,u=0,p=0;p<m;p++){const P=w-c;let k=0;const R=P>x?n:P*8-7,M=R&-8;let D=0,L=0;for(;k<M;k+=8)L=h[c++],v[u++]=L&128?E:T,v[u++]=L&64?E:T,v[u++]=L&32?E:T,v[u++]=L&16?E:T,v[u++]=L&8?E:T,v[u++]=L&4?E:T,v[u++]=L&2?E:T,v[u++]=L&1?E:T;for(;k<R;k++)D===0&&(L=h[c++],D=128),v[u++]=L&D?E:T,D>>=1}for(;u<b;)v[u++]=0;s.putImageData(a,0,f*zi)}}else if(t.kind===QT.RGBA_32BPP){for(p=0,g=n*zi*4,f=0;f<r;f++)d.set(h.subarray(c,c+g)),c+=g,s.putImageData(a,0,p),p+=zi;f<o&&(g=n*i*4,d.set(h.subarray(c,c+g)),s.putImageData(a,0,p))}else if(t.kind===QT.RGB_24BPP)for(m=zi,g=n*m,f=0;f<o;f++){for(f>=r&&(m=i,g=n*m),u=0,p=g;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;s.putImageData(a,0,f*zi)}else throw new Error(`bad image kind: ${t.kind}`)}function M3(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%zi,r=(e-i)/zi,o=i===0?r:r+1,a=s.createImageData(n,zi);let c=0;const u=t.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?zi:i;({srcPos:c}=M0t({src:u,srcPos:c,dest:h,width:n,height:f,nonBlackColor:0})),s.putImageData(a,0,d*zi)}}function hA(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function KC(s){if(s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0),!ni){const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}}function D3(s,t){if(t)return!0;const e=ht.singularValueDecompose2dScale(s);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Sf.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const O0t=["butt","round","square"],F0t=["miter","round","bevel"],j0t={},I3={};var ja,BO,UO,VO;const T$=class T${constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:a=null},c,u){A(this,ja);this.ctx=t,this.current=new k3(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new L0t(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ue(this.compositeCtx))}this.ctx.save(),KC(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ue(this.ctx)}executeOperatorList(t,e,n,i){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const u=c-a>T3&&typeof n=="function",h=u?Date.now()+D0t:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(m=o[a],m!==Yo.dependency)this[m].apply(this,r[a]);else for(const g of r[a]){const w=g.startsWith("g_")?f:p;if(!w.has(g))return w.get(g,n),a}if(a++,a===c)return a;if(u&&++d>T3){if(Date.now()>h)return n(),a;d=0}}}endDrawing(){S(this,ja,BO).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,ja,UO).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=n,c=i,u="prescale1",h,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,a,c,0,0,f,p),t=h.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,a=Ue(e);let c,u,h,d;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(R),c||(c=new Map,this._cachedBitmapsMap.set(R,c));const M=c.get(u);if(M&&!o){const D=Math.round(Math.min(a[0],a[2])+a[4]),L=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:D,offsetY:L}}h=M}h||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),M3(d.context,t));let f=ht.transform(a,[1/n,0,0,-1/i,0,0]);f=ht.transform(f,[1,0,0,1,0,-i]);const[p,m,g,w]=ht.getAxialAlignedBoundingBox([0,0,n,i],f),v=Math.round(g-p)||1,b=Math.round(w-m)||1,x=this.cachedCanvases.getCanvas("fillCanvas",v,b),E=x.context,T=p,P=m;E.translate(-T,-P),E.transform(...f),h||(h=this._scaleImage(d.canvas,qa(E)),h=h.img,c&&o&&c.set(u,h)),E.imageSmoothingEnabled=D3(Ue(E),t.interpolate),qC(E,h,0,0,h.width,h.height,0,0,n,i),E.globalCompositeOperation="source-in";const k=ht.transform(qa(E),[1,0,0,1,-T,-P]);return E.fillStyle=o?r.getPattern(e,this,k,Zs.FILL):r,E.fillRect(0,0,n,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,x.canvas)),{canvas:x.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=O0t[t]}setLineJoin(t){this.ctx.lineJoin=F0t[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Ue(this.suspendedCtx)),hA(this.suspendedCtx,r),I0t(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hA(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const r=i[0],o=i[1],a=i[2]-r,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,n,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,r,o,a,c,u,h,d){let f=t.canvas,p=c-h,m=u-d;if(o){const w=ht.makeHexColor(...o);if(p<0||m<0||p+n>f.width||m+i>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",n,i),b=v.context;b.drawImage(f,-p,-m),b.globalCompositeOperation="destination-atop",b.fillStyle=w,b.fillRect(0,0,n,i),b.globalCompositeOperation="source-over",f=v.canvas,p=m=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,m,n,i),t.clip(v),t.globalCompositeOperation="destination-atop",t.fillStyle=w,t.fillRect(p,m,n,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,u,n,i),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(f,p,m,n,i,c,u,n,i),e.restore()}save(){this.inSMaskMode?(hA(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hA(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,o){this.ctx.transform(t,e,n,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const i=this.ctx,r=this.current;let o=r.x,a=r.y,c,u;const h=Ue(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?n.slice(0):null;for(let p=0,m=0,g=t.length;p<g;p++)switch(t[p]|0){case Yo.rectangle:o=e[m++],a=e[m++];const w=e[m++],v=e[m++],b=o+w,x=a+v;i.moveTo(o,a),w===0||v===0?i.lineTo(b,x):(i.lineTo(b,a),i.lineTo(b,x),i.lineTo(o,x)),d||r.updateRectMinMax(h,[o,a,b,x]),i.closePath();break;case Yo.moveTo:o=e[m++],a=e[m++],i.moveTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Yo.lineTo:o=e[m++],a=e[m++],i.lineTo(o,a),d||r.updatePathMinMax(h,o,a);break;case Yo.curveTo:c=o,u=a,o=e[m+4],a=e[m+5],i.bezierCurveTo(e[m],e[m+1],e[m+2],e[m+3],o,a),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],e[m+2],e[m+3],o,a,f),m+=6;break;case Yo.curveTo2:c=o,u=a,i.bezierCurveTo(o,a,e[m],e[m+1],e[m+2],e[m+3]),r.updateCurvePathMinMax(h,c,u,o,a,e[m],e[m+1],e[m+2],e[m+3],f),o=e[m+2],a=e[m+3],m+=4;break;case Yo.curveTo3:c=o,u=a,o=e[m+2],a=e[m+3],i.bezierCurveTo(e[m],e[m+1],o,a,o,a),r.updateCurvePathMinMax(h,c,u,e[m],e[m+1],o,a,o,a,f),m+=4;break;case Yo.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,qa(e),Zs.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=n.getPattern(e,this,qa(e),Zs.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=j0t}eoClip(){this.pendingClip=I3}beginText(){this.current.textMatrix=BY,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const n=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:c,path:u}of t)n.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(c,-c));e.clip(n),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const n=this.commonObjs.get(t),i=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=n.fontMatrix||fO,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&kt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=((h=n.systemFontInfo)==null?void 0:h.css)||`"${r}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const c=n.italic?"italic":"normal";let u=e;e<E3?u=E3:e>C3&&(u=C3),this.current.fontSizeScale=e/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,o){this.current.textMatrix=[t,e,n,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,i,r){const o=this.ctx,a=this.current,c=a.font,u=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=u&Fs.FILL_STROKE_MASK,f=!!(u&Fs.ADD_TO_PATH_FLAG),p=a.patternFill&&!c.missingFile,m=a.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||f||p||m)&&(g=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||p||m){if(o.save(),o.translate(e,n),o.scale(h,-h),d===Fs.FILL||d===Fs.FILL_STROKE)if(i){const w=o.getTransform();o.setTransform(...i),o.fill(S(this,ja,VO).call(this,g,w,i))}else o.fill(g);if(d===Fs.STROKE||d===Fs.FILL_STROKE)if(r){const w=o.getTransform();o.setTransform(...r),o.stroke(S(this,ja,VO).call(this,g,w,r))}else o.lineWidth/=h,o.stroke(g);o.restore()}else(d===Fs.FILL||d===Fs.FILL_STROKE)&&o.fillText(t,e,n),(d===Fs.STROKE||d===Fs.FILL_STROKE)&&o.strokeText(t,e,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ue(o),x:e,y:n,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return Ft(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=n.vertical,p=f?1:-1,m=n.defaultVMetrics,g=i*e.fontMatrix[0],w=e.textRenderingMode===Fs.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let v,b;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,qa(r),Zs.FILL);v=Ue(r),r.restore(),r.fillStyle=k}if(e.patternStroke){r.save();const k=e.strokeColor.getPattern(r,this,qa(r),Zs.STROKE);b=Ue(r),r.restore(),r.strokeStyle=k}let x=e.lineWidth;const E=e.textMatrixScale;if(E===0||x===0){const k=e.textRenderingMode&Fs.FILL_STROKE_MASK;(k===Fs.STROKE||k===Fs.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=E;if(o!==1&&(r.scale(o,o),x/=o),r.lineWidth=x,n.isInvalidPDFjsFont){const k=[];let R=0;for(const M of t)k.push(M.unicode),R+=M.width;r.fillText(k.join(""),0,0),e.x+=R*g*h,r.restore(),this.compose();return}let T=0,P;for(P=0;P<d;++P){const k=t[P];if(typeof k=="number"){T+=p*k*i/1e3;continue}let R=!1;const M=(k.isSpace?c:0)+a,D=k.fontChar,L=k.accent;let $,U,I=k.width;if(f){const N=k.vmetric||m,j=-(k.vmetric?N[1]:I*.5)*g,F=N[2]*g;I=N?-N[0]:I,$=j/o,U=(T+F)/o}else $=T/o,U=0;if(n.remeasure&&I>0){const N=r.measureText(D).width*1e3/i*o;if(I<N&&this.isFontSubpixelAAEnabled){const j=I/N;R=!0,r.save(),r.scale(j,1),$/=j}else I!==N&&($+=(I-N)/2e3*i/o)}if(this.contentVisible&&(k.isInFont||n.missingFile)){if(w&&!L)r.fillText(D,$,U);else if(this.paintChar(D,$,U,v,b),L){const N=$+i*L.offset.x/o,j=U-i*L.offset.y/o;this.paintChar(L.fontChar,N,j,v,b)}}const H=f?I*g-M*u:I*g+M*u;T+=H,R&&r.restore()}f?e.y-=T:e.x+=T*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,i=n.font,r=n.fontSize,o=n.fontDirection,a=i.vertical?1:-1,c=n.charSpacing,u=n.wordSpacing,h=n.textHScale*o,d=n.fontMatrix||fO,f=t.length,p=n.textRenderingMode===Fs.INVISIBLE;let m,g,w,v;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(h,o),m=0;m<f;++m){if(g=t[m],typeof g=="number"){v=a*g*r/1e3,this.ctx.translate(v,0),n.x+=v*h;continue}const b=(g.isSpace?u:0)+c,x=i.charProcOperatorList[g.operatorListId];if(!x){kt(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(x),this.restore()),w=ht.applyTransform([g.width,0],d)[0]*r+b,e.translate(w,0),n.x+=w*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],i=this.baseTransform||Ue(this.ctx),r={createCanvasGraphics:o=>new T$(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new $O(t,n,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=ht.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=ht.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=R0t(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,qa(e),Zs.SHADING);const i=qa(e);if(i){const{width:r,height:o}=e.canvas,[a,c,u,h]=ht.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){xe("Should not call beginInlineImage")}beginImageData(){xe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ue(this.ctx),e)){const n=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],n,i),this.current.updateRectMinMax(Ue(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||mM("TODO: Support non-isolated groups."),t.knockout&&kt("Knockout groups not supported.");const n=Ue(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=ht.getAxialAlignedBoundingBox(t.bbox,Ue(e));const r=[0,0,e.canvas.width,e.canvas.height];i=ht.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-a),f.transform(...n),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),hA(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Ue(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=ht.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,i,r){if(S(this,ja,BO).call(this),KC(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[c,u]=ht.singularValueDecompose2dScale(Ue(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),KC(this.ctx)}else KC(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new k3(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,ja,UO).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=N0t(t)),i.compiled)){i.compiled(n);return}const r=this._createMaskCanvas(t),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=Ue(a);a.transform(e,n,i,r,0,0);const u=this._createMaskCanvas(t);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=ht.transform(c,[e,n,i,r,o[h],o[h+1]]),[p,m]=ht.applyTransform([0,0],f);a.drawImage(u.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=h.context;d.save();const f=this.getObject(o,r);M3(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,qa(e),Zs.FILL):n,d.fillRect(0,0,a,c),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),qC(e,h.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){kt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){kt("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[e,0,0,n,i[u],i[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,i=this.ctx;if(this.save(),!ni){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,n).context;R3(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,qa(i));i.imageSmoothingEnabled=D3(Ue(i),t.interpolate),qC(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;R3(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),qC(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===I3?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ue(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,a;if(n===0&&i===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=a=1/c;else{const h=c*t;o=a=h<1?1/h:1}else if(t===0)o=1/c,a=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,a=d<1?1/d:1}}else{const c=Math.abs(e*r-n*i),u=Math.hypot(e,n),h=Math.hypot(i,r);if(t===0)o=h/c,a=u/c;else{const d=t*c;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,i===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const a=Math.max(i,r);e.setLineDash(o.map(c=>c/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ja=new WeakSet,BO=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},UO=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},VO=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let Sv=T$;for(const s in Yo)Sv.prototype[s]!==void 0&&(Sv.prototype[Yo[s]]=Sv.prototype[s]);var PE,kE;class Tu{static get workerPort(){return l(this,PE)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");y(this,PE,t)}static get workerSrc(){return l(this,kE)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");y(this,kE,t)}}PE=new WeakMap,kE=new WeakMap,A(Tu,PE,null),A(Tu,kE,"");var Zg,RE;class $0t{constructor({parsedData:t,rawData:e}){A(this,Zg);A(this,RE);y(this,Zg,t),y(this,RE,e)}getRaw(){return l(this,RE)}get(t){return l(this,Zg).get(t)??null}getAll(){return r$(l(this,Zg))}has(t){return l(this,Zg).has(t)}}Zg=new WeakMap,RE=new WeakMap;const jy=Symbol("INTERNAL");var ME,DE,IE,T0;class B0t{constructor(t,{name:e,intent:n,usage:i,rbGroups:r}){A(this,ME,!1);A(this,DE,!1);A(this,IE,!1);A(this,T0,!0);y(this,ME,!!(t&Dr.DISPLAY)),y(this,DE,!!(t&Dr.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(l(this,IE))return l(this,T0);if(!l(this,T0))return!1;const{print:t,view:e}=this.usage;return l(this,ME)?(e==null?void 0:e.viewState)!=="OFF":l(this,DE)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==jy&&xe("Internal method `_setVisible` called."),y(this,IE,n),y(this,T0,e)}}ME=new WeakMap,DE=new WeakMap,IE=new WeakMap,T0=new WeakMap;var Od,ie,P0,k0,LE,HO;class U0t{constructor(t,e=Dr.DISPLAY){A(this,LE);A(this,Od,null);A(this,ie,new Map);A(this,P0,null);A(this,k0,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,y(this,k0,t.order);for(const n of t.groups)l(this,ie).set(n.id,new B0t(e,n));if(t.baseState==="OFF")for(const n of l(this,ie).values())n._setVisible(jy,!1);for(const n of t.on)l(this,ie).get(n)._setVisible(jy,!0);for(const n of t.off)l(this,ie).get(n)._setVisible(jy,!1);y(this,P0,this.getHash())}}isVisible(t){if(l(this,ie).size===0)return!0;if(!t)return mM("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,ie).has(t.id)?l(this,ie).get(t.id).visible:(kt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return S(this,LE,HO).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(l(this,ie).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!l(this,ie).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!l(this,ie).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,ie).has(e))return kt(`Optional content group not found: ${e}`),!0;if(l(this,ie).get(e).visible)return!1}return!0}return kt(`Unknown optional content policy ${t.policy}.`),!0}return kt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const i=l(this,ie).get(t);if(!i){kt(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==t&&((r=l(this,ie).get(a))==null||r._setVisible(jy,!1,!0));i._setVisible(jy,!!e,!0),y(this,Od,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=l(this,ie).get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}y(this,Od,null)}get hasInitialVisibility(){return l(this,P0)===null||this.getHash()===l(this,P0)}getOrder(){return l(this,ie).size?l(this,k0)?l(this,k0).slice():[...l(this,ie).keys()]:null}getGroups(){return l(this,ie).size>0?r$(l(this,ie)):null}getGroup(t){return l(this,ie).get(t)||null}getHash(){if(l(this,Od)!==null)return l(this,Od);const t=new y7;for(const[e,n]of l(this,ie))t.update(`${e}:${n.visible}`);return y(this,Od,t.hexdigest())}}Od=new WeakMap,ie=new WeakMap,P0=new WeakMap,k0=new WeakMap,LE=new WeakSet,HO=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=S(this,LE,HO).call(this,r);else if(l(this,ie).has(r))o=l(this,ie).get(r).visible;else return kt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class V0t{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Rn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Rn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,i,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Rn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new H0t(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new z0t(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class H0t{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=l$(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class z0t{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function W0t(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let h=a(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(s),e){const h=u(e);return r(h)}if(e=n("filename","i").exec(s),e){e=e[1];let h=a(e);return h=u(h),r(h)}function n(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=yM(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),t&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,g,w,v]=f;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[w,v]}const m=[];for(let g=0;g<d.length&&g in d;++g){let[w,v]=d[g];v=a(v),w&&(v=unescape(v),g===0&&(v=c(v))),m.push(v)}return m.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),m=h.slice(d+1).replace(/^[^']*'/,"");return i(f,m)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),i(f,m);try{m=atob(m)}catch{}return i(f,m)})}return""}function M7(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function bM(s){try{return new URL(s).origin}catch{}return null}function D7({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function I7(s){const t=s.get("Content-Disposition");if(t){let e=W0t(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(l$(e))return e}return null}function AM(s,t){return s===404||s===0&&t.startsWith("file:")?new gS('Missing PDF "'+t+'".'):new Ck(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s)}function L7(s){return s===200||s===206}function N7(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function O7(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(kt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class L3{constructor(t){B(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=M7(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new G0t(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new q0t(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class G0t{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,N7(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=bM(r.url),!L7(r.status))throw AM(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=D7({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=I7(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xf("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:O7(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class q0t{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=i.url;fetch(o,N7(r,this._withCredentials,this._abortController)).then(a=>{const c=bM(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!L7(a.status))throw AM(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:O7(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const ZD=200,tI=206;function K0t(s){const t=s.response;return typeof t!="string"?t:yM(t).buffer}class X0t{constructor({url:t,httpHeaders:e,withCredentials:n}){B(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=M7(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=tI):i.expectedStatus=ZD,e.responseType="arraybuffer",Rn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var i;const n=this.pendingRequests[t];n&&((i=n.onProgress)==null||i.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||ZD;if(!(r===ZD&&n.expectedStatus===tI)&&r!==n.expectedStatus){n.onError(i.status);return}const a=K0t(i);if(r===tI){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?n.onDone({begin:parseInt(u[1],10),chunk:a}):(kt('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Y0t{constructor(t){this._source=t,this._manager=new X0t(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Rn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Q0t(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new J0t(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Q0t{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=bM(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=D7({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=I7(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=AM(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class J0t{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=bM((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=AM(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Z0t=/^[a-z][a-z0-9\-+.]+:/i;function tbt(s){if(Z0t.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class ebt{constructor(t){this.source=t,this.url=tbt(t.url),Rn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new nbt(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new sbt(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class nbt{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new gS(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xf("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sbt{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ibt=1e5,Pi=30,rbt=.8;var Tz,Fd,Bi,NE,OE,tm,hu,FE,jE,em,R0,M0,jd,D0,$E,I0,nm,BE,UE,sm,im,VE,$d,L0,Qu,F7,j7,zO,Gr,lP,WO,$7,B7;const Fn=class Fn{constructor({textContentSource:t,container:e,viewport:n}){A(this,Qu);A(this,Fd,Promise.withResolvers());A(this,Bi,null);A(this,NE,!1);A(this,OE,!!((Tz=globalThis.FontInspector)!=null&&Tz.enabled));A(this,tm,null);A(this,hu,null);A(this,FE,0);A(this,jE,0);A(this,em,null);A(this,R0,null);A(this,M0,0);A(this,jd,0);A(this,D0,Object.create(null));A(this,$E,[]);A(this,I0,null);A(this,nm,[]);A(this,BE,new WeakMap);A(this,UE,null);var c;if(t instanceof ReadableStream)y(this,I0,t);else if(typeof t=="object")y(this,I0,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,Bi,y(this,R0,e)),y(this,jd,n.scale*(globalThis.devicePixelRatio||1)),y(this,M0,n.rotation),y(this,hu,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=n.rawDims;y(this,UE,[1,0,0,-1,-o,a+r]),y(this,jE,i),y(this,FE,r),S(c=Fn,Gr,$7).call(c),Km(e,n),l(this,Fd).promise.finally(()=>{l(Fn,L0).delete(this),y(this,hu,null),y(this,D0,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=bi.platform;return Ft(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,em).read().then(({value:e,done:n})=>{if(n){l(this,Fd).resolve();return}l(this,tm)??y(this,tm,e.lang),Object.assign(l(this,D0),e.styles),S(this,Qu,F7).call(this,e.items),t()},l(this,Fd).reject)};return y(this,em,l(this,I0).getReader()),l(Fn,L0).add(this),t(),l(this,Fd).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==l(this,M0)&&(e==null||e(),y(this,M0,i),Km(l(this,R0),{rotation:i})),n!==l(this,jd)){e==null||e(),y(this,jd,n);const o={div:null,properties:null,ctx:S(r=Fn,Gr,lP).call(r,l(this,tm))};for(const a of l(this,nm))o.properties=l(this,BE).get(a),o.div=a,S(this,Qu,zO).call(this,o)}}cancel(){var e;const t=new xf("TextLayer task cancelled.");(e=l(this,em))==null||e.cancel(t).catch(()=>{}),y(this,em,null),l(this,Fd).reject(t)}get textDivs(){return l(this,nm)}get textContentItemsStr(){return l(this,$E)}static cleanup(){if(!(l(this,L0).size>0)){l(this,sm).clear();for(const{canvas:t}of l(this,im).values())t.remove();l(this,im).clear()}}};Fd=new WeakMap,Bi=new WeakMap,NE=new WeakMap,OE=new WeakMap,tm=new WeakMap,hu=new WeakMap,FE=new WeakMap,jE=new WeakMap,em=new WeakMap,R0=new WeakMap,M0=new WeakMap,jd=new WeakMap,D0=new WeakMap,$E=new WeakMap,I0=new WeakMap,nm=new WeakMap,BE=new WeakMap,UE=new WeakMap,sm=new WeakMap,im=new WeakMap,VE=new WeakMap,$d=new WeakMap,L0=new WeakMap,Qu=new WeakSet,F7=function(t){var i,r;if(l(this,NE))return;(r=l(this,hu)).ctx??(r.ctx=S(i=Fn,Gr,lP).call(i,l(this,tm)));const e=l(this,nm),n=l(this,$E);for(const o of t){if(e.length>ibt){kt("Ignoring additional textDivs for performance reasons."),y(this,NE,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Bi);y(this,Bi,document.createElement("span")),l(this,Bi).classList.add("markedContent"),o.id!==null&&l(this,Bi).setAttribute("id",`${o.id}`),a.append(l(this,Bi))}else o.type==="endMarkedContent"&&y(this,Bi,l(this,Bi).parentNode);continue}n.push(o.str),S(this,Qu,j7).call(this,o)}},j7=function(t){var g;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,nm).push(e);const i=ht.transform(l(this,UE),t.transform);let r=Math.atan2(i[1],i[0]);const o=l(this,D0)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,OE)&&o.fontSubstitution||o.fontFamily;a=Fn.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),u=c*S(g=Fn,Gr,B7).call(g,a,l(this,tm));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;l(this,Bi)===l(this,R0)?(p.left=`${(100*h/l(this,jE)).toFixed(2)}%`,p.top=`${(100*d/l(this,FE)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(Fn,$d)*c).toFixed(2)}px)`,p.fontFamily=a,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,OE)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(m=!0)}if(m&&(n.canvasWidth=o.vertical?t.height:t.width),l(this,BE).set(e,n),l(this,hu).div=e,l(this,hu).properties=n,S(this,Qu,zO).call(this,l(this,hu)),n.hasText&&l(this,Bi).append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,Bi).append(w)}},zO=function(t){var a;const{div:e,properties:n,ctx:i}=t,{style:r}=e;let o="";if(l(Fn,$d)>1&&(o=`scale(${1/l(Fn,$d)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=n;S(a=Fn,Gr,WO).call(a,i,h*l(this,jd),c);const{width:d}=i.measureText(e.textContent);d>0&&(o=`scaleX(${u*l(this,jd)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Gr=new WeakSet,lP=function(t=null){let e=l(this,im).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,im).set(t,e),l(this,VE).set(e,{size:0,family:""})}return e},WO=function(t,e,n){const i=l(this,VE).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},$7=function(){if(l(this,$d)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),y(this,$d,t.getBoundingClientRect().height),t.remove()},B7=function(t,e){const n=l(this,sm).get(t);if(n)return n;const i=S(this,Gr,lP).call(this,e);i.canvas.width=i.canvas.height=Pi,S(this,Gr,WO).call(this,i,Pi,t);const r=i.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+a);return l(this,sm).set(t,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,Pi,Pi),i.strokeText("g",0,0);let c=i.getImageData(0,0,Pi,Pi).data;a=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){a=Math.ceil(h/4/Pi);break}i.clearRect(0,0,Pi,Pi),i.strokeText("A",0,Pi),c=i.getImageData(0,0,Pi,Pi).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=Pi-Math.floor(h/4/Pi);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+a):rbt;return l(this,sm).set(t,u),u},A(Fn,Gr),A(Fn,sm,new Map),A(Fn,im,new Map),A(Fn,VE,new WeakMap),A(Fn,$d,null),A(Fn,L0,new Set);let mS=Fn;class yS{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(yS.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const obt=65536,abt=100,lbt=5e3,cbt=ni?S0t:b0t,ubt=ni?_0t:E7,hbt=ni?x0t:A0t,dbt=ni?E0t:k7;function fbt(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new GO,{docId:e}=t,n=s.url?pbt(s.url):null,i=s.data?gbt(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,a=s.password??null,c=s.range instanceof U7?s.range:null,u=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:obt;let h=s.worker instanceof _v?s.worker:null;const d=s.verbosity,f=typeof s.docBaseUrl=="string"&&!wM(s.docBaseUrl)?s.docBaseUrl:null,p=typeof s.cMapUrl=="string"?s.cMapUrl:null,m=s.cMapPacked!==!1,g=s.CMapReaderFactory||ubt,w=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,v=s.StandardFontDataFactory||dbt,b=s.stopAtErrors!==!0,x=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,E=s.isEvalSupported!==!1,T=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!ni,P=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!ni&&(bi.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,R=typeof s.disableFontFace=="boolean"?s.disableFontFace:ni,M=s.fontExtraProperties===!0,D=s.enableXfa===!0,L=s.ownerDocument||globalThis.document,$=s.disableRange===!0,U=s.disableStream===!0,I=s.disableAutoFetch===!0,H=s.pdfBug===!0,N=s.CanvasFactory||cbt,j=s.FilterFactory||hbt,F=s.enableHWA===!0,O=c?c.length:s.length??NaN,V=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!ni&&!R,X=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:g===E7&&v===k7&&p&&w&&zA(p,document.baseURI)&&zA(w,document.baseURI),z=null;Jwt(d);const W={canvasFactory:new N({ownerDocument:L,enableHWA:F}),filterFactory:new j({docId:e,ownerDocument:L}),cMapReaderFactory:X?null:new g({baseUrl:p,isCompressed:m}),standardFontDataFactory:X?null:new v({baseUrl:w})};if(!h){const ft={verbosity:d,port:Tu.workerPort};h=ft.port?_v.fromPort(ft):new _v(ft),t._worker=h}const et={docId:e,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:I,rangeChunkSize:u,length:O,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:x,disableFontFace:R,ignoreErrors:b,isEvalSupported:E,isOffscreenCanvasSupported:T,isImageDecoderSupported:P,canvasMaxAreaInBytes:k,fontExtraProperties:M,useSystemFonts:V,cMapUrl:X?p:null,standardFontDataUrl:X?w:null}},wt={disableFontFace:R,fontExtraProperties:M,ownerDocument:L,pdfBug:H,styleElement:z,loadingParams:{disableAutoFetch:I,enableXfa:D}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ft=h.messageHandler.sendWithPromise("GetDocRequest",et,i?[i.buffer]:null);let q;if(c)q=new V0t(c,{disableRange:$,disableStream:U});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Se;if(ni)if(zA(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Se=L3}else Se=ebt;else Se=zA(n)?L3:Y0t;q=new Se({url:n,length:O,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:$,disableStream:U})}return ft.then(Se=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Qt=new KA(e,Se,h.port),_e=new wbt(Qt,t,q,wt,W);t._transport=_e,Qt.send("Ready",null)})}).catch(t._capability.reject),t}function pbt(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(ni&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function gbt(s){if(ni&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return yM(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function N3(s){return typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0}var rR;const oR=class oR{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${$t(oR,rR)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};rR=new WeakMap,A(oR,rR,0);let GO=oR;class U7{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){xe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mbt{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Bd,du,Po,$y,cP;class ybt{constructor(t,e,n,i=!1){A(this,Po);A(this,Bd,null);A(this,du,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new A3:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new V7,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new tC({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=_h.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var E,T;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(n,i,h,d),{renderingIntent:p,cacheKey:m}=f;y(this,du,!1),S(this,Po,cP).call(this),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(m);g||(g=Object.create(null),this._intentStates.set(m,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const w=!!(p&Dr.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const v=P=>{var k;g.renderTasks.delete(b),(this._maybeCleanupAfterRender||w)&&y(this,du,!0),S(this,Po,$y).call(this,!w),P?(b.capability.reject(P),this._abortOperatorList({intentState:g,reason:P instanceof Error?P:new Error(P)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new KO({callback:v,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u});(g.renderTasks||(g.renderTasks=new Set)).add(b);const x=b.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([P,k])=>{var R;if(this.destroyed){v();return}if((R=this._stats)==null||R.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:P,optionalContentConfig:k}),b.operatorListChanged()}).catch(v),x}getOperatorList({intent:t="display",annotationMode:e=_h.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,n,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yS.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function r(){o.read().then(function({value:c,done:u}){if(u){n(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),y(this,du,!1),S(this,Po,cP).call(this),Promise.all(t)}cleanup(t=!1){y(this,du,!0);const e=S(this,Po,$y).call(this,!1);return t&&e&&this._stats&&(this._stats=new A3),e}_startRenderPage(t,e){var i,r;const n=this._intentStates.get(e);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&S(this,Po,$y).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,Po,$y).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof a$){let i=abt;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new xf(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Bd=new WeakMap,du=new WeakMap,Po=new WeakSet,$y=function(t=!1){if(S(this,Po,cP).call(this),!l(this,du)||this.destroyed)return!1;if(t)return y(this,Bd,setTimeout(()=>{y(this,Bd,null),S(this,Po,$y).call(this,!1)},lbt)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,du,!1),!0},cP=function(){l(this,Bd)&&(clearTimeout(l(this,Bd)),y(this,Bd,null))};var fu,aR;class vbt{constructor(){A(this,fu,new Map);A(this,aR,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,aR).then(()=>{for(const[i]of l(this,fu))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){kt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,fu).set(e,i)}removeEventListener(t,e){const n=l(this,fu).get(e);n==null||n(),l(this,fu).delete(e)}terminate(){for(const[,t]of l(this,fu))t==null||t();l(this,fu).clear()}}fu=new WeakMap,aR=new WeakMap;var lR,rm,om,N0,uP,O0,hP;const je=class je{constructor({name:t=null,port:e=null,verbosity:n=Zwt()}={}){A(this,N0);var i;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=l(je,om))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(je,om)||y(je,om,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new KA("main","worker",t),this._messageHandler.on("ready",function(){}),S(this,N0,uP).call(this)}_initialize(){if(l(je,rm)||l(je,O0,hP)){this._setupFakeWorker();return}let{workerSrc:t}=je;try{je._isSameOrigin(window.location.href,t)||(t=je._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new KA("main","worker",e),i=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=n,this._port=e,this._webWorker=e,S(this,N0,uP).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{mM("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(je,rm)||(kt("Setting up fake worker."),y(je,rm,!0)),je._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new vbt;this._port=e;const n=`fake${$t(je,lR)._++}`,i=new KA(n+"_worker",n,e);t.setup(i,e),this._messageHandler=new KA(n,n+"_worker",e),S(this,N0,uP).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=l(je,om))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=l(this,om))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new je(t)}static get workerSrc(){if(Tu.workerSrc)return Tu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ft(this,"_setupFakeWorkerGlobal",(async()=>l(this,O0,hP)?l(this,O0,hP):(await import(this.workerSrc)).WorkerMessageHandler)())}};lR=new WeakMap,rm=new WeakMap,om=new WeakMap,N0=new WeakSet,uP=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},O0=new WeakSet,hP=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(je,O0),A(je,lR,0),A(je,rm,!1),A(je,om),ni&&(y(je,rm,!0),Tu.workerSrc||(Tu.workerSrc="./pdf.worker.mjs")),je._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},je._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let _v=je;var pu,Il,F0,j0,gu,am,ZA;class wbt{constructor(t,e,n,i,r){A(this,am);A(this,pu,new Map);A(this,Il,new Map);A(this,F0,new Map);A(this,j0,new Map);A(this,gu,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new V7,this.fontLoader=new v0t({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ft(this,"annotationStorage",new h$)}getRenderingIntent(t,e=_h.ENABLE,n=null,i=!1,r=!1){let o=Dr.DISPLAY,a=NO;switch(t){case"any":o=Dr.ANY;break;case"display":break;case"print":o=Dr.PRINT;break;default:kt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Dr.PRINT&&n instanceof w7?n:this.annotationStorage;switch(e){case _h.DISABLE:o+=Dr.ANNOTATIONS_DISABLE;break;case _h.ENABLE:break;case _h.ENABLE_FORMS:o+=Dr.ANNOTATIONS_FORMS;break;case _h.ENABLE_STORAGE:o+=Dr.ANNOTATIONS_STORAGE,a=c.serializable;break;default:kt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=Dr.IS_EDITING),r&&(o+=Dr.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,gu))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of l(this,Il).values())t.push(i._destroy());l(this,Il).clear(),l(this,F0).clear(),l(this,j0).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,pu).clear(),this.filterFactory.destroy(),mS.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new xf("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{Rn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Rn(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,i)=>{Rn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Rn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new mbt(n,this))}),t.on("DocException",n=>{e._capability.reject(Ri(n))}),t.on("PasswordRequest",n=>{y(this,gu,Promise.withResolvers());try{if(!e.onPassword)throw Ri(n);const i=r=>{r instanceof Error?l(this,gu).reject(r):l(this,gu).resolve({password:r})};e.onPassword(i,n.code)}catch(i){l(this,gu).reject(i)}return l(this,gu).promise}),t.on("DataLoaded",n=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,Il).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;kt(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new w0t(r,{disableFontFace:a,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Rn(f,"The imageRef must be defined.");for(const p of l(this,Il).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Il).get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(n,o),(o==null?void 0:o.dataLen)>Kwt&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,F0).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,j0).set(r.refStr,t);const o=new ybt(e,r,this,this._params.pdfBug);return l(this,Il).set(e,o),o});return l(this,F0).set(e,i),i}getPageIndex(t){return N3(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,am,ZA).call(this,"GetFieldObjects")}hasJSActions(){return S(this,am,ZA).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,am,ZA).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,am,ZA).call(this,"GetOptionalContentConfig").then(e=>new U0t(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,pu).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new $0t(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,pu).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,Il).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,pu).clear(),this.filterFactory.destroy(!0),mS.cleanup()}}cachedPageNumber(t){if(!N3(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,j0).get(e)??null}}pu=new WeakMap,Il=new WeakMap,F0=new WeakMap,j0=new WeakMap,gu=new WeakMap,am=new WeakSet,ZA=function(t,e=null){const n=l(this,pu).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return l(this,pu).set(t,i),i};const dA=Symbol("INITIAL_DATA");var xr,HE,qO;class V7{constructor(){A(this,HE);A(this,xr,Object.create(null))}get(t,e=null){if(e){const i=S(this,HE,qO).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=l(this,xr)[t];if(!n||n.data===dA)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,xr)[t];return!!e&&e.data!==dA}delete(t){const e=l(this,xr)[t];return!e||e.data===dA?!1:(delete l(this,xr)[t],!0)}resolve(t,e=null){const n=S(this,HE,qO).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in l(this,xr)){const{data:n}=l(this,xr)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}y(this,xr,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,xr)){const{data:e}=l(this,xr)[t];e!==dA&&(yield[t,e])}}}xr=new WeakMap,HE=new WeakSet,qO=function(t){var e;return(e=l(this,xr))[t]||(e[t]={...Promise.withResolvers(),data:dA})};var Ud;class bbt{constructor(t){A(this,Ud,null);y(this,Ud,t),this.onContinue=null}get promise(){return l(this,Ud).capability.promise}cancel(t=0){l(this,Ud).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Ud).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Ud);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ud=new WeakMap;var Vd,lm;const sp=class sp{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){A(this,Vd,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bbt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(sp,lm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(sp,lm).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:o}=this.params;this.gfx=new Sv(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Vd)&&(window.cancelAnimationFrame(l(this,Vd)),y(this,Vd,null)),l(sp,lm).delete(this._canvas),this.callback(t||new a$(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,Vd,window.requestAnimationFrame(()=>{y(this,Vd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(sp,lm).delete(this._canvas),this.callback())))}};Vd=new WeakMap,lm=new WeakMap,A(sp,lm,new WeakSet);let KO=sp;const Abt="4.10.38",xbt="f9bea397f";function O3(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function fA(s){return Math.max(0,Math.min(255,255*s))}class F3{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fA(t),[t,t,t]}static G_HTML([t]){const e=O3(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(fA)}static RGB_HTML(t){return`#${t.map(O3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[fA(1-Math.min(1,t+i)),fA(1-Math.min(1,n+i)),fA(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class Sbt{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){xe("Abstract method `_createSVG` called.")}}class f$ extends Sbt{_createSVG(t){return document.createElementNS(dc,t)}}class H7{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}a&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&yS.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,m,g]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const w=p.children[++h.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const x=document.createTextNode(w.value);u.push(x),g.append(x);continue}const b=(d=w==null?void 0:w.attributes)!=null&&d.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:e,intent:r,linkService:n}),((f=w.children)==null?void 0:f.length)>0)h.push([w,-1,b]);else if(w.value){const x=document.createTextNode(w.value);a&&yS.shouldBuildText(v)&&u.push(x),b.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const nC=1e3,_bt=9,Ym=new WeakSet;function ff(s){return{width:s[2]-s[0],height:s[3]-s[1]}}class Ebt{static create(t){switch(t.data.annotationType){case Nn.LINK:return new z7(t);case Nn.TEXT:return new Cbt(t);case Nn.WIDGET:switch(t.data.fieldType){case"Tx":return new Tbt(t);case"Btn":return t.data.radioButton?new q7(t):t.data.checkBox?new kbt(t):new Rbt(t);case"Ch":return new Mbt(t);case"Sig":return new Pbt(t)}return new ay(t);case Nn.POPUP:return new YO(t);case Nn.FREETEXT:return new J7(t);case Nn.LINE:return new Ibt(t);case Nn.SQUARE:return new Lbt(t);case Nn.CIRCLE:return new Nbt(t);case Nn.POLYLINE:return new Z7(t);case Nn.CARET:return new Fbt(t);case Nn.INK:return new p$(t);case Nn.POLYGON:return new Obt(t);case Nn.HIGHLIGHT:return new t9(t);case Nn.UNDERLINE:return new jbt(t);case Nn.SQUIGGLY:return new $bt(t);case Nn.STRIKEOUT:return new Bbt(t);case Nn.STAMP:return new e9(t);case Nn.FILEATTACHMENT:return new Ubt(t);default:return new _n(t)}}}var cm,$0,B0,zE,XO;const P$=class P${constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){A(this,zE);A(this,cm,null);A(this,$0,!1);A(this,B0,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return P$._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;l(this,cm)||y(this,cm,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&S(this,zE,XO).call(this,e),(n=l(this,B0))==null||n.popup.updateEdited(t)}resetEdited(){var t;l(this,cm)&&(S(this,zE,XO).call(this,l(this,cm).rect),(t=l(this,B0))==null||t.popup.resetEdited(),y(this,cm,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof ay||(r.tabIndex=nC);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof YO){const{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:a,height:c}=ff(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const g=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(g>0||w>0){const b=`calc(${g}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=b}else if(this instanceof q7){const b=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=b}switch(e.borderStyle.style){case uA.SOLID:o.borderStyle="solid";break;case uA.DASHED:o.borderStyle="dashed";break;case uA.BEVELED:kt("Unimplemented border style: beveled");break;case uA.INSET:kt("Unimplemented border style: inset");break;case uA.UNDERLINE:o.borderBottomStyle="solid";break}const v=e.borderColor||null;v?(y(this,$0,!0),o.borderColor=ht.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=ht.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*a/h}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=ff(this.data.rect);let a,c;t%180===0?(a=100*r/n,c=100*o/i):(a=100*o/n,c=100*r/i),e.style.width=`${a}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[n]=F3[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:F3[`${o}_rgb`](a)})};return Ft(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){const[g,w,v,b]=t.subarray(2,6);if(i===g&&r===w&&e===v&&n===b)return}const{style:o}=this.container;let a;if(l(this,$0)){const{borderColor:g,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=i-e,u=r-n,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,w=t.length;g<w;g+=8){const v=t[g],b=t[g+1],x=t[g+2],E=t[g+3],T=h.createElement("rect"),P=(x-e)/c,k=(r-b)/u,R=(v-x)/c,M=(b-E)/u;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",R),T.setAttribute("height",M),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${R}" height="${M}"/>`)}l(this,$0)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:t}=this,e=y(this,B0,new YO({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){xe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ym.has(u)){kt(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:u})}return n}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&Ym.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};cm=new WeakMap,$0=new WeakMap,B0=new WeakMap,zE=new WeakSet,XO=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;n==null||n.splice(0,4,...t);const{width:u,height:h}=ff(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*u/r}%`,e.height=`${100*h/o}%`):this.setRotation(i)};let _n=P$;var Fr,Yf,W7,G7;class z7 extends _n{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});A(this,Fr);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(S(this,Fr,W7).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(S(this,Fr,G7).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&S(this,Fr,Yf).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),S(this,Fr,Yf).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=i.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),S(this,Fr,Yf).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),S(this,Fr,Yf).call(this),!this._fieldObjects){kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:a}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:g}of m)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Ym.has(m)){kt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Fr=new WeakSet,Yf=function(){this.container.setAttribute("data-internal-link","")},W7=function(e,n,i=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,i),!1},S(this,Fr,Yf).call(this)},G7=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),S(this,Fr,Yf).call(this)};class Cbt extends _n{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ay extends _n{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return bi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var a;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,n,i){var r,o,a;for(const[c,u]of n)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ht.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||_bt,r=t.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(KD*i))||1,d=u/h;o=Math.min(i,c(d/KD))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(u/KD))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=ht.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Tbt extends ay{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ym.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=nC,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var g;if(h.focused)return;const{target:m}=p;h.userValue&&(m.value=h.userValue),h.lastCommittedValue=m.value,h.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(g){h.userValue=g.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),g.target.value=h.userValue},formattedValue(g){const{formattedValue:w}=g.detail;h.formattedValue=w,w!=null&&g.target!==document.activeElement&&(g.target.value=w),t.setValue(e,{formattedValue:w})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var x;const{charLimit:w}=g.detail,{target:v}=g;if(w===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",w);let b=h.userValue;!b||b.length<=w||(b=b.slice(0,w),v.value=h.userValue=b,t.setValue(e,{value:b}),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),n.addEventListener("keydown",p=>{var w;h.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(h.commitKey=3),m===-1)return;const{value:g}=p.target;h.lastCommittedValue!==g&&(h.lastCommittedValue=g,h.userValue=g,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var g,w;if(!h.focused||!p.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(h.focused=!1);const{value:m}=p.target;h.userValue=m,h.lastCommittedValue!==m&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",p=>{var T;h.lastCommittedValue=null;const{data:m,target:g}=p,{value:w,selectionStart:v,selectionEnd:b}=g;let x=v,E=b;switch(p.inputType){case"deleteWordBackward":{const P=w.substring(0,v).match(/\w*[^\w]*$/);P&&(x-=P[0].length);break}case"deleteWordForward":{const P=w.substring(v).match(/^[^\w]*\w*/);P&&(E+=P[0].length);break}case"deleteContentBackward":v===b&&(x-=1);break;case"deleteContentForward":v===b&&(E+=1);break}p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,change:m||"",willCommit:!1,selStart:x,selEnd:E}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Pbt extends ay{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class kbt extends ay{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ym.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=nC,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class q7 extends ay{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ym.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=nC,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,n))t.setValue(u.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Rbt extends z7{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Mbt extends ay{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Ym.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=nC;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,n.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const g of i.options)g.selected=m.has(g.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,m=f.detail.remove;p[m].selected=!1,i.remove(m),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:g}=f.detail.insert,w=i.children[p],v=document.createElement("option");v.textContent=m,v.value=g,w?w.before(v):i.append(v),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const m of p){const{displayValue:g,exportValue:w}=m,v=document.createElement("option");v.textContent=g,v.value=w,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class YO extends _n{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:_n._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Dbt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${o$}${n}`).join(",")),this.container}}var U0,cR,uR,V0,um,cn,mu,H0,WE,GE,z0,yu,ga,vu,qE,wu,KE,hm,dm,ge,dP,QO,K7,X7,Y7,Q7,fP,pP,JO;class Dbt{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:d}){A(this,ge);A(this,U0,S(this,ge,Y7).bind(this));A(this,cR,S(this,ge,JO).bind(this));A(this,uR,S(this,ge,pP).bind(this));A(this,V0,S(this,ge,fP).bind(this));A(this,um,null);A(this,cn,null);A(this,mu,null);A(this,H0,null);A(this,WE,null);A(this,GE,null);A(this,z0,null);A(this,yu,!1);A(this,ga,null);A(this,vu,null);A(this,qE,null);A(this,wu,null);A(this,KE,null);A(this,hm,null);A(this,dm,!1);var f;y(this,cn,t),y(this,KE,i),y(this,mu,o),y(this,wu,a),y(this,GE,c),y(this,um,e),y(this,qE,u),y(this,z0,h),y(this,WE,n),y(this,H0,c$.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,V0)),p.addEventListener("mouseenter",l(this,uR)),p.addEventListener("mouseleave",l(this,cR)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",l(this,U0));l(this,cn).hidden=!0,d&&S(this,ge,fP).call(this)}render(){if(l(this,ga))return;const t=y(this,ga,document.createElement("div"));if(t.className="popup",l(this,um)){const r=t.style.outlineColor=ht.makeHexColor(...l(this,um));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=ht.makeHexColor(...l(this,um).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=l(this,KE),t.append(e),l(this,H0)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,H0).valueOf()})),e.append(r)}const i=l(this,ge,dP);if(i)H7.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,mu));t.append(r)}l(this,cn).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];n.append(document.createTextNode(a)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;l(this,hm)||y(this,hm,{contentsObj:l(this,mu),richText:l(this,wu)}),t&&y(this,vu,null),e&&(y(this,wu,S(this,ge,X7).call(this,e)),y(this,mu,null)),(n=l(this,ga))==null||n.remove(),y(this,ga,null)}resetEdited(){var t;l(this,hm)&&({contentsObj:$t(this,mu)._,richText:$t(this,wu)._}=l(this,hm),y(this,hm,null),(t=l(this,ga))==null||t.remove(),y(this,ga,null),y(this,vu,null))}forceHide(){y(this,dm,this.isVisible),l(this,dm)&&(l(this,cn).hidden=!0)}maybeShow(){l(this,dm)&&(l(this,ga)||S(this,ge,pP).call(this),y(this,dm,!1),l(this,cn).hidden=!1)}get isVisible(){return l(this,cn).hidden===!1}}U0=new WeakMap,cR=new WeakMap,uR=new WeakMap,V0=new WeakMap,um=new WeakMap,cn=new WeakMap,mu=new WeakMap,H0=new WeakMap,WE=new WeakMap,GE=new WeakMap,z0=new WeakMap,yu=new WeakMap,ga=new WeakMap,vu=new WeakMap,qE=new WeakMap,wu=new WeakMap,KE=new WeakMap,hm=new WeakMap,dm=new WeakMap,ge=new WeakSet,dP=function(){const t=l(this,wu),e=l(this,mu);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,wu).html||null},QO=function(){var t,e,n;return((n=(e=(t=l(this,ge,dP))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},K7=function(){var t,e,n;return((n=(e=(t=l(this,ge,dP))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},X7=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,ge,K7),fontSize:l(this,ge,QO)?`calc(${l(this,ge,QO)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return n},Y7=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,yu))&&S(this,ge,fP).call(this)},Q7=function(){if(l(this,vu)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:r}}}=l(this,GE);let o=!!l(this,z0),a=o?l(this,z0):l(this,qE);for(const m of l(this,WE))if(!a||ht.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=ht.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=o?a[2]-a[0]+5:0,d=c[0]+h,f=c[1];y(this,vu,[100*(d-i)/e,100*(f-r)/n]);const{style:p}=l(this,cn);p.left=`${l(this,vu)[0]}%`,p.top=`${l(this,vu)[1]}%`},fP=function(){y(this,yu,!l(this,yu)),l(this,yu)?(S(this,ge,pP).call(this),l(this,cn).addEventListener("click",l(this,V0)),l(this,cn).addEventListener("keydown",l(this,U0))):(S(this,ge,JO).call(this),l(this,cn).removeEventListener("click",l(this,V0)),l(this,cn).removeEventListener("keydown",l(this,U0)))},pP=function(){l(this,ga)||this.render(),this.isVisible?l(this,yu)&&l(this,cn).classList.add("focused"):(S(this,ge,Q7).call(this),l(this,cn).hidden=!1,l(this,cn).style.zIndex=parseInt(l(this,cn).style.zIndex)+1e3)},JO=function(){l(this,cn).classList.remove("focused"),!(l(this,yu)||!this.isVisible)&&(l(this,cn).hidden=!0,l(this,cn).style.zIndex=parseInt(l(this,cn).style.zIndex)-1e3)};class J7 extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var XE;class Ibt extends _n{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,XE,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:i}=ff(e.rect),r=this.svgFactory.create(n,i,!0),o=y(this,XE,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,XE)}addHighlightArea(){this.container.classList.add("highlightArea")}}XE=new WeakMap;var YE;class Lbt extends _n{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,YE,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:i}=ff(e.rect),r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=y(this,YE,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",n-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,YE)}addHighlightArea(){this.container.classList.add("highlightArea")}}YE=new WeakMap;var QE;class Nbt extends _n{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,QE,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:i}=ff(e.rect),r=this.svgFactory.create(n,i,!0),o=e.borderStyle.width,a=y(this,QE,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,QE)}addHighlightArea(){this.container.classList.add("highlightArea")}}QE=new WeakMap;var JE;class Z7 extends _n{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,JE,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r}}=this;if(!n)return this.container;const{width:o,height:a}=ff(e),c=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],m=e[3]-n[d+1];u.push(`${p},${m}`)}u=u.join(" ");const h=y(this,JE,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,JE)}addHighlightArea(){this.container.classList.add("highlightArea")}}JE=new WeakMap;class Obt extends Z7{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Fbt extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var ZE,fm,t1,ZO;class p$ extends _n{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,t1);A(this,ZE,null);A(this,fm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pt.HIGHLIGHT:Pt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:c,height:u}=S(this,t1,ZO).call(this,n,e),h=this.svgFactory.create(c,u,!0),d=y(this,ZE,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);l(this,fm).push(m),m.setAttribute("points",i[f].join(",")),d.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,o=l(this,ZE);if(n>=0&&o.setAttribute("stroke-width",n||1),i)for(let a=0,c=l(this,fm).length;a<c;a++)l(this,fm)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:c,height:u}=S(this,t1,ZO).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,fm)}addHighlightArea(){this.container.classList.add("highlightArea")}}ZE=new WeakMap,fm=new WeakMap,t1=new WeakSet,ZO=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class t9 extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class jbt extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $bt extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Bbt extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class e9 extends _n{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var e1,n1,tF;class Ubt extends _n{constructor(e){var i;super(e,{isRenderable:!0});A(this,n1);A(this,e1,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",S(this,n1,tF).bind(this)),y(this,e1,i);const{isMac:r}=bi.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,n1,tF).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,e1)}addHighlightArea(){this.container.classList.add("highlightArea")}}e1=new WeakMap,n1=new WeakSet,tF=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var s1,pm,gm,i1,Jm,n9,eF;class Vbt{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){A(this,Jm);A(this,s1,null);A(this,pm,null);A(this,gm,new Map);A(this,i1,null);this.div=t,y(this,s1,e),y(this,pm,n),y(this,i1,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,gm).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;Km(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new f$,annotationStorage:t.annotationStorage||new h$,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===Nn.POPUP;if(c){const d=i.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=ff(a.rect);if(d<=0||f<=0)continue}r.data=a;const u=Ebt.create(r);if(!u.isRenderable)continue;if(!c&&a.popupRef){const d=i.get(a.popupRef);d?d.push(u):i.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await S(this,Jm,n9).call(this,h,a.id),u._isEditable&&(l(this,gm).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}S(this,Jm,eF).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Km(e,{rotation:t.rotation}),S(this,Jm,eF).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,gm).values())}getEditableAnnotation(t){return l(this,gm).get(t)}}s1=new WeakMap,pm=new WeakMap,gm=new WeakMap,i1=new WeakMap,Jm=new WeakSet,n9=async function(t,e){var o,a;const n=t.firstChild||t,i=n.id=`${o$}${e}`,r=await((o=l(this,i1))==null?void 0:o.getAriaAttributes(i));if(r)for(const[c,u]of r)n.setAttribute(c,u);this.div.append(t),(a=l(this,s1))==null||a.moveElementInDOM(this.div,t,n,!1)},eF=function(){if(!l(this,pm))return;const t=this.div;for(const[e,n]of l(this,pm)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}l(this,pm).clear()};const XC=/\r\n?|\n/g;var ma,Sr,r1,mm,_r,In,s9,i9,r9,gP,$u,mP,yP,o9,sF,a9;const Ce=class Ce extends Ze{constructor(e){super({...e,name:"freeTextEditor"});A(this,In);A(this,ma);A(this,Sr,"");A(this,r1,`${this.id}-editor`);A(this,mm,null);A(this,_r);y(this,ma,e.color||Ce._defaultColor||Ze._defaultLineColor),y(this,_r,e.fontSize||Ce._defaultFontSize)}static get _keyboardManager(){const e=Ce.prototype,n=o=>o.isEmpty(),i=Xm.TRANSLATE_SMALL,r=Xm.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new eC([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){Ze.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ht.FREETEXT_SIZE:Ce._defaultFontSize=n;break;case Ht.FREETEXT_COLOR:Ce._defaultColor=n;break}}updateParams(e,n){switch(e){case Ht.FREETEXT_SIZE:S(this,In,s9).call(this,n);break;case Ht.FREETEXT_COLOR:S(this,In,i9).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ht.FREETEXT_SIZE,Ce._defaultFontSize],[Ht.FREETEXT_COLOR,Ce._defaultColor||Ze._defaultLineColor]]}get propertiesToUpdate(){return[[Ht.FREETEXT_SIZE,l(this,_r)],[Ht.FREETEXT_COLOR,l(this,ma)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ce._internalPadding*e,-(Ce._internalPadding+l(this,_r))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,mm,new AbortController);const e=this._uiManager.combinedSignal(l(this,mm));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,r1)),this._isDraggable=!0,(e=l(this,mm))==null||e.abort(),y(this,mm,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Sr),n=y(this,Sr,S(this,In,r9).call(this).trimEnd());if(e===n)return;const i=r=>{if(y(this,Sr,r),!r){this.remove();return}S(this,In,yP).call(this),this._uiManager.rebuild(this),S(this,In,gP).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),S(this,In,gP).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ce._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,r1)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,_r)}px * var(--scale-factor))`,i.color=l(this,ma),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Tk(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,g;switch(this.rotation){case 0:m=e+(a[0]-f)/h,g=n+this.height-(a[1]-p)/d;break;case 90:m=e+(a[0]-f)/h,g=n-(a[1]-p)/d,[c,u]=[u,-c];break;case 180:m=e-this.width+(a[0]-f)/h,g=n-(a[1]-p)/d,[c,u]=[-c,-u];break;case 270:m=e+(a[0]-f-this.height*d)/h,g=n+(a[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(m*r,g*o,c,u)}else this.setAt(e*r,n*o,this.width*r,this.height*o);S(this,In,yP).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,g,w;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=S(m=Ce,$u,sF).call(m,n.getData("text")||"").replaceAll(XC,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(XC,"")),v!==this.editorDiv){let b=h;for(const x of this.editorDiv.childNodes){if(x===v){b=d;continue}b.push(S(g=Ce,$u,mP).call(g,x))}}h.push(c.nodeValue.slice(0,u).replaceAll(XC,""))}else if(c===this.editorDiv){let v=h,b=0;for(const x of this.editorDiv.childNodes)b++===u&&(v=d),v.push(S(w=Ce,$u,mP).call(w,x))}y(this,Sr,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,In,yP).call(this);const f=new Range;let p=h.reduce((v,b)=>v+b.length,0);for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(p<=b){f.setStart(v,p),f.setEnd(v,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,i){var a;let r=null;if(e instanceof J7){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:m,textPosition:g,parent:{page:{pageNumber:w}}}=e;if(!m||m.length===0)return null;r=e={annotationType:Pt.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:g,pageIndex:w-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,n,i);return y(o,_r,e.fontSize),y(o,ma,ht.makeHexColor(...e.color)),y(o,Sr,S(a=Ce,$u,sF).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ce._internalPadding*this.parentScale,i=this.getRect(n,n),r=Ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,ma)),o={annotationType:Pt.FREETEXT,color:r,fontSize:l(this,_r),value:S(this,In,o9).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!S(this,In,a9).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:i}=n;i.fontSize=`calc(${l(this,_r)}px * var(--scale-factor))`,i.color=l(this,ma),n.replaceChildren();for(const o of l(this,Sr).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),n.append(a)}const r=Ce._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Sr)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ma=new WeakMap,Sr=new WeakMap,r1=new WeakMap,mm=new WeakMap,_r=new WeakMap,In=new WeakSet,s9=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,_r))*this.parentScale),y(this,_r,r),S(this,In,gP).call(this)},i=l(this,_r);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},i9=function(e){const n=r=>{y(this,ma,this.editorDiv.style.color=r)},i=l(this,ma);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r9=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(S(i=Ce,$u,mP).call(i,r)),n=r);return e.join(`
`)},gP=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},$u=new WeakSet,mP=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(XC,"")},yP=function(){if(this.editorDiv.replaceChildren(),!!l(this,Sr))for(const e of l(this,Sr).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},o9=function(){return l(this,Sr).replaceAll(""," ")},sF=function(e){return e.replaceAll(" ","")},a9=function(e){const{value:n,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},A(Ce,$u),B(Ce,"_freeTextDefaultContent",""),B(Ce,"_internalPadding",0),B(Ce,"_defaultColor",null),B(Ce,"_defaultFontSize",10),B(Ce,"_type","freetext"),B(Ce,"_editorType",Pt.FREETEXT);let nF=Ce;class st{toSVGPath(){xe("Abstract method `toSVGPath` must be implemented.")}get box(){xe("Abstract getter `box` must be implemented.")}serialize(t,e){xe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a]*i,o[a+1]=n+t[a+1]*r;return o}static _rescaleAndSwap(t,e,n,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a+1]*i,o[a+1]=n+t[a]*r;return o}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=n+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,r){switch(r){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,r,o){return[(t+5*n)/6,(e+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}}B(st,"PRECISION",1e-4);var Er,ya,W0,G0,Ll,Ot,ym,vm,o1,a1,q0,K0,Hd,l1,hR,dR,qn,tx,l9,c9,u9,h9,d9,f9;const vc=class vc{constructor({x:t,y:e},n,i,r,o,a=0){A(this,qn);A(this,Er);A(this,ya,[]);A(this,W0);A(this,G0);A(this,Ll,[]);A(this,Ot,new Float32Array(18));A(this,ym);A(this,vm);A(this,o1);A(this,a1);A(this,q0);A(this,K0);A(this,Hd,[]);y(this,Er,n),y(this,K0,r*i),y(this,G0,o),l(this,Ot).set([NaN,NaN,NaN,NaN,t,e],6),y(this,W0,a),y(this,a1,l(vc,l1)*i),y(this,o1,l(vc,dR)*i),y(this,q0,i),l(this,Hd).push(t,e)}isEmpty(){return isNaN(l(this,Ot)[8])}add({x:t,y:e}){var M;y(this,ym,t),y(this,vm,e);const[n,i,r,o]=l(this,Er);let[a,c,u,h]=l(this,Ot).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<l(this,o1))return!1;const m=p-l(this,a1),g=m/p,w=g*d,v=g*f;let b=a,x=c;a=u,c=h,u+=w,h+=v,(M=l(this,Hd))==null||M.push(t,e);const E=-v/m,T=w/m,P=E*l(this,K0),k=T*l(this,K0);return l(this,Ot).set(l(this,Ot).subarray(2,8),0),l(this,Ot).set([u+P,h+k],4),l(this,Ot).set(l(this,Ot).subarray(14,18),12),l(this,Ot).set([u-P,h-k],16),isNaN(l(this,Ot)[6])?(l(this,Ll).length===0&&(l(this,Ot).set([a+P,c+k],2),l(this,Ll).push(NaN,NaN,NaN,NaN,(a+P-n)/r,(c+k-i)/o),l(this,Ot).set([a-P,c-k],14),l(this,ya).push(NaN,NaN,NaN,NaN,(a-P-n)/r,(c-k-i)/o)),l(this,Ot).set([b,x,a,c,u,h],6),!this.isEmpty()):(l(this,Ot).set([b,x,a,c,u,h],6),Math.abs(Math.atan2(x-c,b-a)-Math.atan2(v,w))<Math.PI/2?([a,c,u,h]=l(this,Ot).subarray(2,6),l(this,Ll).push(NaN,NaN,NaN,NaN,((a+u)/2-n)/r,((c+h)/2-i)/o),[a,c,b,x]=l(this,Ot).subarray(14,18),l(this,ya).push(NaN,NaN,NaN,NaN,((b+a)/2-n)/r,((x+c)/2-i)/o),!0):([b,x,a,c,u,h]=l(this,Ot).subarray(0,6),l(this,Ll).push(((b+5*a)/6-n)/r,((x+5*c)/6-i)/o,((5*a+u)/6-n)/r,((5*c+h)/6-i)/o,((a+u)/2-n)/r,((c+h)/2-i)/o),[u,h,a,c,b,x]=l(this,Ot).subarray(12,18),l(this,ya).push(((b+5*a)/6-n)/r,((x+5*c)/6-i)/o,((5*a+u)/6-n)/r,((5*c+h)/6-i)/o,((a+u)/2-n)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,Ll),e=l(this,ya);if(isNaN(l(this,Ot)[6])&&!this.isEmpty())return S(this,qn,l9).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);S(this,qn,u9).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return S(this,qn,c9).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,r,o){return new p9(t,e,n,i,r,o)}getOutlines(){var d;const t=l(this,Ll),e=l(this,ya),n=l(this,Ot),[i,r,o,a]=l(this,Er),c=new Float32Array((((d=l(this,Hd))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,Hd)[f]-i)/o,c[f+1]=(l(this,Hd)[f+1]-r)/a;if(c[c.length-2]=(l(this,ym)-i)/o,c[c.length-1]=(l(this,vm)-r)/a,isNaN(n[6])&&!this.isEmpty())return S(this,qn,h9).call(this,c);const u=new Float32Array(l(this,Ll).length+24+l(this,ya).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=S(this,qn,f9).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return S(this,qn,d9).call(this,u,h),this.newFreeDrawOutline(u,c,l(this,Er),l(this,q0),l(this,W0),l(this,G0))}};Er=new WeakMap,ya=new WeakMap,W0=new WeakMap,G0=new WeakMap,Ll=new WeakMap,Ot=new WeakMap,ym=new WeakMap,vm=new WeakMap,o1=new WeakMap,a1=new WeakMap,q0=new WeakMap,K0=new WeakMap,Hd=new WeakMap,l1=new WeakMap,hR=new WeakMap,dR=new WeakMap,qn=new WeakSet,tx=function(){const t=l(this,Ot).subarray(4,6),e=l(this,Ot).subarray(16,18),[n,i,r,o]=l(this,Er);return[(l(this,ym)+(t[0]-e[0])/2-n)/r,(l(this,vm)+(t[1]-e[1])/2-i)/o,(l(this,ym)+(e[0]-t[0])/2-n)/r,(l(this,vm)+(e[1]-t[1])/2-i)/o]},l9=function(){const[t,e,n,i]=l(this,Er),[r,o,a,c]=S(this,qn,tx).call(this);return`M${(l(this,Ot)[2]-t)/n} ${(l(this,Ot)[3]-e)/i} L${(l(this,Ot)[4]-t)/n} ${(l(this,Ot)[5]-e)/i} L${r} ${o} L${a} ${c} L${(l(this,Ot)[16]-t)/n} ${(l(this,Ot)[17]-e)/i} L${(l(this,Ot)[14]-t)/n} ${(l(this,Ot)[15]-e)/i} Z`},c9=function(t){const e=l(this,ya);t.push(`L${e[4]} ${e[5]} Z`)},u9=function(t){const[e,n,i,r]=l(this,Er),o=l(this,Ot).subarray(4,6),a=l(this,Ot).subarray(16,18),[c,u,h,d]=S(this,qn,tx).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-n)/r} L${c} ${u} L${h} ${d} L${(a[0]-e)/i} ${(a[1]-n)/r}`)},h9=function(t){const e=l(this,Ot),[n,i,r,o]=l(this,Er),[a,c,u,h]=S(this,qn,tx).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,l(this,Er),l(this,q0),l(this,W0),l(this,G0))},d9=function(t,e){const n=l(this,ya);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},f9=function(t,e){const n=l(this,Ot).subarray(4,6),i=l(this,Ot).subarray(16,18),[r,o,a,c]=l(this,Er),[u,h,d,f]=S(this,qn,tx).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/c],e),e+=24},A(vc,l1,8),A(vc,hR,2),A(vc,dR,l(vc,l1)+l(vc,hR));let Rk=vc;var X0,wm,bu,c1,Cr,u1,bn,fR,g9;class p9 extends st{constructor(e,n,i,r,o,a){super();A(this,fR);A(this,X0);A(this,wm,new Float32Array(4));A(this,bu);A(this,c1);A(this,Cr);A(this,u1);A(this,bn);y(this,bn,e),y(this,Cr,n),y(this,X0,i),y(this,u1,r),y(this,bu,o),y(this,c1,a),this.lastPoint=[NaN,NaN],S(this,fR,g9).call(this,a);const[c,u,h,d]=l(this,wm);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-c)/h,n[f+1]=(n[f+1]-u)/d}toSVGPath(){const e=[`M${l(this,bn)[4]} ${l(this,bn)[5]}`];for(let n=6,i=l(this,bn).length;n<i;n+=6){if(isNaN(l(this,bn)[n])){e.push(`L${l(this,bn)[n+4]} ${l(this,bn)[n+5]}`);continue}e.push(`C${l(this,bn)[n]} ${l(this,bn)[n+1]} ${l(this,bn)[n+2]} ${l(this,bn)[n+3]} ${l(this,bn)[n+4]} ${l(this,bn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],o){const a=i-e,c=r-n;let u,h;switch(o){case 0:u=st._rescale(l(this,bn),e,r,a,-c),h=st._rescale(l(this,Cr),e,r,a,-c);break;case 90:u=st._rescaleAndSwap(l(this,bn),e,n,a,c),h=st._rescaleAndSwap(l(this,Cr),e,n,a,c);break;case 180:u=st._rescale(l(this,bn),i,n,-a,c),h=st._rescale(l(this,Cr),i,n,-a,c);break;case 270:u=st._rescaleAndSwap(l(this,bn),i,r,-a,-c),h=st._rescaleAndSwap(l(this,Cr),i,r,-a,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return l(this,wm)}newOutliner(e,n,i,r,o,a=0){return new Rk(e,n,i,r,o,a)}getNewOutline(e,n){const[i,r,o,a]=l(this,wm),[c,u,h,d]=l(this,X0),f=o*h,p=a*d,m=i*h+c,g=r*d+u,w=this.newOutliner({x:l(this,Cr)[0]*f+m,y:l(this,Cr)[1]*p+g},l(this,X0),l(this,u1),e,l(this,c1),n??l(this,bu));for(let v=2;v<l(this,Cr).length;v+=2)w.add({x:l(this,Cr)[v]*f+m,y:l(this,Cr)[v+1]*p+g});return w.getOutlines()}}X0=new WeakMap,wm=new WeakMap,bu=new WeakMap,c1=new WeakMap,Cr=new WeakMap,u1=new WeakMap,bn=new WeakMap,fR=new WeakSet,g9=function(e){const n=l(this,bn);let i=n[4],r=n[5],o=i,a=r,c=i,u=r,h=i,d=r;const f=e?Math.max:Math.min;for(let m=6,g=n.length;m<g;m+=6){if(isNaN(n[m]))o=Math.min(o,n[m+4]),a=Math.min(a,n[m+5]),c=Math.max(c,n[m+4]),u=Math.max(u,n[m+5]),d<n[m+5]?(h=n[m+4],d=n[m+5]):d===n[m+5]&&(h=f(h,n[m+4]));else{const w=ht.bezierBoundingBox(i,r,...n.slice(m,m+6));o=Math.min(o,w[0]),a=Math.min(a,w[1]),c=Math.max(c,w[2]),u=Math.max(u,w[3]),d<w[3]?(h=w[2],d=w[3]):d===w[3]&&(h=f(h,w[2]))}i=n[m+4],r=n[m+5]}const p=l(this,wm);p[0]=o-l(this,bu),p[1]=a-l(this,bu),p[2]=c-o+2*l(this,bu),p[3]=u-a+2*l(this,bu),this.lastPoint=[h,d]};var h1,d1,zd,va,Si,m9,vP,y9,v9,rF;class iF{constructor(t,e=0,n=0,i=!0){A(this,Si);A(this,h1);A(this,d1);A(this,zd,[]);A(this,va,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const h=10**-4;for(const{x:v,y:b,width:x,height:E}of t){const T=Math.floor((v-e)/h)*h,P=Math.ceil((v+x+e)/h)*h,k=Math.floor((b-e)/h)*h,R=Math.ceil((b+E+e)/h)*h,M=[T,k,R,!0],D=[P,k,R,!1];l(this,zd).push(M,D),r=Math.min(r,T),o=Math.max(o,P),a=Math.min(a,k),c=Math.max(c,R)}const d=o-r+2*n,f=c-a+2*n,p=r-n,m=a-n,g=l(this,zd).at(i?-1:-2),w=[g[0],g[2]];for(const v of l(this,zd)){const[b,x,E]=v;v[0]=(b-p)/d,v[1]=(x-m)/f,v[2]=(E-m)/f}y(this,h1,new Float32Array([p,m,d,f])),y(this,d1,w)}getOutlines(){l(this,zd).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,zd))e[3]?(t.push(...S(this,Si,rF).call(this,e)),S(this,Si,y9).call(this,e)):(S(this,Si,v9).call(this,e),t.push(...S(this,Si,rF).call(this,e)));return S(this,Si,m9).call(this,t)}}h1=new WeakMap,d1=new WeakMap,zd=new WeakMap,va=new WeakMap,Si=new WeakSet,m9=function(t){const e=[],n=new Set;for(const o of t){const[a,c,u]=o;e.push([a,c,o],[a,u,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),n.add(c),n.add(u)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,c,u,h,d]=o;n.delete(o);let f=a,p=c;for(r=[a,u],i.push(r);;){let m;if(n.has(h))m=h;else if(n.has(d))m=d;else break;n.delete(m),[a,c,u,h,d]=m,f!==a&&(r.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}r.push(f,p)}return new Hbt(i,l(this,h1),l(this,d1))},vP=function(t){const e=l(this,va);let n=0,i=e.length-1;for(;n<=i;){const r=n+i>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:i=r-1}return i+1},y9=function([,t,e]){const n=S(this,Si,vP).call(this,t);l(this,va).splice(n,0,[t,e])},v9=function([,t,e]){const n=S(this,Si,vP).call(this,t);for(let i=n;i<l(this,va).length;i++){const[r,o]=l(this,va)[i];if(r!==t)break;if(r===t&&o===e){l(this,va).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=l(this,va)[i];if(r!==t)break;if(r===t&&o===e){l(this,va).splice(i,1);return}}},rF=function(t){const[e,n,i]=t,r=[[e,n,i]],o=S(this,Si,vP).call(this,i);for(let a=0;a<o;a++){const[c,u]=l(this,va)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var f1,Y0;class Hbt extends st{constructor(e,n,i){super();A(this,f1);A(this,Y0);y(this,Y0,e),y(this,f1,n),this.lastPoint=i}toSVGPath(){const e=[];for(const n of l(this,Y0)){let[i,r]=n;e.push(`M${i} ${r}`);for(let o=2;o<n.length;o+=2){const a=n[o],c=n[o+1];a===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],o){const a=[],c=i-e,u=r-n;for(const h of l(this,Y0)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return l(this,f1)}get classNamesForOutlining(){return["highlightOutline"]}}f1=new WeakMap,Y0=new WeakMap;class oF extends Rk{newFreeDrawOutline(t,e,n,i,r,o){return new zbt(t,e,n,i,r,o)}}class zbt extends p9{newOutliner(t,e,n,i,r,o=0){return new oF(t,e,n,i,r,o)}}var wa,bm,Q0,Un,p1,J0,g1,m1,Wd,ba,Z0,y1,pe,aF,lF,cF,Qf,w9,gh;const Mi=class Mi{constructor({editor:t=null,uiManager:e=null}){A(this,pe);A(this,wa,null);A(this,bm,null);A(this,Q0);A(this,Un,null);A(this,p1,!1);A(this,J0,!1);A(this,g1,null);A(this,m1);A(this,Wd,null);A(this,ba,null);A(this,Z0);var n;t?(y(this,J0,!1),y(this,Z0,Ht.HIGHLIGHT_COLOR),y(this,g1,t)):(y(this,J0,!0),y(this,Z0,Ht.HIGHLIGHT_DEFAULT_COLOR)),y(this,ba,(t==null?void 0:t._uiManager)||e),y(this,m1,l(this,ba)._eventBus),y(this,Q0,(t==null?void 0:t.color)||((n=l(this,ba))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),l(Mi,y1)||y(Mi,y1,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ft(this,"_keyboardManager",new eC([[["Escape","mac+Escape"],Mi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Mi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Mi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Mi.prototype._moveToPrevious],[["Home","mac+Home"],Mi.prototype._moveToBeginning],[["End","mac+End"],Mi.prototype._moveToEnd]]))}renderButton(){const t=y(this,wa,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,ba)._signal;t.addEventListener("click",S(this,pe,Qf).bind(this),{signal:e}),t.addEventListener("keydown",S(this,pe,cF).bind(this),{signal:e});const n=y(this,bm,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=l(this,Q0),t.append(n),t}renderMainDropdown(){const t=y(this,Un,S(this,pe,aF).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,wa)){S(this,pe,Qf).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,pe,lF).call(this,e,t)}_moveToNext(t){var e,n;if(!l(this,pe,gh)){S(this,pe,Qf).call(this,t);return}if(t.target===l(this,wa)){(e=l(this,Un).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=l(this,Un))==null?void 0:e.firstChild)||t.target===l(this,wa)){l(this,pe,gh)&&this._hideDropdownFromKeyboard();return}l(this,pe,gh)||S(this,pe,Qf).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!l(this,pe,gh)){S(this,pe,Qf).call(this,t);return}(e=l(this,Un).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,pe,gh)){S(this,pe,Qf).call(this,t);return}(e=l(this,Un).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,Un))==null||t.classList.add("hidden"),(e=l(this,Wd))==null||e.abort(),y(this,Wd,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,J0)){if(!l(this,pe,gh)){(t=l(this,g1))==null||t.unselect();return}this.hideDropdown(),l(this,wa).focus({preventScroll:!0,focusVisible:l(this,p1)})}}updateColor(t){if(l(this,bm)&&(l(this,bm).style.backgroundColor=t),!l(this,Un))return;const e=l(this,ba).highlightColors.values();for(const n of l(this,Un).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,wa))==null||t.remove(),y(this,wa,null),y(this,bm,null),(e=l(this,Un))==null||e.remove(),y(this,Un,null)}};wa=new WeakMap,bm=new WeakMap,Q0=new WeakMap,Un=new WeakMap,p1=new WeakMap,J0=new WeakMap,g1=new WeakMap,m1=new WeakMap,Wd=new WeakMap,ba=new WeakMap,Z0=new WeakMap,y1=new WeakMap,pe=new WeakSet,aF=function(){const t=document.createElement("div"),e=l(this,ba)._signal;t.addEventListener("contextmenu",Oa,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of l(this,ba).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",l(Mi,y1)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,Q0)),r.addEventListener("click",S(this,pe,lF).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",S(this,pe,cF).bind(this),{signal:e}),t},lF=function(t,e){e.stopPropagation(),l(this,m1).dispatch("switchannotationeditorparams",{source:this,type:l(this,Z0),value:t})},cF=function(t){Mi._keyboardManager.exec(this,t)},Qf=function(t){if(l(this,pe,gh)){this.hideDropdown();return}if(y(this,p1,t.detail===0),l(this,Wd)||(y(this,Wd,new AbortController),window.addEventListener("pointerdown",S(this,pe,w9).bind(this),{signal:l(this,ba).combinedSignal(l(this,Wd))})),l(this,Un)){l(this,Un).classList.remove("hidden");return}const e=y(this,Un,S(this,pe,aF).call(this));l(this,wa).append(e)},w9=function(t){var e;(e=l(this,Un))!=null&&e.contains(t.target)||this.hideDropdown()},gh=function(){return l(this,Un)&&!l(this,Un).classList.contains("hidden")},A(Mi,y1,null);let Mk=Mi;var tb,v1,Au,Am,eb,Ui,w1,b1,xm,wo,Tr,As,nb,xu,Xs,sb,bo,A1,Ct,uF,wP,b9,A9,x9,hF,Jf,ko,By,S9,bP,ex,_9,E9,C9,T9,P9;const Zt=class Zt extends Ze{constructor(e){super({...e,name:"highlightEditor"});A(this,Ct);A(this,tb,null);A(this,v1,0);A(this,Au);A(this,Am,null);A(this,eb,null);A(this,Ui,null);A(this,w1,null);A(this,b1,0);A(this,xm,null);A(this,wo,null);A(this,Tr,null);A(this,As,!1);A(this,nb,null);A(this,xu);A(this,Xs,null);A(this,sb,"");A(this,bo);A(this,A1,"");this.color=e.color||Zt._defaultColor,y(this,bo,e.thickness||Zt._defaultThickness),y(this,xu,e.opacity||Zt._defaultOpacity),y(this,Au,e.boxes||null),y(this,A1,e.methodOfCreation||""),y(this,sb,e.text||""),this._isDraggable=!1,e.highlightId>-1?(y(this,As,!0),S(this,Ct,wP).call(this,e),S(this,Ct,Jf).call(this)):l(this,Au)&&(y(this,tb,e.anchorNode),y(this,v1,e.anchorOffset),y(this,w1,e.focusNode),y(this,b1,e.focusOffset),S(this,Ct,uF).call(this),S(this,Ct,Jf).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Zt.prototype;return Ft(this,"_keyboardManager",new eC([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,As)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,bo),methodOfCreation:l(this,A1)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var i;Ze.initialize(e,n),Zt._defaultColor||(Zt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Ht.HIGHLIGHT_DEFAULT_COLOR:Zt._defaultColor=n;break;case Ht.HIGHLIGHT_THICKNESS:Zt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,nb)}updateParams(e,n){switch(e){case Ht.HIGHLIGHT_COLOR:S(this,Ct,b9).call(this,n);break;case Ht.HIGHLIGHT_THICKNESS:S(this,Ct,A9).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ht.HIGHLIGHT_DEFAULT_COLOR,Zt._defaultColor],[Ht.HIGHLIGHT_THICKNESS,Zt._defaultThickness]]}get propertiesToUpdate(){return[[Ht.HIGHLIGHT_COLOR,this.color||Zt._defaultColor],[Ht.HIGHLIGHT_THICKNESS,l(this,bo)||Zt._defaultThickness],[Ht.HIGHLIGHT_FREE,l(this,As)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(y(this,eb,new Mk({editor:this})),e.addColorPicker(l(this,eb))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,Ct,ex).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,S(this,Ct,ex).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){S(this,Ct,hF).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Ct,Jf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?S(this,Ct,hF).call(this):e&&(S(this,Ct,Jf).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,a;const{drawLayer:n}=this.parent;let i;l(this,As)?(e=(e-this.rotation+360)%360,i=S(r=Zt,ko,By).call(r,l(this,wo).box,e)):i=S(o=Zt,ko,By).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,Tr),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(l(this,Xs),{bbox:S(a=Zt,ko,By).call(a,l(this,Ui).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,sb)&&(e.setAttribute("aria-label",l(this,sb)),e.setAttribute("role","mark")),l(this,As)?e.classList.add("free"):this.div.addEventListener("keydown",S(this,Ct,S9).bind(this),{signal:this._uiManager._signal});const n=y(this,xm,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Am);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Tk(this,l(this,xm),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Xs),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Xs),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,Ct,bP).call(this,!0);break;case 1:case 3:S(this,Ct,bP).call(this,!1);break}}select(){var e;super.select(),l(this,Xs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Xs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Xs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Xs),{rootClass:{selected:!1}}),l(this,As)||S(this,Ct,bP).call(this,!1))}get _mustFixPosition(){return!l(this,As)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Tr),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Xs),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:r,y:o}){const{x:a,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=m=>{d.abort(),S(this,ko,T9).call(this,e,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Br,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Oa,{signal:f}),i.addEventListener("pointermove",S(this,ko,C9).bind(this,e),{signal:f}),this._freeHighlight=new oF({x:r,y:o},[a,c,u,h],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var g,w,v,b;let r=null;if(e instanceof t9){const{data:{quadPoints:x,rect:E,rotation:T,id:P,color:k,opacity:R,popupRef:M},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Pt.HIGHLIGHT,color:Array.from(k),opacity:R,quadPoints:x,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:T,id:P,deleted:!1,popupRef:M}}else if(e instanceof p$){const{data:{inkLists:x,rect:E,rotation:T,id:P,color:k,borderStyle:{rawWidth:R},popupRef:M},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Pt.HIGHLIGHT,color:Array.from(k),thickness:R,inkLists:x,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:T,id:P,deleted:!1,popupRef:M}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=e,h=await super.deserialize(e,n,i);h.color=ht.makeHexColor(...o),y(h,xu,u||1),c&&y(h,bo,e.thickness),h.annotationElementId=e.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,m]=h.pageTranslation;if(a){const x=y(h,Au,[]);for(let E=0;E<a.length;E+=8)x.push({x:(a[E]-p)/d,y:1-(a[E+1]-m)/f,width:(a[E+2]-a[E])/d,height:(a[E+1]-a[E+5])/f});S(g=h,Ct,uF).call(g),S(w=h,Ct,Jf).call(w),h.rotate(h.rotation)}else if(c){y(h,As,!0);const x=c[0],E={x:x[0]-p,y:f-(x[1]-m)},T=new oF(E,[0,0,d,f],1,l(h,bo)/2,!0,.001);for(let R=0,M=x.length;R<M;R+=2)E.x=x[R]-p,E.y=f-(x[R+1]-m),T.add(E);const{id:P,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);S(v=h,Ct,wP).call(v,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),S(b=h,Ct,Jf).call(b)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),i=Ze._colorManager.convert(this.color),r={annotationType:Pt.HIGHLIGHT,color:i,opacity:l(this,xu),thickness:l(this,bo),quadPoints:S(this,Ct,_9).call(this),outlines:S(this,Ct,E9).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:S(this,Ct,ex).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,Ct,P9).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};tb=new WeakMap,v1=new WeakMap,Au=new WeakMap,Am=new WeakMap,eb=new WeakMap,Ui=new WeakMap,w1=new WeakMap,b1=new WeakMap,xm=new WeakMap,wo=new WeakMap,Tr=new WeakMap,As=new WeakMap,nb=new WeakMap,xu=new WeakMap,Xs=new WeakMap,sb=new WeakMap,bo=new WeakMap,A1=new WeakMap,Ct=new WeakSet,uF=function(){const e=new iF(l(this,Au),.001);y(this,wo,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,wo).box;const n=new iF(l(this,Au),.0025,.001,this._uiManager.direction==="ltr");y(this,Ui,n.getOutlines());const{lastPoint:i}=l(this,Ui);y(this,nb,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},wP=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var d,f;if(y(this,wo,e),y(this,Ui,e.getNewOutline(l(this,bo)/2+1.5,.0025)),n>=0)y(this,Tr,n),y(this,Am,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),y(this,Xs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Ui).box,path:{d:l(this,Ui).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Tr),{bbox:S(d=Zt,ko,By).call(d,l(this,wo).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Xs),{bbox:S(f=Zt,ko,By).call(f,l(this,Ui).box,p),path:{d:l(this,Ui).toSVGPath()}})}const[o,a,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:h}=l(this,Ui);y(this,nb,[(h[0]-o)/c,(h[1]-a)/u])},b9=function(e){const n=(o,a)=>{var c,u;this.color=o,y(this,xu,a),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,Tr),{root:{fill:o,"fill-opacity":a}}),(u=l(this,eb))==null||u.updateColor(o)},i=this.color,r=l(this,xu);this.addCommands({cmd:n.bind(this,e,Zt._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},A9=function(e){const n=l(this,bo),i=r=>{y(this,bo,r),S(this,Ct,x9).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},x9=function(e){if(!l(this,As))return;S(this,Ct,wP).call(this,{highlightOutlines:l(this,wo).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},hF=function(){l(this,Tr)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Tr)),y(this,Tr,null),this.parent.drawLayer.remove(l(this,Xs)),y(this,Xs,null))},Jf=function(e=this.parent){l(this,Tr)===null&&({id:$t(this,Tr)._,clipPathId:$t(this,Am)._}=e.drawLayer.draw({bbox:l(this,wo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,xu)},rootClass:{highlight:!0,free:l(this,As)},path:{d:l(this,wo).toSVGPath()}},!1,!0),y(this,Xs,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,As)},bbox:l(this,Ui).box,path:{d:l(this,Ui).toSVGPath()}},l(this,As))),l(this,xm)&&(l(this,xm).style.clipPath=l(this,Am)))},ko=new WeakSet,By=function([e,n,i,r],o){switch(o){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]},S9=function(e){Zt._keyboardManager.exec(this,e)},bP=function(e){if(!l(this,tb))return;const n=window.getSelection();e?n.setPosition(l(this,tb),l(this,v1)):n.setPosition(l(this,w1),l(this,b1))},ex=function(){return l(this,As)?this.rotation:0},_9=function(){if(l(this,As))return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,o=l(this,Au),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+i,m=(1-h)*n+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*e,a[c+5]=a[c+7]=m-f*n,c+=8}return a},E9=function(e){return l(this,wo).serialize(e,S(this,Ct,ex).call(this))},C9=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},T9=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},P9=function(e){const{color:n}=this._initialData;return e.color.some((i,r)=>i!==n[r])},A(Zt,ko),B(Zt,"_defaultColor",null),B(Zt,"_defaultOpacity",1),B(Zt,"_defaultThickness",12),B(Zt,"_type","highlight"),B(Zt,"_editorType",Pt.HIGHLIGHT),B(Zt,"_freeHighlightId",-1),B(Zt,"_freeHighlight",null),B(Zt,"_freeHighlightClipId","");let Dk=Zt;var Sm;class Wbt{constructor(){A(this,Sm,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,Sm)[t]=e}toSVGProperties(){const t=l(this,Sm);return y(this,Sm,Object.create(null)),{root:t}}reset(){y(this,Sm,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){xe("Not implemented")}}Sm=new WeakMap;var Pr,ib,is,_m,Em,Gd,qd,Kd,Cm,Kt,fF,pF,gF,nx,k9,AP,sx,Uy;const ot=class ot extends Ze{constructor(e){super(e);A(this,Kt);A(this,Pr,null);A(this,ib);B(this,"_drawId",null);y(this,ib,e.mustBeCommitted||!1),e.drawOutlines&&(S(this,Kt,fF).call(this,e),S(this,Kt,nx).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){xe("Not implemented")}static get typesMap(){xe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(ot,is).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,o=r[n],a=c=>{var h;r.updateProperty(n,c);const u=l(this,Pr).updateProperty(n,c);u&&S(this,Kt,sx).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(l(this,Pr).getPathResizingSVGProperties(S(this,Kt,AP).call(this)),{bbox:S(this,Kt,Uy).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(l(this,Pr).getPathResizedSVGProperties(S(this,Kt,AP).call(this)),{bbox:S(this,Kt,Uy).call(this)}))}_onTranslating(e,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:S(this,Kt,Uy).call(this,e,n)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(l(this,Pr).getPathTranslatedSVGProperties(S(this,Kt,AP).call(this),this.parentDimensions),{bbox:S(this,Kt,Uy).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,ib)&&(y(this,ib,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){S(this,Kt,gF).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Kt,nx).call(this),S(this,Kt,sx).call(this,l(this,Pr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),S(this,Kt,gF).call(this)):e&&(this._uiManager.addShouldRescale(this),S(this,Kt,nx).call(this,e),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties({bbox:S(this,Kt,Uy).call(this)},l(this,Pr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,Kt,sx).call(this,l(this,Pr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const n=document.createElement("div");e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,n,i,r,o){xe("Not implemented")}static startDrawing(e,n,i,r){var w;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:h}=r;if(l(ot,qd)&&l(ot,qd)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),m=y(ot,_m,new AbortController),g=e.combinedSignal(m);if(l(ot,Gd)||y(ot,Gd,u),l(ot,qd)??y(ot,qd,h),window.addEventListener("pointerup",v=>{var b;l(ot,Gd)===v.pointerId?this._endDraw(v):(b=l(ot,Kd))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var b;l(ot,Gd)===v.pointerId?this._currentParent.endDrawingSession():(b=l(ot,Kd))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{l(ot,qd)===v.pointerType&&((l(ot,Kd)||y(ot,Kd,new Set)).add(v.pointerId),l(ot,is).isCancellable()&&(l(ot,is).removeLastElement(),l(ot,is).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Oa,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===l(ot,Cm)&&Br(v)},{signal:g}),e.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),l(ot,is)){e.drawLayer.updateProperties(this._currentDrawId,l(ot,is).startNew(a,c,f,p,d));return}n.updateUIForDefaultProperties(this),y(ot,is,this.createDrawerInstance(a,c,f,p,d)),y(ot,Em,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ot,Em).toSVGProperties(),l(ot,is).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(y(ot,Cm,-1),!l(ot,is))return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(l(ot,Gd)===r){if(((o=l(ot,Kd))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ot,is).add(n,i)),y(ot,Cm,e.timeStamp),Br(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,y(ot,is,null),y(ot,Em,null),y(ot,qd,null),y(ot,Cm,NaN)),l(ot,_m)&&(l(ot,_m).abort(),y(ot,_m,null),y(ot,Gd,NaN),y(ot,Kd,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e&&n.drawLayer.updateProperties(this._currentDrawId,l(ot,is).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(ot,is),r=this._currentDrawId,o=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ht.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ht.DRAW_STEP),!l(ot,is).isEmpty()){const{pageDimensions:[i,r],scale:o}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ot,is).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:l(ot,Em),mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,o,a){xe("Not implemented")}static async deserialize(e,n,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}=n.viewport,u=this.deserializeDraw(a,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,n,i);return h.createDrawingOptions(e),S(d=h,Kt,fF).call(d,{drawOutlines:u}),S(f=h,Kt,nx).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[n,i]=this.pageTranslation,[r,o]=this.pageDimensions;return l(this,Pr).serialize([n,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Pr=new WeakMap,ib=new WeakMap,is=new WeakMap,_m=new WeakMap,Em=new WeakMap,Gd=new WeakMap,qd=new WeakMap,Kd=new WeakMap,Cm=new WeakMap,Kt=new WeakSet,fF=function({drawOutlines:e,drawId:n,drawingOptions:i}){y(this,Pr,e),this._drawingOptions||(this._drawingOptions=i),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=S(this,Kt,pF).call(this,e,this.parent),S(this,Kt,sx).call(this,e.box)},pF=function(e,n){const{id:i}=n.drawLayer.draw(ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},gF=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},nx=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,Kt,pF).call(this,l(this,Pr),e)}},k9=function([e,n,i,r]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[n,1-e,i*(a/o),r*(o/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/o),r*(o/a)];default:return[e,n,i,r]}},AP=function(){const{x:e,y:n,width:i,height:r,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-n,e,i*(o/a),r*(a/o)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(o/a),r*(a/o)];default:return[e,n,i,r]}},sx=function(e){if([this.x,this.y,this.width,this.height]=S(this,Kt,k9).call(this,e),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Uy=function(){const{x:e,y:n,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-n,e,i*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-n,r*(u/c),i*(c/u)];case 7:return[n-i*(c/u),1-e-r*(u/c),i*(c/u),r*(u/c)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(u/c),n,r*(u/c),i*(c/u)];case 13:return[1-n-i*(c/u),e-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-e,1-n-i*(c/u),r*(u/c),i*(c/u)];case 15:return[n,1-e,i*(c/u),r*(u/c)];default:return[e,n,i,r]}},B(ot,"_currentDrawId",-1),B(ot,"_currentParent",null),A(ot,is,null),A(ot,_m,null),A(ot,Em,null),A(ot,Gd,NaN),A(ot,qd,null),A(ot,Kd,null),A(ot,Cm,NaN),B(ot,"_INNER_MARGIN",3);let dF=ot;var Nl,rs,os,Tm,rb,di,xs,Ao,Pm,km,Rm,ob,xP;class Gbt{constructor(t,e,n,i,r,o){A(this,ob);A(this,Nl,new Float64Array(6));A(this,rs);A(this,os);A(this,Tm);A(this,rb);A(this,di);A(this,xs,"");A(this,Ao,0);A(this,Pm,new Ik);A(this,km);A(this,Rm);y(this,km,n),y(this,Rm,i),y(this,Tm,r),y(this,rb,o),[t,e]=S(this,ob,xP).call(this,t,e);const a=y(this,rs,[NaN,NaN,NaN,NaN,t,e]);y(this,di,[t,e]),y(this,os,[{line:a,points:l(this,di)}]),l(this,Nl).set(a,0)}updateProperty(t,e){t==="stroke-width"&&y(this,rb,e)}isEmpty(){return!l(this,os)||l(this,os).length===0}isCancellable(){return l(this,di).length<=10}add(t,e){[t,e]=S(this,ob,xP).call(this,t,e);const[n,i,r,o]=l(this,Nl).subarray(2,6),a=t-r,c=e-o;return Math.hypot(l(this,km)*a,l(this,Rm)*c)<=2?null:(l(this,di).push(t,e),isNaN(n)?(l(this,Nl).set([r,o,t,e],2),l(this,rs).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Nl)[0])&&l(this,rs).splice(6,6),l(this,Nl).set([n,i,r,o,t,e],0),l(this,rs).push(...st.createBezierPoints(n,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,di).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,r){y(this,km,n),y(this,Rm,i),y(this,Tm,r),[t,e]=S(this,ob,xP).call(this,t,e);const o=y(this,rs,[NaN,NaN,NaN,NaN,t,e]);y(this,di,[t,e]);const a=l(this,os).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,os).push({line:o,points:l(this,di)}),l(this,Nl).set(o,0),y(this,Ao,0),this.toSVGPath(),null}getLastElement(){return l(this,os).at(-1)}setLastElement(t){return l(this,os)?(l(this,os).push(t),y(this,rs,t.line),y(this,di,t.points),y(this,Ao,0),{path:{d:this.toSVGPath()}}):l(this,Pm).setLastElement(t)}removeLastElement(){if(!l(this,os))return l(this,Pm).removeLastElement();l(this,os).pop(),y(this,xs,"");for(let t=0,e=l(this,os).length;t<e;t++){const{line:n,points:i}=l(this,os)[t];y(this,rs,n),y(this,di,i),y(this,Ao,0),this.toSVGPath()}return{path:{d:l(this,xs)}}}toSVGPath(){const t=st.svgRound(l(this,rs)[4]),e=st.svgRound(l(this,rs)[5]);if(l(this,di).length===2)return y(this,xs,`${l(this,xs)} M ${t} ${e} Z`),l(this,xs);if(l(this,di).length<=6){const i=l(this,xs).lastIndexOf("M");y(this,xs,`${l(this,xs).slice(0,i)} M ${t} ${e}`),y(this,Ao,6)}if(l(this,di).length===4){const i=st.svgRound(l(this,rs)[10]),r=st.svgRound(l(this,rs)[11]);return y(this,xs,`${l(this,xs)} L ${i} ${r}`),y(this,Ao,12),l(this,xs)}const n=[];l(this,Ao)===0&&(n.push(`M ${t} ${e}`),y(this,Ao,6));for(let i=l(this,Ao),r=l(this,rs).length;i<r;i+=6){const[o,a,c,u,h,d]=l(this,rs).slice(i,i+6).map(st.svgRound);n.push(`C${o} ${a} ${c} ${u} ${h} ${d}`)}return y(this,xs,l(this,xs)+n.join(" ")),y(this,Ao,l(this,rs).length),l(this,xs)}getOutlines(t,e,n,i){const r=l(this,os).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,Pm).build(l(this,os),t,e,n,l(this,Tm),l(this,rb),i),y(this,Nl,null),y(this,rs,null),y(this,os,null),y(this,xs,null),l(this,Pm)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Nl=new WeakMap,rs=new WeakMap,os=new WeakMap,Tm=new WeakMap,rb=new WeakMap,di=new WeakMap,xs=new WeakMap,Ao=new WeakMap,Pm=new WeakMap,km=new WeakMap,Rm=new WeakMap,ob=new WeakSet,xP=function(t,e){return st._normalizePoint(t,e,l(this,km),l(this,Rm),l(this,Tm))};var fi,x1,S1,kr,Ol,Fl,ab,lb,cb,ks,pc,R9,M9,D9;const k$=class k$ extends st{constructor(){super(...arguments);A(this,ks);A(this,fi);A(this,x1,0);A(this,S1);A(this,kr);A(this,Ol);A(this,Fl);A(this,ab);A(this,lb);A(this,cb)}build(e,n,i,r,o,a,c){y(this,Ol,n),y(this,Fl,i),y(this,ab,r),y(this,lb,o),y(this,cb,a),y(this,S1,c??0),y(this,kr,e),S(this,ks,M9).call(this)}setLastElement(e){return l(this,kr).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,kr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,kr)){if(e.push(`M${st.svgRound(n[4])} ${st.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12){e.push(`L${st.svgRound(n[10])} ${st.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[o,a,c,u,h,d]=n.subarray(i,i+6).map(st.svgRound);e.push(`C${o} ${a} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,n,i,r],o){const a=[],c=[],[u,h,d,f]=S(this,ks,R9).call(this);let p,m,g,w,v,b,x,E,T;switch(l(this,lb)){case 0:T=st._rescale,p=e,m=n+r,g=i,w=-r,v=e+u*i,b=n+(1-h-f)*r,x=e+(u+d)*i,E=n+(1-h)*r;break;case 90:T=st._rescaleAndSwap,p=e,m=n,g=i,w=r,v=e+h*i,b=n+u*r,x=e+(h+f)*i,E=n+(u+d)*r;break;case 180:T=st._rescale,p=e+i,m=n,g=-i,w=r,v=e+(1-u-d)*i,b=n+h*r,x=e+(1-u)*i,E=n+(h+f)*r;break;case 270:T=st._rescaleAndSwap,p=e+i,m=n+r,g=-i,w=-r,v=e+(1-h-f)*i,b=n+(1-u-d)*r,x=e+(1-h)*i,E=n+(1-u)*r;break}for(const{line:P,points:k}of l(this,kr))a.push(T(P,p,m,g,w,o?new Array(P.length):null)),c.push(T(k,p,m,g,w,o?new Array(k.length):null));return{lines:a,points:c,rect:[v,b,x,E]}}static deserialize(e,n,i,r,o,{paths:{lines:a,points:c},rotation:u,thickness:h}){const d=[];let f,p,m,g,w;switch(u){case 0:w=st._rescale,f=-e/i,p=n/r+1,m=1/i,g=-1/r;break;case 90:w=st._rescaleAndSwap,f=-n/r,p=-e/i,m=1/r,g=1/i;break;case 180:w=st._rescale,f=e/i+1,p=-n/r,m=-1/i,g=1/r;break;case 270:w=st._rescaleAndSwap,f=n/r+1,p=e/i+1,m=-1/r,g=-1/i;break}if(!a){a=[];for(const b of c){const x=b.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(x-2));a.push(E);let[T,P,k,R]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,P],0);for(let M=4;M<x;M+=2){const D=b[M],L=b[M+1];E.set(st.createBezierPoints(T,P,k,R,D,L),(M-2)*3),[T,P,k,R]=[k,R,D,L]}}}for(let b=0,x=a.length;b<x;b++)d.push({line:w(a[b].map(E=>E??NaN),f,p,m,g),points:w(c[b].map(E=>E??NaN),f,p,m,g)});const v=new k$;return v.build(d,i,r,1,u,h,o),v}get box(){return l(this,fi)}updateProperty(e,n){return e==="stroke-width"?S(this,ks,D9).call(this,n):null}updateParentDimensions([e,n],i){const[r,o]=S(this,ks,pc).call(this);y(this,Ol,e),y(this,Fl,n),y(this,ab,i);const[a,c]=S(this,ks,pc).call(this),u=a-r,h=c-o,d=l(this,fi);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return y(this,x1,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,fi).map(st.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,fi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(e)} ${st.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,fi);let i=0,r=0,o=0,a=0,c=0,u=0;switch(l(this,x1)){case 90:r=n/e,o=-e/n,c=e;break;case 180:i=-1,a=-1,c=e,u=n;break;case 270:r=-n/e,o=e/n,u=n;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${st.svgRound(c)} ${st.svgRound(u)})`}getPathResizingSVGProperties([e,n,i,r]){const[o,a]=S(this,ks,pc).call(this),[c,u,h,d]=l(this,fi);if(Math.abs(h-o)<=st.PRECISION||Math.abs(d-a)<=st.PRECISION){const w=e+i/2-(c+h/2),v=n+r/2-(u+d/2);return{path:{"transform-origin":`${st.svgRound(e)} ${st.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const f=(i-2*o)/(h-2*o),p=(r-2*a)/(d-2*a),m=h/i,g=d/r;return{path:{"transform-origin":`${st.svgRound(c)} ${st.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${g}) translate(${st.svgRound(o)} ${st.svgRound(a)}) scale(${f} ${p}) translate(${st.svgRound(-o)} ${st.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[o,a]=S(this,ks,pc).call(this),c=l(this,fi),[u,h,d,f]=c;if(c[0]=e,c[1]=n,c[2]=i,c[3]=r,Math.abs(d-o)<=st.PRECISION||Math.abs(f-a)<=st.PRECISION){const v=e+i/2-(u+d/2),b=n+r/2-(h+f/2);for(const{line:x,points:E}of l(this,kr))st._translate(x,v,b,x),st._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(e)} ${st.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),m=(r-2*a)/(f-2*a),g=-p*(u+o)+e+o,w=-m*(h+a)+n+a;if(p!==1||m!==1||g!==0||w!==0)for(const{line:v,points:b}of l(this,kr))st._rescale(v,g,w,p,m,v),st._rescale(b,g,w,p,m,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${st.svgRound(e)} ${st.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,o]=i,a=l(this,fi),c=e-a[0],u=n-a[1];if(l(this,Ol)===r&&l(this,Fl)===o)for(const{line:h,points:d}of l(this,kr))st._translate(h,c,u,h),st._translate(d,c,u,d);else{const h=l(this,Ol)/r,d=l(this,Fl)/o;y(this,Ol,r),y(this,Fl,o);for(const{line:f,points:p}of l(this,kr))st._rescale(f,c,u,h,d,f),st._rescale(p,c,u,h,d,p);a[2]*=h,a[3]*=d}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(e)} ${st.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,fi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${st.svgRound(e[0])} ${st.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};fi=new WeakMap,x1=new WeakMap,S1=new WeakMap,kr=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,ab=new WeakMap,lb=new WeakMap,cb=new WeakMap,ks=new WeakSet,pc=function(e=l(this,cb)){const n=l(this,S1)+e/2*l(this,ab);return l(this,lb)%180===0?[n/l(this,Ol),n/l(this,Fl)]:[n/l(this,Fl),n/l(this,Ol)]},R9=function(){const[e,n,i,r]=l(this,fi),[o,a]=S(this,ks,pc).call(this,0);return[e+o,n+a,i-2*o,r-2*a]},M9=function(){const e=y(this,fi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,kr)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);e[0]=Math.min(e[0],h),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],h),e[3]=Math.max(e[3],d)}continue}let o=r[4],a=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,m,g]=r.subarray(c,c+6);ht.bezierBoundingBox(o,a,h,d,f,p,m,g,e),o=m,a=g}}const[n,i]=S(this,ks,pc).call(this);e[0]=Math.min(1,Math.max(0,e[0]-n)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+n)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},D9=function(e){const[n,i]=S(this,ks,pc).call(this);y(this,cb,e);const[r,o]=S(this,ks,pc).call(this),[a,c]=[r-n,o-i],u=l(this,fi);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};let Ik=k$;var ub;const R$=class R$ extends Wbt{constructor(e){super();A(this,ub);y(this,ub,e),super.updateProperties({fill:"none",stroke:Ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=l(this,ub).realScale),super.updateSVGProperty(e,n)}clone(){const e=new R$(l(this,ub));return e.updateAll(this),e}};ub=new WeakMap;let mF=R$;var pR,I9;const uv=class uv extends dF{constructor(e){super({...e,name:"inkEditor"});A(this,pR);this._willKeepAspectRatio=!0}static initialize(e,n){Ze.initialize(e,n),this._defaultDrawingOptions=new mF(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ft(this,"typesMap",new Map([[Ht.INK_THICKNESS,"stroke-width"],[Ht.INK_COLOR,"stroke"],[Ht.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,o){return new Gbt(e,n,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,o,a){return Ik.deserialize(e,n,i,r,o,a)}static async deserialize(e,n,i){let r=null;if(e instanceof p$){const{data:{inkLists:a,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:g}}}=e;r=e={annotationType:Pt.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:g-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:m}}const o=await super.deserialize(e,n,i);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=uv.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":c}}=this,u={annotationType:Pt.INK,color:Ze._colorManager.convert(o),opacity:a,thickness:c,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!S(this,pR,I9).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n}),null}};pR=new WeakSet,I9=function(e){const{color:n,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==n[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},B(uv,"_type","ink"),B(uv,"_editorType",Pt.INK),B(uv,"_defaultDrawingOptions",null);let yF=uv;var qe,Ss,Xd,Su,Yd,hb,jl,$l,Rr,db,Yt,ix,rx,SP,wF,_P,bF,EP,L9;const Tx=class Tx extends Ze{constructor(e){super({...e,name:"stampEditor"});A(this,Yt);A(this,qe,null);A(this,Ss,null);A(this,Xd,null);A(this,Su,null);A(this,Yd,null);A(this,hb,"");A(this,jl,null);A(this,$l,null);A(this,Rr,!1);A(this,db,!1);y(this,Su,e.bitmapUrl),y(this,Yd,e.bitmapFile)}static initialize(e,n){Ze.initialize(e,n)}static get supportedTypes(){return Ft(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ft(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(Pt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;l(this,Ss)&&(y(this,qe,null),this._uiManager.imageManager.deleteId(l(this,Ss)),(e=l(this,jl))==null||e.remove(),y(this,jl,null),l(this,$l)&&(clearTimeout(l(this,$l)),y(this,$l,null))),super.remove()}rebuild(){if(!this.parent){l(this,Ss)&&S(this,Yt,SP).call(this);return}super.rebuild(),this.div!==null&&(l(this,Ss)&&l(this,jl)===null&&S(this,Yt,SP).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Xd)||l(this,qe)||l(this,Su)||l(this,Yd)||l(this,Ss))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,qe)?S(this,Yt,wF).call(this):S(this,Yt,SP).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,$l)!==null&&clearTimeout(l(this,$l)),y(this,$l,setTimeout(()=>{y(this,$l,null),S(this,Yt,bF).call(this)},200))}copyCanvas(e,n,i=!1){var p;e||(e=224);const{width:r,height:o}=l(this,qe),a=new mO;let c=l(this,qe),u=r,h=o,d=null;if(n){if(r>n||o>n){const R=Math.min(n/r,n/o);u=Math.floor(r*R),h=Math.floor(o*R)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*a.sx),g=d.height=Math.ceil(h*a.sy);l(this,Rr)||(c=S(this,Yt,_P).call(this,m,g));const w=d.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",b="#42414d");const x=15,E=x*a.sx,T=x*a.sy,P=new OffscreenCanvas(E*2,T*2),k=P.getContext("2d");k.fillStyle=v,k.fillRect(0,0,E*2,T*2),k.fillStyle=b,k.fillRect(0,0,E,T),k.fillRect(E,T,E,T),w.fillStyle=w.createPattern(P,"repeat"),w.fillRect(0,0,m,g),w.drawImage(c,0,0,c.width,c.height,0,0,m,g)}let f=null;if(i){let m,g;if(a.symmetric&&c.width<e&&c.height<e)m=c.width,g=c.height;else if(c=l(this,qe),r>e||o>e){const b=Math.min(e/r,e/o);m=Math.floor(r*b),g=Math.floor(o*b),l(this,Rr)||(c=S(this,Yt,_P).call(this,m,g))}const v=new OffscreenCanvas(m,g).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,m,g),f={width:m,height:g,data:v.getImageData(0,0,m,g).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return l(this,jl)}static async deserialize(e,n,i){var g;let r=null;if(e instanceof e9){const{data:{rect:w,rotation:v,id:b,structParent:x,popupRef:E},container:T,parent:{page:{pageNumber:P}}}=e,k=T.querySelector("canvas"),R=i.imageManager.getFromCanvas(T.id,k);k.remove();const M=((g=await n._structTree.getAriaAttributes(`${o$}${b}`))==null?void 0:g.get("aria-label"))||"";r=e={annotationType:Pt.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:P-1,rect:w.slice(0),rotation:v,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:x,popupRef:E}}const o=await super.deserialize(e,n,i),{rect:a,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=e;h&&i.imageManager.isValidId(h)?(y(o,Ss,h),c&&y(o,qe,c)):y(o,Su,u),y(o,Rr,d);const[p,m]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/m,o.annotationElementId=e.id||null,f&&(o.altTextData=f),o._initialData=r,y(o,db,!!r),o}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Pt.STAMP,bitmapId:l(this,Ss),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Rr),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=S(this,Yt,EP).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=S(this,Yt,L9).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const a=l(this,Rr)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,Ss)))n.stamps.set(l(this,Ss),{area:a,serialized:i}),i.bitmap=S(this,Yt,EP).call(this,!1);else if(l(this,Rr)){const c=n.stamps.get(l(this,Ss));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,Yt,EP).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};qe=new WeakMap,Ss=new WeakMap,Xd=new WeakMap,Su=new WeakMap,Yd=new WeakMap,hb=new WeakMap,jl=new WeakMap,$l=new WeakMap,Rr=new WeakMap,db=new WeakMap,Yt=new WeakSet,ix=function(e,n=!1){if(!e){this.remove();return}y(this,qe,e.bitmap),n||(y(this,Ss,e.id),y(this,Rr,e.isSvg)),e.file&&y(this,hb,e.file.name),S(this,Yt,wF).call(this)},rx=function(){if(y(this,Xd,null),this._uiManager.enableWaiting(!1),!!l(this,jl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,qe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,qe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},SP=function(){if(l(this,Ss)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Ss)).then(i=>S(this,Yt,ix).call(this,i,!0)).finally(()=>S(this,Yt,rx).call(this));return}if(l(this,Su)){const i=l(this,Su);y(this,Su,null),this._uiManager.enableWaiting(!0),y(this,Xd,this._uiManager.imageManager.getFromUrl(i).then(r=>S(this,Yt,ix).call(this,r)).finally(()=>S(this,Yt,rx).call(this)));return}if(l(this,Yd)){const i=l(this,Yd);y(this,Yd,null),this._uiManager.enableWaiting(!0),y(this,Xd,this._uiManager.imageManager.getFromFile(i).then(r=>S(this,Yt,ix).call(this,r)).finally(()=>S(this,Yt,rx).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Tx.supportedTypesStr;const n=this._uiManager._signal;y(this,Xd,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,Yt,ix).call(this,r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>S(this,Yt,rx).call(this))),e.click()},wF=function(){var d;const{div:e}=this;let{width:n,height:i}=l(this,qe);const[r,o]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*o;else if(n>a*r||i>a*o){const f=Math.min(a*r/n,a*o/i);n*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(n*c/r,i*u/o),this._uiManager.enableWaiting(!1);const h=y(this,jl,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),S(this,Yt,bF).call(this),l(this,db)||(this.parent.addUndoableEditor(this),y(this,db,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,hb)&&h.setAttribute("aria-label",l(this,hb))},_P=function(e,n){const{width:i,height:r}=l(this,qe);let o=i,a=r,c=l(this,qe);for(;o>2*e||a>2*n;){const u=o,h=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,a),c=d.transferToImageBitmap()}return c},bF=function(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,o=new mO,a=Math.ceil(i*e*o.sx),c=Math.ceil(r*n*o.sy),u=l(this,jl);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const h=l(this,Rr)?l(this,qe):S(this,Yt,_P).call(this,a,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,c)},EP=function(e){if(e){if(l(this,Rr)){const r=this._uiManager.imageManager.getSvgUrl(l(this,Ss));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,qe),n.getContext("2d").drawImage(l(this,qe),0,0),n.toDataURL()}if(l(this,Rr)){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Sf.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Sf.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,qe),0,0,l(this,qe).width,l(this,qe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,qe))},L9=function(e){var a;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},B(Tx,"_type","stamp"),B(Tx,"_editorType",Pt.STAMP);let vF=Tx;var Mm,fb,Bl,Qd,_u,xo,Jd,pb,Dm,Aa,Eu,Ys,Cu,lt,Zd,Ve,N9,Ya,xF,SF,CP;const Go=class Go{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){A(this,Ve);A(this,Mm);A(this,fb,!1);A(this,Bl,null);A(this,Qd,null);A(this,_u,null);A(this,xo,new Map);A(this,Jd,!1);A(this,pb,!1);A(this,Dm,!1);A(this,Aa,null);A(this,Eu,null);A(this,Ys,null);A(this,Cu,null);A(this,lt);const d=[...l(Go,Zd).values()];if(!Go._initialized){Go._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),y(this,lt,t),this.pageIndex=e,this.div=n,y(this,Mm,r),y(this,Bl,o),this.viewport=u,y(this,Ys,c),this.drawLayer=a,this._structTree=i,l(this,lt).addLayer(this)}get isEmpty(){return l(this,xo).size===0}get isInvisible(){return this.isEmpty&&l(this,lt).getMode()===Pt.NONE}updateToolbar(t){l(this,lt).updateToolbar(t)}updateMode(t=l(this,lt).getMode()){switch(S(this,Ve,CP).call(this),t){case Pt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of l(Go,Zd).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Ys))==null?void 0:e.div)}setEditingState(t){l(this,lt).setEditingState(t)}addCommands(t){l(this,lt).addCommands(t)}cleanUndoStack(t){l(this,lt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Bl))==null||e.div.classList.toggle("disabled",!t)}async enable(){y(this,Dm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of l(this,xo).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,lt).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!l(this,Bl)){y(this,Dm,!1);return}const e=l(this,Bl).getEditableAnnotations();for(const n of e){if(n.hide(),l(this,lt).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}y(this,Dm,!1)}disable(){var i;y(this,pb,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,xo).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,Bl)){const r=l(this,Bl).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,lt).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,lt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}S(this,Ve,CP).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of l(Go,Zd).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,pb,!1)}getEditableAnnotation(t){var e;return((e=l(this,Bl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,lt).getActive()!==t&&l(this,lt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Ys))!=null&&t.div&&!l(this,Cu)){y(this,Cu,new AbortController);const e=l(this,lt).combinedSignal(l(this,Cu));l(this,Ys).div.addEventListener("pointerdown",S(this,Ve,N9).bind(this),{signal:e}),l(this,Ys).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Ys))!=null&&t.div&&l(this,Cu)&&(l(this,Cu).abort(),y(this,Cu,null),l(this,Ys).div.classList.remove("highlighting"))}enableClick(){if(l(this,Qd))return;y(this,Qd,new AbortController);const t=l(this,lt).combinedSignal(l(this,Qd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Qd))==null||t.abort(),y(this,Qd,null)}attach(t){l(this,xo).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,lt).isDeletedAnnotationElement(e)&&l(this,lt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,xo).delete(t.id),(e=l(this,Mm))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,pb)&&t.annotationElementId&&l(this,lt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,lt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,lt).addDeletedAnnotationElement(t.annotationElementId),Ze.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,lt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,Dm)),l(this,lt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,_u)&&(t._focusEventsAllowed=!1,y(this,_u,setTimeout(()=>{y(this,_u,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,lt)._signal}),e.focus())},0))),t._structTreeParentId=(n=l(this,Mm))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return l(this,lt).getId()}combinedSignal(t){return l(this,lt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,Ve,Ya))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){l(this,lt).updateToolbar(t),l(this,lt).updateMode(t);const{offsetX:n,offsetY:i}=S(this,Ve,SF).call(this),r=this.getNextId(),o=S(this,Ve,xF).call(this,{parent:this,id:r,x:n,y:i,uiManager:l(this,lt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(Go,Zd).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,lt)))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),r=S(this,Ve,xF).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,lt),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(S(this,Ve,SF).call(this),!0)}setSelected(t){l(this,lt).setSelected(t)}toggleSelected(t){l(this,lt).toggleSelected(t)}unselect(t){l(this,lt).unselect(t)}pointerup(t){var n;const{isMac:e}=bi.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&l(this,Jd)&&(y(this,Jd,!1),!((n=l(this,Ve,Ya))!=null&&n.isDrawer&&l(this,Ve,Ya).supportMultipleDrawings))){if(!l(this,fb)){y(this,fb,!0);return}if(l(this,lt).getMode()===Pt.STAMP){l(this,lt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(l(this,lt).getMode()===Pt.HIGHLIGHT&&this.enableTextSelection(),l(this,Jd)){y(this,Jd,!1);return}const{isMac:e}=bi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(y(this,Jd,!0),(i=l(this,Ve,Ya))!=null&&i.isDrawer){this.startDrawingSession(t);return}const n=l(this,lt).getActive();y(this,fb,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus(),l(this,Aa)){l(this,Ve,Ya).startDrawing(this,l(this,lt),!1,t);return}l(this,lt).setCurrentDrawingSession(this),y(this,Aa,new AbortController);const e=l(this,lt).combinedSignal(l(this,Aa));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(y(this,Eu,null),this.commitOrRemove())},{signal:e}),l(this,Ve,Ya).startDrawing(this,l(this,lt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&y(this,Eu,e);return}l(this,Eu)&&setTimeout(()=>{var e;(e=l(this,Eu))==null||e.focus(),y(this,Eu,null)},0)}endDrawingSession(t=!1){return l(this,Aa)?(l(this,lt).setCurrentDrawingSession(null),l(this,Aa).abort(),y(this,Aa,null),y(this,Eu,null),l(this,Ve,Ya).endDrawing(t)):null}findNewParent(t,e,n){const i=l(this,lt).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,Aa)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Aa)&&l(this,Ve,Ya).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,lt).getActive())==null?void 0:t.parent)===this&&(l(this,lt).commitOrRemove(),l(this,lt).setActiveEditor(null)),l(this,_u)&&(clearTimeout(l(this,_u)),y(this,_u,null));for(const n of l(this,xo).values())(e=l(this,Mm))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,xo).clear(),l(this,lt).removeLayer(this)}render({viewport:t}){this.viewport=t,Km(this.div,t);for(const e of l(this,lt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,lt).commitOrRemove(),S(this,Ve,CP).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Km(this.div,{rotation:n}),e!==n)for(const i of l(this,xo).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,lt).viewParameters.realScale}};Mm=new WeakMap,fb=new WeakMap,Bl=new WeakMap,Qd=new WeakMap,_u=new WeakMap,xo=new WeakMap,Jd=new WeakMap,pb=new WeakMap,Dm=new WeakMap,Aa=new WeakMap,Eu=new WeakMap,Ys=new WeakMap,Cu=new WeakMap,lt=new WeakMap,Zd=new WeakMap,Ve=new WeakSet,N9=function(t){l(this,lt).unselectAll();const{target:e}=t;if(e===l(this,Ys).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Ys).div.contains(e)){const{isMac:n}=bi.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,lt).showAllEditors("highlight",!0,!0),l(this,Ys).div.classList.add("free"),this.toggleDrawing(),Dk.startHighlighting(this,l(this,lt).direction==="ltr",{target:l(this,Ys).div,x:t.x,y:t.y}),l(this,Ys).div.addEventListener("pointerup",()=>{l(this,Ys).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,lt)._signal}),t.preventDefault()}},Ya=function(){return l(Go,Zd).get(l(this,lt).getMode())},xF=function(t){const e=l(this,Ve,Ya);return e?new e.prototype.constructor(t):null},SF=function(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+i),u=(r+a)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},CP=function(){for(const t of l(this,xo).values())t.isEmpty()&&t.remove()},B(Go,"_initialized",!1),A(Go,Zd,new Map([nF,yF,vF,Dk].map(t=>[t._editorType,t])));let AF=Go;var xa,_1,pi,Im,gR,O9,ic,EF,F9,CF;const $s=class $s{constructor({pageIndex:t}){A(this,ic);A(this,xa,null);A(this,_1,0);A(this,pi,new Map);A(this,Im,new Map);this.pageIndex=t}setParent(t){if(!l(this,xa)){y(this,xa,t);return}if(l(this,xa)!==t){if(l(this,pi).size>0)for(const e of l(this,pi).values())e.remove(),t.append(e);y(this,xa,t)}}static get _svgFactory(){return Ft(this,"_svgFactory",new f$)}draw(t,e=!1,n=!1){const i=$t(this,_1)._++,r=S(this,ic,EF).call(this),o=$s._svgFactory.createElement("defs");r.append(o);const a=$s._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Im).set(i,a);const u=n?S(this,ic,F9).call(this,o,c):null,h=$s._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,pi).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const n=$t(this,_1)._++,i=S(this,ic,EF).call(this),r=$s._svgFactory.createElement("defs");i.append(r);const o=$s._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=$s._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=$s._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=$s._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=$s._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,pi).set(n,i),n}finalizeDraw(t,e){l(this,Im).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?l(this,pi).get(t):t;if(a){if(n&&S(this,ic,CF).call(this,a,n),i&&S(c=$s,gR,O9).call(c,a,i),r){const{classList:u}=a;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;S(this,ic,CF).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const n=l(this,pi).get(t);n&&(l(e,xa).append(n),l(this,pi).delete(t),l(e,pi).set(t,n))}remove(t){l(this,Im).delete(t),l(this,xa)!==null&&(l(this,pi).get(t).remove(),l(this,pi).delete(t))}destroy(){y(this,xa,null);for(const t of l(this,pi).values())t.remove();l(this,pi).clear(),l(this,Im).clear()}};xa=new WeakMap,_1=new WeakMap,pi=new WeakMap,Im=new WeakMap,gR=new WeakSet,O9=function(t,[e,n,i,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},ic=new WeakSet,EF=function(){const t=$s._svgFactory.create(1,1,!0);return l(this,xa).append(t),t.setAttribute("aria-hidden",!0),t},F9=function(t,e){const n=$s._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=$s._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},CF=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},A($s,gR);let _F=$s;globalThis.pdfjsTestingUtils={HighlightOutliner:iF};At.AbortException;At.AnnotationEditorLayer;At.AnnotationEditorParamsType;At.AnnotationEditorType;At.AnnotationEditorUIManager;At.AnnotationLayer;At.AnnotationMode;At.ColorPicker;At.DOMSVGFactory;At.DrawLayer;At.FeatureTest;At.GlobalWorkerOptions;At.ImageKind;At.InvalidPDFException;At.MissingPDFException;At.OPS;At.OutputScale;At.PDFDataRangeTransport;At.PDFDateString;At.PDFWorker;At.PasswordResponses;At.PermissionFlag;At.PixelsPerInch;At.RenderingCancelledException;At.TextLayer;At.TouchManager;At.UnexpectedResponseException;At.Util;At.VerbosityLevel;At.XfaLayer;At.build;At.createValidAbsoluteUrl;At.fetchData;var qbt=At.getDocument;At.getFilenameFromUrl;At.getPdfFilenameFromUrl;At.getXfaPageViewport;At.isDataScheme;At.isPdfFile;At.noContextMenu;At.normalizeUnicode;At.setLayerDimensions;At.shadow;At.stopEvent;At.version;ql.workerSrc="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js";const Kbt=({documentId:s,title:t,pdfUrl:e,textContent:n})=>{const i=C.useRef(null),r=ayt(),{profile:o}=Vb(),[a,c]=C.useState(1),[u,h]=C.useState(!1),[d,f]=C.useState(null),[p,m]=C.useState(!1),[g,w]=C.useState(""),[v,b]=C.useState(!1);C.useEffect(()=>{(()=>{h(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))})()},[]),C.useEffect(()=>{const R=ryt(),M=I=>{if((I.ctrlKey||I.metaKey)&&(I.key==="p"||I.key==="P"||I.key==="s"||I.key==="S"||I.key==="c"||I.key==="C"||I.key==="a"||I.key==="A"||I.key==="u"||I.key==="U")||I.key==="F12")return I.preventDefault(),I.stopPropagation(),!1},D=I=>(I.preventDefault(),!1),L=I=>(I.preventDefault(),!1);document.addEventListener("keydown",M,!0),document.addEventListener("contextmenu",D,!0),document.addEventListener("dragstart",L,!0);const $=()=>{var H;const I=(H=i.current)==null?void 0:H.querySelector("iframe");I!=null&&I.contentDocument&&(I.contentDocument.addEventListener("keydown",M,!0),I.contentDocument.addEventListener("contextmenu",D,!0))},U=new MutationObserver(()=>{var H;const I=(H=i.current)==null?void 0:H.querySelector("iframe");I&&(I.addEventListener("load",$),U.disconnect())});return U.observe(i.current,{childList:!0,subtree:!0}),()=>{R(),document.removeEventListener("keydown",M,!0),document.removeEventListener("contextmenu",D,!0),document.removeEventListener("dragstart",L,!0),U.disconnect()}},[]);const x=()=>c(R=>Math.min(R+.25,2)),E=()=>c(R=>Math.max(R-.25,.5)),T=()=>{if(!(!("speechSynthesis"in window)||!g||g.includes("not available")))if(v)window.speechSynthesis.cancel(),b(!1);else{const R=new SpeechSynthesisUtterance(g);R.rate=1,R.pitch=1,R.volume=1,R.onend=()=>{b(!1)},R.onerror=()=>{b(!1)},window.speechSynthesis.speak(R),b(!0)}},P=R=>{if(!(R.target instanceof HTMLInputElement||R.target instanceof HTMLTextAreaElement))switch(R.key){case"+":case"=":R.preventDefault(),a<2&&x();break;case"-":R.preventDefault(),a>.5&&E();break;case" ":case"Enter":R.preventDefault(),"speechSynthesis"in window&&g&&!g.includes("not available")&&T();break;case"Escape":v&&(R.preventDefault(),T());break}},k=async R=>{try{const D=await qbt(R).promise;let L="";for(let $=1;$<=D.numPages;$++){const I=await(await D.getPage($)).getTextContent();L+=I.items.map(H=>H.str).join(" ")+`
`}w(L)}catch(M){console.error("Error extracting text from PDF:",M),w("Text extraction not available")}};return C.useEffect(()=>{n?w(n):e&&k(e)},[e,n]),e?_.jsxs("div",{className:"flex flex-col h-full",role:"application","aria-label":"Secure Document Viewer",children:[_.jsx("a",{href:"#document-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded",children:"Skip to document content"}),_.jsxs("header",{className:"flex items-center justify-between px-4 py-3 bg-card border-b border-border",role:"toolbar","aria-label":"Document viewer controls",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(L1,{className:"w-5 h-5 text-accent","aria-hidden":"true"}),_.jsx("h1",{className:"font-medium text-sm",id:"document-title",children:t})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(zn,{variant:"ghost",size:"icon",onClick:E,disabled:a<=.5,className:"h-8 w-8","aria-label":`Zoom out. Current zoom: ${Math.round(a*100)}%`,children:_.jsx(Iet,{className:"w-4 h-4","aria-hidden":"true"})}),_.jsxs("span",{className:"text-sm text-muted-foreground min-w-[60px] text-center","aria-live":"polite","aria-label":`Current zoom level: ${Math.round(a*100)}%`,children:[Math.round(a*100),"%"]}),_.jsx(zn,{variant:"ghost",size:"icon",onClick:x,disabled:a>=2,className:"h-8 w-8","aria-label":`Zoom in. Current zoom: ${Math.round(a*100)}%`,children:_.jsx(Det,{className:"w-4 h-4","aria-hidden":"true"})}),"speechSynthesis"in window&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"w-px h-6 bg-border mx-2"}),_.jsx(zn,{variant:"ghost",size:"icon",onClick:T,disabled:!g||g.includes("not available"),className:`h-8 w-8 ${v?"text-accent":""}`,title:v?"Stop voice reading":"Start voice reading",children:v?_.jsx(Met,{className:"w-4 h-4"}):_.jsx(Ret,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsx("span",{className:"text-sm text-muted-foreground",children:"PDF Document"})})]}),_.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:v?"Voice reading in progress":g&&!g.includes("not available")?"Voice reading available":"Voice reading not available"}),_.jsx("main",{id:"document-content",ref:i,className:`secure-viewer flex-1 relative overflow-auto bg-muted/30 no-select ${r?"":"blur-on-unfocus is-blurred"}`,role:"main","aria-label":"Document content area. Use + and - keys to zoom, Space to play/pause voice reading, Enter to start voice reading, Escape to stop.",tabIndex:0,onKeyDown:P,children:u?_.jsxs("div",{ref:i,className:"flex-1 relative overflow-auto bg-muted/30",children:[_.jsx(NH,{userEmail:(o==null?void 0:o.email)||"anonymous",userName:(o==null?void 0:o.full_name)||void 0,containerRef:i}),p?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8 text-center",children:[_.jsx(Hl,{className:"w-16 h-16 text-muted-foreground mb-4"}),_.jsx("h3",{className:"font-display text-lg font-semibold mb-2",children:"Mobile Viewing"}),_.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:"Unable to load PDF directly. Please open the document in your browser."}),_.jsx(zn,{asChild:!0,children:_.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"gap-2",children:[_.jsx(Hl,{className:"w-4 h-4"}),"Open Document"]})})]}):_.jsx(Fwt,{file:e,onLoadSuccess:({numPages:R})=>f(R),onLoadError:()=>m(!0),className:"flex flex-col items-center p-4",loading:"",children:d&&Array.from(new Array(d),(R,M)=>_.jsx(qwt,{pageNumber:M+1,scale:a,className:"mb-4 shadow-lg"},`page_${M+1}`))})]}):_.jsxs(_.Fragment,{children:[!r&&_.jsx(Ki.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-40 flex items-center justify-center bg-background/90 backdrop-blur-sm",children:_.jsxs("div",{className:"text-center",children:[_.jsx(m5,{className:"w-12 h-12 text-destructive mx-auto mb-3"}),_.jsx("p",{className:"text-lg font-medium",children:"Document Hidden"}),_.jsx("p",{className:"text-sm text-muted-foreground",children:"Return to this tab to continue viewing"})]})}),_.jsx(NH,{userEmail:(o==null?void 0:o.email)||"anonymous",userName:(o==null?void 0:o.full_name)||void 0,containerRef:i}),_.jsx("div",{className:"flex justify-center p-4 min-h-full relative",children:_.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"shadow-large rounded-lg overflow-hidden w-full max-w-6xl relative",children:p?_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8 text-center",children:[_.jsx(Hl,{className:"w-16 h-16 text-muted-foreground mb-4"}),_.jsx("h3",{className:"font-display text-lg font-semibold mb-2",children:"Document Loading Error"}),_.jsx("p",{className:"text-muted-foreground mb-4 max-w-md",children:"Unable to load the PDF document. This may be due to network issues or access restrictions."}),_.jsx(zn,{asChild:!0,children:_.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"gap-2",children:[_.jsx(Hl,{className:"w-4 h-4"}),"Try Opening in Browser"]})})]}):_.jsxs(_.Fragment,{children:[_.jsx("iframe",{src:e,className:"w-full h-[100000px] border-0 select-none pointer-events-none",title:t,onContextMenu:R=>R.preventDefault(),onError:()=>m(!0),style:{transform:`scale(${a})`,transformOrigin:"top center"}}),_.jsx("div",{className:"absolute inset-0 bg-transparent pointer-events-auto",style:{background:"transparent",zIndex:10},onClick:R=>R.preventDefault(),onContextMenu:R=>R.preventDefault(),onMouseDown:R=>{R.button!==1&&R.preventDefault()},onMouseUp:R=>R.preventDefault(),onDragStart:R=>R.preventDefault(),onDoubleClick:R=>R.preventDefault(),onTouchStart:R=>{R.touches.length>1&&R.preventDefault()},onTouchEnd:R=>{},onTouchMove:R=>{},onWheel:R=>{}}),_.jsx("div",{className:"absolute inset-0 pointer-events-auto",style:{background:"rgba(255, 255, 255, 0.01)",zIndex:5,pointerEvents:"none"}})]})})})]})})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] bg-muted/30 rounded-lg border border-border",children:[_.jsx(Hl,{className:"w-16 h-16 text-muted-foreground mb-4"}),_.jsx("p",{className:"text-muted-foreground",children:"No document content available"})]})},Xbt=()=>{const{id:s}=Lrt(),t=Bb(),{user:e,loading:n}=Vb(),[i,r]=C.useState(null),[o,a]=C.useState(!0),[c,u]=C.useState(null);return C.useState([]),C.useEffect(()=>{!n&&!e&&t("/auth")},[e,n,t]),C.useEffect(()=>{e&&(async()=>{if(!s)return;const{data:d,error:f}=await Ie.from("documents").select("id, title, description, page_count, file_path").eq("id",s).eq("is_active",!0).maybeSingle();f?u("Failed to load document"):d?(r(d),e&&await Ie.from("document_views").insert({document_id:s,user_id:e.id})):u("Document not found"),a(!1)})()},[s,e]),n||o?_.jsxs("div",{className:"min-h-screen bg-background",children:[_.jsx(Sx,{}),_.jsxs("main",{className:"container py-8",children:[_.jsx(_x,{className:"h-8 w-48 mb-4"}),_.jsx(_x,{className:"h-[600px] w-full rounded-lg"})]})]}):c||!i?_.jsxs("div",{className:"min-h-screen bg-background",children:[_.jsx(Sx,{}),_.jsx("main",{className:"container py-8",children:_.jsxs(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-16 text-center",children:[_.jsx(m5,{className:"w-16 h-16 text-destructive mb-4"}),_.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:c||"Document not found"}),_.jsx("p",{className:"text-muted-foreground mb-6",children:"The document you're looking for doesn't exist or you don't have permission to view it."}),_.jsx(zn,{asChild:!0,children:_.jsxs(TU,{to:"/",children:[_.jsx(JB,{className:"w-4 h-4 mr-2"}),"Back to Documents"]})})]})})]}):_.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[_.jsx(Sx,{}),_.jsxs("main",{className:"flex-1 container py-6 flex flex-col",children:[_.jsx(Ki.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"mb-4",children:_.jsx(zn,{variant:"ghost",size:"sm",asChild:!0,className:"gap-2",children:_.jsxs(TU,{to:"/",children:[_.jsx(JB,{className:"w-4 h-4"}),"Back to Documents"]})})}),_.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex-1 bg-card rounded-lg border border-border overflow-hidden shadow-medium",children:i.file_path?_.jsx(Kbt,{documentId:i.id,title:i.title,pdfUrl:Ie.storage.from("documents").getPublicUrl(i.file_path).data.publicUrl,textContent:i.text_content||void 0}):_.jsxs("div",{className:"flex items-center justify-center min-h-[400px] bg-muted/30 rounded-lg border border-border",children:[_.jsx(QP,{className:"w-16 h-16 text-muted-foreground mb-4"}),_.jsx("p",{className:"text-muted-foreground",children:"Document file not available"})]})})]})]})},g$=C.forwardRef(({className:s,...t},e)=>_.jsx("textarea",{className:dt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:e,...t}));g$.displayName="Textarea";const Ybt=({onUploadSuccess:s})=>{const[t,e]=C.useState(""),[n,i]=C.useState(""),[r,o]=C.useState(null),[a,c]=C.useState(!1),u=d=>{var p;const f=(p=d.target.files)==null?void 0:p[0];if(f){if(f.type!=="application/pdf"){Hn.error("Only PDF files are allowed");return}o(f)}},h=async d=>{if(d.preventDefault(),!r||!t.trim()){Hn.error("Please provide a title and select a file");return}c(!0);try{const f=r.name.split(".").pop(),m=`documents/${`${Date.now()}.${f}`}`,{error:g}=await Ie.storage.from("documents").upload(m,r);if(g)throw g;const w=r.size,v=1,{error:b}=await Ie.from("documents").insert({title:t.trim(),description:n.trim()||null,file_path:m,file_size:w,page_count:v});if(b)throw await Ie.storage.from("documents").remove([m]),b;Hn.success("Document uploaded successfully"),e(""),i(""),o(null),s()}catch(f){console.error("Upload error:",f),Hn.error("Failed to upload document")}finally{c(!1)}};return _.jsxs(Ma,{children:[_.jsx(Lu,{children:_.jsxs(Nu,{className:"flex items-center gap-2",children:[_.jsx(Pet,{className:"h-5 w-5"}),"Upload New Document"]})}),_.jsx(Da,{children:_.jsxs("form",{onSubmit:h,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx(Ca,{htmlFor:"title",children:"Title *"}),_.jsx(Wl,{id:"title",value:t,onChange:d=>e(d.target.value),placeholder:"Enter document title",required:!0})]}),_.jsxs("div",{children:[_.jsx(Ca,{htmlFor:"description",children:"Description"}),_.jsx(g$,{id:"description",value:n,onChange:d=>i(d.target.value),placeholder:"Enter document description (optional)",rows:3})]}),_.jsxs("div",{children:[_.jsx(Ca,{htmlFor:"file",children:"PDF File *"}),_.jsx(Wl,{id:"file",type:"file",accept:".pdf",onChange:u,required:!0}),r&&_.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[_.jsx(Hl,{className:"h-4 w-4"}),r.name," (",(r.size/1024/1024).toFixed(2)," MB)"]})]}),_.jsx(zn,{type:"submit",disabled:a,className:"w-full",children:a?"Uploading...":"Upload Document"})]})})]})},j9=C.forwardRef(({className:s,...t},e)=>_.jsx("div",{className:"relative w-full overflow-auto",children:_.jsx("table",{ref:e,className:dt("w-full caption-bottom text-sm",s),...t})}));j9.displayName="Table";const $9=C.forwardRef(({className:s,...t},e)=>_.jsx("thead",{ref:e,className:dt("[&_tr]:border-b",s),...t}));$9.displayName="TableHeader";const B9=C.forwardRef(({className:s,...t},e)=>_.jsx("tbody",{ref:e,className:dt("[&_tr:last-child]:border-0",s),...t}));B9.displayName="TableBody";const Qbt=C.forwardRef(({className:s,...t},e)=>_.jsx("tfoot",{ref:e,className:dt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Qbt.displayName="TableFooter";const TF=C.forwardRef(({className:s,...t},e)=>_.jsx("tr",{ref:e,className:dt("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",s),...t}));TF.displayName="TableRow";const mh=C.forwardRef(({className:s,...t},e)=>_.jsx("th",{ref:e,className:dt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));mh.displayName="TableHead";const yh=C.forwardRef(({className:s,...t},e)=>_.jsx("td",{ref:e,className:dt("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));yh.displayName="TableCell";const Jbt=C.forwardRef(({className:s,...t},e)=>_.jsx("caption",{ref:e,className:dt("mt-4 text-sm text-muted-foreground",s),...t}));Jbt.displayName="TableCaption";var xM="Dialog",[U9,V9]=$a(xM),[Zbt,Va]=U9(xM),H9=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:i,onOpenChange:r,modal:o=!0}=s,a=C.useRef(null),c=C.useRef(null),[u,h]=D1({prop:n,defaultProp:i??!1,onChange:r,caller:xM});return _.jsx(Zbt,{scope:t,triggerRef:a,contentRef:c,contentId:Om(),titleId:Om(),descriptionId:Om(),open:u,onOpenChange:h,onOpenToggle:C.useCallback(()=>h(d=>!d),[h]),modal:o,children:e})};H9.displayName=xM;var z9="DialogTrigger",W9=C.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,i=Va(z9,e),r=nn(t,i.triggerRef);return _.jsx(Ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":v$(i.open),...n,ref:r,onClick:ct(s.onClick,i.onOpenToggle)})});W9.displayName=z9;var m$="DialogPortal",[tAt,G9]=U9(m$,{forceMount:void 0}),q9=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:i}=s,r=Va(m$,t);return _.jsx(tAt,{scope:t,forceMount:e,children:C.Children.map(n,o=>_.jsx(Ba,{present:e||r.open,children:_.jsx(IR,{asChild:!0,container:i,children:o})}))})};q9.displayName=m$;var Lk="DialogOverlay",K9=C.forwardRef((s,t)=>{const e=G9(Lk,s.__scopeDialog),{forceMount:n=e.forceMount,...i}=s,r=Va(Lk,s.__scopeDialog);return r.modal?_.jsx(Ba,{present:n||r.open,children:_.jsx(nAt,{...i,ref:t})}):null});K9.displayName=Lk;var eAt=xb("DialogOverlay.RemoveScroll"),nAt=C.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,i=Va(Lk,e);return _.jsx(Rj,{as:eAt,allowPinchZoom:!0,shards:[i.contentRef],children:_.jsx(Ut.div,{"data-state":v$(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Qm="DialogContent",X9=C.forwardRef((s,t)=>{const e=G9(Qm,s.__scopeDialog),{forceMount:n=e.forceMount,...i}=s,r=Va(Qm,s.__scopeDialog);return _.jsx(Ba,{present:n||r.open,children:r.modal?_.jsx(sAt,{...i,ref:t}):_.jsx(iAt,{...i,ref:t})})});X9.displayName=Qm;var sAt=C.forwardRef((s,t)=>{const e=Va(Qm,s.__scopeDialog),n=C.useRef(null),i=nn(t,e.contentRef,n);return C.useEffect(()=>{const r=n.current;if(r)return C8(r)},[]),_.jsx(Y9,{...s,ref:i,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ct(s.onCloseAutoFocus,r=>{var o;r.preventDefault(),(o=e.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ct(s.onPointerDownOutside,r=>{const o=r.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&r.preventDefault()}),onFocusOutside:ct(s.onFocusOutside,r=>r.preventDefault())})}),iAt=C.forwardRef((s,t)=>{const e=Va(Qm,s.__scopeDialog),n=C.useRef(!1),i=C.useRef(!1);return _.jsx(Y9,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,a;(o=s.onCloseAutoFocus)==null||o.call(s,r),r.defaultPrevented||(n.current||(a=e.triggerRef.current)==null||a.focus(),r.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:r=>{var c,u;(c=s.onInteractOutside)==null||c.call(s,r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;((u=e.triggerRef.current)==null?void 0:u.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),Y9=C.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:r,...o}=s,a=Va(Qm,e),c=C.useRef(null),u=nn(t,c);return m8(),_.jsxs(_.Fragment,{children:[_.jsx(kj,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:r,children:_.jsx(M1,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":v$(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),_.jsxs(_.Fragment,{children:[_.jsx(oAt,{titleId:a.titleId}),_.jsx(lAt,{contentRef:c,descriptionId:a.descriptionId})]})]})}),y$="DialogTitle",Q9=C.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,i=Va(y$,e);return _.jsx(Ut.h2,{id:i.titleId,...n,ref:t})});Q9.displayName=y$;var J9="DialogDescription",Z9=C.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,i=Va(J9,e);return _.jsx(Ut.p,{id:i.descriptionId,...n,ref:t})});Z9.displayName=J9;var tQ="DialogClose",eQ=C.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,i=Va(tQ,e);return _.jsx(Ut.button,{type:"button",...n,ref:t,onClick:ct(s.onClick,()=>i.onOpenChange(!1))})});eQ.displayName=tQ;function v$(s){return s?"open":"closed"}var nQ="DialogTitleWarning",[rAt,sQ]=Att(nQ,{contentName:Qm,titleName:y$,docsSlug:"dialog"}),oAt=({titleId:s})=>{const t=sQ(nQ),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},aAt="DialogDescriptionWarning",lAt=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sQ(aAt).contentName}}.`;return C.useEffect(()=>{var r;const i=(r=s.current)==null?void 0:r.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},iQ=H9,cAt=W9,rQ=q9,w$=K9,b$=X9,A$=Q9,x$=Z9,S$=eQ,oQ="AlertDialog",[uAt,BSt]=$a(oQ,[V9]),th=V9(),aQ=s=>{const{__scopeAlertDialog:t,...e}=s,n=th(t);return _.jsx(iQ,{...n,...e,modal:!0})};aQ.displayName=oQ;var hAt="AlertDialogTrigger",lQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,i=th(e);return _.jsx(cAt,{...i,...n,ref:t})});lQ.displayName=hAt;var dAt="AlertDialogPortal",cQ=s=>{const{__scopeAlertDialog:t,...e}=s,n=th(t);return _.jsx(rQ,{...n,...e})};cQ.displayName=dAt;var fAt="AlertDialogOverlay",uQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,i=th(e);return _.jsx(w$,{...i,...n,ref:t})});uQ.displayName=fAt;var Ev="AlertDialogContent",[pAt,gAt]=uAt(Ev),mAt=HW("AlertDialogContent"),hQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,children:n,...i}=s,r=th(e),o=C.useRef(null),a=nn(t,o),c=C.useRef(null);return _.jsx(rAt,{contentName:Ev,titleName:dQ,docsSlug:"alert-dialog",children:_.jsx(pAt,{scope:e,cancelRef:c,children:_.jsxs(b$,{role:"alertdialog",...r,...i,ref:a,onOpenAutoFocus:ct(i.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[_.jsx(mAt,{children:n}),_.jsx(vAt,{contentRef:o})]})})})});hQ.displayName=Ev;var dQ="AlertDialogTitle",fQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,i=th(e);return _.jsx(A$,{...i,...n,ref:t})});fQ.displayName=dQ;var pQ="AlertDialogDescription",gQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,i=th(e);return _.jsx(x$,{...i,...n,ref:t})});gQ.displayName=pQ;var yAt="AlertDialogAction",mQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,i=th(e);return _.jsx(S$,{...i,...n,ref:t})});mQ.displayName=yAt;var yQ="AlertDialogCancel",vQ=C.forwardRef((s,t)=>{const{__scopeAlertDialog:e,...n}=s,{cancelRef:i}=gAt(yQ,e),r=th(e),o=nn(t,i);return _.jsx(S$,{...r,...n,ref:o})});vQ.displayName=yQ;var vAt=({contentRef:s})=>{const t=`\`${Ev}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ev}\` by passing a \`${pQ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ev}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return C.useEffect(()=>{var n;document.getElementById((n=s.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},wAt=aQ,bAt=lQ,AAt=cQ,wQ=uQ,bQ=hQ,AQ=mQ,xQ=vQ,SQ=fQ,_Q=gQ;const xAt=wAt,SAt=bAt,_At=AAt,EQ=C.forwardRef(({className:s,...t},e)=>_.jsx(wQ,{className:dt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:e}));EQ.displayName=wQ.displayName;const CQ=C.forwardRef(({className:s,...t},e)=>_.jsxs(_At,{children:[_.jsx(EQ,{}),_.jsx(bQ,{ref:e,className:dt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));CQ.displayName=bQ.displayName;const TQ=({className:s,...t})=>_.jsx("div",{className:dt("flex flex-col space-y-2 text-center sm:text-left",s),...t});TQ.displayName="AlertDialogHeader";const PQ=({className:s,...t})=>_.jsx("div",{className:dt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});PQ.displayName="AlertDialogFooter";const kQ=C.forwardRef(({className:s,...t},e)=>_.jsx(SQ,{ref:e,className:dt("text-lg font-semibold",s),...t}));kQ.displayName=SQ.displayName;const RQ=C.forwardRef(({className:s,...t},e)=>_.jsx(_Q,{ref:e,className:dt("text-sm text-muted-foreground",s),...t}));RQ.displayName=_Q.displayName;const MQ=C.forwardRef(({className:s,...t},e)=>_.jsx(AQ,{ref:e,className:dt(Tj(),s),...t}));MQ.displayName=AQ.displayName;const DQ=C.forwardRef(({className:s,...t},e)=>_.jsx(xQ,{ref:e,className:dt(Tj({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));DQ.displayName=xQ.displayName;const EAt=iQ,CAt=rQ,IQ=C.forwardRef(({className:s,...t},e)=>_.jsx(w$,{ref:e,className:dt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));IQ.displayName=w$.displayName;const LQ=C.forwardRef(({className:s,children:t,...e},n)=>_.jsxs(CAt,{children:[_.jsx(IQ,{}),_.jsxs(b$,{ref:n,className:dt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...e,children:[t,_.jsxs(S$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[_.jsx(y5,{className:"h-4 w-4"}),_.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));LQ.displayName=b$.displayName;const NQ=({className:s,...t})=>_.jsx("div",{className:dt("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});NQ.displayName="DialogHeader";const OQ=C.forwardRef(({className:s,...t},e)=>_.jsx(A$,{ref:e,className:dt("text-lg font-semibold leading-none tracking-tight",s),...t}));OQ.displayName=A$.displayName;const TAt=C.forwardRef(({className:s,...t},e)=>_.jsx(x$,{ref:e,className:dt("text-sm text-muted-foreground",s),...t}));TAt.displayName=x$.displayName;const PAt=({document:s,open:t,onOpenChange:e,onSuccess:n})=>{const[i,r]=C.useState(""),[o,a]=C.useState(""),[c,u]=C.useState(!1);C.useEffect(()=>{s&&(r(s.title),a(s.description||""))},[s]);const h=async d=>{if(d.preventDefault(),!s||!i.trim()){Hn.error("Title is required");return}u(!0);try{const{error:f}=await Ie.from("documents").update({title:i.trim(),description:o.trim()||null}).eq("id",s.id);if(f)throw f;Hn.success("Document updated successfully"),n()}catch(f){console.error("Update error:",f),Hn.error("Failed to update document")}finally{u(!1)}};return _.jsx(EAt,{open:t,onOpenChange:e,children:_.jsxs(LQ,{children:[_.jsx(NQ,{children:_.jsx(OQ,{children:"Edit Document"})}),_.jsxs("form",{onSubmit:h,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx(Ca,{htmlFor:"edit-title",children:"Title *"}),_.jsx(Wl,{id:"edit-title",value:i,onChange:d=>r(d.target.value),placeholder:"Enter document title",required:!0})]}),_.jsxs("div",{children:[_.jsx(Ca,{htmlFor:"edit-description",children:"Description"}),_.jsx(g$,{id:"edit-description",value:o,onChange:d=>a(d.target.value),placeholder:"Enter document description (optional)",rows:3})]}),_.jsxs("div",{className:"flex justify-end gap-2",children:[_.jsx(zn,{type:"button",variant:"outline",onClick:()=>e(!1),children:"Cancel"}),_.jsx(zn,{type:"submit",disabled:c,children:c?"Saving...":"Save Changes"})]})]})]})})},kAt=({refreshTrigger:s,onRefresh:t})=>{const[e,n]=C.useState([]),[i,r]=C.useState(!0),[o,a]=C.useState(null),c=async()=>{try{const{data:p,error:m}=await Ie.from("documents").select("*").order("created_at",{ascending:!1});if(m)throw m;n(p||[])}catch(p){console.error("Error fetching documents:",p),Hn.error("Failed to load documents")}finally{r(!1)}};C.useEffect(()=>{c()},[s]);const u=async p=>{try{const{error:m}=await Ie.storage.from("documents").remove([p.file_path]);m&&console.error("Storage delete error:",m);const{error:g}=await Ie.from("documents").delete().eq("id",p.id);if(g)throw g;Hn.success("Document deleted successfully"),t()}catch(m){console.error("Delete error:",m),Hn.error("Failed to delete document")}},h=async p=>{try{const{error:m}=await Ie.from("documents").update({is_active:!p.is_active}).eq("id",p.id);if(m)throw m;Hn.success(`Document ${p.is_active?"deactivated":"activated"}`),t()}catch(m){console.error("Toggle error:",m),Hn.error("Failed to update document status")}},d=p=>p?`${(p/(1024*1024)).toFixed(2)} MB`:"Unknown",f=p=>new Date(p).toLocaleDateString();return i?_.jsx(Ma,{children:_.jsx(Da,{className:"p-6",children:_.jsx("div",{className:"text-center",children:"Loading documents..."})})}):_.jsxs(_.Fragment,{children:[_.jsxs(Ma,{children:[_.jsx(Lu,{children:_.jsxs(Nu,{className:"flex items-center gap-2",children:[_.jsx(Hl,{className:"h-5 w-5"}),"Documents (",e.length,")"]})}),_.jsx(Da,{children:e.length===0?_.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No documents uploaded yet."}):_.jsxs(j9,{children:[_.jsx($9,{children:_.jsxs(TF,{children:[_.jsx(mh,{children:"Title"}),_.jsx(mh,{children:"Description"}),_.jsx(mh,{children:"Size"}),_.jsx(mh,{children:"Pages"}),_.jsx(mh,{children:"Status"}),_.jsx(mh,{children:"Created"}),_.jsx(mh,{children:"Actions"})]})}),_.jsx(B9,{children:e.map(p=>_.jsxs(TF,{children:[_.jsx(yh,{className:"font-medium",children:p.title}),_.jsx(yh,{className:"max-w-xs truncate",children:p.description||"No description"}),_.jsx(yh,{children:d(p.file_size)}),_.jsx(yh,{children:p.page_count||"N/A"}),_.jsx(yh,{children:_.jsx(xx,{variant:p.is_active?"default":"secondary",children:p.is_active?"Active":"Inactive"})}),_.jsx(yh,{children:f(p.created_at)}),_.jsx(yh,{children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(zn,{variant:"outline",size:"sm",onClick:()=>h(p),children:p.is_active?"Deactivate":"Activate"}),_.jsx(zn,{variant:"outline",size:"sm",onClick:()=>a(p),children:_.jsx(Cet,{className:"h-4 w-4"})}),_.jsxs(xAt,{children:[_.jsx(SAt,{asChild:!0,children:_.jsx(zn,{variant:"outline",size:"sm",children:_.jsx(Tet,{className:"h-4 w-4"})})}),_.jsxs(CQ,{children:[_.jsxs(TQ,{children:[_.jsx(kQ,{children:"Delete Document"}),_.jsxs(RQ,{children:['Are you sure you want to delete "',p.title,'"? This action cannot be undone.']})]}),_.jsxs(PQ,{children:[_.jsx(DQ,{children:"Cancel"}),_.jsx(MQ,{onClick:()=>u(p),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},p.id))})]})})]}),o&&_.jsx(PAt,{document:o,open:!!o,onOpenChange:p=>!p&&a(null),onSuccess:()=>{a(null),t()}})]})},RAt=()=>{const[s,t]=C.useState([]),[e,n]=C.useState(!0),i=async()=>{try{const{data:a,error:c}=await Ie.from("profiles").select("*").order("created_at",{ascending:!1});if(c)throw c;t(a||[])}catch(a){console.error("Error fetching users:",a),Hn.error("Failed to load users")}finally{n(!1)}};C.useEffect(()=>{i()},[]);const r=async(a,c)=>{try{const{error:u}=await Ie.from("profiles").update({approval_status:c}).eq("user_id",a);if(u)throw u;Hn.success(`User ${c==="approved"?"approved":"rejected"} successfully`),i()}catch(u){console.error("Error updating user status:",u),Hn.error("Failed to update user status")}},o=a=>{switch(a){case"approved":return _.jsxs(xx,{variant:"default",className:"bg-green-100 text-green-800",children:[_.jsx(vet,{className:"w-3 h-3 mr-1"}),"Approved"]});case"rejected":return _.jsxs(xx,{variant:"destructive",children:[_.jsx(wet,{className:"w-3 h-3 mr-1"}),"Rejected"]});default:return _.jsxs(xx,{variant:"secondary",children:[_.jsx(p5,{className:"w-3 h-3 mr-1"}),"Pending"]})}};return e?_.jsx("div",{className:"text-center py-8",children:"Loading users..."}):_.jsxs(Ma,{children:[_.jsx(Lu,{children:_.jsx(Nu,{children:"User Management"})}),_.jsx(Da,{children:_.jsxs("div",{className:"space-y-4",children:[s.map(a=>_.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("div",{className:"font-medium",children:a.full_name||"No name"}),_.jsx("div",{className:"text-sm text-muted-foreground",children:a.email}),_.jsxs("div",{className:"text-xs text-muted-foreground",children:["Joined ",new Date(a.created_at).toLocaleDateString()]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[o(a.approval_status),a.approval_status==="pending"&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx(zn,{size:"sm",variant:"default",onClick:()=>r(a.user_id,"approved"),children:"Approve"}),_.jsx(zn,{size:"sm",variant:"destructive",onClick:()=>r(a.user_id,"rejected"),children:"Reject"})]})]})]},a.id)),s.length===0&&_.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No users found"})]})})]})},MAt=()=>{const{user:s,userRole:t,loading:e}=Vb(),n=Bb(),[i,r]=C.useState(0);C.useEffect(()=>{!e&&(!s||t!=="admin")&&n("/")},[s,t,e,n]);const o=()=>{r(a=>a+1)};return e?_.jsx("div",{className:"min-h-screen flex items-center justify-center",children:_.jsx("div",{className:"text-center",children:"Loading..."})}):!s||t!=="admin"?null:_.jsxs("div",{className:"min-h-screen bg-background",children:[_.jsx(Sx,{}),_.jsxs("main",{className:"container mx-auto px-4 py-8",children:[_.jsxs("div",{className:"mb-8",children:[_.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[_.jsx(L1,{className:"h-8 w-8"}),"Admin Dashboard"]}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage documents and system settings"})]}),_.jsxs("div",{className:"grid gap-8",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[_.jsxs(Ma,{children:[_.jsxs(Lu,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[_.jsx(Nu,{className:"text-sm font-medium",children:"Total Documents"}),_.jsx(Hl,{className:"h-4 w-4 text-muted-foreground"})]}),_.jsxs(Da,{children:[_.jsx("div",{className:"text-2xl font-bold",children:"--"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Documents in system"})]})]}),_.jsxs(Ma,{children:[_.jsxs(Lu,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[_.jsx(Nu,{className:"text-sm font-medium",children:"Active Documents"}),_.jsx(Hl,{className:"h-4 w-4 text-muted-foreground"})]}),_.jsxs(Da,{children:[_.jsx("div",{className:"text-2xl font-bold",children:"--"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Available to users"})]})]}),_.jsxs(Ma,{children:[_.jsxs(Lu,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[_.jsx(Nu,{className:"text-sm font-medium",children:"Total Users"}),_.jsx(ket,{className:"h-4 w-4 text-muted-foreground"})]}),_.jsxs(Da,{children:[_.jsx("div",{className:"text-2xl font-bold",children:"--"}),_.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]})]}),_.jsx(RAt,{}),_.jsx(Ybt,{onUploadSuccess:o}),_.jsx(kAt,{refreshTrigger:i,onRefresh:o})]})]})]})},DAt=()=>{const s=F1();return C.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),_.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),_.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),_.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},IAt=new srt,LAt=()=>_.jsx(rrt,{client:IAt,children:_.jsx(Blt,{children:_.jsxs(Iit,{children:[_.jsx(gnt,{}),_.jsx(qnt,{}),_.jsx(not,{children:_.jsxs(Xrt,{children:[_.jsx(Sy,{path:"/",element:_.jsx(Qmt,{})}),_.jsx(Sy,{path:"/auth",element:_.jsx(iyt,{})}),_.jsx(Sy,{path:"/view/:id",element:_.jsx(Xbt,{})}),_.jsx(Sy,{path:"/admin",element:_.jsx(MAt,{})}),_.jsx(Sy,{path:"*",element:_.jsx(DAt,{})})]})})]})})});UW(document.getElementById("root")).render(_.jsx(LAt,{}));
